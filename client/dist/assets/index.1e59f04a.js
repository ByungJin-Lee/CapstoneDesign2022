import{g as Eh,a as oV,c as ze}from"./lodash.f70a6700.js";function IV(e,t){for(var g=0;g<t.length;g++){const n=t[g];if(typeof n!="string"&&!Array.isArray(n)){for(const l in n)if(l!=="default"&&!(l in e)){const o=Object.getOwnPropertyDescriptor(n,l);o&&Object.defineProperty(e,l,o.get?o:{enumerable:!0,get:()=>n[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const I of o.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&n(I)}).observe(document,{childList:!0,subtree:!0});function g(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(l){if(l.ep)return;l.ep=!0;const o=g(l);fetch(l.href,o)}})();var B={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ur=Symbol.for("react.element"),rV=Symbol.for("react.portal"),CV=Symbol.for("react.fragment"),iV=Symbol.for("react.strict_mode"),aV=Symbol.for("react.profiler"),sV=Symbol.for("react.provider"),cV=Symbol.for("react.context"),dV=Symbol.for("react.forward_ref"),uV=Symbol.for("react.suspense"),AV=Symbol.for("react.memo"),mV=Symbol.for("react.lazy"),Zm=Symbol.iterator;function pV(e){return e===null||typeof e!="object"?null:(e=Zm&&e[Zm]||e["@@iterator"],typeof e=="function"?e:null)}var zh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mh=Object.assign,Th={};function II(e,t,g){this.props=e,this.context=t,this.refs=Th,this.updater=g||zh}II.prototype.isReactComponent={};II.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};II.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lh(){}Lh.prototype=II.prototype;function gA(e,t,g){this.props=e,this.context=t,this.refs=Th,this.updater=g||zh}var nA=gA.prototype=new Lh;nA.constructor=gA;Mh(nA,II.prototype);nA.isPureReactComponent=!0;var hm=Array.isArray,Uh=Object.prototype.hasOwnProperty,lA={current:null},Dh={key:!0,ref:!0,__self:!0,__source:!0};function Qh(e,t,g){var n,l={},o=null,I=null;if(t!=null)for(n in t.ref!==void 0&&(I=t.ref),t.key!==void 0&&(o=""+t.key),t)Uh.call(t,n)&&!Dh.hasOwnProperty(n)&&(l[n]=t[n]);var r=arguments.length-2;if(r===1)l.children=g;else if(1<r){for(var C=Array(r),i=0;i<r;i++)C[i]=arguments[i+2];l.children=C}if(e&&e.defaultProps)for(n in r=e.defaultProps,r)l[n]===void 0&&(l[n]=r[n]);return{$$typeof:Ur,type:e,key:o,ref:I,props:l,_owner:lA.current}}function bV(e,t){return{$$typeof:Ur,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function oA(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ur}function ZV(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(g){return t[g]})}var Gm=/\/+/g;function Qs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ZV(""+e.key):t.toString(36)}function OC(e,t,g,n,l){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var I=!1;if(e===null)I=!0;else switch(o){case"string":case"number":I=!0;break;case"object":switch(e.$$typeof){case Ur:case rV:I=!0}}if(I)return I=e,l=l(I),e=n===""?"."+Qs(I,0):n,hm(l)?(g="",e!=null&&(g=e.replace(Gm,"$&/")+"/"),OC(l,t,g,"",function(i){return i})):l!=null&&(oA(l)&&(l=bV(l,g+(!l.key||I&&I.key===l.key?"":(""+l.key).replace(Gm,"$&/")+"/")+e)),t.push(l)),1;if(I=0,n=n===""?".":n+":",hm(e))for(var r=0;r<e.length;r++){o=e[r];var C=n+Qs(o,r);I+=OC(o,t,g,C,l)}else if(C=pV(e),typeof C=="function")for(e=C.call(e),r=0;!(o=e.next()).done;)o=o.value,C=n+Qs(o,r++),I+=OC(o,t,g,C,l);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return I}function dC(e,t,g){if(e==null)return e;var n=[],l=0;return OC(e,n,"","",function(o){return t.call(g,o,l++)}),n}function hV(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(g){(e._status===0||e._status===-1)&&(e._status=1,e._result=g)},function(g){(e._status===0||e._status===-1)&&(e._status=2,e._result=g)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gg={current:null},_C={transition:null},GV={ReactCurrentDispatcher:gg,ReactCurrentBatchConfig:_C,ReactCurrentOwner:lA};Te.Children={map:dC,forEach:function(e,t,g){dC(e,function(){t.apply(this,arguments)},g)},count:function(e){var t=0;return dC(e,function(){t++}),t},toArray:function(e){return dC(e,function(t){return t})||[]},only:function(e){if(!oA(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Te.Component=II;Te.Fragment=CV;Te.Profiler=aV;Te.PureComponent=gA;Te.StrictMode=iV;Te.Suspense=uV;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GV;Te.cloneElement=function(e,t,g){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Mh({},e.props),l=e.key,o=e.ref,I=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,I=lA.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var r=e.type.defaultProps;for(C in t)Uh.call(t,C)&&!Dh.hasOwnProperty(C)&&(n[C]=t[C]===void 0&&r!==void 0?r[C]:t[C])}var C=arguments.length-2;if(C===1)n.children=g;else if(1<C){r=Array(C);for(var i=0;i<C;i++)r[i]=arguments[i+2];n.children=r}return{$$typeof:Ur,type:e.type,key:l,ref:o,props:n,_owner:I}};Te.createContext=function(e){return e={$$typeof:cV,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sV,_context:e},e.Consumer=e};Te.createElement=Qh;Te.createFactory=function(e){var t=Qh.bind(null,e);return t.type=e,t};Te.createRef=function(){return{current:null}};Te.forwardRef=function(e){return{$$typeof:dV,render:e}};Te.isValidElement=oA;Te.lazy=function(e){return{$$typeof:mV,_payload:{_status:-1,_result:e},_init:hV}};Te.memo=function(e,t){return{$$typeof:AV,type:e,compare:t===void 0?null:t}};Te.startTransition=function(e){var t=_C.transition;_C.transition={};try{e()}finally{_C.transition=t}};Te.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Te.useCallback=function(e,t){return gg.current.useCallback(e,t)};Te.useContext=function(e){return gg.current.useContext(e)};Te.useDebugValue=function(){};Te.useDeferredValue=function(e){return gg.current.useDeferredValue(e)};Te.useEffect=function(e,t){return gg.current.useEffect(e,t)};Te.useId=function(){return gg.current.useId()};Te.useImperativeHandle=function(e,t,g){return gg.current.useImperativeHandle(e,t,g)};Te.useInsertionEffect=function(e,t){return gg.current.useInsertionEffect(e,t)};Te.useLayoutEffect=function(e,t){return gg.current.useLayoutEffect(e,t)};Te.useMemo=function(e,t){return gg.current.useMemo(e,t)};Te.useReducer=function(e,t,g){return gg.current.useReducer(e,t,g)};Te.useRef=function(e){return gg.current.useRef(e)};Te.useState=function(e){return gg.current.useState(e)};Te.useSyncExternalStore=function(e,t,g){return gg.current.useSyncExternalStore(e,t,g)};Te.useTransition=function(){return gg.current.useTransition()};Te.version="18.2.0";(function(e){e.exports=Te})(B);const Me=Eh(B.exports),Eo=IV({__proto__:null,default:Me},[B.exports]);var Xd={},Dr={exports:{}},Sg={},Ph={exports:{}},jh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,D){var T=z.length;z.push(D);e:for(;0<T;){var N=T-1>>>1,V=z[N];if(0<l(V,D))z[N]=D,z[T]=V,T=N;else break e}}function g(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var D=z[0],T=z.pop();if(T!==D){z[0]=T;e:for(var N=0,V=z.length,Y=V>>>1;N<Y;){var J=2*(N+1)-1,P=z[J],k=J+1,$=z[k];if(0>l(P,T))k<V&&0>l($,P)?(z[N]=$,z[k]=T,N=k):(z[N]=P,z[J]=T,N=J);else if(k<V&&0>l($,T))z[N]=$,z[k]=T,N=k;else break e}}return D}function l(z,D){var T=z.sortIndex-D.sortIndex;return T!==0?T:z.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var I=Date,r=I.now();e.unstable_now=function(){return I.now()-r}}var C=[],i=[],a=1,c=null,s=3,m=!1,A=!1,d=!1,h=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(z){for(var D=g(i);D!==null;){if(D.callback===null)n(i);else if(D.startTime<=z)n(i),D.sortIndex=D.expirationTime,t(C,D);else break;D=g(i)}}function G(z){if(d=!1,p(z),!A)if(g(C)!==null)A=!0,j(f);else{var D=g(i);D!==null&&O(G,D.startTime-z)}}function f(z,D){A=!1,d&&(d=!1,Z(v),v=-1),m=!0;var T=s;try{for(p(D),c=g(C);c!==null&&(!(c.expirationTime>D)||z&&!R());){var N=c.callback;if(typeof N=="function"){c.callback=null,s=c.priorityLevel;var V=N(c.expirationTime<=D);D=e.unstable_now(),typeof V=="function"?c.callback=V:c===g(C)&&n(C),p(D)}else n(C);c=g(C)}if(c!==null)var Y=!0;else{var J=g(i);J!==null&&O(G,J.startTime-D),Y=!1}return Y}finally{c=null,s=T,m=!1}}var S=!1,W=null,v=-1,w=5,y=-1;function R(){return!(e.unstable_now()-y<w)}function x(){if(W!==null){var z=e.unstable_now();y=z;var D=!0;try{D=W(!0,z)}finally{D?H():(S=!1,W=null)}}else S=!1}var H;if(typeof u=="function")H=function(){u(x)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,M=F.port2;F.port1.onmessage=x,H=function(){M.postMessage(null)}}else H=function(){h(x,0)};function j(z){W=z,S||(S=!0,H())}function O(z,D){v=h(function(){z(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){A||m||(A=!0,j(f))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return s},e.unstable_getFirstCallbackNode=function(){return g(C)},e.unstable_next=function(z){switch(s){case 1:case 2:case 3:var D=3;break;default:D=s}var T=s;s=D;try{return z()}finally{s=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,D){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var T=s;s=z;try{return D()}finally{s=T}},e.unstable_scheduleCallback=function(z,D,T){var N=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?N+T:N):T=N,z){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=T+V,z={id:a++,callback:D,priorityLevel:z,startTime:T,expirationTime:V,sortIndex:-1},T>N?(z.sortIndex=T,t(i,z),g(C)===null&&z===g(i)&&(d?(Z(v),v=-1):d=!0,O(G,T-N))):(z.sortIndex=V,t(C,z),A||m||(A=!0,j(f))),z},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(z){var D=s;return function(){var T=s;s=D;try{return z.apply(this,arguments)}finally{s=T}}}})(jh);(function(e){e.exports=jh})(Ph);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh=B.exports,Bg=Ph.exports;function Ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,g=1;g<arguments.length;g++)t+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _h=new Set,Ar={};function Pl(e,t){zo(e,t),zo(e+"Capture",t)}function zo(e,t){for(Ar[e]=t,e=0;e<t.length;e++)_h.add(t[e])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kd=Object.prototype.hasOwnProperty,fV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fm={},Bm={};function BV(e){return kd.call(Bm,e)?!0:kd.call(fm,e)?!1:fV.test(e)?Bm[e]=!0:(fm[e]=!0,!1)}function yV(e,t,g,n){if(g!==null&&g.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:g!==null?!g.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function SV(e,t,g,n){if(t===null||typeof t>"u"||yV(e,t,g,n))return!0;if(n)return!1;if(g!==null)switch(g.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ng(e,t,g,n,l,o,I){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=l,this.mustUseProperty=g,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=I}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lt[e]=new ng(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lt[t]=new ng(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lt[e]=new ng(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lt[e]=new ng(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lt[e]=new ng(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lt[e]=new ng(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lt[e]=new ng(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lt[e]=new ng(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lt[e]=new ng(e,5,!1,e.toLowerCase(),null,!1,!1)});var IA=/[\-:]([a-z])/g;function rA(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(IA,rA);Lt[t]=new ng(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(IA,rA);Lt[t]=new ng(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(IA,rA);Lt[t]=new ng(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lt[e]=new ng(e,1,!1,e.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new ng("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lt[e]=new ng(e,1,!1,e.toLowerCase(),null,!0,!0)});function CA(e,t,g,n){var l=Lt.hasOwnProperty(t)?Lt[t]:null;(l!==null?l.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(SV(t,g,l,n)&&(g=null),n||l===null?BV(t)&&(g===null?e.removeAttribute(t):e.setAttribute(t,""+g)):l.mustUseProperty?e[l.propertyName]=g===null?l.type===3?!1:"":g:(t=l.attributeName,n=l.attributeNamespace,g===null?e.removeAttribute(t):(l=l.type,g=l===3||l===4&&g===!0?"":""+g,n?e.setAttributeNS(n,t,g):e.setAttribute(t,g))))}var kn=Oh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uC=Symbol.for("react.element"),po=Symbol.for("react.portal"),bo=Symbol.for("react.fragment"),iA=Symbol.for("react.strict_mode"),Jd=Symbol.for("react.profiler"),$h=Symbol.for("react.provider"),qh=Symbol.for("react.context"),aA=Symbol.for("react.forward_ref"),Yd=Symbol.for("react.suspense"),xd=Symbol.for("react.suspense_list"),sA=Symbol.for("react.memo"),Tn=Symbol.for("react.lazy"),eG=Symbol.for("react.offscreen"),ym=Symbol.iterator;function GI(e){return e===null||typeof e!="object"?null:(e=ym&&e[ym]||e["@@iterator"],typeof e=="function"?e:null)}var Gt=Object.assign,Ps;function zI(e){if(Ps===void 0)try{throw Error()}catch(g){var t=g.stack.trim().match(/\n( *(at )?)/);Ps=t&&t[1]||""}return`
`+Ps+e}var js=!1;function Os(e,t){if(!e||js)return"";js=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(i){var n=i}Reflect.construct(e,[],t)}else{try{t.call()}catch(i){n=i}e.call(t.prototype)}else{try{throw Error()}catch(i){n=i}e()}}catch(i){if(i&&n&&typeof i.stack=="string"){for(var l=i.stack.split(`
`),o=n.stack.split(`
`),I=l.length-1,r=o.length-1;1<=I&&0<=r&&l[I]!==o[r];)r--;for(;1<=I&&0<=r;I--,r--)if(l[I]!==o[r]){if(I!==1||r!==1)do if(I--,r--,0>r||l[I]!==o[r]){var C=`
`+l[I].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),C}while(1<=I&&0<=r);break}}}finally{js=!1,Error.prepareStackTrace=g}return(e=e?e.displayName||e.name:"")?zI(e):""}function WV(e){switch(e.tag){case 5:return zI(e.type);case 16:return zI("Lazy");case 13:return zI("Suspense");case 19:return zI("SuspenseList");case 0:case 2:case 15:return e=Os(e.type,!1),e;case 11:return e=Os(e.type.render,!1),e;case 1:return e=Os(e.type,!0),e;default:return""}}function Hd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bo:return"Fragment";case po:return"Portal";case Jd:return"Profiler";case iA:return"StrictMode";case Yd:return"Suspense";case xd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qh:return(e.displayName||"Context")+".Consumer";case $h:return(e._context.displayName||"Context")+".Provider";case aA:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sA:return t=e.displayName||null,t!==null?t:Hd(e.type)||"Memo";case Tn:t=e._payload,e=e._init;try{return Hd(e(t))}catch{}}return null}function VV(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hd(t);case 8:return t===iA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function al(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tG(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vV(e){var t=tG(e)?"checked":"value",g=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var l=g.get,o=g.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(I){n=""+I,o.call(this,I)}}),Object.defineProperty(e,t,{enumerable:g.enumerable}),{getValue:function(){return n},setValue:function(I){n=""+I},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function AC(e){e._valueTracker||(e._valueTracker=vV(e))}function gG(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var g=t.getValue(),n="";return e&&(n=tG(e)?e.checked?"true":"false":e.value),e=n,e!==g?(t.setValue(e),!0):!1}function hi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wd(e,t){var g=t.checked;return Gt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g!=null?g:e._wrapperState.initialChecked})}function Sm(e,t){var g=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;g=al(t.value!=null?t.value:g),e._wrapperState={initialChecked:n,initialValue:g,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nG(e,t){t=t.checked,t!=null&&CA(e,"checked",t,!1)}function Nd(e,t){nG(e,t);var g=al(t.value),n=t.type;if(g!=null)n==="number"?(g===0&&e.value===""||e.value!=g)&&(e.value=""+g):e.value!==""+g&&(e.value=""+g);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fd(e,t.type,g):t.hasOwnProperty("defaultValue")&&Fd(e,t.type,al(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wm(e,t,g){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,g||t===e.value||(e.value=t),e.defaultValue=t}g=e.name,g!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,g!==""&&(e.name=g)}function Fd(e,t,g){(t!=="number"||hi(e.ownerDocument)!==e)&&(g==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+g&&(e.defaultValue=""+g))}var MI=Array.isArray;function ko(e,t,g,n){if(e=e.options,t){t={};for(var l=0;l<g.length;l++)t["$"+g[l]]=!0;for(g=0;g<e.length;g++)l=t.hasOwnProperty("$"+e[g].value),e[g].selected!==l&&(e[g].selected=l),l&&n&&(e[g].defaultSelected=!0)}else{for(g=""+al(g),t=null,l=0;l<e.length;l++){if(e[l].value===g){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Kd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return Gt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vm(e,t){var g=t.value;if(g==null){if(g=t.children,t=t.defaultValue,g!=null){if(t!=null)throw Error(Ie(92));if(MI(g)){if(1<g.length)throw Error(Ie(93));g=g[0]}t=g}t==null&&(t=""),g=t}e._wrapperState={initialValue:al(g)}}function lG(e,t){var g=al(t.value),n=al(t.defaultValue);g!=null&&(g=""+g,g!==e.value&&(e.value=g),t.defaultValue==null&&e.defaultValue!==g&&(e.defaultValue=g)),n!=null&&(e.defaultValue=""+n)}function vm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function oG(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ed(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?oG(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mC,IG=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,g,n,l){MSApp.execUnsafeLocalFunction(function(){return e(t,g,n,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(mC=mC||document.createElement("div"),mC.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mC.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mr(e,t){if(t){var g=e.firstChild;if(g&&g===e.lastChild&&g.nodeType===3){g.nodeValue=t;return}}e.textContent=t}var jI={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RV=["Webkit","ms","Moz","O"];Object.keys(jI).forEach(function(e){RV.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jI[t]=jI[e]})});function rG(e,t,g){return t==null||typeof t=="boolean"||t===""?"":g||typeof t!="number"||t===0||jI.hasOwnProperty(e)&&jI[e]?(""+t).trim():t+"px"}function CG(e,t){e=e.style;for(var g in t)if(t.hasOwnProperty(g)){var n=g.indexOf("--")===0,l=rG(g,t[g],n);g==="float"&&(g="cssFloat"),n?e.setProperty(g,l):e[g]=l}}var XV=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zd(e,t){if(t){if(XV[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ie(62))}}function Md(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Td=null;function cA(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ld=null,Jo=null,Yo=null;function Rm(e){if(e=jr(e)){if(typeof Ld!="function")throw Error(Ie(280));var t=e.stateNode;t&&(t=ra(t),Ld(e.stateNode,e.type,t))}}function iG(e){Jo?Yo?Yo.push(e):Yo=[e]:Jo=e}function aG(){if(Jo){var e=Jo,t=Yo;if(Yo=Jo=null,Rm(e),t)for(e=0;e<t.length;e++)Rm(t[e])}}function sG(e,t){return e(t)}function cG(){}var _s=!1;function dG(e,t,g){if(_s)return e(t,g);_s=!0;try{return sG(e,t,g)}finally{_s=!1,(Jo!==null||Yo!==null)&&(cG(),aG())}}function pr(e,t){var g=e.stateNode;if(g===null)return null;var n=ra(g);if(n===null)return null;g=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(g&&typeof g!="function")throw Error(Ie(231,t,typeof g));return g}var Ud=!1;if(yn)try{var fI={};Object.defineProperty(fI,"passive",{get:function(){Ud=!0}}),window.addEventListener("test",fI,fI),window.removeEventListener("test",fI,fI)}catch{Ud=!1}function kV(e,t,g,n,l,o,I,r,C){var i=Array.prototype.slice.call(arguments,3);try{t.apply(g,i)}catch(a){this.onError(a)}}var OI=!1,Gi=null,fi=!1,Dd=null,JV={onError:function(e){OI=!0,Gi=e}};function YV(e,t,g,n,l,o,I,r,C){OI=!1,Gi=null,kV.apply(JV,arguments)}function xV(e,t,g,n,l,o,I,r,C){if(YV.apply(this,arguments),OI){if(OI){var i=Gi;OI=!1,Gi=null}else throw Error(Ie(198));fi||(fi=!0,Dd=i)}}function jl(e){var t=e,g=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(g=t.return),e=t.return;while(e)}return t.tag===3?g:null}function uG(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xm(e){if(jl(e)!==e)throw Error(Ie(188))}function HV(e){var t=e.alternate;if(!t){if(t=jl(e),t===null)throw Error(Ie(188));return t!==e?null:e}for(var g=e,n=t;;){var l=g.return;if(l===null)break;var o=l.alternate;if(o===null){if(n=l.return,n!==null){g=n;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===g)return Xm(l),e;if(o===n)return Xm(l),t;o=o.sibling}throw Error(Ie(188))}if(g.return!==n.return)g=l,n=o;else{for(var I=!1,r=l.child;r;){if(r===g){I=!0,g=l,n=o;break}if(r===n){I=!0,n=l,g=o;break}r=r.sibling}if(!I){for(r=o.child;r;){if(r===g){I=!0,g=o,n=l;break}if(r===n){I=!0,n=o,g=l;break}r=r.sibling}if(!I)throw Error(Ie(189))}}if(g.alternate!==n)throw Error(Ie(190))}if(g.tag!==3)throw Error(Ie(188));return g.stateNode.current===g?e:t}function AG(e){return e=HV(e),e!==null?mG(e):null}function mG(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mG(e);if(t!==null)return t;e=e.sibling}return null}var pG=Bg.unstable_scheduleCallback,km=Bg.unstable_cancelCallback,wV=Bg.unstable_shouldYield,NV=Bg.unstable_requestPaint,Bt=Bg.unstable_now,FV=Bg.unstable_getCurrentPriorityLevel,dA=Bg.unstable_ImmediatePriority,bG=Bg.unstable_UserBlockingPriority,Bi=Bg.unstable_NormalPriority,KV=Bg.unstable_LowPriority,ZG=Bg.unstable_IdlePriority,na=null,In=null;function EV(e){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(na,e,void 0,(e.current.flags&128)===128)}catch{}}var Pg=Math.clz32?Math.clz32:TV,zV=Math.log,MV=Math.LN2;function TV(e){return e>>>=0,e===0?32:31-(zV(e)/MV|0)|0}var pC=64,bC=4194304;function TI(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yi(e,t){var g=e.pendingLanes;if(g===0)return 0;var n=0,l=e.suspendedLanes,o=e.pingedLanes,I=g&268435455;if(I!==0){var r=I&~l;r!==0?n=TI(r):(o&=I,o!==0&&(n=TI(o)))}else I=g&~l,I!==0?n=TI(I):o!==0&&(n=TI(o));if(n===0)return 0;if(t!==0&&t!==n&&(t&l)===0&&(l=n&-n,o=t&-t,l>=o||l===16&&(o&4194240)!==0))return t;if((n&4)!==0&&(n|=g&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)g=31-Pg(t),l=1<<g,n|=e[g],t&=~l;return n}function LV(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UV(e,t){for(var g=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes;0<o;){var I=31-Pg(o),r=1<<I,C=l[I];C===-1?((r&g)===0||(r&n)!==0)&&(l[I]=LV(r,t)):C<=t&&(e.expiredLanes|=r),o&=~r}}function Qd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hG(){var e=pC;return pC<<=1,(pC&4194240)===0&&(pC=64),e}function $s(e){for(var t=[],g=0;31>g;g++)t.push(e);return t}function Qr(e,t,g){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pg(t),e[t]=g}function DV(e,t){var g=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<g;){var l=31-Pg(g),o=1<<l;t[l]=0,n[l]=-1,e[l]=-1,g&=~o}}function uA(e,t){var g=e.entangledLanes|=t;for(e=e.entanglements;g;){var n=31-Pg(g),l=1<<n;l&t|e[n]&t&&(e[n]|=t),g&=~l}}var et=0;function GG(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var fG,AA,BG,yG,SG,Pd=!1,ZC=[],el=null,tl=null,gl=null,br=new Map,Zr=new Map,Dn=[],QV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jm(e,t){switch(e){case"focusin":case"focusout":el=null;break;case"dragenter":case"dragleave":tl=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":br.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zr.delete(t.pointerId)}}function BI(e,t,g,n,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:g,eventSystemFlags:n,nativeEvent:o,targetContainers:[l]},t!==null&&(t=jr(t),t!==null&&AA(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function PV(e,t,g,n,l){switch(t){case"focusin":return el=BI(el,e,t,g,n,l),!0;case"dragenter":return tl=BI(tl,e,t,g,n,l),!0;case"mouseover":return gl=BI(gl,e,t,g,n,l),!0;case"pointerover":var o=l.pointerId;return br.set(o,BI(br.get(o)||null,e,t,g,n,l)),!0;case"gotpointercapture":return o=l.pointerId,Zr.set(o,BI(Zr.get(o)||null,e,t,g,n,l)),!0}return!1}function WG(e){var t=Rl(e.target);if(t!==null){var g=jl(t);if(g!==null){if(t=g.tag,t===13){if(t=uG(g),t!==null){e.blockedOn=t,SG(e.priority,function(){BG(g)});return}}else if(t===3&&g.stateNode.current.memoizedState.isDehydrated){e.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $C(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var g=jd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(g===null){g=e.nativeEvent;var n=new g.constructor(g.type,g);Td=n,g.target.dispatchEvent(n),Td=null}else return t=jr(g),t!==null&&AA(t),e.blockedOn=g,!1;t.shift()}return!0}function Ym(e,t,g){$C(e)&&g.delete(t)}function jV(){Pd=!1,el!==null&&$C(el)&&(el=null),tl!==null&&$C(tl)&&(tl=null),gl!==null&&$C(gl)&&(gl=null),br.forEach(Ym),Zr.forEach(Ym)}function yI(e,t){e.blockedOn===t&&(e.blockedOn=null,Pd||(Pd=!0,Bg.unstable_scheduleCallback(Bg.unstable_NormalPriority,jV)))}function hr(e){function t(l){return yI(l,e)}if(0<ZC.length){yI(ZC[0],e);for(var g=1;g<ZC.length;g++){var n=ZC[g];n.blockedOn===e&&(n.blockedOn=null)}}for(el!==null&&yI(el,e),tl!==null&&yI(tl,e),gl!==null&&yI(gl,e),br.forEach(t),Zr.forEach(t),g=0;g<Dn.length;g++)n=Dn[g],n.blockedOn===e&&(n.blockedOn=null);for(;0<Dn.length&&(g=Dn[0],g.blockedOn===null);)WG(g),g.blockedOn===null&&Dn.shift()}var xo=kn.ReactCurrentBatchConfig,Si=!0;function OV(e,t,g,n){var l=et,o=xo.transition;xo.transition=null;try{et=1,mA(e,t,g,n)}finally{et=l,xo.transition=o}}function _V(e,t,g,n){var l=et,o=xo.transition;xo.transition=null;try{et=4,mA(e,t,g,n)}finally{et=l,xo.transition=o}}function mA(e,t,g,n){if(Si){var l=jd(e,t,g,n);if(l===null)Cc(e,t,n,Wi,g),Jm(e,n);else if(PV(l,e,t,g,n))n.stopPropagation();else if(Jm(e,n),t&4&&-1<QV.indexOf(e)){for(;l!==null;){var o=jr(l);if(o!==null&&fG(o),o=jd(e,t,g,n),o===null&&Cc(e,t,n,Wi,g),o===l)break;l=o}l!==null&&n.stopPropagation()}else Cc(e,t,n,null,g)}}var Wi=null;function jd(e,t,g,n){if(Wi=null,e=cA(n),e=Rl(e),e!==null)if(t=jl(e),t===null)e=null;else if(g=t.tag,g===13){if(e=uG(t),e!==null)return e;e=null}else if(g===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wi=e,null}function VG(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FV()){case dA:return 1;case bG:return 4;case Bi:case KV:return 16;case ZG:return 536870912;default:return 16}default:return 16}}var jn=null,pA=null,qC=null;function vG(){if(qC)return qC;var e,t=pA,g=t.length,n,l="value"in jn?jn.value:jn.textContent,o=l.length;for(e=0;e<g&&t[e]===l[e];e++);var I=g-e;for(n=1;n<=I&&t[g-n]===l[o-n];n++);return qC=l.slice(e,1<n?1-n:void 0)}function ei(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hC(){return!0}function xm(){return!1}function Wg(e){function t(g,n,l,o,I){this._reactName=g,this._targetInst=l,this.type=n,this.nativeEvent=o,this.target=I,this.currentTarget=null;for(var r in e)e.hasOwnProperty(r)&&(g=e[r],this[r]=g?g(o):o[r]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hC:xm,this.isPropagationStopped=xm,this}return Gt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=hC)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=hC)},persist:function(){},isPersistent:hC}),t}var rI={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bA=Wg(rI),Pr=Gt({},rI,{view:0,detail:0}),$V=Wg(Pr),qs,ec,SI,la=Gt({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ZA,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==SI&&(SI&&e.type==="mousemove"?(qs=e.screenX-SI.screenX,ec=e.screenY-SI.screenY):ec=qs=0,SI=e),qs)},movementY:function(e){return"movementY"in e?e.movementY:ec}}),Hm=Wg(la),qV=Gt({},la,{dataTransfer:0}),ev=Wg(qV),tv=Gt({},Pr,{relatedTarget:0}),tc=Wg(tv),gv=Gt({},rI,{animationName:0,elapsedTime:0,pseudoElement:0}),nv=Wg(gv),lv=Gt({},rI,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ov=Wg(lv),Iv=Gt({},rI,{data:0}),wm=Wg(Iv),rv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function av(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iv[e])?!!t[e]:!1}function ZA(){return av}var sv=Gt({},Pr,{key:function(e){if(e.key){var t=rv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ei(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ZA,charCode:function(e){return e.type==="keypress"?ei(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ei(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cv=Wg(sv),dv=Gt({},la,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=Wg(dv),uv=Gt({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ZA}),Av=Wg(uv),mv=Gt({},rI,{propertyName:0,elapsedTime:0,pseudoElement:0}),pv=Wg(mv),bv=Gt({},la,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zv=Wg(bv),hv=[9,13,27,32],hA=yn&&"CompositionEvent"in window,_I=null;yn&&"documentMode"in document&&(_I=document.documentMode);var Gv=yn&&"TextEvent"in window&&!_I,RG=yn&&(!hA||_I&&8<_I&&11>=_I),Fm=String.fromCharCode(32),Km=!1;function XG(e,t){switch(e){case"keyup":return hv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kG(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zo=!1;function fv(e,t){switch(e){case"compositionend":return kG(t);case"keypress":return t.which!==32?null:(Km=!0,Fm);case"textInput":return e=t.data,e===Fm&&Km?null:e;default:return null}}function Bv(e,t){if(Zo)return e==="compositionend"||!hA&&XG(e,t)?(e=vG(),qC=pA=jn=null,Zo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return RG&&t.locale!=="ko"?null:t.data;default:return null}}var yv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yv[e.type]:t==="textarea"}function JG(e,t,g,n){iG(n),t=Vi(t,"onChange"),0<t.length&&(g=new bA("onChange","change",null,g,n),e.push({event:g,listeners:t}))}var $I=null,Gr=null;function Sv(e){TG(e,0)}function oa(e){var t=fo(e);if(gG(t))return e}function Wv(e,t){if(e==="change")return t}var YG=!1;if(yn){var gc;if(yn){var nc="oninput"in document;if(!nc){var zm=document.createElement("div");zm.setAttribute("oninput","return;"),nc=typeof zm.oninput=="function"}gc=nc}else gc=!1;YG=gc&&(!document.documentMode||9<document.documentMode)}function Mm(){$I&&($I.detachEvent("onpropertychange",xG),Gr=$I=null)}function xG(e){if(e.propertyName==="value"&&oa(Gr)){var t=[];JG(t,Gr,e,cA(e)),dG(Sv,t)}}function Vv(e,t,g){e==="focusin"?(Mm(),$I=t,Gr=g,$I.attachEvent("onpropertychange",xG)):e==="focusout"&&Mm()}function vv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oa(Gr)}function Rv(e,t){if(e==="click")return oa(t)}function Xv(e,t){if(e==="input"||e==="change")return oa(t)}function kv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Og=typeof Object.is=="function"?Object.is:kv;function fr(e,t){if(Og(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var g=Object.keys(e),n=Object.keys(t);if(g.length!==n.length)return!1;for(n=0;n<g.length;n++){var l=g[n];if(!kd.call(t,l)||!Og(e[l],t[l]))return!1}return!0}function Tm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lm(e,t){var g=Tm(e);e=0;for(var n;g;){if(g.nodeType===3){if(n=e+g.textContent.length,e<=t&&n>=t)return{node:g,offset:t-e};e=n}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Tm(g)}}function HG(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?HG(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wG(){for(var e=window,t=hi();t instanceof e.HTMLIFrameElement;){try{var g=typeof t.contentWindow.location.href=="string"}catch{g=!1}if(g)e=t.contentWindow;else break;t=hi(e.document)}return t}function GA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jv(e){var t=wG(),g=e.focusedElem,n=e.selectionRange;if(t!==g&&g&&g.ownerDocument&&HG(g.ownerDocument.documentElement,g)){if(n!==null&&GA(g)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in g)g.selectionStart=t,g.selectionEnd=Math.min(e,g.value.length);else if(e=(t=g.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=g.textContent.length,o=Math.min(n.start,l);n=n.end===void 0?o:Math.min(n.end,l),!e.extend&&o>n&&(l=n,n=o,o=l),l=Lm(g,o);var I=Lm(g,n);l&&I&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==I.node||e.focusOffset!==I.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(I.node,I.offset)):(t.setEnd(I.node,I.offset),e.addRange(t)))}}for(t=[],e=g;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<t.length;g++)e=t[g],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Yv=yn&&"documentMode"in document&&11>=document.documentMode,ho=null,Od=null,qI=null,_d=!1;function Um(e,t,g){var n=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;_d||ho==null||ho!==hi(n)||(n=ho,"selectionStart"in n&&GA(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),qI&&fr(qI,n)||(qI=n,n=Vi(Od,"onSelect"),0<n.length&&(t=new bA("onSelect","select",null,t,g),e.push({event:t,listeners:n}),t.target=ho)))}function GC(e,t){var g={};return g[e.toLowerCase()]=t.toLowerCase(),g["Webkit"+e]="webkit"+t,g["Moz"+e]="moz"+t,g}var Go={animationend:GC("Animation","AnimationEnd"),animationiteration:GC("Animation","AnimationIteration"),animationstart:GC("Animation","AnimationStart"),transitionend:GC("Transition","TransitionEnd")},lc={},NG={};yn&&(NG=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function Ia(e){if(lc[e])return lc[e];if(!Go[e])return e;var t=Go[e],g;for(g in t)if(t.hasOwnProperty(g)&&g in NG)return lc[e]=t[g];return e}var FG=Ia("animationend"),KG=Ia("animationiteration"),EG=Ia("animationstart"),zG=Ia("transitionend"),MG=new Map,Dm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dl(e,t){MG.set(e,t),Pl(t,[e])}for(var oc=0;oc<Dm.length;oc++){var Ic=Dm[oc],xv=Ic.toLowerCase(),Hv=Ic[0].toUpperCase()+Ic.slice(1);dl(xv,"on"+Hv)}dl(FG,"onAnimationEnd");dl(KG,"onAnimationIteration");dl(EG,"onAnimationStart");dl("dblclick","onDoubleClick");dl("focusin","onFocus");dl("focusout","onBlur");dl(zG,"onTransitionEnd");zo("onMouseEnter",["mouseout","mouseover"]);zo("onMouseLeave",["mouseout","mouseover"]);zo("onPointerEnter",["pointerout","pointerover"]);zo("onPointerLeave",["pointerout","pointerover"]);Pl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var LI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wv=new Set("cancel close invalid load scroll toggle".split(" ").concat(LI));function Qm(e,t,g){var n=e.type||"unknown-event";e.currentTarget=g,xV(n,t,void 0,e),e.currentTarget=null}function TG(e,t){t=(t&4)!==0;for(var g=0;g<e.length;g++){var n=e[g],l=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var I=n.length-1;0<=I;I--){var r=n[I],C=r.instance,i=r.currentTarget;if(r=r.listener,C!==o&&l.isPropagationStopped())break e;Qm(l,r,i),o=C}else for(I=0;I<n.length;I++){if(r=n[I],C=r.instance,i=r.currentTarget,r=r.listener,C!==o&&l.isPropagationStopped())break e;Qm(l,r,i),o=C}}}if(fi)throw e=Dd,fi=!1,Dd=null,e}function at(e,t){var g=t[gu];g===void 0&&(g=t[gu]=new Set);var n=e+"__bubble";g.has(n)||(LG(t,e,2,!1),g.add(n))}function rc(e,t,g){var n=0;t&&(n|=4),LG(g,e,n,t)}var fC="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[fC]){e[fC]=!0,_h.forEach(function(g){g!=="selectionchange"&&(wv.has(g)||rc(g,!1,e),rc(g,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fC]||(t[fC]=!0,rc("selectionchange",!1,t))}}function LG(e,t,g,n){switch(VG(t)){case 1:var l=OV;break;case 4:l=_V;break;default:l=mA}g=l.bind(null,t,g,e),l=void 0,!Ud||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(t,g,{capture:!0,passive:l}):e.addEventListener(t,g,!0):l!==void 0?e.addEventListener(t,g,{passive:l}):e.addEventListener(t,g,!1)}function Cc(e,t,g,n,l){var o=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var I=n.tag;if(I===3||I===4){var r=n.stateNode.containerInfo;if(r===l||r.nodeType===8&&r.parentNode===l)break;if(I===4)for(I=n.return;I!==null;){var C=I.tag;if((C===3||C===4)&&(C=I.stateNode.containerInfo,C===l||C.nodeType===8&&C.parentNode===l))return;I=I.return}for(;r!==null;){if(I=Rl(r),I===null)return;if(C=I.tag,C===5||C===6){n=o=I;continue e}r=r.parentNode}}n=n.return}dG(function(){var i=o,a=cA(g),c=[];e:{var s=MG.get(e);if(s!==void 0){var m=bA,A=e;switch(e){case"keypress":if(ei(g)===0)break e;case"keydown":case"keyup":m=cv;break;case"focusin":A="focus",m=tc;break;case"focusout":A="blur",m=tc;break;case"beforeblur":case"afterblur":m=tc;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ev;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Av;break;case FG:case KG:case EG:m=nv;break;case zG:m=pv;break;case"scroll":m=$V;break;case"wheel":m=Zv;break;case"copy":case"cut":case"paste":m=ov;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Nm}var d=(t&4)!==0,h=!d&&e==="scroll",Z=d?s!==null?s+"Capture":null:s;d=[];for(var u=i,p;u!==null;){p=u;var G=p.stateNode;if(p.tag===5&&G!==null&&(p=G,Z!==null&&(G=pr(u,Z),G!=null&&d.push(yr(u,G,p)))),h)break;u=u.return}0<d.length&&(s=new m(s,A,null,g,a),c.push({event:s,listeners:d}))}}if((t&7)===0){e:{if(s=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",s&&g!==Td&&(A=g.relatedTarget||g.fromElement)&&(Rl(A)||A[Sn]))break e;if((m||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,m?(A=g.relatedTarget||g.toElement,m=i,A=A?Rl(A):null,A!==null&&(h=jl(A),A!==h||A.tag!==5&&A.tag!==6)&&(A=null)):(m=null,A=i),m!==A)){if(d=Hm,G="onMouseLeave",Z="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(d=Nm,G="onPointerLeave",Z="onPointerEnter",u="pointer"),h=m==null?s:fo(m),p=A==null?s:fo(A),s=new d(G,u+"leave",m,g,a),s.target=h,s.relatedTarget=p,G=null,Rl(a)===i&&(d=new d(Z,u+"enter",A,g,a),d.target=p,d.relatedTarget=h,G=d),h=G,m&&A)t:{for(d=m,Z=A,u=0,p=d;p;p=to(p))u++;for(p=0,G=Z;G;G=to(G))p++;for(;0<u-p;)d=to(d),u--;for(;0<p-u;)Z=to(Z),p--;for(;u--;){if(d===Z||Z!==null&&d===Z.alternate)break t;d=to(d),Z=to(Z)}d=null}else d=null;m!==null&&Pm(c,s,m,d,!1),A!==null&&h!==null&&Pm(c,h,A,d,!0)}}e:{if(s=i?fo(i):window,m=s.nodeName&&s.nodeName.toLowerCase(),m==="select"||m==="input"&&s.type==="file")var f=Wv;else if(Em(s))if(YG)f=Xv;else{f=vv;var S=Vv}else(m=s.nodeName)&&m.toLowerCase()==="input"&&(s.type==="checkbox"||s.type==="radio")&&(f=Rv);if(f&&(f=f(e,i))){JG(c,f,g,a);break e}S&&S(e,s,i),e==="focusout"&&(S=s._wrapperState)&&S.controlled&&s.type==="number"&&Fd(s,"number",s.value)}switch(S=i?fo(i):window,e){case"focusin":(Em(S)||S.contentEditable==="true")&&(ho=S,Od=i,qI=null);break;case"focusout":qI=Od=ho=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,Um(c,g,a);break;case"selectionchange":if(Yv)break;case"keydown":case"keyup":Um(c,g,a)}var W;if(hA)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Zo?XG(e,g)&&(v="onCompositionEnd"):e==="keydown"&&g.keyCode===229&&(v="onCompositionStart");v&&(RG&&g.locale!=="ko"&&(Zo||v!=="onCompositionStart"?v==="onCompositionEnd"&&Zo&&(W=vG()):(jn=a,pA="value"in jn?jn.value:jn.textContent,Zo=!0)),S=Vi(i,v),0<S.length&&(v=new wm(v,e,null,g,a),c.push({event:v,listeners:S}),W?v.data=W:(W=kG(g),W!==null&&(v.data=W)))),(W=Gv?fv(e,g):Bv(e,g))&&(i=Vi(i,"onBeforeInput"),0<i.length&&(a=new wm("onBeforeInput","beforeinput",null,g,a),c.push({event:a,listeners:i}),a.data=W))}TG(c,t)})}function yr(e,t,g){return{instance:e,listener:t,currentTarget:g}}function Vi(e,t){for(var g=t+"Capture",n=[];e!==null;){var l=e,o=l.stateNode;l.tag===5&&o!==null&&(l=o,o=pr(e,g),o!=null&&n.unshift(yr(e,o,l)),o=pr(e,t),o!=null&&n.push(yr(e,o,l))),e=e.return}return n}function to(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pm(e,t,g,n,l){for(var o=t._reactName,I=[];g!==null&&g!==n;){var r=g,C=r.alternate,i=r.stateNode;if(C!==null&&C===n)break;r.tag===5&&i!==null&&(r=i,l?(C=pr(g,o),C!=null&&I.unshift(yr(g,C,r))):l||(C=pr(g,o),C!=null&&I.push(yr(g,C,r)))),g=g.return}I.length!==0&&e.push({event:t,listeners:I})}var Nv=/\r\n?/g,Fv=/\u0000|\uFFFD/g;function jm(e){return(typeof e=="string"?e:""+e).replace(Nv,`
`).replace(Fv,"")}function BC(e,t,g){if(t=jm(t),jm(e)!==t&&g)throw Error(Ie(425))}function vi(){}var $d=null,qd=null;function eu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,Kv=typeof clearTimeout=="function"?clearTimeout:void 0,Om=typeof Promise=="function"?Promise:void 0,Ev=typeof queueMicrotask=="function"?queueMicrotask:typeof Om<"u"?function(e){return Om.resolve(null).then(e).catch(zv)}:tu;function zv(e){setTimeout(function(){throw e})}function ic(e,t){var g=t,n=0;do{var l=g.nextSibling;if(e.removeChild(g),l&&l.nodeType===8)if(g=l.data,g==="/$"){if(n===0){e.removeChild(l),hr(t);return}n--}else g!=="$"&&g!=="$?"&&g!=="$!"||n++;g=l}while(g);hr(t)}function nl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _m(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var g=e.data;if(g==="$"||g==="$!"||g==="$?"){if(t===0)return e;t--}else g==="/$"&&t++}e=e.previousSibling}return null}var CI=Math.random().toString(36).slice(2),nn="__reactFiber$"+CI,Sr="__reactProps$"+CI,Sn="__reactContainer$"+CI,gu="__reactEvents$"+CI,Mv="__reactListeners$"+CI,Tv="__reactHandles$"+CI;function Rl(e){var t=e[nn];if(t)return t;for(var g=e.parentNode;g;){if(t=g[Sn]||g[nn]){if(g=t.alternate,t.child!==null||g!==null&&g.child!==null)for(e=_m(e);e!==null;){if(g=e[nn])return g;e=_m(e)}return t}e=g,g=e.parentNode}return null}function jr(e){return e=e[nn]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ie(33))}function ra(e){return e[Sr]||null}var nu=[],Bo=-1;function ul(e){return{current:e}}function st(e){0>Bo||(e.current=nu[Bo],nu[Bo]=null,Bo--)}function rt(e,t){Bo++,nu[Bo]=e.current,e.current=t}var sl={},qt=ul(sl),ag=ul(!1),wl=sl;function Mo(e,t){var g=e.type.contextTypes;if(!g)return sl;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var l={},o;for(o in g)l[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function sg(e){return e=e.childContextTypes,e!=null}function Ri(){st(ag),st(qt)}function $m(e,t,g){if(qt.current!==sl)throw Error(Ie(168));rt(qt,t),rt(ag,g)}function UG(e,t,g){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return g;n=n.getChildContext();for(var l in n)if(!(l in t))throw Error(Ie(108,VV(e)||"Unknown",l));return Gt({},g,n)}function Xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sl,wl=qt.current,rt(qt,e),rt(ag,ag.current),!0}function qm(e,t,g){var n=e.stateNode;if(!n)throw Error(Ie(169));g?(e=UG(e,t,wl),n.__reactInternalMemoizedMergedChildContext=e,st(ag),st(qt),rt(qt,e)):st(ag),rt(ag,g)}var An=null,Ca=!1,ac=!1;function DG(e){An===null?An=[e]:An.push(e)}function Lv(e){Ca=!0,DG(e)}function Al(){if(!ac&&An!==null){ac=!0;var e=0,t=et;try{var g=An;for(et=1;e<g.length;e++){var n=g[e];do n=n(!0);while(n!==null)}An=null,Ca=!1}catch(l){throw An!==null&&(An=An.slice(e+1)),pG(dA,Al),l}finally{et=t,ac=!1}}return null}var yo=[],So=0,ki=null,Ji=0,Jg=[],Yg=0,Nl=null,mn=1,pn="";function yl(e,t){yo[So++]=Ji,yo[So++]=ki,ki=e,Ji=t}function QG(e,t,g){Jg[Yg++]=mn,Jg[Yg++]=pn,Jg[Yg++]=Nl,Nl=e;var n=mn;e=pn;var l=32-Pg(n)-1;n&=~(1<<l),g+=1;var o=32-Pg(t)+l;if(30<o){var I=l-l%5;o=(n&(1<<I)-1).toString(32),n>>=I,l-=I,mn=1<<32-Pg(t)+l|g<<l|n,pn=o+e}else mn=1<<o|g<<l|n,pn=e}function fA(e){e.return!==null&&(yl(e,1),QG(e,1,0))}function BA(e){for(;e===ki;)ki=yo[--So],yo[So]=null,Ji=yo[--So],yo[So]=null;for(;e===Nl;)Nl=Jg[--Yg],Jg[Yg]=null,pn=Jg[--Yg],Jg[Yg]=null,mn=Jg[--Yg],Jg[Yg]=null}var Gg=null,hg=null,ut=!1,Dg=null;function PG(e,t){var g=xg(5,null,null,0);g.elementType="DELETED",g.stateNode=t,g.return=e,t=e.deletions,t===null?(e.deletions=[g],e.flags|=16):t.push(g)}function ep(e,t){switch(e.tag){case 5:var g=e.type;return t=t.nodeType!==1||g.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Gg=e,hg=nl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Gg=e,hg=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(g=Nl!==null?{id:mn,overflow:pn}:null,e.memoizedState={dehydrated:t,treeContext:g,retryLane:1073741824},g=xg(18,null,null,0),g.stateNode=t,g.return=e,e.child=g,Gg=e,hg=null,!0):!1;default:return!1}}function lu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ou(e){if(ut){var t=hg;if(t){var g=t;if(!ep(e,t)){if(lu(e))throw Error(Ie(418));t=nl(g.nextSibling);var n=Gg;t&&ep(e,t)?PG(n,g):(e.flags=e.flags&-4097|2,ut=!1,Gg=e)}}else{if(lu(e))throw Error(Ie(418));e.flags=e.flags&-4097|2,ut=!1,Gg=e}}}function tp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Gg=e}function yC(e){if(e!==Gg)return!1;if(!ut)return tp(e),ut=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eu(e.type,e.memoizedProps)),t&&(t=hg)){if(lu(e))throw jG(),Error(Ie(418));for(;t;)PG(e,t),t=nl(t.nextSibling)}if(tp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var g=e.data;if(g==="/$"){if(t===0){hg=nl(e.nextSibling);break e}t--}else g!=="$"&&g!=="$!"&&g!=="$?"||t++}e=e.nextSibling}hg=null}}else hg=Gg?nl(e.stateNode.nextSibling):null;return!0}function jG(){for(var e=hg;e;)e=nl(e.nextSibling)}function To(){hg=Gg=null,ut=!1}function yA(e){Dg===null?Dg=[e]:Dg.push(e)}var Uv=kn.ReactCurrentBatchConfig;function Lg(e,t){if(e&&e.defaultProps){t=Gt({},t),e=e.defaultProps;for(var g in e)t[g]===void 0&&(t[g]=e[g]);return t}return t}var Yi=ul(null),xi=null,Wo=null,SA=null;function WA(){SA=Wo=xi=null}function VA(e){var t=Yi.current;st(Yi),e._currentValue=t}function Iu(e,t,g){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===g)break;e=e.return}}function Ho(e,t){xi=e,SA=Wo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ig=!0),e.firstContext=null)}function wg(e){var t=e._currentValue;if(SA!==e)if(e={context:e,memoizedValue:t,next:null},Wo===null){if(xi===null)throw Error(Ie(308));Wo=e,xi.dependencies={lanes:0,firstContext:e}}else Wo=Wo.next=e;return t}var Xl=null;function vA(e){Xl===null?Xl=[e]:Xl.push(e)}function OG(e,t,g,n){var l=t.interleaved;return l===null?(g.next=g,vA(t)):(g.next=l.next,l.next=g),t.interleaved=g,Wn(e,n)}function Wn(e,t){e.lanes|=t;var g=e.alternate;for(g!==null&&(g.lanes|=t),g=e,e=e.return;e!==null;)e.childLanes|=t,g=e.alternate,g!==null&&(g.childLanes|=t),g=e,e=e.return;return g.tag===3?g.stateNode:null}var Ln=!1;function RA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _G(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ll(e,t,g){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Pe&2)!==0){var l=n.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),n.pending=t,Wn(e,g)}return l=n.interleaved,l===null?(t.next=t,vA(n)):(t.next=l.next,l.next=t),n.interleaved=t,Wn(e,g)}function ti(e,t,g){if(t=t.updateQueue,t!==null&&(t=t.shared,(g&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,g|=n,t.lanes=g,uA(e,g)}}function gp(e,t){var g=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,g===n)){var l=null,o=null;if(g=g.firstBaseUpdate,g!==null){do{var I={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};o===null?l=o=I:o=o.next=I,g=g.next}while(g!==null);o===null?l=o=t:o=o.next=t}else l=o=t;g={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=g;return}e=g.lastBaseUpdate,e===null?g.firstBaseUpdate=t:e.next=t,g.lastBaseUpdate=t}function Hi(e,t,g,n){var l=e.updateQueue;Ln=!1;var o=l.firstBaseUpdate,I=l.lastBaseUpdate,r=l.shared.pending;if(r!==null){l.shared.pending=null;var C=r,i=C.next;C.next=null,I===null?o=i:I.next=i,I=C;var a=e.alternate;a!==null&&(a=a.updateQueue,r=a.lastBaseUpdate,r!==I&&(r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=C))}if(o!==null){var c=l.baseState;I=0,a=i=C=null,r=o;do{var s=r.lane,m=r.eventTime;if((n&s)===s){a!==null&&(a=a.next={eventTime:m,lane:0,tag:r.tag,payload:r.payload,callback:r.callback,next:null});e:{var A=e,d=r;switch(s=t,m=g,d.tag){case 1:if(A=d.payload,typeof A=="function"){c=A.call(m,c,s);break e}c=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=d.payload,s=typeof A=="function"?A.call(m,c,s):A,s==null)break e;c=Gt({},c,s);break e;case 2:Ln=!0}}r.callback!==null&&r.lane!==0&&(e.flags|=64,s=l.effects,s===null?l.effects=[r]:s.push(r))}else m={eventTime:m,lane:s,tag:r.tag,payload:r.payload,callback:r.callback,next:null},a===null?(i=a=m,C=c):a=a.next=m,I|=s;if(r=r.next,r===null){if(r=l.shared.pending,r===null)break;s=r,r=s.next,s.next=null,l.lastBaseUpdate=s,l.shared.pending=null}}while(1);if(a===null&&(C=c),l.baseState=C,l.firstBaseUpdate=i,l.lastBaseUpdate=a,t=l.shared.interleaved,t!==null){l=t;do I|=l.lane,l=l.next;while(l!==t)}else o===null&&(l.shared.lanes=0);Kl|=I,e.lanes=I,e.memoizedState=c}}function np(e,t,g){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],l=n.callback;if(l!==null){if(n.callback=null,n=g,typeof l!="function")throw Error(Ie(191,l));l.call(n)}}}var $G=new Oh.Component().refs;function ru(e,t,g,n){t=e.memoizedState,g=g(n,t),g=g==null?t:Gt({},t,g),e.memoizedState=g,e.lanes===0&&(e.updateQueue.baseState=g)}var ia={isMounted:function(e){return(e=e._reactInternals)?jl(e)===e:!1},enqueueSetState:function(e,t,g){e=e._reactInternals;var n=tg(),l=Il(e),o=Gn(n,l);o.payload=t,g!=null&&(o.callback=g),t=ll(e,o,l),t!==null&&(jg(t,e,l,n),ti(t,e,l))},enqueueReplaceState:function(e,t,g){e=e._reactInternals;var n=tg(),l=Il(e),o=Gn(n,l);o.tag=1,o.payload=t,g!=null&&(o.callback=g),t=ll(e,o,l),t!==null&&(jg(t,e,l,n),ti(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var g=tg(),n=Il(e),l=Gn(g,n);l.tag=2,t!=null&&(l.callback=t),t=ll(e,l,n),t!==null&&(jg(t,e,n,g),ti(t,e,n))}};function lp(e,t,g,n,l,o,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,I):t.prototype&&t.prototype.isPureReactComponent?!fr(g,n)||!fr(l,o):!0}function qG(e,t,g){var n=!1,l=sl,o=t.contextType;return typeof o=="object"&&o!==null?o=wg(o):(l=sg(t)?wl:qt.current,n=t.contextTypes,o=(n=n!=null)?Mo(e,l):sl),t=new t(g,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=o),t}function op(e,t,g,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(g,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(g,n),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function Cu(e,t,g,n){var l=e.stateNode;l.props=g,l.state=e.memoizedState,l.refs=$G,RA(e);var o=t.contextType;typeof o=="object"&&o!==null?l.context=wg(o):(o=sg(t)?wl:qt.current,l.context=Mo(e,o)),l.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ru(e,t,o,g),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ia.enqueueReplaceState(l,l.state,null),Hi(e,g,l,n),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function WI(e,t,g){if(e=g.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(Ie(309));var n=g.stateNode}if(!n)throw Error(Ie(147,e));var l=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(I){var r=l.refs;r===$G&&(r=l.refs={}),I===null?delete r[o]:r[o]=I},t._stringRef=o,t)}if(typeof e!="string")throw Error(Ie(284));if(!g._owner)throw Error(Ie(290,e))}return e}function SC(e,t){throw e=Object.prototype.toString.call(t),Error(Ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ip(e){var t=e._init;return t(e._payload)}function ef(e){function t(Z,u){if(e){var p=Z.deletions;p===null?(Z.deletions=[u],Z.flags|=16):p.push(u)}}function g(Z,u){if(!e)return null;for(;u!==null;)t(Z,u),u=u.sibling;return null}function n(Z,u){for(Z=new Map;u!==null;)u.key!==null?Z.set(u.key,u):Z.set(u.index,u),u=u.sibling;return Z}function l(Z,u){return Z=rl(Z,u),Z.index=0,Z.sibling=null,Z}function o(Z,u,p){return Z.index=p,e?(p=Z.alternate,p!==null?(p=p.index,p<u?(Z.flags|=2,u):p):(Z.flags|=2,u)):(Z.flags|=1048576,u)}function I(Z){return e&&Z.alternate===null&&(Z.flags|=2),Z}function r(Z,u,p,G){return u===null||u.tag!==6?(u=pc(p,Z.mode,G),u.return=Z,u):(u=l(u,p),u.return=Z,u)}function C(Z,u,p,G){var f=p.type;return f===bo?a(Z,u,p.props.children,G,p.key):u!==null&&(u.elementType===f||typeof f=="object"&&f!==null&&f.$$typeof===Tn&&Ip(f)===u.type)?(G=l(u,p.props),G.ref=WI(Z,u,p),G.return=Z,G):(G=ri(p.type,p.key,p.props,null,Z.mode,G),G.ref=WI(Z,u,p),G.return=Z,G)}function i(Z,u,p,G){return u===null||u.tag!==4||u.stateNode.containerInfo!==p.containerInfo||u.stateNode.implementation!==p.implementation?(u=bc(p,Z.mode,G),u.return=Z,u):(u=l(u,p.children||[]),u.return=Z,u)}function a(Z,u,p,G,f){return u===null||u.tag!==7?(u=xl(p,Z.mode,G,f),u.return=Z,u):(u=l(u,p),u.return=Z,u)}function c(Z,u,p){if(typeof u=="string"&&u!==""||typeof u=="number")return u=pc(""+u,Z.mode,p),u.return=Z,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case uC:return p=ri(u.type,u.key,u.props,null,Z.mode,p),p.ref=WI(Z,null,u),p.return=Z,p;case po:return u=bc(u,Z.mode,p),u.return=Z,u;case Tn:var G=u._init;return c(Z,G(u._payload),p)}if(MI(u)||GI(u))return u=xl(u,Z.mode,p,null),u.return=Z,u;SC(Z,u)}return null}function s(Z,u,p,G){var f=u!==null?u.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return f!==null?null:r(Z,u,""+p,G);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case uC:return p.key===f?C(Z,u,p,G):null;case po:return p.key===f?i(Z,u,p,G):null;case Tn:return f=p._init,s(Z,u,f(p._payload),G)}if(MI(p)||GI(p))return f!==null?null:a(Z,u,p,G,null);SC(Z,p)}return null}function m(Z,u,p,G,f){if(typeof G=="string"&&G!==""||typeof G=="number")return Z=Z.get(p)||null,r(u,Z,""+G,f);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case uC:return Z=Z.get(G.key===null?p:G.key)||null,C(u,Z,G,f);case po:return Z=Z.get(G.key===null?p:G.key)||null,i(u,Z,G,f);case Tn:var S=G._init;return m(Z,u,p,S(G._payload),f)}if(MI(G)||GI(G))return Z=Z.get(p)||null,a(u,Z,G,f,null);SC(u,G)}return null}function A(Z,u,p,G){for(var f=null,S=null,W=u,v=u=0,w=null;W!==null&&v<p.length;v++){W.index>v?(w=W,W=null):w=W.sibling;var y=s(Z,W,p[v],G);if(y===null){W===null&&(W=w);break}e&&W&&y.alternate===null&&t(Z,W),u=o(y,u,v),S===null?f=y:S.sibling=y,S=y,W=w}if(v===p.length)return g(Z,W),ut&&yl(Z,v),f;if(W===null){for(;v<p.length;v++)W=c(Z,p[v],G),W!==null&&(u=o(W,u,v),S===null?f=W:S.sibling=W,S=W);return ut&&yl(Z,v),f}for(W=n(Z,W);v<p.length;v++)w=m(W,Z,v,p[v],G),w!==null&&(e&&w.alternate!==null&&W.delete(w.key===null?v:w.key),u=o(w,u,v),S===null?f=w:S.sibling=w,S=w);return e&&W.forEach(function(R){return t(Z,R)}),ut&&yl(Z,v),f}function d(Z,u,p,G){var f=GI(p);if(typeof f!="function")throw Error(Ie(150));if(p=f.call(p),p==null)throw Error(Ie(151));for(var S=f=null,W=u,v=u=0,w=null,y=p.next();W!==null&&!y.done;v++,y=p.next()){W.index>v?(w=W,W=null):w=W.sibling;var R=s(Z,W,y.value,G);if(R===null){W===null&&(W=w);break}e&&W&&R.alternate===null&&t(Z,W),u=o(R,u,v),S===null?f=R:S.sibling=R,S=R,W=w}if(y.done)return g(Z,W),ut&&yl(Z,v),f;if(W===null){for(;!y.done;v++,y=p.next())y=c(Z,y.value,G),y!==null&&(u=o(y,u,v),S===null?f=y:S.sibling=y,S=y);return ut&&yl(Z,v),f}for(W=n(Z,W);!y.done;v++,y=p.next())y=m(W,Z,v,y.value,G),y!==null&&(e&&y.alternate!==null&&W.delete(y.key===null?v:y.key),u=o(y,u,v),S===null?f=y:S.sibling=y,S=y);return e&&W.forEach(function(x){return t(Z,x)}),ut&&yl(Z,v),f}function h(Z,u,p,G){if(typeof p=="object"&&p!==null&&p.type===bo&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case uC:e:{for(var f=p.key,S=u;S!==null;){if(S.key===f){if(f=p.type,f===bo){if(S.tag===7){g(Z,S.sibling),u=l(S,p.props.children),u.return=Z,Z=u;break e}}else if(S.elementType===f||typeof f=="object"&&f!==null&&f.$$typeof===Tn&&Ip(f)===S.type){g(Z,S.sibling),u=l(S,p.props),u.ref=WI(Z,S,p),u.return=Z,Z=u;break e}g(Z,S);break}else t(Z,S);S=S.sibling}p.type===bo?(u=xl(p.props.children,Z.mode,G,p.key),u.return=Z,Z=u):(G=ri(p.type,p.key,p.props,null,Z.mode,G),G.ref=WI(Z,u,p),G.return=Z,Z=G)}return I(Z);case po:e:{for(S=p.key;u!==null;){if(u.key===S)if(u.tag===4&&u.stateNode.containerInfo===p.containerInfo&&u.stateNode.implementation===p.implementation){g(Z,u.sibling),u=l(u,p.children||[]),u.return=Z,Z=u;break e}else{g(Z,u);break}else t(Z,u);u=u.sibling}u=bc(p,Z.mode,G),u.return=Z,Z=u}return I(Z);case Tn:return S=p._init,h(Z,u,S(p._payload),G)}if(MI(p))return A(Z,u,p,G);if(GI(p))return d(Z,u,p,G);SC(Z,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,u!==null&&u.tag===6?(g(Z,u.sibling),u=l(u,p),u.return=Z,Z=u):(g(Z,u),u=pc(p,Z.mode,G),u.return=Z,Z=u),I(Z)):g(Z,u)}return h}var Lo=ef(!0),tf=ef(!1),Or={},rn=ul(Or),Wr=ul(Or),Vr=ul(Or);function kl(e){if(e===Or)throw Error(Ie(174));return e}function XA(e,t){switch(rt(Vr,t),rt(Wr,e),rt(rn,Or),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ed(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ed(t,e)}st(rn),rt(rn,t)}function Uo(){st(rn),st(Wr),st(Vr)}function gf(e){kl(Vr.current);var t=kl(rn.current),g=Ed(t,e.type);t!==g&&(rt(Wr,e),rt(rn,g))}function kA(e){Wr.current===e&&(st(rn),st(Wr))}var Zt=ul(0);function wi(e){for(var t=e;t!==null;){if(t.tag===13){var g=t.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sc=[];function JA(){for(var e=0;e<sc.length;e++)sc[e]._workInProgressVersionPrimary=null;sc.length=0}var gi=kn.ReactCurrentDispatcher,cc=kn.ReactCurrentBatchConfig,Fl=0,ht=null,Rt=null,Jt=null,Ni=!1,er=!1,vr=0,Dv=0;function Pt(){throw Error(Ie(321))}function YA(e,t){if(t===null)return!1;for(var g=0;g<t.length&&g<e.length;g++)if(!Og(e[g],t[g]))return!1;return!0}function xA(e,t,g,n,l,o){if(Fl=o,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gi.current=e===null||e.memoizedState===null?Ov:_v,e=g(n,l),er){o=0;do{if(er=!1,vr=0,25<=o)throw Error(Ie(301));o+=1,Jt=Rt=null,t.updateQueue=null,gi.current=$v,e=g(n,l)}while(er)}if(gi.current=Fi,t=Rt!==null&&Rt.next!==null,Fl=0,Jt=Rt=ht=null,Ni=!1,t)throw Error(Ie(300));return e}function HA(){var e=vr!==0;return vr=0,e}function qg(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?ht.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function Ng(){if(Rt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=Rt.next;var t=Jt===null?ht.memoizedState:Jt.next;if(t!==null)Jt=t,Rt=e;else{if(e===null)throw Error(Ie(310));Rt=e,e={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Jt===null?ht.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function Rr(e,t){return typeof t=="function"?t(e):t}function dc(e){var t=Ng(),g=t.queue;if(g===null)throw Error(Ie(311));g.lastRenderedReducer=e;var n=Rt,l=n.baseQueue,o=g.pending;if(o!==null){if(l!==null){var I=l.next;l.next=o.next,o.next=I}n.baseQueue=l=o,g.pending=null}if(l!==null){o=l.next,n=n.baseState;var r=I=null,C=null,i=o;do{var a=i.lane;if((Fl&a)===a)C!==null&&(C=C.next={lane:0,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null}),n=i.hasEagerState?i.eagerState:e(n,i.action);else{var c={lane:a,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null};C===null?(r=C=c,I=n):C=C.next=c,ht.lanes|=a,Kl|=a}i=i.next}while(i!==null&&i!==o);C===null?I=n:C.next=r,Og(n,t.memoizedState)||(ig=!0),t.memoizedState=n,t.baseState=I,t.baseQueue=C,g.lastRenderedState=n}if(e=g.interleaved,e!==null){l=e;do o=l.lane,ht.lanes|=o,Kl|=o,l=l.next;while(l!==e)}else l===null&&(g.lanes=0);return[t.memoizedState,g.dispatch]}function uc(e){var t=Ng(),g=t.queue;if(g===null)throw Error(Ie(311));g.lastRenderedReducer=e;var n=g.dispatch,l=g.pending,o=t.memoizedState;if(l!==null){g.pending=null;var I=l=l.next;do o=e(o,I.action),I=I.next;while(I!==l);Og(o,t.memoizedState)||(ig=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),g.lastRenderedState=o}return[o,n]}function nf(){}function lf(e,t){var g=ht,n=Ng(),l=t(),o=!Og(n.memoizedState,l);if(o&&(n.memoizedState=l,ig=!0),n=n.queue,wA(rf.bind(null,g,n,e),[e]),n.getSnapshot!==t||o||Jt!==null&&Jt.memoizedState.tag&1){if(g.flags|=2048,Xr(9,If.bind(null,g,n,l,t),void 0,null),Yt===null)throw Error(Ie(349));(Fl&30)!==0||of(g,t,l)}return l}function of(e,t,g){e.flags|=16384,e={getSnapshot:t,value:g},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(g=t.stores,g===null?t.stores=[e]:g.push(e))}function If(e,t,g,n){t.value=g,t.getSnapshot=n,Cf(t)&&af(e)}function rf(e,t,g){return g(function(){Cf(t)&&af(e)})}function Cf(e){var t=e.getSnapshot;e=e.value;try{var g=t();return!Og(e,g)}catch{return!0}}function af(e){var t=Wn(e,1);t!==null&&jg(t,e,1,-1)}function rp(e){var t=qg();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:e},t.queue=e,e=e.dispatch=jv.bind(null,ht,e),[t.memoizedState,e]}function Xr(e,t,g,n){return e={tag:e,create:t,destroy:g,deps:n,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(g=t.lastEffect,g===null?t.lastEffect=e.next=e:(n=g.next,g.next=e,e.next=n,t.lastEffect=e)),e}function sf(){return Ng().memoizedState}function ni(e,t,g,n){var l=qg();ht.flags|=e,l.memoizedState=Xr(1|t,g,void 0,n===void 0?null:n)}function aa(e,t,g,n){var l=Ng();n=n===void 0?null:n;var o=void 0;if(Rt!==null){var I=Rt.memoizedState;if(o=I.destroy,n!==null&&YA(n,I.deps)){l.memoizedState=Xr(t,g,o,n);return}}ht.flags|=e,l.memoizedState=Xr(1|t,g,o,n)}function Cp(e,t){return ni(8390656,8,e,t)}function wA(e,t){return aa(2048,8,e,t)}function cf(e,t){return aa(4,2,e,t)}function df(e,t){return aa(4,4,e,t)}function uf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Af(e,t,g){return g=g!=null?g.concat([e]):null,aa(4,4,uf.bind(null,t,e),g)}function NA(){}function mf(e,t){var g=Ng();t=t===void 0?null:t;var n=g.memoizedState;return n!==null&&t!==null&&YA(t,n[1])?n[0]:(g.memoizedState=[e,t],e)}function pf(e,t){var g=Ng();t=t===void 0?null:t;var n=g.memoizedState;return n!==null&&t!==null&&YA(t,n[1])?n[0]:(e=e(),g.memoizedState=[e,t],e)}function bf(e,t,g){return(Fl&21)===0?(e.baseState&&(e.baseState=!1,ig=!0),e.memoizedState=g):(Og(g,t)||(g=hG(),ht.lanes|=g,Kl|=g,e.baseState=!0),t)}function Qv(e,t){var g=et;et=g!==0&&4>g?g:4,e(!0);var n=cc.transition;cc.transition={};try{e(!1),t()}finally{et=g,cc.transition=n}}function Zf(){return Ng().memoizedState}function Pv(e,t,g){var n=Il(e);if(g={lane:n,action:g,hasEagerState:!1,eagerState:null,next:null},hf(e))Gf(t,g);else if(g=OG(e,t,g,n),g!==null){var l=tg();jg(g,e,n,l),ff(g,t,n)}}function jv(e,t,g){var n=Il(e),l={lane:n,action:g,hasEagerState:!1,eagerState:null,next:null};if(hf(e))Gf(t,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var I=t.lastRenderedState,r=o(I,g);if(l.hasEagerState=!0,l.eagerState=r,Og(r,I)){var C=t.interleaved;C===null?(l.next=l,vA(t)):(l.next=C.next,C.next=l),t.interleaved=l;return}}catch{}finally{}g=OG(e,t,l,n),g!==null&&(l=tg(),jg(g,e,n,l),ff(g,t,n))}}function hf(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function Gf(e,t){er=Ni=!0;var g=e.pending;g===null?t.next=t:(t.next=g.next,g.next=t),e.pending=t}function ff(e,t,g){if((g&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,g|=n,t.lanes=g,uA(e,g)}}var Fi={readContext:wg,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},Ov={readContext:wg,useCallback:function(e,t){return qg().memoizedState=[e,t===void 0?null:t],e},useContext:wg,useEffect:Cp,useImperativeHandle:function(e,t,g){return g=g!=null?g.concat([e]):null,ni(4194308,4,uf.bind(null,t,e),g)},useLayoutEffect:function(e,t){return ni(4194308,4,e,t)},useInsertionEffect:function(e,t){return ni(4,2,e,t)},useMemo:function(e,t){var g=qg();return t=t===void 0?null:t,e=e(),g.memoizedState=[e,t],e},useReducer:function(e,t,g){var n=qg();return t=g!==void 0?g(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Pv.bind(null,ht,e),[n.memoizedState,e]},useRef:function(e){var t=qg();return e={current:e},t.memoizedState=e},useState:rp,useDebugValue:NA,useDeferredValue:function(e){return qg().memoizedState=e},useTransition:function(){var e=rp(!1),t=e[0];return e=Qv.bind(null,e[1]),qg().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,g){var n=ht,l=qg();if(ut){if(g===void 0)throw Error(Ie(407));g=g()}else{if(g=t(),Yt===null)throw Error(Ie(349));(Fl&30)!==0||of(n,t,g)}l.memoizedState=g;var o={value:g,getSnapshot:t};return l.queue=o,Cp(rf.bind(null,n,o,e),[e]),n.flags|=2048,Xr(9,If.bind(null,n,o,g,t),void 0,null),g},useId:function(){var e=qg(),t=Yt.identifierPrefix;if(ut){var g=pn,n=mn;g=(n&~(1<<32-Pg(n)-1)).toString(32)+g,t=":"+t+"R"+g,g=vr++,0<g&&(t+="H"+g.toString(32)),t+=":"}else g=Dv++,t=":"+t+"r"+g.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_v={readContext:wg,useCallback:mf,useContext:wg,useEffect:wA,useImperativeHandle:Af,useInsertionEffect:cf,useLayoutEffect:df,useMemo:pf,useReducer:dc,useRef:sf,useState:function(){return dc(Rr)},useDebugValue:NA,useDeferredValue:function(e){var t=Ng();return bf(t,Rt.memoizedState,e)},useTransition:function(){var e=dc(Rr)[0],t=Ng().memoizedState;return[e,t]},useMutableSource:nf,useSyncExternalStore:lf,useId:Zf,unstable_isNewReconciler:!1},$v={readContext:wg,useCallback:mf,useContext:wg,useEffect:wA,useImperativeHandle:Af,useInsertionEffect:cf,useLayoutEffect:df,useMemo:pf,useReducer:uc,useRef:sf,useState:function(){return uc(Rr)},useDebugValue:NA,useDeferredValue:function(e){var t=Ng();return Rt===null?t.memoizedState=e:bf(t,Rt.memoizedState,e)},useTransition:function(){var e=uc(Rr)[0],t=Ng().memoizedState;return[e,t]},useMutableSource:nf,useSyncExternalStore:lf,useId:Zf,unstable_isNewReconciler:!1};function Do(e,t){try{var g="",n=t;do g+=WV(n),n=n.return;while(n);var l=g}catch(o){l=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:l,digest:null}}function Ac(e,t,g){return{value:e,source:null,stack:g!=null?g:null,digest:t!=null?t:null}}function iu(e,t){try{console.error(t.value)}catch(g){setTimeout(function(){throw g})}}var qv=typeof WeakMap=="function"?WeakMap:Map;function Bf(e,t,g){g=Gn(-1,g),g.tag=3,g.payload={element:null};var n=t.value;return g.callback=function(){Ei||(Ei=!0,Zu=n),iu(e,t)},g}function yf(e,t,g){g=Gn(-1,g),g.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var l=t.value;g.payload=function(){return n(l)},g.callback=function(){iu(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(g.callback=function(){iu(e,t),typeof n!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var I=t.stack;this.componentDidCatch(t.value,{componentStack:I!==null?I:""})}),g}function ip(e,t,g){var n=e.pingCache;if(n===null){n=e.pingCache=new qv;var l=new Set;n.set(t,l)}else l=n.get(t),l===void 0&&(l=new Set,n.set(t,l));l.has(g)||(l.add(g),e=dR.bind(null,e,t,g),t.then(e,e))}function ap(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sp(e,t,g,n,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(t=Gn(-1,1),t.tag=2,ll(g,t,1))),g.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var eR=kn.ReactCurrentOwner,ig=!1;function eg(e,t,g,n){t.child=e===null?tf(t,null,g,n):Lo(t,e.child,g,n)}function cp(e,t,g,n,l){g=g.render;var o=t.ref;return Ho(t,l),n=xA(e,t,g,n,o,l),g=HA(),e!==null&&!ig?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Vn(e,t,l)):(ut&&g&&fA(t),t.flags|=1,eg(e,t,n,l),t.child)}function dp(e,t,g,n,l){if(e===null){var o=g.type;return typeof o=="function"&&!UA(o)&&o.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(t.tag=15,t.type=o,Sf(e,t,o,n,l)):(e=ri(g.type,null,n,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&l)===0){var I=o.memoizedProps;if(g=g.compare,g=g!==null?g:fr,g(I,n)&&e.ref===t.ref)return Vn(e,t,l)}return t.flags|=1,e=rl(o,n),e.ref=t.ref,e.return=t,t.child=e}function Sf(e,t,g,n,l){if(e!==null){var o=e.memoizedProps;if(fr(o,n)&&e.ref===t.ref)if(ig=!1,t.pendingProps=n=o,(e.lanes&l)!==0)(e.flags&131072)!==0&&(ig=!0);else return t.lanes=e.lanes,Vn(e,t,l)}return au(e,t,g,n,l)}function Wf(e,t,g){var n=t.pendingProps,l=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(vo,bg),bg|=g;else{if((g&1073741824)===0)return e=o!==null?o.baseLanes|g:g,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rt(vo,bg),bg|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:g,rt(vo,bg),bg|=n}else o!==null?(n=o.baseLanes|g,t.memoizedState=null):n=g,rt(vo,bg),bg|=n;return eg(e,t,l,g),t.child}function Vf(e,t){var g=t.ref;(e===null&&g!==null||e!==null&&e.ref!==g)&&(t.flags|=512,t.flags|=2097152)}function au(e,t,g,n,l){var o=sg(g)?wl:qt.current;return o=Mo(t,o),Ho(t,l),g=xA(e,t,g,n,o,l),n=HA(),e!==null&&!ig?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Vn(e,t,l)):(ut&&n&&fA(t),t.flags|=1,eg(e,t,g,l),t.child)}function up(e,t,g,n,l){if(sg(g)){var o=!0;Xi(t)}else o=!1;if(Ho(t,l),t.stateNode===null)li(e,t),qG(t,g,n),Cu(t,g,n,l),n=!0;else if(e===null){var I=t.stateNode,r=t.memoizedProps;I.props=r;var C=I.context,i=g.contextType;typeof i=="object"&&i!==null?i=wg(i):(i=sg(g)?wl:qt.current,i=Mo(t,i));var a=g.getDerivedStateFromProps,c=typeof a=="function"||typeof I.getSnapshotBeforeUpdate=="function";c||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(r!==n||C!==i)&&op(t,I,n,i),Ln=!1;var s=t.memoizedState;I.state=s,Hi(t,n,I,l),C=t.memoizedState,r!==n||s!==C||ag.current||Ln?(typeof a=="function"&&(ru(t,g,a,n),C=t.memoizedState),(r=Ln||lp(t,g,r,n,s,C,i))?(c||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(t.flags|=4194308)):(typeof I.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=C),I.props=n,I.state=C,I.context=i,n=r):(typeof I.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{I=t.stateNode,_G(e,t),r=t.memoizedProps,i=t.type===t.elementType?r:Lg(t.type,r),I.props=i,c=t.pendingProps,s=I.context,C=g.contextType,typeof C=="object"&&C!==null?C=wg(C):(C=sg(g)?wl:qt.current,C=Mo(t,C));var m=g.getDerivedStateFromProps;(a=typeof m=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(r!==c||s!==C)&&op(t,I,n,C),Ln=!1,s=t.memoizedState,I.state=s,Hi(t,n,I,l);var A=t.memoizedState;r!==c||s!==A||ag.current||Ln?(typeof m=="function"&&(ru(t,g,m,n),A=t.memoizedState),(i=Ln||lp(t,g,i,n,s,A,C)||!1)?(a||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(n,A,C),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(n,A,C)),typeof I.componentDidUpdate=="function"&&(t.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof I.componentDidUpdate!="function"||r===e.memoizedProps&&s===e.memoizedState||(t.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&s===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=A),I.props=n,I.state=A,I.context=C,n=i):(typeof I.componentDidUpdate!="function"||r===e.memoizedProps&&s===e.memoizedState||(t.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&s===e.memoizedState||(t.flags|=1024),n=!1)}return su(e,t,g,n,o,l)}function su(e,t,g,n,l,o){Vf(e,t);var I=(t.flags&128)!==0;if(!n&&!I)return l&&qm(t,g,!1),Vn(e,t,o);n=t.stateNode,eR.current=t;var r=I&&typeof g.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&I?(t.child=Lo(t,e.child,null,o),t.child=Lo(t,null,r,o)):eg(e,t,r,o),t.memoizedState=n.state,l&&qm(t,g,!0),t.child}function vf(e){var t=e.stateNode;t.pendingContext?$m(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$m(e,t.context,!1),XA(e,t.containerInfo)}function Ap(e,t,g,n,l){return To(),yA(l),t.flags|=256,eg(e,t,g,n),t.child}var cu={dehydrated:null,treeContext:null,retryLane:0};function du(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rf(e,t,g){var n=t.pendingProps,l=Zt.current,o=!1,I=(t.flags&128)!==0,r;if((r=I)||(r=e!==null&&e.memoizedState===null?!1:(l&2)!==0),r?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),rt(Zt,l&1),e===null)return ou(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(I=n.children,e=n.fallback,o?(n=t.mode,o=t.child,I={mode:"hidden",children:I},(n&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=I):o=da(I,n,0,null),e=xl(e,n,g,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=du(g),t.memoizedState=cu,e):FA(t,I));if(l=e.memoizedState,l!==null&&(r=l.dehydrated,r!==null))return tR(e,t,I,n,r,l,g);if(o){o=n.fallback,I=t.mode,l=e.child,r=l.sibling;var C={mode:"hidden",children:n.children};return(I&1)===0&&t.child!==l?(n=t.child,n.childLanes=0,n.pendingProps=C,t.deletions=null):(n=rl(l,C),n.subtreeFlags=l.subtreeFlags&14680064),r!==null?o=rl(r,o):(o=xl(o,I,g,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,I=e.child.memoizedState,I=I===null?du(g):{baseLanes:I.baseLanes|g,cachePool:null,transitions:I.transitions},o.memoizedState=I,o.childLanes=e.childLanes&~g,t.memoizedState=cu,n}return o=e.child,e=o.sibling,n=rl(o,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=g),n.return=t,n.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=n,t.memoizedState=null,n}function FA(e,t){return t=da({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function WC(e,t,g,n){return n!==null&&yA(n),Lo(t,e.child,null,g),e=FA(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tR(e,t,g,n,l,o,I){if(g)return t.flags&256?(t.flags&=-257,n=Ac(Error(Ie(422))),WC(e,t,I,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,l=t.mode,n=da({mode:"visible",children:n.children},l,0,null),o=xl(o,l,I,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,(t.mode&1)!==0&&Lo(t,e.child,null,I),t.child.memoizedState=du(I),t.memoizedState=cu,o);if((t.mode&1)===0)return WC(e,t,I,null);if(l.data==="$!"){if(n=l.nextSibling&&l.nextSibling.dataset,n)var r=n.dgst;return n=r,o=Error(Ie(419)),n=Ac(o,n,void 0),WC(e,t,I,n)}if(r=(I&e.childLanes)!==0,ig||r){if(n=Yt,n!==null){switch(I&-I){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(n.suspendedLanes|I))!==0?0:l,l!==0&&l!==o.retryLane&&(o.retryLane=l,Wn(e,l),jg(n,e,l,-1))}return LA(),n=Ac(Error(Ie(421))),WC(e,t,I,n)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=uR.bind(null,e),l._reactRetry=t,null):(e=o.treeContext,hg=nl(l.nextSibling),Gg=t,ut=!0,Dg=null,e!==null&&(Jg[Yg++]=mn,Jg[Yg++]=pn,Jg[Yg++]=Nl,mn=e.id,pn=e.overflow,Nl=t),t=FA(t,n.children),t.flags|=4096,t)}function mp(e,t,g){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Iu(e.return,t,g)}function mc(e,t,g,n,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:g,tailMode:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=g,o.tailMode=l)}function Xf(e,t,g){var n=t.pendingProps,l=n.revealOrder,o=n.tail;if(eg(e,t,n.children,g),n=Zt.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mp(e,g,t);else if(e.tag===19)mp(e,g,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(rt(Zt,n),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(g=t.child,l=null;g!==null;)e=g.alternate,e!==null&&wi(e)===null&&(l=g),g=g.sibling;g=l,g===null?(l=t.child,t.child=null):(l=g.sibling,g.sibling=null),mc(t,!1,l,g,o);break;case"backwards":for(g=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&wi(e)===null){t.child=l;break}e=l.sibling,l.sibling=g,g=l,l=e}mc(t,!0,g,null,o);break;case"together":mc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function li(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vn(e,t,g){if(e!==null&&(t.dependencies=e.dependencies),Kl|=t.lanes,(g&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(Ie(153));if(t.child!==null){for(e=t.child,g=rl(e,e.pendingProps),t.child=g,g.return=t;e.sibling!==null;)e=e.sibling,g=g.sibling=rl(e,e.pendingProps),g.return=t;g.sibling=null}return t.child}function gR(e,t,g){switch(t.tag){case 3:vf(t),To();break;case 5:gf(t);break;case 1:sg(t.type)&&Xi(t);break;case 4:XA(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,l=t.memoizedProps.value;rt(Yi,n._currentValue),n._currentValue=l;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(rt(Zt,Zt.current&1),t.flags|=128,null):(g&t.child.childLanes)!==0?Rf(e,t,g):(rt(Zt,Zt.current&1),e=Vn(e,t,g),e!==null?e.sibling:null);rt(Zt,Zt.current&1);break;case 19:if(n=(g&t.childLanes)!==0,(e.flags&128)!==0){if(n)return Xf(e,t,g);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),rt(Zt,Zt.current),n)break;return null;case 22:case 23:return t.lanes=0,Wf(e,t,g)}return Vn(e,t,g)}var kf,uu,Jf,Yf;kf=function(e,t){for(var g=t.child;g!==null;){if(g.tag===5||g.tag===6)e.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break;for(;g.sibling===null;){if(g.return===null||g.return===t)return;g=g.return}g.sibling.return=g.return,g=g.sibling}};uu=function(){};Jf=function(e,t,g,n){var l=e.memoizedProps;if(l!==n){e=t.stateNode,kl(rn.current);var o=null;switch(g){case"input":l=wd(e,l),n=wd(e,n),o=[];break;case"select":l=Gt({},l,{value:void 0}),n=Gt({},n,{value:void 0}),o=[];break;case"textarea":l=Kd(e,l),n=Kd(e,n),o=[];break;default:typeof l.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=vi)}zd(g,n);var I;g=null;for(i in l)if(!n.hasOwnProperty(i)&&l.hasOwnProperty(i)&&l[i]!=null)if(i==="style"){var r=l[i];for(I in r)r.hasOwnProperty(I)&&(g||(g={}),g[I]="")}else i!=="dangerouslySetInnerHTML"&&i!=="children"&&i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ar.hasOwnProperty(i)?o||(o=[]):(o=o||[]).push(i,null));for(i in n){var C=n[i];if(r=l!=null?l[i]:void 0,n.hasOwnProperty(i)&&C!==r&&(C!=null||r!=null))if(i==="style")if(r){for(I in r)!r.hasOwnProperty(I)||C&&C.hasOwnProperty(I)||(g||(g={}),g[I]="");for(I in C)C.hasOwnProperty(I)&&r[I]!==C[I]&&(g||(g={}),g[I]=C[I])}else g||(o||(o=[]),o.push(i,g)),g=C;else i==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,r=r?r.__html:void 0,C!=null&&r!==C&&(o=o||[]).push(i,C)):i==="children"?typeof C!="string"&&typeof C!="number"||(o=o||[]).push(i,""+C):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&(Ar.hasOwnProperty(i)?(C!=null&&i==="onScroll"&&at("scroll",e),o||r===C||(o=[])):(o=o||[]).push(i,C))}g&&(o=o||[]).push("style",g);var i=o;(t.updateQueue=i)&&(t.flags|=4)}};Yf=function(e,t,g,n){g!==n&&(t.flags|=4)};function VI(e,t){if(!ut)switch(e.tailMode){case"hidden":t=e.tail;for(var g=null;t!==null;)t.alternate!==null&&(g=t),t=t.sibling;g===null?e.tail=null:g.sibling=null;break;case"collapsed":g=e.tail;for(var n=null;g!==null;)g.alternate!==null&&(n=g),g=g.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,g=0,n=0;if(t)for(var l=e.child;l!==null;)g|=l.lanes|l.childLanes,n|=l.subtreeFlags&14680064,n|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)g|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=g,t}function nR(e,t,g){var n=t.pendingProps;switch(BA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(t),null;case 1:return sg(t.type)&&Ri(),jt(t),null;case 3:return n=t.stateNode,Uo(),st(ag),st(qt),JA(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(yC(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Dg!==null&&(fu(Dg),Dg=null))),uu(e,t),jt(t),null;case 5:kA(t);var l=kl(Vr.current);if(g=t.type,e!==null&&t.stateNode!=null)Jf(e,t,g,n,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ie(166));return jt(t),null}if(e=kl(rn.current),yC(t)){n=t.stateNode,g=t.type;var o=t.memoizedProps;switch(n[nn]=t,n[Sr]=o,e=(t.mode&1)!==0,g){case"dialog":at("cancel",n),at("close",n);break;case"iframe":case"object":case"embed":at("load",n);break;case"video":case"audio":for(l=0;l<LI.length;l++)at(LI[l],n);break;case"source":at("error",n);break;case"img":case"image":case"link":at("error",n),at("load",n);break;case"details":at("toggle",n);break;case"input":Sm(n,o),at("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},at("invalid",n);break;case"textarea":Vm(n,o),at("invalid",n)}zd(g,o),l=null;for(var I in o)if(o.hasOwnProperty(I)){var r=o[I];I==="children"?typeof r=="string"?n.textContent!==r&&(o.suppressHydrationWarning!==!0&&BC(n.textContent,r,e),l=["children",r]):typeof r=="number"&&n.textContent!==""+r&&(o.suppressHydrationWarning!==!0&&BC(n.textContent,r,e),l=["children",""+r]):Ar.hasOwnProperty(I)&&r!=null&&I==="onScroll"&&at("scroll",n)}switch(g){case"input":AC(n),Wm(n,o,!0);break;case"textarea":AC(n),vm(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=vi)}n=l,t.updateQueue=n,n!==null&&(t.flags|=4)}else{I=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=oG(g)),e==="http://www.w3.org/1999/xhtml"?g==="script"?(e=I.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=I.createElement(g,{is:n.is}):(e=I.createElement(g),g==="select"&&(I=e,n.multiple?I.multiple=!0:n.size&&(I.size=n.size))):e=I.createElementNS(e,g),e[nn]=t,e[Sr]=n,kf(e,t,!1,!1),t.stateNode=e;e:{switch(I=Md(g,n),g){case"dialog":at("cancel",e),at("close",e),l=n;break;case"iframe":case"object":case"embed":at("load",e),l=n;break;case"video":case"audio":for(l=0;l<LI.length;l++)at(LI[l],e);l=n;break;case"source":at("error",e),l=n;break;case"img":case"image":case"link":at("error",e),at("load",e),l=n;break;case"details":at("toggle",e),l=n;break;case"input":Sm(e,n),l=wd(e,n),at("invalid",e);break;case"option":l=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},l=Gt({},n,{value:void 0}),at("invalid",e);break;case"textarea":Vm(e,n),l=Kd(e,n),at("invalid",e);break;default:l=n}zd(g,l),r=l;for(o in r)if(r.hasOwnProperty(o)){var C=r[o];o==="style"?CG(e,C):o==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&IG(e,C)):o==="children"?typeof C=="string"?(g!=="textarea"||C!=="")&&mr(e,C):typeof C=="number"&&mr(e,""+C):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ar.hasOwnProperty(o)?C!=null&&o==="onScroll"&&at("scroll",e):C!=null&&CA(e,o,C,I))}switch(g){case"input":AC(e),Wm(e,n,!1);break;case"textarea":AC(e),vm(e);break;case"option":n.value!=null&&e.setAttribute("value",""+al(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?ko(e,!!n.multiple,o,!1):n.defaultValue!=null&&ko(e,!!n.multiple,n.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=vi)}switch(g){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jt(t),null;case 6:if(e&&t.stateNode!=null)Yf(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ie(166));if(g=kl(Vr.current),kl(rn.current),yC(t)){if(n=t.stateNode,g=t.memoizedProps,n[nn]=t,(o=n.nodeValue!==g)&&(e=Gg,e!==null))switch(e.tag){case 3:BC(n.nodeValue,g,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&BC(n.nodeValue,g,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(g.nodeType===9?g:g.ownerDocument).createTextNode(n),n[nn]=t,t.stateNode=n}return jt(t),null;case 13:if(st(Zt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ut&&hg!==null&&(t.mode&1)!==0&&(t.flags&128)===0)jG(),To(),t.flags|=98560,o=!1;else if(o=yC(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(Ie(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ie(317));o[nn]=t}else To(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;jt(t),o=!1}else Dg!==null&&(fu(Dg),Dg=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=g,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Zt.current&1)!==0?Xt===0&&(Xt=3):LA())),t.updateQueue!==null&&(t.flags|=4),jt(t),null);case 4:return Uo(),uu(e,t),e===null&&Br(t.stateNode.containerInfo),jt(t),null;case 10:return VA(t.type._context),jt(t),null;case 17:return sg(t.type)&&Ri(),jt(t),null;case 19:if(st(Zt),o=t.memoizedState,o===null)return jt(t),null;if(n=(t.flags&128)!==0,I=o.rendering,I===null)if(n)VI(o,!1);else{if(Xt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(I=wi(e),I!==null){for(t.flags|=128,VI(o,!1),n=I.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=g,g=t.child;g!==null;)o=g,e=n,o.flags&=14680066,I=o.alternate,I===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=I.childLanes,o.lanes=I.lanes,o.child=I.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=I.memoizedProps,o.memoizedState=I.memoizedState,o.updateQueue=I.updateQueue,o.type=I.type,e=I.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),g=g.sibling;return rt(Zt,Zt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Bt()>Qo&&(t.flags|=128,n=!0,VI(o,!1),t.lanes=4194304)}else{if(!n)if(e=wi(I),e!==null){if(t.flags|=128,n=!0,g=e.updateQueue,g!==null&&(t.updateQueue=g,t.flags|=4),VI(o,!0),o.tail===null&&o.tailMode==="hidden"&&!I.alternate&&!ut)return jt(t),null}else 2*Bt()-o.renderingStartTime>Qo&&g!==1073741824&&(t.flags|=128,n=!0,VI(o,!1),t.lanes=4194304);o.isBackwards?(I.sibling=t.child,t.child=I):(g=o.last,g!==null?g.sibling=I:t.child=I,o.last=I)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Bt(),t.sibling=null,g=Zt.current,rt(Zt,n?g&1|2:g&1),t):(jt(t),null);case 22:case 23:return TA(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(bg&1073741824)!==0&&(jt(t),t.subtreeFlags&6&&(t.flags|=8192)):jt(t),null;case 24:return null;case 25:return null}throw Error(Ie(156,t.tag))}function lR(e,t){switch(BA(t),t.tag){case 1:return sg(t.type)&&Ri(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Uo(),st(ag),st(qt),JA(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return kA(t),null;case 13:if(st(Zt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ie(340));To()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(Zt),null;case 4:return Uo(),null;case 10:return VA(t.type._context),null;case 22:case 23:return TA(),null;case 24:return null;default:return null}}var VC=!1,$t=!1,oR=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Vo(e,t){var g=e.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(n){ft(e,t,n)}else g.current=null}function Au(e,t,g){try{g()}catch(n){ft(e,t,n)}}var pp=!1;function IR(e,t){if($d=Si,e=wG(),GA(e)){if("selectionStart"in e)var g={start:e.selectionStart,end:e.selectionEnd};else e:{g=(g=e.ownerDocument)&&g.defaultView||window;var n=g.getSelection&&g.getSelection();if(n&&n.rangeCount!==0){g=n.anchorNode;var l=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{g.nodeType,o.nodeType}catch{g=null;break e}var I=0,r=-1,C=-1,i=0,a=0,c=e,s=null;t:for(;;){for(var m;c!==g||l!==0&&c.nodeType!==3||(r=I+l),c!==o||n!==0&&c.nodeType!==3||(C=I+n),c.nodeType===3&&(I+=c.nodeValue.length),(m=c.firstChild)!==null;)s=c,c=m;for(;;){if(c===e)break t;if(s===g&&++i===l&&(r=I),s===o&&++a===n&&(C=I),(m=c.nextSibling)!==null)break;c=s,s=c.parentNode}c=m}g=r===-1||C===-1?null:{start:r,end:C}}else g=null}g=g||{start:0,end:0}}else g=null;for(qd={focusedElem:e,selectionRange:g},Si=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var A=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var d=A.memoizedProps,h=A.memoizedState,Z=t.stateNode,u=Z.getSnapshotBeforeUpdate(t.elementType===t.type?d:Lg(t.type,d),h);Z.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(G){ft(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return A=pp,pp=!1,A}function tr(e,t,g){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&e)===e){var o=l.destroy;l.destroy=void 0,o!==void 0&&Au(t,g,o)}l=l.next}while(l!==n)}}function sa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var g=t=t.next;do{if((g.tag&e)===e){var n=g.create;g.destroy=n()}g=g.next}while(g!==t)}}function mu(e){var t=e.ref;if(t!==null){var g=e.stateNode;switch(e.tag){case 5:e=g;break;default:e=g}typeof t=="function"?t(e):t.current=e}}function xf(e){var t=e.alternate;t!==null&&(e.alternate=null,xf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nn],delete t[Sr],delete t[gu],delete t[Mv],delete t[Tv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hf(e){return e.tag===5||e.tag===3||e.tag===4}function bp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pu(e,t,g){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?g.nodeType===8?g.parentNode.insertBefore(e,t):g.insertBefore(e,t):(g.nodeType===8?(t=g.parentNode,t.insertBefore(e,g)):(t=g,t.appendChild(e)),g=g._reactRootContainer,g!=null||t.onclick!==null||(t.onclick=vi));else if(n!==4&&(e=e.child,e!==null))for(pu(e,t,g),e=e.sibling;e!==null;)pu(e,t,g),e=e.sibling}function bu(e,t,g){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?g.insertBefore(e,t):g.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(bu(e,t,g),e=e.sibling;e!==null;)bu(e,t,g),e=e.sibling}var Kt=null,Ug=!1;function Fn(e,t,g){for(g=g.child;g!==null;)wf(e,t,g),g=g.sibling}function wf(e,t,g){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(na,g)}catch{}switch(g.tag){case 5:$t||Vo(g,t);case 6:var n=Kt,l=Ug;Kt=null,Fn(e,t,g),Kt=n,Ug=l,Kt!==null&&(Ug?(e=Kt,g=g.stateNode,e.nodeType===8?e.parentNode.removeChild(g):e.removeChild(g)):Kt.removeChild(g.stateNode));break;case 18:Kt!==null&&(Ug?(e=Kt,g=g.stateNode,e.nodeType===8?ic(e.parentNode,g):e.nodeType===1&&ic(e,g),hr(e)):ic(Kt,g.stateNode));break;case 4:n=Kt,l=Ug,Kt=g.stateNode.containerInfo,Ug=!0,Fn(e,t,g),Kt=n,Ug=l;break;case 0:case 11:case 14:case 15:if(!$t&&(n=g.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){l=n=n.next;do{var o=l,I=o.destroy;o=o.tag,I!==void 0&&((o&2)!==0||(o&4)!==0)&&Au(g,t,I),l=l.next}while(l!==n)}Fn(e,t,g);break;case 1:if(!$t&&(Vo(g,t),n=g.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=g.memoizedProps,n.state=g.memoizedState,n.componentWillUnmount()}catch(r){ft(g,t,r)}Fn(e,t,g);break;case 21:Fn(e,t,g);break;case 22:g.mode&1?($t=(n=$t)||g.memoizedState!==null,Fn(e,t,g),$t=n):Fn(e,t,g);break;default:Fn(e,t,g)}}function Zp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var g=e.stateNode;g===null&&(g=e.stateNode=new oR),t.forEach(function(n){var l=AR.bind(null,e,n);g.has(n)||(g.add(n),n.then(l,l))})}}function zg(e,t){var g=t.deletions;if(g!==null)for(var n=0;n<g.length;n++){var l=g[n];try{var o=e,I=t,r=I;e:for(;r!==null;){switch(r.tag){case 5:Kt=r.stateNode,Ug=!1;break e;case 3:Kt=r.stateNode.containerInfo,Ug=!0;break e;case 4:Kt=r.stateNode.containerInfo,Ug=!0;break e}r=r.return}if(Kt===null)throw Error(Ie(160));wf(o,I,l),Kt=null,Ug=!1;var C=l.alternate;C!==null&&(C.return=null),l.return=null}catch(i){ft(l,t,i)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nf(t,e),t=t.sibling}function Nf(e,t){var g=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zg(t,e),$g(e),n&4){try{tr(3,e,e.return),sa(3,e)}catch(d){ft(e,e.return,d)}try{tr(5,e,e.return)}catch(d){ft(e,e.return,d)}}break;case 1:zg(t,e),$g(e),n&512&&g!==null&&Vo(g,g.return);break;case 5:if(zg(t,e),$g(e),n&512&&g!==null&&Vo(g,g.return),e.flags&32){var l=e.stateNode;try{mr(l,"")}catch(d){ft(e,e.return,d)}}if(n&4&&(l=e.stateNode,l!=null)){var o=e.memoizedProps,I=g!==null?g.memoizedProps:o,r=e.type,C=e.updateQueue;if(e.updateQueue=null,C!==null)try{r==="input"&&o.type==="radio"&&o.name!=null&&nG(l,o),Md(r,I);var i=Md(r,o);for(I=0;I<C.length;I+=2){var a=C[I],c=C[I+1];a==="style"?CG(l,c):a==="dangerouslySetInnerHTML"?IG(l,c):a==="children"?mr(l,c):CA(l,a,c,i)}switch(r){case"input":Nd(l,o);break;case"textarea":lG(l,o);break;case"select":var s=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?ko(l,!!o.multiple,m,!1):s!==!!o.multiple&&(o.defaultValue!=null?ko(l,!!o.multiple,o.defaultValue,!0):ko(l,!!o.multiple,o.multiple?[]:"",!1))}l[Sr]=o}catch(d){ft(e,e.return,d)}}break;case 6:if(zg(t,e),$g(e),n&4){if(e.stateNode===null)throw Error(Ie(162));l=e.stateNode,o=e.memoizedProps;try{l.nodeValue=o}catch(d){ft(e,e.return,d)}}break;case 3:if(zg(t,e),$g(e),n&4&&g!==null&&g.memoizedState.isDehydrated)try{hr(t.containerInfo)}catch(d){ft(e,e.return,d)}break;case 4:zg(t,e),$g(e);break;case 13:zg(t,e),$g(e),l=e.child,l.flags&8192&&(o=l.memoizedState!==null,l.stateNode.isHidden=o,!o||l.alternate!==null&&l.alternate.memoizedState!==null||(zA=Bt())),n&4&&Zp(e);break;case 22:if(a=g!==null&&g.memoizedState!==null,e.mode&1?($t=(i=$t)||a,zg(t,e),$t=i):zg(t,e),$g(e),n&8192){if(i=e.memoizedState!==null,(e.stateNode.isHidden=i)&&!a&&(e.mode&1)!==0)for(pe=e,a=e.child;a!==null;){for(c=pe=a;pe!==null;){switch(s=pe,m=s.child,s.tag){case 0:case 11:case 14:case 15:tr(4,s,s.return);break;case 1:Vo(s,s.return);var A=s.stateNode;if(typeof A.componentWillUnmount=="function"){n=s,g=s.return;try{t=n,A.props=t.memoizedProps,A.state=t.memoizedState,A.componentWillUnmount()}catch(d){ft(n,g,d)}}break;case 5:Vo(s,s.return);break;case 22:if(s.memoizedState!==null){Gp(c);continue}}m!==null?(m.return=s,pe=m):Gp(c)}a=a.sibling}e:for(a=null,c=e;;){if(c.tag===5){if(a===null){a=c;try{l=c.stateNode,i?(o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(r=c.stateNode,C=c.memoizedProps.style,I=C!=null&&C.hasOwnProperty("display")?C.display:null,r.style.display=rG("display",I))}catch(d){ft(e,e.return,d)}}}else if(c.tag===6){if(a===null)try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(d){ft(e,e.return,d)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;a===c&&(a=null),c=c.return}a===c&&(a=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:zg(t,e),$g(e),n&4&&Zp(e);break;case 21:break;default:zg(t,e),$g(e)}}function $g(e){var t=e.flags;if(t&2){try{e:{for(var g=e.return;g!==null;){if(Hf(g)){var n=g;break e}g=g.return}throw Error(Ie(160))}switch(n.tag){case 5:var l=n.stateNode;n.flags&32&&(mr(l,""),n.flags&=-33);var o=bp(e);bu(e,o,l);break;case 3:case 4:var I=n.stateNode.containerInfo,r=bp(e);pu(e,r,I);break;default:throw Error(Ie(161))}}catch(C){ft(e,e.return,C)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rR(e,t,g){pe=e,Ff(e)}function Ff(e,t,g){for(var n=(e.mode&1)!==0;pe!==null;){var l=pe,o=l.child;if(l.tag===22&&n){var I=l.memoizedState!==null||VC;if(!I){var r=l.alternate,C=r!==null&&r.memoizedState!==null||$t;r=VC;var i=$t;if(VC=I,($t=C)&&!i)for(pe=l;pe!==null;)I=pe,C=I.child,I.tag===22&&I.memoizedState!==null?fp(l):C!==null?(C.return=I,pe=C):fp(l);for(;o!==null;)pe=o,Ff(o),o=o.sibling;pe=l,VC=r,$t=i}hp(e)}else(l.subtreeFlags&8772)!==0&&o!==null?(o.return=l,pe=o):hp(e)}}function hp(e){for(;pe!==null;){var t=pe;if((t.flags&8772)!==0){var g=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:$t||sa(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!$t)if(g===null)n.componentDidMount();else{var l=t.elementType===t.type?g.memoizedProps:Lg(t.type,g.memoizedProps);n.componentDidUpdate(l,g.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&np(t,o,n);break;case 3:var I=t.updateQueue;if(I!==null){if(g=null,t.child!==null)switch(t.child.tag){case 5:g=t.child.stateNode;break;case 1:g=t.child.stateNode}np(t,I,g)}break;case 5:var r=t.stateNode;if(g===null&&t.flags&4){g=r;var C=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&g.focus();break;case"img":C.src&&(g.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var i=t.alternate;if(i!==null){var a=i.memoizedState;if(a!==null){var c=a.dehydrated;c!==null&&hr(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}$t||t.flags&512&&mu(t)}catch(s){ft(t,t.return,s)}}if(t===e){pe=null;break}if(g=t.sibling,g!==null){g.return=t.return,pe=g;break}pe=t.return}}function Gp(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var g=t.sibling;if(g!==null){g.return=t.return,pe=g;break}pe=t.return}}function fp(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var g=t.return;try{sa(4,t)}catch(C){ft(t,g,C)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var l=t.return;try{n.componentDidMount()}catch(C){ft(t,l,C)}}var o=t.return;try{mu(t)}catch(C){ft(t,o,C)}break;case 5:var I=t.return;try{mu(t)}catch(C){ft(t,I,C)}}}catch(C){ft(t,t.return,C)}if(t===e){pe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,pe=r;break}pe=t.return}}var CR=Math.ceil,Ki=kn.ReactCurrentDispatcher,KA=kn.ReactCurrentOwner,Hg=kn.ReactCurrentBatchConfig,Pe=0,Yt=null,Vt=null,Mt=0,bg=0,vo=ul(0),Xt=0,kr=null,Kl=0,ca=0,EA=0,gr=null,Cg=null,zA=0,Qo=1/0,un=null,Ei=!1,Zu=null,ol=null,vC=!1,On=null,zi=0,nr=0,hu=null,oi=-1,Ii=0;function tg(){return(Pe&6)!==0?Bt():oi!==-1?oi:oi=Bt()}function Il(e){return(e.mode&1)===0?1:(Pe&2)!==0&&Mt!==0?Mt&-Mt:Uv.transition!==null?(Ii===0&&(Ii=hG()),Ii):(e=et,e!==0||(e=window.event,e=e===void 0?16:VG(e.type)),e)}function jg(e,t,g,n){if(50<nr)throw nr=0,hu=null,Error(Ie(185));Qr(e,g,n),((Pe&2)===0||e!==Yt)&&(e===Yt&&((Pe&2)===0&&(ca|=g),Xt===4&&Qn(e,Mt)),cg(e,n),g===1&&Pe===0&&(t.mode&1)===0&&(Qo=Bt()+500,Ca&&Al()))}function cg(e,t){var g=e.callbackNode;UV(e,t);var n=yi(e,e===Yt?Mt:0);if(n===0)g!==null&&km(g),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(g!=null&&km(g),t===1)e.tag===0?Lv(Bp.bind(null,e)):DG(Bp.bind(null,e)),Ev(function(){(Pe&6)===0&&Al()}),g=null;else{switch(GG(n)){case 1:g=dA;break;case 4:g=bG;break;case 16:g=Bi;break;case 536870912:g=ZG;break;default:g=Bi}g=Df(g,Kf.bind(null,e))}e.callbackPriority=t,e.callbackNode=g}}function Kf(e,t){if(oi=-1,Ii=0,(Pe&6)!==0)throw Error(Ie(327));var g=e.callbackNode;if(wo()&&e.callbackNode!==g)return null;var n=yi(e,e===Yt?Mt:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=Mi(e,n);else{t=n;var l=Pe;Pe|=2;var o=zf();(Yt!==e||Mt!==t)&&(un=null,Qo=Bt()+500,Yl(e,t));do try{sR();break}catch(r){Ef(e,r)}while(1);WA(),Ki.current=o,Pe=l,Vt!==null?t=0:(Yt=null,Mt=0,t=Xt)}if(t!==0){if(t===2&&(l=Qd(e),l!==0&&(n=l,t=Gu(e,l))),t===1)throw g=kr,Yl(e,0),Qn(e,n),cg(e,Bt()),g;if(t===6)Qn(e,n);else{if(l=e.current.alternate,(n&30)===0&&!iR(l)&&(t=Mi(e,n),t===2&&(o=Qd(e),o!==0&&(n=o,t=Gu(e,o))),t===1))throw g=kr,Yl(e,0),Qn(e,n),cg(e,Bt()),g;switch(e.finishedWork=l,e.finishedLanes=n,t){case 0:case 1:throw Error(Ie(345));case 2:Sl(e,Cg,un);break;case 3:if(Qn(e,n),(n&130023424)===n&&(t=zA+500-Bt(),10<t)){if(yi(e,0)!==0)break;if(l=e.suspendedLanes,(l&n)!==n){tg(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=tu(Sl.bind(null,e,Cg,un),t);break}Sl(e,Cg,un);break;case 4:if(Qn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,l=-1;0<n;){var I=31-Pg(n);o=1<<I,I=t[I],I>l&&(l=I),n&=~o}if(n=l,n=Bt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*CR(n/1960))-n,10<n){e.timeoutHandle=tu(Sl.bind(null,e,Cg,un),n);break}Sl(e,Cg,un);break;case 5:Sl(e,Cg,un);break;default:throw Error(Ie(329))}}}return cg(e,Bt()),e.callbackNode===g?Kf.bind(null,e):null}function Gu(e,t){var g=gr;return e.current.memoizedState.isDehydrated&&(Yl(e,t).flags|=256),e=Mi(e,t),e!==2&&(t=Cg,Cg=g,t!==null&&fu(t)),e}function fu(e){Cg===null?Cg=e:Cg.push.apply(Cg,e)}function iR(e){for(var t=e;;){if(t.flags&16384){var g=t.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var n=0;n<g.length;n++){var l=g[n],o=l.getSnapshot;l=l.value;try{if(!Og(o(),l))return!1}catch{return!1}}}if(g=t.child,t.subtreeFlags&16384&&g!==null)g.return=t,t=g;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qn(e,t){for(t&=~EA,t&=~ca,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var g=31-Pg(t),n=1<<g;e[g]=-1,t&=~n}}function Bp(e){if((Pe&6)!==0)throw Error(Ie(327));wo();var t=yi(e,0);if((t&1)===0)return cg(e,Bt()),null;var g=Mi(e,t);if(e.tag!==0&&g===2){var n=Qd(e);n!==0&&(t=n,g=Gu(e,n))}if(g===1)throw g=kr,Yl(e,0),Qn(e,t),cg(e,Bt()),g;if(g===6)throw Error(Ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sl(e,Cg,un),cg(e,Bt()),null}function MA(e,t){var g=Pe;Pe|=1;try{return e(t)}finally{Pe=g,Pe===0&&(Qo=Bt()+500,Ca&&Al())}}function El(e){On!==null&&On.tag===0&&(Pe&6)===0&&wo();var t=Pe;Pe|=1;var g=Hg.transition,n=et;try{if(Hg.transition=null,et=1,e)return e()}finally{et=n,Hg.transition=g,Pe=t,(Pe&6)===0&&Al()}}function TA(){bg=vo.current,st(vo)}function Yl(e,t){e.finishedWork=null,e.finishedLanes=0;var g=e.timeoutHandle;if(g!==-1&&(e.timeoutHandle=-1,Kv(g)),Vt!==null)for(g=Vt.return;g!==null;){var n=g;switch(BA(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ri();break;case 3:Uo(),st(ag),st(qt),JA();break;case 5:kA(n);break;case 4:Uo();break;case 13:st(Zt);break;case 19:st(Zt);break;case 10:VA(n.type._context);break;case 22:case 23:TA()}g=g.return}if(Yt=e,Vt=e=rl(e.current,null),Mt=bg=t,Xt=0,kr=null,EA=ca=Kl=0,Cg=gr=null,Xl!==null){for(t=0;t<Xl.length;t++)if(g=Xl[t],n=g.interleaved,n!==null){g.interleaved=null;var l=n.next,o=g.pending;if(o!==null){var I=o.next;o.next=l,n.next=I}g.pending=n}Xl=null}return e}function Ef(e,t){do{var g=Vt;try{if(WA(),gi.current=Fi,Ni){for(var n=ht.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}Ni=!1}if(Fl=0,Jt=Rt=ht=null,er=!1,vr=0,KA.current=null,g===null||g.return===null){Xt=1,kr=t,Vt=null;break}e:{var o=e,I=g.return,r=g,C=t;if(t=Mt,r.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var i=C,a=r,c=a.tag;if((a.mode&1)===0&&(c===0||c===11||c===15)){var s=a.alternate;s?(a.updateQueue=s.updateQueue,a.memoizedState=s.memoizedState,a.lanes=s.lanes):(a.updateQueue=null,a.memoizedState=null)}var m=ap(I);if(m!==null){m.flags&=-257,sp(m,I,r,o,t),m.mode&1&&ip(o,i,t),t=m,C=i;var A=t.updateQueue;if(A===null){var d=new Set;d.add(C),t.updateQueue=d}else A.add(C);break e}else{if((t&1)===0){ip(o,i,t),LA();break e}C=Error(Ie(426))}}else if(ut&&r.mode&1){var h=ap(I);if(h!==null){(h.flags&65536)===0&&(h.flags|=256),sp(h,I,r,o,t),yA(Do(C,r));break e}}o=C=Do(C,r),Xt!==4&&(Xt=2),gr===null?gr=[o]:gr.push(o),o=I;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var Z=Bf(o,C,t);gp(o,Z);break e;case 1:r=C;var u=o.type,p=o.stateNode;if((o.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ol===null||!ol.has(p)))){o.flags|=65536,t&=-t,o.lanes|=t;var G=yf(o,r,t);gp(o,G);break e}}o=o.return}while(o!==null)}Tf(g)}catch(f){t=f,Vt===g&&g!==null&&(Vt=g=g.return);continue}break}while(1)}function zf(){var e=Ki.current;return Ki.current=Fi,e===null?Fi:e}function LA(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),Yt===null||(Kl&268435455)===0&&(ca&268435455)===0||Qn(Yt,Mt)}function Mi(e,t){var g=Pe;Pe|=2;var n=zf();(Yt!==e||Mt!==t)&&(un=null,Yl(e,t));do try{aR();break}catch(l){Ef(e,l)}while(1);if(WA(),Pe=g,Ki.current=n,Vt!==null)throw Error(Ie(261));return Yt=null,Mt=0,Xt}function aR(){for(;Vt!==null;)Mf(Vt)}function sR(){for(;Vt!==null&&!wV();)Mf(Vt)}function Mf(e){var t=Uf(e.alternate,e,bg);e.memoizedProps=e.pendingProps,t===null?Tf(e):Vt=t,KA.current=null}function Tf(e){var t=e;do{var g=t.alternate;if(e=t.return,(t.flags&32768)===0){if(g=nR(g,t,bg),g!==null){Vt=g;return}}else{if(g=lR(g,t),g!==null){g.flags&=32767,Vt=g;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xt=6,Vt=null;return}}if(t=t.sibling,t!==null){Vt=t;return}Vt=t=e}while(t!==null);Xt===0&&(Xt=5)}function Sl(e,t,g){var n=et,l=Hg.transition;try{Hg.transition=null,et=1,cR(e,t,g,n)}finally{Hg.transition=l,et=n}return null}function cR(e,t,g,n){do wo();while(On!==null);if((Pe&6)!==0)throw Error(Ie(327));g=e.finishedWork;var l=e.finishedLanes;if(g===null)return null;if(e.finishedWork=null,e.finishedLanes=0,g===e.current)throw Error(Ie(177));e.callbackNode=null,e.callbackPriority=0;var o=g.lanes|g.childLanes;if(DV(e,o),e===Yt&&(Vt=Yt=null,Mt=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||vC||(vC=!0,Df(Bi,function(){return wo(),null})),o=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||o){o=Hg.transition,Hg.transition=null;var I=et;et=1;var r=Pe;Pe|=4,KA.current=null,IR(e,g),Nf(g,e),Jv(qd),Si=!!$d,qd=$d=null,e.current=g,rR(g),NV(),Pe=r,et=I,Hg.transition=o}else e.current=g;if(vC&&(vC=!1,On=e,zi=l),o=e.pendingLanes,o===0&&(ol=null),EV(g.stateNode),cg(e,Bt()),t!==null)for(n=e.onRecoverableError,g=0;g<t.length;g++)l=t[g],n(l.value,{componentStack:l.stack,digest:l.digest});if(Ei)throw Ei=!1,e=Zu,Zu=null,e;return(zi&1)!==0&&e.tag!==0&&wo(),o=e.pendingLanes,(o&1)!==0?e===hu?nr++:(nr=0,hu=e):nr=0,Al(),null}function wo(){if(On!==null){var e=GG(zi),t=Hg.transition,g=et;try{if(Hg.transition=null,et=16>e?16:e,On===null)var n=!1;else{if(e=On,On=null,zi=0,(Pe&6)!==0)throw Error(Ie(331));var l=Pe;for(Pe|=4,pe=e.current;pe!==null;){var o=pe,I=o.child;if((pe.flags&16)!==0){var r=o.deletions;if(r!==null){for(var C=0;C<r.length;C++){var i=r[C];for(pe=i;pe!==null;){var a=pe;switch(a.tag){case 0:case 11:case 15:tr(8,a,o)}var c=a.child;if(c!==null)c.return=a,pe=c;else for(;pe!==null;){a=pe;var s=a.sibling,m=a.return;if(xf(a),a===i){pe=null;break}if(s!==null){s.return=m,pe=s;break}pe=m}}}var A=o.alternate;if(A!==null){var d=A.child;if(d!==null){A.child=null;do{var h=d.sibling;d.sibling=null,d=h}while(d!==null)}}pe=o}}if((o.subtreeFlags&2064)!==0&&I!==null)I.return=o,pe=I;else e:for(;pe!==null;){if(o=pe,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:tr(9,o,o.return)}var Z=o.sibling;if(Z!==null){Z.return=o.return,pe=Z;break e}pe=o.return}}var u=e.current;for(pe=u;pe!==null;){I=pe;var p=I.child;if((I.subtreeFlags&2064)!==0&&p!==null)p.return=I,pe=p;else e:for(I=u;pe!==null;){if(r=pe,(r.flags&2048)!==0)try{switch(r.tag){case 0:case 11:case 15:sa(9,r)}}catch(f){ft(r,r.return,f)}if(r===I){pe=null;break e}var G=r.sibling;if(G!==null){G.return=r.return,pe=G;break e}pe=r.return}}if(Pe=l,Al(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(na,e)}catch{}n=!0}return n}finally{et=g,Hg.transition=t}}return!1}function yp(e,t,g){t=Do(g,t),t=Bf(e,t,1),e=ll(e,t,1),t=tg(),e!==null&&(Qr(e,1,t),cg(e,t))}function ft(e,t,g){if(e.tag===3)yp(e,e,g);else for(;t!==null;){if(t.tag===3){yp(t,e,g);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ol===null||!ol.has(n))){e=Do(g,e),e=yf(t,e,1),t=ll(t,e,1),e=tg(),t!==null&&(Qr(t,1,e),cg(t,e));break}}t=t.return}}function dR(e,t,g){var n=e.pingCache;n!==null&&n.delete(t),t=tg(),e.pingedLanes|=e.suspendedLanes&g,Yt===e&&(Mt&g)===g&&(Xt===4||Xt===3&&(Mt&130023424)===Mt&&500>Bt()-zA?Yl(e,0):EA|=g),cg(e,t)}function Lf(e,t){t===0&&((e.mode&1)===0?t=1:(t=bC,bC<<=1,(bC&130023424)===0&&(bC=4194304)));var g=tg();e=Wn(e,t),e!==null&&(Qr(e,t,g),cg(e,g))}function uR(e){var t=e.memoizedState,g=0;t!==null&&(g=t.retryLane),Lf(e,g)}function AR(e,t){var g=0;switch(e.tag){case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(g=l.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Ie(314))}n!==null&&n.delete(t),Lf(e,g)}var Uf;Uf=function(e,t,g){if(e!==null)if(e.memoizedProps!==t.pendingProps||ag.current)ig=!0;else{if((e.lanes&g)===0&&(t.flags&128)===0)return ig=!1,gR(e,t,g);ig=(e.flags&131072)!==0}else ig=!1,ut&&(t.flags&1048576)!==0&&QG(t,Ji,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;li(e,t),e=t.pendingProps;var l=Mo(t,qt.current);Ho(t,g),l=xA(null,t,n,e,l,g);var o=HA();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,sg(n)?(o=!0,Xi(t)):o=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,RA(t),l.updater=ia,t.stateNode=l,l._reactInternals=t,Cu(t,n,e,g),t=su(null,t,n,!0,o,g)):(t.tag=0,ut&&o&&fA(t),eg(null,t,l,g),t=t.child),t;case 16:n=t.elementType;e:{switch(li(e,t),e=t.pendingProps,l=n._init,n=l(n._payload),t.type=n,l=t.tag=pR(n),e=Lg(n,e),l){case 0:t=au(null,t,n,e,g);break e;case 1:t=up(null,t,n,e,g);break e;case 11:t=cp(null,t,n,e,g);break e;case 14:t=dp(null,t,n,Lg(n.type,e),g);break e}throw Error(Ie(306,n,""))}return t;case 0:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Lg(n,l),au(e,t,n,l,g);case 1:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Lg(n,l),up(e,t,n,l,g);case 3:e:{if(vf(t),e===null)throw Error(Ie(387));n=t.pendingProps,o=t.memoizedState,l=o.element,_G(e,t),Hi(t,n,null,g);var I=t.memoizedState;if(n=I.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){l=Do(Error(Ie(423)),t),t=Ap(e,t,n,g,l);break e}else if(n!==l){l=Do(Error(Ie(424)),t),t=Ap(e,t,n,g,l);break e}else for(hg=nl(t.stateNode.containerInfo.firstChild),Gg=t,ut=!0,Dg=null,g=tf(t,null,n,g),t.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(To(),n===l){t=Vn(e,t,g);break e}eg(e,t,n,g)}t=t.child}return t;case 5:return gf(t),e===null&&ou(t),n=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,I=l.children,eu(n,l)?I=null:o!==null&&eu(n,o)&&(t.flags|=32),Vf(e,t),eg(e,t,I,g),t.child;case 6:return e===null&&ou(t),null;case 13:return Rf(e,t,g);case 4:return XA(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Lo(t,null,n,g):eg(e,t,n,g),t.child;case 11:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Lg(n,l),cp(e,t,n,l,g);case 7:return eg(e,t,t.pendingProps,g),t.child;case 8:return eg(e,t,t.pendingProps.children,g),t.child;case 12:return eg(e,t,t.pendingProps.children,g),t.child;case 10:e:{if(n=t.type._context,l=t.pendingProps,o=t.memoizedProps,I=l.value,rt(Yi,n._currentValue),n._currentValue=I,o!==null)if(Og(o.value,I)){if(o.children===l.children&&!ag.current){t=Vn(e,t,g);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var r=o.dependencies;if(r!==null){I=o.child;for(var C=r.firstContext;C!==null;){if(C.context===n){if(o.tag===1){C=Gn(-1,g&-g),C.tag=2;var i=o.updateQueue;if(i!==null){i=i.shared;var a=i.pending;a===null?C.next=C:(C.next=a.next,a.next=C),i.pending=C}}o.lanes|=g,C=o.alternate,C!==null&&(C.lanes|=g),Iu(o.return,g,t),r.lanes|=g;break}C=C.next}}else if(o.tag===10)I=o.type===t.type?null:o.child;else if(o.tag===18){if(I=o.return,I===null)throw Error(Ie(341));I.lanes|=g,r=I.alternate,r!==null&&(r.lanes|=g),Iu(I,g,t),I=o.sibling}else I=o.child;if(I!==null)I.return=o;else for(I=o;I!==null;){if(I===t){I=null;break}if(o=I.sibling,o!==null){o.return=I.return,I=o;break}I=I.return}o=I}eg(e,t,l.children,g),t=t.child}return t;case 9:return l=t.type,n=t.pendingProps.children,Ho(t,g),l=wg(l),n=n(l),t.flags|=1,eg(e,t,n,g),t.child;case 14:return n=t.type,l=Lg(n,t.pendingProps),l=Lg(n.type,l),dp(e,t,n,l,g);case 15:return Sf(e,t,t.type,t.pendingProps,g);case 17:return n=t.type,l=t.pendingProps,l=t.elementType===n?l:Lg(n,l),li(e,t),t.tag=1,sg(n)?(e=!0,Xi(t)):e=!1,Ho(t,g),qG(t,n,l),Cu(t,n,l,g),su(null,t,n,!0,e,g);case 19:return Xf(e,t,g);case 22:return Wf(e,t,g)}throw Error(Ie(156,t.tag))};function Df(e,t){return pG(e,t)}function mR(e,t,g,n){this.tag=e,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xg(e,t,g,n){return new mR(e,t,g,n)}function UA(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pR(e){if(typeof e=="function")return UA(e)?1:0;if(e!=null){if(e=e.$$typeof,e===aA)return 11;if(e===sA)return 14}return 2}function rl(e,t){var g=e.alternate;return g===null?(g=xg(e.tag,t,e.key,e.mode),g.elementType=e.elementType,g.type=e.type,g.stateNode=e.stateNode,g.alternate=e,e.alternate=g):(g.pendingProps=t,g.type=e.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=e.flags&14680064,g.childLanes=e.childLanes,g.lanes=e.lanes,g.child=e.child,g.memoizedProps=e.memoizedProps,g.memoizedState=e.memoizedState,g.updateQueue=e.updateQueue,t=e.dependencies,g.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},g.sibling=e.sibling,g.index=e.index,g.ref=e.ref,g}function ri(e,t,g,n,l,o){var I=2;if(n=e,typeof e=="function")UA(e)&&(I=1);else if(typeof e=="string")I=5;else e:switch(e){case bo:return xl(g.children,l,o,t);case iA:I=8,l|=8;break;case Jd:return e=xg(12,g,t,l|2),e.elementType=Jd,e.lanes=o,e;case Yd:return e=xg(13,g,t,l),e.elementType=Yd,e.lanes=o,e;case xd:return e=xg(19,g,t,l),e.elementType=xd,e.lanes=o,e;case eG:return da(g,l,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $h:I=10;break e;case qh:I=9;break e;case aA:I=11;break e;case sA:I=14;break e;case Tn:I=16,n=null;break e}throw Error(Ie(130,e==null?e:typeof e,""))}return t=xg(I,g,t,l),t.elementType=e,t.type=n,t.lanes=o,t}function xl(e,t,g,n){return e=xg(7,e,n,t),e.lanes=g,e}function da(e,t,g,n){return e=xg(22,e,n,t),e.elementType=eG,e.lanes=g,e.stateNode={isHidden:!1},e}function pc(e,t,g){return e=xg(6,e,null,t),e.lanes=g,e}function bc(e,t,g){return t=xg(4,e.children!==null?e.children:[],e.key,t),t.lanes=g,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bR(e,t,g,n,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$s(0),this.expirationTimes=$s(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$s(0),this.identifierPrefix=n,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function DA(e,t,g,n,l,o,I,r,C){return e=new bR(e,t,g,r,C),t===1?(t=1,o===!0&&(t|=8)):t=0,o=xg(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},RA(o),e}function ZR(e,t,g){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:po,key:n==null?null:""+n,children:e,containerInfo:t,implementation:g}}function Qf(e){if(!e)return sl;e=e._reactInternals;e:{if(jl(e)!==e||e.tag!==1)throw Error(Ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(sg(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ie(171))}if(e.tag===1){var g=e.type;if(sg(g))return UG(e,g,t)}return t}function Pf(e,t,g,n,l,o,I,r,C){return e=DA(g,n,!0,e,l,o,I,r,C),e.context=Qf(null),g=e.current,n=tg(),l=Il(g),o=Gn(n,l),o.callback=t!=null?t:null,ll(g,o,l),e.current.lanes=l,Qr(e,l,n),cg(e,n),e}function ua(e,t,g,n){var l=t.current,o=tg(),I=Il(l);return g=Qf(g),t.context===null?t.context=g:t.pendingContext=g,t=Gn(o,I),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ll(l,t,I),e!==null&&(jg(e,l,I,o),ti(e,l,I)),I}function Ti(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var g=e.retryLane;e.retryLane=g!==0&&g<t?g:t}}function QA(e,t){Sp(e,t),(e=e.alternate)&&Sp(e,t)}function hR(){return null}var jf=typeof reportError=="function"?reportError:function(e){console.error(e)};function PA(e){this._internalRoot=e}Aa.prototype.render=PA.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ie(409));ua(e,t,null,null)};Aa.prototype.unmount=PA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;El(function(){ua(null,e,null,null)}),t[Sn]=null}};function Aa(e){this._internalRoot=e}Aa.prototype.unstable_scheduleHydration=function(e){if(e){var t=yG();e={blockedOn:null,target:e,priority:t};for(var g=0;g<Dn.length&&t!==0&&t<Dn[g].priority;g++);Dn.splice(g,0,e),g===0&&WG(e)}};function jA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ma(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wp(){}function GR(e,t,g,n,l){if(l){if(typeof n=="function"){var o=n;n=function(){var i=Ti(I);o.call(i)}}var I=Pf(t,n,e,0,null,!1,!1,"",Wp);return e._reactRootContainer=I,e[Sn]=I.current,Br(e.nodeType===8?e.parentNode:e),El(),I}for(;l=e.lastChild;)e.removeChild(l);if(typeof n=="function"){var r=n;n=function(){var i=Ti(C);r.call(i)}}var C=DA(e,0,!1,null,null,!1,!1,"",Wp);return e._reactRootContainer=C,e[Sn]=C.current,Br(e.nodeType===8?e.parentNode:e),El(function(){ua(t,C,g,n)}),C}function pa(e,t,g,n,l){var o=g._reactRootContainer;if(o){var I=o;if(typeof l=="function"){var r=l;l=function(){var C=Ti(I);r.call(C)}}ua(t,I,e,l)}else I=GR(g,t,e,l,n);return Ti(I)}fG=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var g=TI(t.pendingLanes);g!==0&&(uA(t,g|1),cg(t,Bt()),(Pe&6)===0&&(Qo=Bt()+500,Al()))}break;case 13:El(function(){var n=Wn(e,1);if(n!==null){var l=tg();jg(n,e,1,l)}}),QA(e,1)}};AA=function(e){if(e.tag===13){var t=Wn(e,134217728);if(t!==null){var g=tg();jg(t,e,134217728,g)}QA(e,134217728)}};BG=function(e){if(e.tag===13){var t=Il(e),g=Wn(e,t);if(g!==null){var n=tg();jg(g,e,t,n)}QA(e,t)}};yG=function(){return et};SG=function(e,t){var g=et;try{return et=e,t()}finally{et=g}};Ld=function(e,t,g){switch(t){case"input":if(Nd(e,g),t=g.name,g.type==="radio"&&t!=null){for(g=e;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<g.length;t++){var n=g[t];if(n!==e&&n.form===e.form){var l=ra(n);if(!l)throw Error(Ie(90));gG(n),Nd(n,l)}}}break;case"textarea":lG(e,g);break;case"select":t=g.value,t!=null&&ko(e,!!g.multiple,t,!1)}};sG=MA;cG=El;var fR={usingClientEntryPoint:!1,Events:[jr,fo,ra,iG,aG,MA]},vI={findFiberByHostInstance:Rl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},BR={bundleType:vI.bundleType,version:vI.version,rendererPackageName:vI.rendererPackageName,rendererConfig:vI.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=AG(e),e===null?null:e.stateNode},findFiberByHostInstance:vI.findFiberByHostInstance||hR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var RC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!RC.isDisabled&&RC.supportsFiber)try{na=RC.inject(BR),In=RC}catch{}}Sg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fR;Sg.createPortal=function(e,t){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jA(t))throw Error(Ie(200));return ZR(e,t,null,g)};Sg.createRoot=function(e,t){if(!jA(e))throw Error(Ie(299));var g=!1,n="",l=jf;return t!=null&&(t.unstable_strictMode===!0&&(g=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=DA(e,1,!1,null,null,g,!1,n,l),e[Sn]=t.current,Br(e.nodeType===8?e.parentNode:e),new PA(t)};Sg.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ie(188)):(e=Object.keys(e).join(","),Error(Ie(268,e)));return e=AG(t),e=e===null?null:e.stateNode,e};Sg.flushSync=function(e){return El(e)};Sg.hydrate=function(e,t,g){if(!ma(t))throw Error(Ie(200));return pa(null,e,t,!0,g)};Sg.hydrateRoot=function(e,t,g){if(!jA(e))throw Error(Ie(405));var n=g!=null&&g.hydratedSources||null,l=!1,o="",I=jf;if(g!=null&&(g.unstable_strictMode===!0&&(l=!0),g.identifierPrefix!==void 0&&(o=g.identifierPrefix),g.onRecoverableError!==void 0&&(I=g.onRecoverableError)),t=Pf(t,null,e,1,g!=null?g:null,l,!1,o,I),e[Sn]=t.current,Br(e),n)for(e=0;e<n.length;e++)g=n[e],l=g._getVersion,l=l(g._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[g,l]:t.mutableSourceEagerHydrationData.push(g,l);return new Aa(t)};Sg.render=function(e,t,g){if(!ma(t))throw Error(Ie(200));return pa(null,e,t,!1,g)};Sg.unmountComponentAtNode=function(e){if(!ma(e))throw Error(Ie(40));return e._reactRootContainer?(El(function(){pa(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1};Sg.unstable_batchedUpdates=MA;Sg.unstable_renderSubtreeIntoContainer=function(e,t,g,n){if(!ma(g))throw Error(Ie(200));if(e==null||e._reactInternals===void 0)throw Error(Ie(38));return pa(e,t,g,!1,n)};Sg.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(g){console.error(g)}}t(),e.exports=Sg})(Dr);const UI=Eh(Dr.exports);var Vp=Dr.exports;Xd.createRoot=Vp.createRoot,Xd.hydrateRoot=Vp.hydrateRoot;var ba={exports:{}},Za={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yR=B.exports,SR=Symbol.for("react.element"),WR=Symbol.for("react.fragment"),VR=Object.prototype.hasOwnProperty,vR=yR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RR={key:!0,ref:!0,__self:!0,__source:!0};function Of(e,t,g){var n,l={},o=null,I=null;g!==void 0&&(o=""+g),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(I=t.ref);for(n in t)VR.call(t,n)&&!RR.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)l[n]===void 0&&(l[n]=t[n]);return{$$typeof:SR,type:e,key:o,ref:I,props:l,_owner:vR.current}}Za.Fragment=WR;Za.jsx=Of;Za.jsxs=Of;(function(e){e.exports=Za})(ba);const bn=ba.exports.Fragment,b=ba.exports.jsx,U=ba.exports.jsxs;function XR(e){const t=new Error(e);if(t.stack===void 0)try{throw t}catch{}return t}var kR=XR,Ee=kR;function JR(e){return!!e&&typeof e.then=="function"}var At=JR;function YR(e,t){if(e!=null)return e;throw Ee(t!=null?t:"Got unexpected null or undefined")}var mt=YR;function Fe(e,t,g){return t in e?Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}):e[t]=g,e}class ha{getValue(){throw Ee("BaseLoadable")}toPromise(){throw Ee("BaseLoadable")}valueMaybe(){throw Ee("BaseLoadable")}valueOrThrow(){throw Ee(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Ee("BaseLoadable")}promiseOrThrow(){throw Ee(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Ee("BaseLoadable")}errorOrThrow(){throw Ee(`Loadable expected error, but in "${this.state}" state`)}is(t){return t.state===this.state&&t.contents===this.contents}map(t){throw Ee("BaseLoadable")}}class xR extends ha{constructor(t){super(),Fe(this,"state","hasValue"),Fe(this,"contents",void 0),this.contents=t}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(t){try{const g=t(this.contents);return At(g)?zl(g):Po(g)?g:_r(g)}catch(g){return At(g)?zl(g.next(()=>this.map(t))):Ga(g)}}}class HR extends ha{constructor(t){super(),Fe(this,"state","hasError"),Fe(this,"contents",void 0),this.contents=t}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(t){return this}}class _f extends ha{constructor(t){super(),Fe(this,"state","loading"),Fe(this,"contents",void 0),this.contents=t}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(t){return zl(this.contents.then(g=>{const n=t(g);if(Po(n)){const l=n;switch(l.state){case"hasValue":return l.contents;case"hasError":throw l.contents;case"loading":return l.contents}}return n}).catch(g=>{if(At(g))return g.then(()=>this.map(t).contents);throw g}))}}function _r(e){return Object.freeze(new xR(e))}function Ga(e){return Object.freeze(new HR(e))}function zl(e){return Object.freeze(new _f(e))}function $f(){return Object.freeze(new _f(new Promise(()=>{})))}function wR(e){return e.every(t=>t.state==="hasValue")?_r(e.map(t=>t.contents)):e.some(t=>t.state==="hasError")?Ga(mt(e.find(t=>t.state==="hasError"),"Invalid loadable passed to loadableAll").contents):zl(Promise.all(e.map(t=>t.contents)))}function qf(e){const g=(Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(l=>e[l])).map(l=>Po(l)?l:At(l)?zl(l):_r(l)),n=wR(g);return Array.isArray(e)?n:n.map(l=>Object.getOwnPropertyNames(e).reduce((o,I,r)=>({...o,[I]:l[r]}),{}))}function Po(e){return e instanceof ha}const NR={of:e=>At(e)?zl(e):Po(e)?e:_r(e),error:e=>Ga(e),loading:()=>$f(),all:qf,isLoadable:Po};var Ol={loadableWithValue:_r,loadableWithError:Ga,loadableWithPromise:zl,loadableLoading:$f,loadableAll:qf,isLoadable:Po,RecoilLoadable:NR},FR=Ol.loadableWithValue,KR=Ol.loadableWithError,ER=Ol.loadableWithPromise,zR=Ol.loadableLoading,MR=Ol.loadableAll,TR=Ol.isLoadable,LR=Ol.RecoilLoadable,$r=Object.freeze({__proto__:null,loadableWithValue:FR,loadableWithError:KR,loadableWithPromise:ER,loadableLoading:zR,loadableAll:MR,isLoadable:TR,RecoilLoadable:LR});const fa=new Map().set("recoil_hamt_2020",!0).set("recoil_sync_external_store",!0).set("recoil_suppress_rerender_in_callback",!0).set("recoil_memory_managament_2020",!0);function Ba(e){var t;return(t=fa.get(e))!==null&&t!==void 0?t:!1}Ba.setPass=e=>{fa.set(e,!0)};Ba.setFail=e=>{fa.set(e,!1)};Ba.clear=()=>{fa.clear()};var ot=Ba;function UR(e,t,{error:g}={}){return null}var DR=UR,OA=DR,Zc,hc,Gc;const QR=(Zc=Me.createMutableSource)!==null&&Zc!==void 0?Zc:Me.unstable_createMutableSource,eB=(hc=Me.useMutableSource)!==null&&hc!==void 0?hc:Me.unstable_useMutableSource,tB=(Gc=Me.useSyncExternalStore)!==null&&Gc!==void 0?Gc:Me.unstable_useSyncExternalStore;function PR(){var e;const{ReactCurrentDispatcher:t,ReactCurrentOwner:g}=Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((e=t==null?void 0:t.current)!==null&&e!==void 0?e:g.currentDispatcher).useSyncExternalStore!=null}function jR(){return ot("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:ot("recoil_sync_external_store")&&tB!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:ot("recoil_mutable_source")&&eB!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?ot("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:ot("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function OR(){return!1}var qr={createMutableSource:QR,useMutableSource:eB,useSyncExternalStore:tB,currentRendererSupportsUseSyncExternalStore:PR,reactMode:jR,isFastRefreshEnabled:OR};const gB={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0};function _R(){var e,t,g;if(typeof process>"u"||((e=process)===null||e===void 0?void 0:e.env)==null)return;const n=(t=process.env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED)===null||t===void 0||(g=t.toLowerCase())===null||g===void 0?void 0:g.trim();if(n==null||n==="")return;if(!["true","false"].includes(n))throw Ee(`process.env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED value must be 'true', 'false', or empty: ${n}`);gB.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=n==="true"}_R();var nB=gB;class _A{constructor(t){Fe(this,"key",void 0),this.key=t}toJSON(){return{key:this.key}}}class lB extends _A{}class oB extends _A{}function $R(e){return e instanceof lB||e instanceof oB}var ya={AbstractRecoilValue:_A,RecoilState:lB,RecoilValueReadOnly:oB,isRecoilValue:$R},qR=ya.AbstractRecoilValue,e2=ya.RecoilState,t2=ya.RecoilValueReadOnly,g2=ya.isRecoilValue,jo=Object.freeze({__proto__:null,AbstractRecoilValue:qR,RecoilState:e2,RecoilValueReadOnly:t2,isRecoilValue:g2});function n2(e,t){return function*(){let g=0;for(const n of e)yield t(n,g++)}()}var Sa=n2;class IB{}const l2=new IB,Ml=new Map,$A=new Map;function o2(e){return Sa(e,t=>mt($A.get(t)))}function I2(e){if(Ml.has(e)){const t=`Duplicate atom key "${e}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(t)}}function r2(e){nB.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&I2(e.key),Ml.set(e.key,e);const t=e.set==null?new jo.RecoilValueReadOnly(e.key):new jo.RecoilState(e.key);return $A.set(e.key,t),t}class rB extends Error{}function C2(e){const t=Ml.get(e);if(t==null)throw new rB(`Missing definition for RecoilValue: "${e}""`);return t}function i2(e){return Ml.get(e)}const Li=new Map;function a2(e){var t;if(!ot("recoil_memory_managament_2020"))return;const g=Ml.get(e);if(g!=null&&(t=g.shouldDeleteConfigOnRelease)!==null&&t!==void 0&&t.call(g)){var n;Ml.delete(e),(n=CB(e))===null||n===void 0||n(),Li.delete(e)}}function s2(e,t){!ot("recoil_memory_managament_2020")||(t===void 0?Li.delete(e):Li.set(e,t))}function CB(e){return Li.get(e)}var pg={nodes:Ml,recoilValues:$A,registerNode:r2,getNode:C2,getNodeMaybe:i2,deleteNodeConfigIfPossible:a2,setConfigDeletionHandler:s2,getConfigDeletionHandler:CB,recoilValuesForKeys:o2,NodeMissingError:rB,DefaultValue:IB,DEFAULT_VALUE:l2};function c2(e,t){t()}var d2={enqueueExecution:c2};function u2(e,t){return t={exports:{}},e(t,t.exports),t.exports}var A2=u2(function(e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},g={},n=5,l=Math.pow(2,n),o=l-1,I=l/2,r=l/4,C={},i=function(E){return function(){return E}},a=g.hash=function(L){var E=typeof L>"u"?"undefined":t(L);if(E==="number")return L;E!=="string"&&(L+="");for(var le=0,ie=0,ae=L.length;ie<ae;++ie){var me=L.charCodeAt(ie);le=(le<<5)-le+me|0}return le},c=function(E){return E-=E>>1&1431655765,E=(E&858993459)+(E>>2&858993459),E=E+(E>>4)&252645135,E+=E>>8,E+=E>>16,E&127},s=function(E,le){return le>>>E&o},m=function(E){return 1<<E},A=function(E,le){return c(E&le-1)},d=function(E,le,ie,ae){var me=ae;if(!E){var Re=ae.length;me=new Array(Re);for(var We=0;We<Re;++We)me[We]=ae[We]}return me[le]=ie,me},h=function(E,le,ie){var ae=ie.length-1,me=0,Re=0,We=ie;if(E)me=Re=le;else for(We=new Array(ae);me<le;)We[Re++]=ie[me++];for(++me;me<=ae;)We[Re++]=ie[me++];return E&&(We.length=ae),We},Z=function(E,le,ie,ae){var me=ae.length;if(E){for(var Re=me;Re>=le;)ae[Re--]=ae[Re];return ae[le]=ie,ae}for(var We=0,ve=0,Ke=new Array(me+1);We<le;)Ke[ve++]=ae[We++];for(Ke[le]=ie;We<me;)Ke[++ve]=ae[We++];return Ke},u=1,p=2,G=3,f=4,S={__hamt_isEmpty:!0},W=function(E){return E===S||E&&E.__hamt_isEmpty},v=function(E,le,ie,ae){return{type:u,edit:E,hash:le,key:ie,value:ae,_modify:z}},w=function(E,le,ie){return{type:p,edit:E,hash:le,children:ie,_modify:D}},y=function(E,le,ie){return{type:G,edit:E,mask:le,children:ie,_modify:T}},R=function(E,le,ie){return{type:f,edit:E,size:le,children:ie,_modify:N}},x=function(E){return E===S||E.type===u||E.type===p},H=function(E,le,ie,ae,me){for(var Re=[],We=ae,ve=0,Ke=0;We;++Ke)We&1&&(Re[Ke]=me[ve++]),We>>>=1;return Re[le]=ie,R(E,ve+1,Re)},F=function(E,le,ie,ae){for(var me=new Array(le-1),Re=0,We=0,ve=0,Ke=ae.length;ve<Ke;++ve)if(ve!==ie){var It=ae[ve];It&&!W(It)&&(me[Re++]=It,We|=1<<ve)}return y(E,We,me)},M=function L(E,le,ie,ae,me,Re){if(ie===me)return w(E,ie,[Re,ae]);var We=s(le,ie),ve=s(le,me);return y(E,m(We)|m(ve),We===ve?[L(E,le+n,ie,ae,me,Re)]:We<ve?[ae,Re]:[Re,ae])},j=function(E,le,ie,ae,me,Re,We,ve){for(var Ke=me.length,It=0;It<Ke;++It){var Nt=me[It];if(ie(We,Nt.key)){var St=Nt.value,og=Re(St);return og===St?me:og===C?(--ve.value,h(E,It,me)):d(E,It,v(le,ae,We,og),me)}}var Ig=Re();return Ig===C?me:(++ve.value,d(E,Ke,v(le,ae,We,Ig),me))},O=function(E,le){return E===le.edit},z=function(E,le,ie,ae,me,Re,We){if(le(Re,this.key)){var ve=ae(this.value);return ve===this.value?this:ve===C?(--We.value,S):O(E,this)?(this.value=ve,this):v(E,me,Re,ve)}var Ke=ae();return Ke===C?this:(++We.value,M(E,ie,this.hash,this,me,v(E,me,Re,Ke)))},D=function(E,le,ie,ae,me,Re,We){if(me===this.hash){var ve=O(E,this),Ke=j(ve,E,le,this.hash,this.children,ae,Re,We);return Ke===this.children?this:Ke.length>1?w(E,this.hash,Ke):Ke[0]}var It=ae();return It===C?this:(++We.value,M(E,ie,this.hash,this,me,v(E,me,Re,It)))},T=function(E,le,ie,ae,me,Re,We){var ve=this.mask,Ke=this.children,It=s(ie,me),Nt=m(It),St=A(ve,Nt),og=ve&Nt,Ig=og?Ke[St]:S,Nn=Ig._modify(E,le,ie+n,ae,me,Re,We);if(Ig===Nn)return this;var Gl=O(E,this),vt=ve,rg=void 0;if(og&&W(Nn)){if(vt&=~Nt,!vt)return S;if(Ke.length<=2&&x(Ke[St^1]))return Ke[St^1];rg=h(Gl,St,Ke)}else if(!og&&!W(Nn)){if(Ke.length>=I)return H(E,It,Nn,ve,Ke);vt|=Nt,rg=Z(Gl,St,Nn,Ke)}else rg=d(Gl,St,Nn,Ke);return Gl?(this.mask=vt,this.children=rg,this):y(E,vt,rg)},N=function(E,le,ie,ae,me,Re,We){var ve=this.size,Ke=this.children,It=s(ie,me),Nt=Ke[It],St=(Nt||S)._modify(E,le,ie+n,ae,me,Re,We);if(Nt===St)return this;var og=O(E,this),Ig=void 0;if(W(Nt)&&!W(St))++ve,Ig=d(og,It,St,Ke);else if(!W(Nt)&&W(St)){if(--ve,ve<=r)return F(E,ve,It,Ke);Ig=d(og,It,S,Ke)}else Ig=d(og,It,St,Ke);return og?(this.size=ve,this.children=Ig,this):R(E,ve,Ig)};S._modify=function(L,E,le,ie,ae,me,Re){var We=ie();return We===C?S:(++Re.value,v(L,ae,me,We))};function V(L,E,le,ie,ae){this._editable=L,this._edit=E,this._config=le,this._root=ie,this._size=ae}V.prototype.setTree=function(L,E){return this._editable?(this._root=L,this._size=E,this):L===this._root?this:new V(this._editable,this._edit,this._config,L,E)};var Y=g.tryGetHash=function(L,E,le,ie){for(var ae=ie._root,me=0,Re=ie._config.keyEq;;)switch(ae.type){case u:return Re(le,ae.key)?ae.value:L;case p:{if(E===ae.hash)for(var We=ae.children,ve=0,Ke=We.length;ve<Ke;++ve){var It=We[ve];if(Re(le,It.key))return It.value}return L}case G:{var Nt=s(me,E),St=m(Nt);if(ae.mask&St){ae=ae.children[A(ae.mask,St)],me+=n;break}return L}case f:{if(ae=ae.children[s(me,E)],ae){me+=n;break}return L}default:return L}};V.prototype.tryGetHash=function(L,E,le){return Y(L,E,le,this)};var J=g.tryGet=function(L,E,le){return Y(L,le._config.hash(E),E,le)};V.prototype.tryGet=function(L,E){return J(L,E,this)};var P=g.getHash=function(L,E,le){return Y(void 0,L,E,le)};V.prototype.getHash=function(L,E){return P(L,E,this)},g.get=function(L,E){return Y(void 0,E._config.hash(L),L,E)},V.prototype.get=function(L,E){return J(E,L,this)};var k=g.has=function(L,E,le){return Y(C,L,E,le)!==C};V.prototype.hasHash=function(L,E){return k(L,E,this)};var $=g.has=function(L,E){return k(E._config.hash(L),L,E)};V.prototype.has=function(L){return $(L,this)};var K=function(E,le){return E===le};g.make=function(L){return new V(0,0,{keyEq:L&&L.keyEq||K,hash:L&&L.hash||a},S,0)},g.empty=g.make();var _=g.isEmpty=function(L){return L&&!!W(L._root)};V.prototype.isEmpty=function(){return _(this)};var re=g.modifyHash=function(L,E,le,ie){var ae={value:ie._size},me=ie._root._modify(ie._editable?ie._edit:NaN,ie._config.keyEq,0,L,E,le,ae);return ie.setTree(me,ae.value)};V.prototype.modifyHash=function(L,E,le){return re(le,L,E,this)};var ne=g.modify=function(L,E,le){return re(L,le._config.hash(E),E,le)};V.prototype.modify=function(L,E){return ne(E,L,this)};var ge=g.setHash=function(L,E,le,ie){return re(i(le),L,E,ie)};V.prototype.setHash=function(L,E,le){return ge(L,E,le,this)};var ue=g.set=function(L,E,le){return ge(le._config.hash(L),L,E,le)};V.prototype.set=function(L,E){return ue(L,E,this)};var ye=i(C),he=g.removeHash=function(L,E,le){return re(ye,L,E,le)};V.prototype.removeHash=V.prototype.deleteHash=function(L,E){return he(L,E,this)};var Ve=g.remove=function(L,E){return he(E._config.hash(L),L,E)};V.prototype.remove=V.prototype.delete=function(L){return Ve(L,this)};var Be=g.beginMutation=function(L){return new V(L._editable+1,L._edit+1,L._config,L._root,L._size)};V.prototype.beginMutation=function(){return Be(this)};var Se=g.endMutation=function(L){return L._editable=L._editable&&L._editable-1,L};V.prototype.endMutation=function(){return Se(this)};var yt=g.mutate=function(L,E){var le=Be(E);return L(le),Se(le)};V.prototype.mutate=function(L){return yt(L,this)};var He=function(E){return E&&Je(E[0],E[1],E[2],E[3],E[4])},Je=function(E,le,ie,ae,me){for(;ie<E;){var Re=le[ie++];if(Re&&!W(Re))return _e(Re,ae,[E,le,ie,ae,me])}return He(me)},_e=function(E,le,ie){switch(E.type){case u:return{value:le(E),rest:ie};case p:case f:case G:var ae=E.children;return Je(ae.length,ae,0,le,ie);default:return He(ie)}},Le={done:!0};function Ae(L){this.v=L}Ae.prototype.next=function(){if(!this.v)return Le;var L=this.v;return this.v=He(L.rest),L},Ae.prototype[Symbol.iterator]=function(){return this};var we=function(E,le){return new Ae(_e(E._root,le))},Ct=function(E){return[E.key,E.value]},it=g.entries=function(L){return we(L,Ct)};V.prototype.entries=V.prototype[Symbol.iterator]=function(){return it(this)};var Q=function(E){return E.key},ee=g.keys=function(L){return we(L,Q)};V.prototype.keys=function(){return ee(this)};var Ge=function(E){return E.value},fe=g.values=V.prototype.values=function(L){return we(L,Ge)};V.prototype.values=function(){return fe(this)};var De=g.fold=function(L,E,le){var ie=le._root;if(ie.type===u)return L(E,ie.value,ie.key);for(var ae=[ie.children],me=void 0;me=ae.pop();)for(var Re=0,We=me.length;Re<We;){var ve=me[Re++];ve&&ve.type&&(ve.type===u?E=L(E,ve.value,ve.key):ae.push(ve.children))}return E};V.prototype.fold=function(L,E){return De(L,E,this)};var ct=g.forEach=function(L,E){return De(function(le,ie,ae){return L(ie,ae,E)},null,E)};V.prototype.forEach=function(L){return ct(L,this)};var lg=g.count=function(L){return L._size};V.prototype.count=function(){return lg(this)},Object.defineProperty(V.prototype,"size",{get:V.prototype.count}),e.exports?e.exports=g:(void 0).hamt=g});class m2{constructor(t){Fe(this,"_map",void 0),this._map=new Map(t==null?void 0:t.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(t){return this._map.get(t)}has(t){return this._map.has(t)}set(t,g){return this._map.set(t,g),this}delete(t){return this._map.delete(t),this}clone(){return e0(this)}toMap(){return new Map(this._map)}}class qA{constructor(t){if(Fe(this,"_hamt",A2.empty.beginMutation()),t instanceof qA){const g=t._hamt.endMutation();t._hamt=g.beginMutation(),this._hamt=g.beginMutation()}else if(t)for(const[g,n]of t.entries())this._hamt.set(g,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(t){return this._hamt.get(t)}has(t){return this._hamt.has(t)}set(t,g){return this._hamt.set(t,g),this}delete(t){return this._hamt.delete(t),this}clone(){return e0(this)}toMap(){return new Map(this._hamt)}}function e0(e){return ot("recoil_hamt_2020")?new qA(e):new m2(e)}var p2={persistentMap:e0},b2=p2.persistentMap,Z2=Object.freeze({__proto__:null,persistentMap:b2});function h2(e,...t){const g=new Set;e:for(const n of e){for(const l of t)if(l.has(n))continue e;g.add(n)}return g}var lr=h2;function G2(e,t){const g=new Map;return e.forEach((n,l)=>{g.set(l,t(n,l))}),g}var Ui=G2;function f2(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function B2(e){return{nodeDeps:Ui(e.nodeDeps,t=>new Set(t)),nodeToNodeSubscriptions:Ui(e.nodeToNodeSubscriptions,t=>new Set(t))}}function fc(e,t,g,n){const{nodeDeps:l,nodeToNodeSubscriptions:o}=g,I=l.get(e);if(I&&n&&I!==n.nodeDeps.get(e))return;l.set(e,t);const r=I==null?t:lr(t,I);for(const C of r)o.has(C)||o.set(C,new Set),mt(o.get(C)).add(e);if(I){const C=lr(I,t);for(const i of C){if(!o.has(i))return;const a=mt(o.get(i));a.delete(e),a.size===0&&o.delete(i)}}}function y2(e,t,g,n){var l,o,I,r;const C=g.getState();n===C.currentTree.version||n===((l=C.nextTree)===null||l===void 0?void 0:l.version)||((o=C.previousTree)===null||o===void 0||o.version);const i=g.getGraph(n);if(fc(e,t,i),n===((I=C.previousTree)===null||I===void 0?void 0:I.version)){const c=g.getGraph(C.currentTree.version);fc(e,t,c,i)}if(n===((r=C.previousTree)===null||r===void 0?void 0:r.version)||n===C.currentTree.version){var a;const c=(a=C.nextTree)===null||a===void 0?void 0:a.version;if(c!==void 0){const s=g.getGraph(c);fc(e,t,s,i)}}}var eC={cloneGraph:B2,graph:f2,saveDepsToStore:y2};let S2=0;const W2=()=>S2++;let V2=0;const v2=()=>V2++;let R2=0;const X2=()=>R2++;var Wa={getNextTreeStateVersion:W2,getNextStoreID:v2,getNextComponentID:X2};const{persistentMap:vp}=Z2,{graph:k2}=eC,{getNextTreeStateVersion:iB}=Wa;function aB(){const e=iB();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:vp(),nonvalidatedAtoms:vp()}}function J2(){const e=aB();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(e.version,k2()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var sB={makeEmptyTreeState:aB,makeEmptyStoreState:J2,getNextTreeStateVersion:iB};class cB{}function Y2(){return new cB}var Va={RetentionZone:cB,retentionZone:Y2};function x2(e,t){const g=new Set(e);return g.add(t),g}function H2(e,t){const g=new Set(e);return g.delete(t),g}function w2(e,t,g){const n=new Map(e);return n.set(t,g),n}function N2(e,t,g){const n=new Map(e);return n.set(t,g(n.get(t))),n}function F2(e,t){const g=new Map(e);return g.delete(t),g}function K2(e,t){const g=new Map(e);return t.forEach(n=>g.delete(n)),g}var dB={setByAddingToSet:x2,setByDeletingFromSet:H2,mapBySettingInMap:w2,mapByUpdatingInMap:N2,mapByDeletingFromMap:F2,mapByDeletingMultipleFromMap:K2};function*E2(e,t){let g=0;for(const n of e)t(n,g++)&&(yield n)}var t0=E2;function z2(e,t){return new Proxy(e,{get:(n,l)=>(!(l in n)&&l in t&&(n[l]=t[l]()),n[l]),ownKeys:n=>Object.keys(n)})}var uB=z2;const{getNode:tC,getNodeMaybe:M2,recoilValuesForKeys:Rp}=pg,{RetentionZone:Xp}=Va,{setByAddingToSet:T2}=dB,L2=Object.freeze(new Set);class U2 extends Error{}function D2(e,t,g){if(!ot("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:n}=e.getState().retention;function l(o){let I=n.get(o);I||n.set(o,I=new Set),I.add(t)}if(g instanceof Xp)l(g);else if(Array.isArray(g))for(const o of g)l(o);return()=>{if(!ot("recoil_memory_managament_2020"))return;const{retention:o}=e.getState();function I(r){const C=o.nodesRetainedByZone.get(r);C==null||C.delete(t),C&&C.size===0&&o.nodesRetainedByZone.delete(r)}if(g instanceof Xp)I(g);else if(Array.isArray(g))for(const r of g)I(r)}}function g0(e,t,g,n){const l=e.getState();if(l.nodeCleanupFunctions.has(g))return;const o=tC(g),I=D2(e,g,o.retainedBy),r=o.init(e,t,n);l.nodeCleanupFunctions.set(g,()=>{r(),I()})}function Q2(e,t,g){g0(e,e.getState().currentTree,t,g)}function P2(e,t){var g;const n=e.getState();(g=n.nodeCleanupFunctions.get(t))===null||g===void 0||g(),n.nodeCleanupFunctions.delete(t)}function j2(e,t,g){return g0(e,t,g,"get"),tC(g).get(e,t)}function AB(e,t,g){return tC(g).peek(e,t)}function O2(e,t,g){var n;const l=M2(t);return l==null||(n=l.invalidate)===null||n===void 0||n.call(l,e),{...e,atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,g),dirtyAtoms:T2(e.dirtyAtoms,t)}}function _2(e,t,g,n){const l=tC(g);if(l.set==null)throw new U2(`Attempt to set read-only RecoilValue: ${g}`);const o=l.set;return g0(e,t,g,"set"),o(e,t,n)}function $2(e,t,g){const n=e.getState(),l=e.getGraph(t.version),o=tC(g).nodeType;return uB({type:o},{loadable:()=>AB(e,t,g),isActive:()=>n.knownAtoms.has(g)||n.knownSelectors.has(g),isSet:()=>o==="selector"?!1:t.atomValues.has(g),isModified:()=>t.dirtyAtoms.has(g),deps:()=>{var I;return Rp((I=l.nodeDeps.get(g))!==null&&I!==void 0?I:[])},subscribers:()=>{var I,r;return{nodes:Rp(t0(mB(e,t,new Set([g])),C=>C!==g)),components:Sa((I=(r=n.nodeToComponentSubscriptions.get(g))===null||r===void 0?void 0:r.values())!==null&&I!==void 0?I:[],([C])=>({name:C}))}}})}function mB(e,t,g){const n=new Set,l=Array.from(g),o=e.getGraph(t.version);for(let r=l.pop();r;r=l.pop()){var I;n.add(r);const C=(I=o.nodeToNodeSubscriptions.get(r))!==null&&I!==void 0?I:L2;for(const i of C)n.has(i)||l.push(i)}return n}var ml={getNodeLoadable:j2,peekNodeLoadable:AB,setNodeValue:_2,initializeNode:Q2,cleanUpNode:P2,setUnvalidatedAtomValue_DEPRECATED:O2,peekNodeInfo:$2,getDownstreamNodes:mB};let pB=null;function q2(e){pB=e}function eX(){var e;(e=pB)===null||e===void 0||e()}var bB={setInvalidateMemoizedSnapshot:q2,invalidateMemoizedSnapshot:eX};const{getDownstreamNodes:tX,getNodeLoadable:ZB,setNodeValue:gX}=ml,{getNextComponentID:nX}=Wa,{getNode:lX,getNodeMaybe:hB}=pg,{DefaultValue:n0}=pg,{reactMode:oX}=qr,{AbstractRecoilValue:IX,RecoilState:rX,RecoilValueReadOnly:CX,isRecoilValue:iX}=jo,{invalidateMemoizedSnapshot:aX}=bB;function sX(e,{key:t},g=e.getState().currentTree){var n,l;const o=e.getState();g.version===o.currentTree.version||g.version===((n=o.nextTree)===null||n===void 0?void 0:n.version)||(g.version,(l=o.previousTree)===null||l===void 0||l.version);const I=ZB(e,g,t);return I.state==="loading"&&I.contents.catch(()=>{}),I}function cX(e,t){const g=e.clone();return t.forEach((n,l)=>{n.state==="hasValue"&&n.contents instanceof n0?g.delete(l):g.set(l,n)}),g}function dX(e,t,{key:g},n){if(typeof n=="function"){const l=ZB(e,t,g);if(l.state==="loading"){const o=`Tried to set atom or selector "${g}" using an updater function while the current state is pending, this is not currently supported.`;throw Ee(o)}else if(l.state==="hasError")throw l.contents;return n(l.contents)}else return n}function uX(e,t,g){if(g.type==="set"){const{recoilValue:l,valueOrUpdater:o}=g,I=dX(e,t,l,o),r=gX(e,t,l.key,I);for(const[C,i]of r.entries())Bu(t,C,i)}else if(g.type==="setLoadable"){const{recoilValue:{key:l},loadable:o}=g;Bu(t,l,o)}else if(g.type==="markModified"){const{recoilValue:{key:l}}=g;t.dirtyAtoms.add(l)}else if(g.type==="setUnvalidated"){var n;const{recoilValue:{key:l},unvalidatedValue:o}=g,I=hB(l);I==null||(n=I.invalidate)===null||n===void 0||n.call(I,t),t.atomValues.delete(l),t.nonvalidatedAtoms.set(l,o),t.dirtyAtoms.add(l)}else OA(`Unknown action ${g.type}`)}function Bu(e,t,g){g.state==="hasValue"&&g.contents instanceof n0?e.atomValues.delete(t):e.atomValues.set(t,g),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function GB(e,t){e.replaceState(g=>{const n=fB(g);for(const l of t)uX(e,n,l);return BB(e,n),aX(),n})}function va(e,t){if(or.length){const g=or[or.length-1];let n=g.get(e);n||g.set(e,n=[]),n.push(t)}else GB(e,[t])}const or=[];function AX(){const e=new Map;return or.push(e),()=>{for(const[t,g]of e)GB(t,g);or.pop()}}function fB(e){return{...e,atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)}}function BB(e,t){const g=tX(e,t,t.dirtyAtoms);for(const o of g){var n,l;(n=hB(o))===null||n===void 0||(l=n.invalidate)===null||l===void 0||l.call(n,t)}}function yB(e,t,g){va(e,{type:"set",recoilValue:t,valueOrUpdater:g})}function mX(e,t,g){if(g instanceof n0)return yB(e,t,g);va(e,{type:"setLoadable",recoilValue:t,loadable:g})}function pX(e,t){va(e,{type:"markModified",recoilValue:t})}function bX(e,t,g){va(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:g})}function ZX(e,{key:t},g,n=null){const l=nX(),o=e.getState();o.nodeToComponentSubscriptions.has(t)||o.nodeToComponentSubscriptions.set(t,new Map),mt(o.nodeToComponentSubscriptions.get(t)).set(l,[n!=null?n:"<not captured>",g]);const I=oX();if(I.early&&(I.mode==="LEGACY"||I.mode==="MUTABLE_SOURCE")){const r=e.getState().nextTree;r&&r.dirtyAtoms.has(t)&&g(r)}return{release:()=>{const r=e.getState(),C=r.nodeToComponentSubscriptions.get(t);C===void 0||!C.has(l)||(C.delete(l),C.size===0&&r.nodeToComponentSubscriptions.delete(t))}}}function hX(e,t){var g;const{currentTree:n}=e.getState(),l=lX(t.key);(g=l.clearCache)===null||g===void 0||g.call(l,e,n)}var an={RecoilValueReadOnly:CX,AbstractRecoilValue:IX,RecoilState:rX,getRecoilValueAsLoadable:sX,setRecoilValue:yB,setRecoilValueLoadable:mX,markRecoilValueModified:pX,setUnvalidatedRecoilValue:bX,subscribeToRecoilValue:ZX,isRecoilValue:iX,applyAtomValueWrites:cX,batchStart:AX,writeLoadableToTreeState:Bu,invalidateDownstreams:BB,copyTreeState:fB,refreshRecoilValue:hX};function GX(e,t,g){const n=e.entries();let l=n.next();for(;!l.done;){const o=l.value;if(t.call(g,o[1],o[0],e))return!0;l=n.next()}return!1}var fX=GX;const{cleanUpNode:BX}=ml,{deleteNodeConfigIfPossible:yX,getNode:SB}=pg,{RetentionZone:WB}=Va,SX=12e4,VB=new Set;function vB(e,t){const g=e.getState(),n=g.currentTree;if(g.nextTree)return;const l=new Set;for(const I of t)if(I instanceof WB)for(const r of RX(g,I))l.add(r);else l.add(I);const o=WX(e,l);for(const I of o)vX(e,n,I)}function WX(e,t){const g=e.getState(),n=g.currentTree,l=e.getGraph(n.version),o=new Set,I=new Set;return r(t),o;function r(C){const i=new Set,a=VX(e,n,C,o,I);for(const A of a){var c;if(SB(A).retainedBy==="recoilRoot"){I.add(A);continue}if(((c=g.retention.referenceCounts.get(A))!==null&&c!==void 0?c:0)>0){I.add(A);continue}if(RB(A).some(h=>g.retention.referenceCounts.get(h))){I.add(A);continue}const d=l.nodeToNodeSubscriptions.get(A);if(d&&fX(d,h=>I.has(h))){I.add(A);continue}o.add(A),i.add(A)}const s=new Set;for(const A of i)for(const d of(m=l.nodeDeps.get(A))!==null&&m!==void 0?m:VB){var m;o.has(d)||s.add(d)}s.size&&r(s)}}function VX(e,t,g,n,l){const o=e.getGraph(t.version),I=[],r=new Set;for(;g.size>0;)C(mt(g.values().next().value));return I;function C(i){if(n.has(i)||l.has(i)){g.delete(i);return}if(r.has(i))return;const a=o.nodeToNodeSubscriptions.get(i);if(a)for(const c of a)C(c);r.add(i),g.delete(i),I.push(i)}}function vX(e,t,g){if(!ot("recoil_memory_managament_2020"))return;BX(e,g);const n=e.getState();n.knownAtoms.delete(g),n.knownSelectors.delete(g),n.nodeTransactionSubscriptions.delete(g),n.retention.referenceCounts.delete(g);const l=RB(g);for(const C of l){var o;(o=n.retention.nodesRetainedByZone.get(C))===null||o===void 0||o.delete(g)}t.atomValues.delete(g),t.dirtyAtoms.delete(g),t.nonvalidatedAtoms.delete(g);const I=n.graphsByVersion.get(t.version);if(I){const C=I.nodeDeps.get(g);if(C!==void 0){I.nodeDeps.delete(g);for(const i of C){var r;(r=I.nodeToNodeSubscriptions.get(i))===null||r===void 0||r.delete(g)}}I.nodeToNodeSubscriptions.delete(g)}yX(g)}function RX(e,t){var g;return(g=e.retention.nodesRetainedByZone.get(t))!==null&&g!==void 0?g:VB}function RB(e){const t=SB(e).retainedBy;return t===void 0||t==="components"||t==="recoilRoot"?[]:t instanceof WB?[t]:t}function XX(e,t){const g=e.getState();g.nextTree?g.retention.retainablesToCheckForRelease.add(t):vB(e,new Set([t]))}function kX(e,t,g){var n;if(!ot("recoil_memory_managament_2020"))return;const l=e.getState().retention.referenceCounts,o=((n=l.get(t))!==null&&n!==void 0?n:0)+g;o===0?XB(e,t):l.set(t,o)}function XB(e,t){if(!ot("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),XX(e,t)}function JX(e){if(!ot("recoil_memory_managament_2020"))return;const t=e.getState();vB(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}function YX(e){return e===void 0?"recoilRoot":e}var _l={SUSPENSE_TIMEOUT_MS:SX,updateRetainCount:kX,updateRetainCountToZero:XB,releaseScheduledRetainablesNow:JX,retainedByOptionWithDefault:YX};const{unstable_batchedUpdates:xX}=UI;var HX={unstable_batchedUpdates:xX};const{unstable_batchedUpdates:wX}=HX;var NX={unstable_batchedUpdates:wX};const{batchStart:FX}=an,{unstable_batchedUpdates:KX}=NX;let l0=KX;const EX=e=>{l0=e},zX=()=>l0,MX=e=>{l0(()=>{let t=()=>{};try{t=FX(),e()}finally{t()}})};var Ra={getBatcher:zX,setBatcher:EX,batchUpdates:MX};function*TX(e){for(const t of e)for(const g of t)yield g}var kB=TX;const JB=typeof Window>"u"||typeof window>"u",LX=e=>!JB&&(e===window||e instanceof Window),UX=typeof navigator<"u"&&navigator.product==="ReactNative";var o0={isSSR:JB,isReactNative:UX,isWindow:LX};function DX(e,t){let g;return(...l)=>{g||(g={});const o=t(...l);return Object.hasOwnProperty.call(g,o)||(g[o]=e(...l)),g[o]}}function QX(e,t){let g,n;return(...o)=>{const I=t(...o);return g===I||(g=I,n=e(...o)),n}}function PX(e,t){let g,n;return[(...I)=>{const r=t(...I);return g===r||(g=r,n=e(...I)),n},()=>{g=null}]}var jX={memoizeWithArgsHash:DX,memoizeOneWithArgsHash:QX,memoizeOneWithArgsHashAndInvalidation:PX};const{batchUpdates:yu}=Ra,{initializeNode:OX,peekNodeInfo:_X}=ml,{graph:$X}=eC,{getNextStoreID:qX}=Wa,{DEFAULT_VALUE:e1,recoilValues:kp,recoilValuesForKeys:Jp}=pg,{AbstractRecoilValue:t1,getRecoilValueAsLoadable:g1,setRecoilValue:Yp,setUnvalidatedRecoilValue:n1}=an,{updateRetainCount:Ci}=_l,{setInvalidateMemoizedSnapshot:l1}=bB,{getNextTreeStateVersion:o1,makeEmptyStoreState:I1}=sB,{isSSR:r1}=o0,{memoizeOneWithArgsHashAndInvalidation:C1}=jX;class Xa{constructor(t,g){Fe(this,"_store",void 0),Fe(this,"_refCount",1),Fe(this,"getLoadable",n=>(this.checkRefCount_INTERNAL(),g1(this._store,n))),Fe(this,"getPromise",n=>(this.checkRefCount_INTERNAL(),this.getLoadable(n).toPromise())),Fe(this,"getNodes_UNSTABLE",n=>{if(this.checkRefCount_INTERNAL(),(n==null?void 0:n.isModified)===!0){if((n==null?void 0:n.isInitialized)===!1)return[];const I=this._store.getState().currentTree;return Jp(I.dirtyAtoms)}const l=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(n==null?void 0:n.isInitialized)==null?kp.values():n.isInitialized===!0?Jp(kB([l,o])):t0(kp.values(),({key:I})=>!l.has(I)&&!o.has(I))}),Fe(this,"getInfo_UNSTABLE",({key:n})=>(this.checkRefCount_INTERNAL(),_X(this._store,this._store.getState().currentTree,n))),Fe(this,"map",n=>{this.checkRefCount_INTERNAL();const l=new Su(this,yu);return n(l),l}),Fe(this,"asyncMap",async n=>{this.checkRefCount_INTERNAL();const l=new Su(this,yu);return l.retain(),await n(l),l.autoRelease_INTERNAL(),l}),this._store={storeID:qX(),parentStoreID:g,getState:()=>t,replaceState:n=>{t.currentTree=n(t.currentTree)},getGraph:n=>{const l=t.graphsByVersion;if(l.has(n))return mt(l.get(n));const o=$X();return l.set(n,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Ee("Cannot subscribe to Snapshots")}};for(const n of this._store.getState().knownAtoms)OX(this._store,n,"get"),Ci(this._store,n,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let t=!1;return()=>{t||(t=!0,this._release())}}autoRelease_INTERNAL(){r1||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(t=>t()),this._store.getState().nodeCleanupFunctions.clear(),!ot("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){ot("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function YB(e,t,g=!1){const n=e.getState(),l=g?o1():t.version;return{currentTree:{version:g?l:t.version,stateID:g?l:t.stateID,transactionMetadata:{...t.transactionMetadata},dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(l,e.getGraph(t.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Sa(n.nodeCleanupFunctions.entries(),([o])=>[o,()=>{}]))}}function i1(e){const t=new Xa(I1());return e!=null?t.map(e):t}const[xp,xB]=C1((e,t)=>{var g;const n=e.getState(),l=t==="latest"?(g=n.nextTree)!==null&&g!==void 0?g:n.currentTree:mt(n.previousTree);return new Xa(YB(e,l),e.storeID)},(e,t)=>{var g,n;return String(t)+String(e.storeID)+String((g=e.getState().nextTree)===null||g===void 0?void 0:g.version)+String(e.getState().currentTree.version)+String((n=e.getState().previousTree)===null||n===void 0?void 0:n.version)});l1(xB);function a1(e,t="latest"){const g=xp(e,t);return g.isRetained()?g:(xB(),xp(e,t))}class Su extends Xa{constructor(t,g){super(YB(t.getStore_INTERNAL(),t.getStore_INTERNAL().getState().currentTree,!0),t.getStoreID()),Fe(this,"_batch",void 0),Fe(this,"set",(n,l)=>{this.checkRefCount_INTERNAL();const o=this.getStore_INTERNAL();this._batch(()=>{Ci(o,n.key,1),Yp(this.getStore_INTERNAL(),n,l)})}),Fe(this,"reset",n=>{this.checkRefCount_INTERNAL();const l=this.getStore_INTERNAL();this._batch(()=>{Ci(l,n.key,1),Yp(this.getStore_INTERNAL(),n,e1)})}),Fe(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();const l=this.getStore_INTERNAL();yu(()=>{for(const[o,I]of n.entries())Ci(l,o,1),n1(l,new t1(o),I)})}),this._batch=g}}var ka={Snapshot:Xa,MutableSnapshot:Su,freshSnapshot:i1,cloneSnapshot:a1},s1=ka.Snapshot,c1=ka.MutableSnapshot,d1=ka.freshSnapshot,u1=ka.cloneSnapshot,Ja=Object.freeze({__proto__:null,Snapshot:s1,MutableSnapshot:c1,freshSnapshot:d1,cloneSnapshot:u1});function A1(...e){const t=new Set;for(const g of e)for(const n of g)t.add(n);return t}var m1=A1;const{useRef:p1}=Me;function b1(e){const t=p1(e);return t.current===e&&typeof e=="function"&&(t.current=e()),t}var Hp=b1;const{getNextTreeStateVersion:Z1,makeEmptyStoreState:HB}=sB,{cleanUpNode:h1,getDownstreamNodes:G1,initializeNode:f1,setNodeValue:B1,setUnvalidatedAtomValue_DEPRECATED:y1}=ml,{graph:S1}=eC,{cloneGraph:W1}=eC,{getNextStoreID:wB}=Wa,{createMutableSource:Bc,reactMode:NB}=qr,{applyAtomValueWrites:V1}=an,{releaseScheduledRetainablesNow:FB}=_l,{freshSnapshot:v1}=Ja,{useCallback:R1,useContext:KB,useEffect:Wu,useMemo:X1,useRef:k1,useState:J1}=Me;function RI(){throw Ee("This component must be used inside a <RecoilRoot> component.")}const EB=Object.freeze({storeID:wB(),getState:RI,replaceState:RI,getGraph:RI,subscribeToTransactions:RI,addTransactionMetadata:RI});let Vu=!1;function wp(e){if(Vu)throw Ee("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const t=e.getState();if(t.nextTree===null){ot("recoil_memory_managament_2020")&&ot("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&FB(e);const g=t.currentTree.version,n=Z1();t.nextTree={...t.currentTree,version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}},t.graphsByVersion.set(n,W1(mt(t.graphsByVersion.get(g))))}}const zB=Me.createContext({current:EB}),Ya=()=>KB(zB),MB=Me.createContext(null);function Y1(){return KB(MB)}function I0(e,t,g){const n=G1(e,g,g.dirtyAtoms);for(const l of n){const o=t.nodeToComponentSubscriptions.get(l);if(o)for(const[I,[r,C]]of o)C(g)}}function TB(e){const t=e.getState(),g=t.currentTree,n=g.dirtyAtoms;if(n.size){for(const[l,o]of t.nodeTransactionSubscriptions)if(n.has(l))for(const[I,r]of o)r(e);for(const[l,o]of t.transactionSubscriptions)o(e);(!NB().early||t.suspendedComponentResolvers.size>0)&&(I0(e,t,g),t.suspendedComponentResolvers.forEach(l=>l()),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach(l=>l(g)),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function x1(e){const t=e.getState();t.commitDepth++;try{const{nextTree:g}=t;if(g==null)return;t.previousTree=t.currentTree,t.currentTree=g,t.nextTree=null,TB(e),t.previousTree!=null?t.graphsByVersion.delete(t.previousTree.version):OA("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,ot("recoil_memory_managament_2020")&&g==null&&FB(e)}finally{t.commitDepth--}}function H1({setNotifyBatcherOfChange:e}){const t=Ya(),[,g]=J1([]);return e(()=>g({})),Wu(()=>(e(()=>g({})),()=>{e(()=>{})}),[e]),Wu(()=>{d2.enqueueExecution("Batcher",()=>{x1(t.current)})}),null}function w1(e,t){const g=HB();return t({set:(n,l)=>{const o=g.currentTree,I=B1(e,o,n.key,l),r=new Set(I.keys()),C=o.nonvalidatedAtoms.clone();for(const i of r)C.delete(i);g.currentTree={...o,dirtyAtoms:m1(o.dirtyAtoms,r),atomValues:V1(o.atomValues,I),nonvalidatedAtoms:C}},setUnvalidatedAtomValues:n=>{n.forEach((l,o)=>{g.currentTree=y1(g.currentTree,o,l)})}}),g}function N1(e){const t=v1(e),g=t.getStore_INTERNAL().getState();return t.retain(),g.nodeCleanupFunctions.forEach(n=>n()),g.nodeCleanupFunctions.clear(),g}let Np=0;function F1({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:g,children:n}){let l;const o=m=>{const A=l.current.graphsByVersion;if(A.has(m))return mt(A.get(m));const d=S1();return A.set(m,d),d},I=(m,A)=>{if(A==null){const{transactionSubscriptions:d}=c.current.getState(),h=Np++;return d.set(h,m),{release:()=>{d.delete(h)}}}else{const{nodeTransactionSubscriptions:d}=c.current.getState();d.has(A)||d.set(A,new Map);const h=Np++;return mt(d.get(A)).set(h,m),{release:()=>{const Z=d.get(A);Z&&(Z.delete(h),Z.size===0&&d.delete(A))}}}},r=m=>{wp(c.current);for(const A of Object.keys(m))mt(c.current.getState().nextTree).transactionMetadata[A]=m[A]},C=m=>{wp(c.current);const A=mt(l.current.nextTree);let d;try{Vu=!0,d=m(A)}finally{Vu=!1}d!==A&&(l.current.nextTree=d,NB().early&&I0(c.current,l.current,d),mt(i.current)())},i=k1(null),a=R1(m=>{i.current=m},[i]),c=Hp(()=>g!=null?g:{storeID:wB(),getState:()=>l.current,replaceState:C,getGraph:o,subscribeToTransactions:I,addTransactionMetadata:r});g!=null&&(c.current=g),l=Hp(()=>e!=null?w1(c.current,e):t!=null?N1(t):HB());const s=X1(()=>Bc==null?void 0:Bc(l,()=>l.current.currentTree.version),[l]);return Wu(()=>{const m=c.current;for(const A of new Set(m.getState().knownAtoms))f1(m,A,"get");return()=>{for(const A of m.getState().knownAtoms)h1(m,A)}},[c]),b(zB.Provider,{value:c,children:U(MB.Provider,{value:s,children:[b(H1,{setNotifyBatcherOfChange:a}),n]})})}function K1(e){const{override:t,...g}=e,n=Ya();return t===!1&&n.current!==EB?e.children:b(F1,{...g})}function E1(){return Ya().current.storeID}var Jn={RecoilRoot:K1,useStoreRef:Ya,useRecoilMutableSource:Y1,useRecoilStoreID:E1,notifyComponents_FOR_TESTING:I0,sendEndOfBatchNotifications_FOR_TESTING:TB};function z1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let g=0,n=e.length;g<n;g++)if(e[g]!==t[g])return!1;return!0}var M1=z1;const{useEffect:T1,useRef:L1}=Me;function U1(e){const t=L1();return T1(()=>{t.current=e}),t.current}var LB=U1;const{useStoreRef:D1}=Jn,{SUSPENSE_TIMEOUT_MS:Q1}=_l,{updateRetainCount:XI}=_l,{RetentionZone:P1}=Va,{useEffect:j1,useRef:O1}=Me,{isSSR:Fp}=o0;function _1(e){if(!!ot("recoil_memory_managament_2020"))return $1(e)}function $1(e){const g=(Array.isArray(e)?e:[e]).map(I=>I instanceof P1?I:I.key),n=D1();j1(()=>{if(!ot("recoil_memory_managament_2020"))return;const I=n.current;if(l.current&&!Fp)window.clearTimeout(l.current),l.current=null;else for(const r of g)XI(I,r,1);return()=>{for(const r of g)XI(I,r,-1)}},[n,...g]);const l=O1(),o=LB(g);if(!Fp&&(o===void 0||!M1(o,g))){const I=n.current;for(const r of g)XI(I,r,1);if(o)for(const r of o)XI(I,r,-1);l.current&&window.clearTimeout(l.current),l.current=window.setTimeout(()=>{l.current=null;for(const r of g)XI(I,r,-1)},Q1)}}var r0=_1;function q1(){return"<component name not available>"}var gC=q1;const{batchUpdates:ek}=Ra,{DEFAULT_VALUE:UB}=pg,{currentRendererSupportsUseSyncExternalStore:tk,reactMode:iI,useMutableSource:gk,useSyncExternalStore:nk}=qr,{useRecoilMutableSource:lk,useStoreRef:sn}=Jn,{AbstractRecoilValue:vu,getRecoilValueAsLoadable:nC,setRecoilValue:Di,setUnvalidatedRecoilValue:ok,subscribeToRecoilValue:Oo}=an,{useCallback:dg,useEffect:_o,useMemo:DB,useRef:Ir,useState:C0}=Me,{setByAddingToSet:Ik}=dB;function i0(e,t,g){if(e.state==="hasValue")return e.contents;throw e.state==="loading"?new Promise(l=>{g.current.getState().suspendedComponentResolvers.add(l)}):e.state==="hasError"?e.contents:Ee(`Invalid value of loadable atom "${t.key}"`)}function rk(){const e=gC(),t=sn(),[,g]=C0([]),n=Ir(new Set);n.current=new Set;const l=Ir(new Set),o=Ir(new Map),I=dg(C=>{const i=o.current.get(C);i&&(i.release(),o.current.delete(C))},[o]),r=dg((C,i)=>{o.current.has(i)&&g([])},[]);return _o(()=>{const C=t.current;lr(n.current,l.current).forEach(i=>{if(o.current.has(i))return;const a=Oo(C,new vu(i),s=>r(s,i),e);o.current.set(i,a),C.getState().nextTree?C.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{r(C.getState(),i)}):r(C.getState(),i)}),lr(l.current,n.current).forEach(i=>{I(i)}),l.current=n.current}),_o(()=>{const C=o.current;return lr(n.current,new Set(C.keys())).forEach(i=>{const a=Oo(t.current,new vu(i),c=>r(c,i),e);C.set(i,a)}),()=>C.forEach((i,a)=>I(a))},[e,t,I,r]),DB(()=>{function C(A){return d=>{Di(t.current,A,d)}}function i(A){return()=>Di(t.current,A,UB)}function a(A){var d;n.current.has(A.key)||(n.current=Ik(n.current,A.key));const h=t.current.getState();return nC(t.current,A,iI().early&&(d=h.nextTree)!==null&&d!==void 0?d:h.currentTree)}function c(A){const d=a(A);return i0(d,A,t)}function s(A){return[c(A),C(A)]}function m(A){return[a(A),C(A)]}return{getRecoilValue:c,getRecoilValueLoadable:a,getRecoilState:s,getRecoilStateLoadable:m,getSetRecoilState:C,getResetRecoilState:i}},[n,t])}const Ck={current:0};function ik(e){const t=sn(),g=gC(),n=dg(()=>{var r;const C=t.current,i=C.getState(),a=iI().early&&(r=i.nextTree)!==null&&r!==void 0?r:i.currentTree;return{loadable:nC(C,e,a),key:e.key}},[t,e]),l=dg(r=>{let C;return()=>{var i,a;const c=r();return(i=C)!==null&&i!==void 0&&i.loadable.is(c.loadable)&&((a=C)===null||a===void 0?void 0:a.key)===c.key?C:(C=c,c)}},[]),o=DB(()=>l(n),[n,l]),I=dg(r=>{const C=t.current;return Oo(C,e,r,g).release},[t,e,g]);return nk(I,o,o).loadable}function ak(e){const t=sn(),g=dg(()=>{var i;const a=t.current,c=a.getState(),s=iI().early&&(i=c.nextTree)!==null&&i!==void 0?i:c.currentTree;return nC(a,e,s)},[t,e]),n=dg(()=>g(),[g]),l=gC(),o=dg((i,a)=>{const c=t.current;return Oo(c,e,()=>{if(!ot("recoil_suppress_rerender_in_callback"))return a();const m=g();C.current.is(m)||a(),C.current=m},l).release},[t,e,l,g]),I=lk();if(I==null)throw Ee("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const r=gk(I,n,o),C=Ir(r);return _o(()=>{C.current=r}),r}function Ru(e){const t=sn(),g=gC(),n=dg(()=>{var C;const i=t.current,a=i.getState(),c=iI().early&&(C=a.nextTree)!==null&&C!==void 0?C:a.currentTree;return nC(i,e,c)},[t,e]),l=dg(()=>({loadable:n(),key:e.key}),[n,e.key]),o=dg(C=>{const i=l();return C.loadable.is(i.loadable)&&C.key===i.key?C:i},[l]);_o(()=>{const C=Oo(t.current,e,i=>{r(o)},g);return r(o),C.release},[g,e,t,o]);const[I,r]=C0(l);return I.key!==e.key?l().loadable:I.loadable}function sk(e){const t=sn(),[,g]=C0([]),n=gC(),l=dg(()=>{var r;const C=t.current,i=C.getState(),a=iI().early&&(r=i.nextTree)!==null&&r!==void 0?r:i.currentTree;return nC(C,e,a)},[t,e]),o=l(),I=Ir(o);return _o(()=>{I.current=o}),_o(()=>{const r=t.current,C=r.getState(),i=Oo(r,e,c=>{var s;if(!ot("recoil_suppress_rerender_in_callback"))return g([]);const m=l();(s=I.current)!==null&&s!==void 0&&s.is(m)||g(m),I.current=m},n);if(C.nextTree)r.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{I.current=null,g([])});else{var a;if(!ot("recoil_suppress_rerender_in_callback"))return g([]);const c=l();(a=I.current)!==null&&a!==void 0&&a.is(c)||g(c),I.current=c}return i.release},[n,l,e,t]),o}function a0(e){return ot("recoil_memory_managament_2020")&&r0(e),{TRANSITION_SUPPORT:Ru,SYNC_EXTERNAL_STORE:tk()?ik:Ru,MUTABLE_SOURCE:ak,LEGACY:sk}[iI().mode](e)}function QB(e){const t=sn(),g=a0(e);return i0(g,e,t)}function xa(e){const t=sn();return dg(g=>{Di(t.current,e,g)},[t,e])}function ck(e){const t=sn();return dg(()=>{Di(t.current,e,UB)},[t,e])}function dk(e){return[QB(e),xa(e)]}function uk(e){return[a0(e),xa(e)]}function Ak(){const e=sn();return(t,g={})=>{ek(()=>{e.current.addTransactionMetadata(g),t.forEach((n,l)=>ok(e.current,new vu(l),n))})}}function PB(e){return ot("recoil_memory_managament_2020")&&r0(e),Ru(e)}function jB(e){const t=sn(),g=PB(e);return i0(g,e,t)}function mk(e){return[jB(e),xa(e)]}var pk={recoilComponentGetRecoilValueCount_FOR_TESTING:Ck,useRecoilInterface:rk,useRecoilState:dk,useRecoilStateLoadable:uk,useRecoilValue:QB,useRecoilValueLoadable:a0,useResetRecoilState:ck,useSetRecoilState:xa,useSetUnvalidatedAtomValues:Ak,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:PB,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:jB,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:mk};function bk(e,t){const g=new Map;for(const[n,l]of e)t(l,n)&&g.set(n,l);return g}var Zk=bk;function hk(e,t){const g=new Set;for(const n of e)t(n)&&g.add(n);return g}var Gk=hk;function fk(...e){const t=new Map;for(let g=0;g<e.length;g++){const n=e[g].keys();let l;for(;!(l=n.next()).done;)t.set(l.value,e[g].get(l.value))}return t}var Bk=fk;const{batchUpdates:yk}=Ra,{DEFAULT_VALUE:Sk,getNode:OB,nodes:Wk}=pg,{useStoreRef:s0}=Jn,{AbstractRecoilValue:Vk,setRecoilValueLoadable:vk}=an,{SUSPENSE_TIMEOUT_MS:Rk}=_l,{cloneSnapshot:Qi}=Ja,{useCallback:Ha,useEffect:_B,useRef:Kp,useState:Xk}=Me,{isSSR:Ep}=o0;function wa(e){const t=s0();_B(()=>t.current.subscribeToTransactions(e).release,[e,t])}function zp(e){const t=e.atomValues.toMap(),g=Ui(Zk(t,(n,l)=>{const I=OB(l).persistence_UNSTABLE;return I!=null&&I.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return Bk(e.nonvalidatedAtoms.toMap(),g)}function kk(e){wa(Ha(t=>{let g=t.getState().previousTree;const n=t.getState().currentTree;g||(g=t.getState().currentTree);const l=zp(n),o=zp(g),I=Ui(Wk,C=>{var i,a,c,s;return{persistence_UNSTABLE:{type:(i=(a=C.persistence_UNSTABLE)===null||a===void 0?void 0:a.type)!==null&&i!==void 0?i:"none",backButton:(c=(s=C.persistence_UNSTABLE)===null||s===void 0?void 0:s.backButton)!==null&&c!==void 0?c:!1}}}),r=Gk(n.dirtyAtoms,C=>l.has(C)||o.has(C));e({atomValues:l,previousAtomValues:o,atomInfo:I,modifiedAtoms:r,transactionMetadata:{...n.transactionMetadata}})},[e]))}function Jk(e){wa(Ha(t=>{const g=Qi(t,"latest"),n=Qi(t,"previous");e({snapshot:g,previousSnapshot:n})},[e]))}function Yk(){const e=s0(),[t,g]=Xk(()=>Qi(e.current)),n=LB(t),l=Kp(),o=Kp();if(wa(Ha(r=>g(Qi(r)),[])),_B(()=>{const r=t.retain();if(l.current&&!Ep){var C;window.clearTimeout(l.current),l.current=null,(C=o.current)===null||C===void 0||C.call(o),o.current=null}return()=>{window.setTimeout(r,10)}},[t]),n!==t&&!Ep){if(l.current){var I;window.clearTimeout(l.current),l.current=null,(I=o.current)===null||I===void 0||I.call(o),o.current=null}o.current=t.retain(),l.current=window.setTimeout(()=>{var r;l.current=null,(r=o.current)===null||r===void 0||r.call(o),o.current=null},Rk)}return t}function $B(e,t){var g;const n=e.getState(),l=(g=n.nextTree)!==null&&g!==void 0?g:n.currentTree,o=t.getStore_INTERNAL().getState().currentTree;yk(()=>{const I=new Set;for(const i of[l.atomValues.keys(),o.atomValues.keys()])for(const a of i){var r,C;((r=l.atomValues.get(a))===null||r===void 0?void 0:r.contents)!==((C=o.atomValues.get(a))===null||C===void 0?void 0:C.contents)&&OB(a).shouldRestoreFromSnapshots&&I.add(a)}I.forEach(i=>{vk(e,new Vk(i),o.atomValues.has(i)?mt(o.atomValues.get(i)):Sk)}),e.replaceState(i=>({...i,stateID:t.getID()}))})}function xk(){const e=s0();return Ha(t=>$B(e.current,t),[e])}var qB={useRecoilSnapshot:Yk,gotoSnapshot:$B,useGotoRecoilSnapshot:xk,useRecoilTransactionObserver:Jk,useTransactionObservation_DEPRECATED:kk,useTransactionSubscription_DEPRECATED:wa};const{peekNodeInfo:Hk}=ml,{useStoreRef:wk}=Jn;function Nk(){const e=wk();return({key:t})=>Hk(e.current,e.current.getState().currentTree,t)}var Fk=Nk;const{reactMode:Kk}=qr,{RecoilRoot:Ek,useStoreRef:zk}=Jn,{useMemo:Mk}=Me;function Tk(){Kk().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const e=zk().current;return Mk(()=>{function t({children:g}){return b(Ek,{store_INTERNAL:e,children:g})}return t},[e])}var Lk=Tk;const{loadableWithValue:Uk}=$r,{initializeNode:Dk}=ml,{DEFAULT_VALUE:Qk,getNode:Pk}=pg,{copyTreeState:jk,getRecoilValueAsLoadable:Ok,invalidateDownstreams:_k,writeLoadableToTreeState:$k}=an;function Mp(e){return Pk(e.key).nodeType==="atom"}class qk{constructor(t,g){Fe(this,"_store",void 0),Fe(this,"_treeState",void 0),Fe(this,"_changes",void 0),Fe(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!Mp(n))throw Ee("Reading selectors within atomicUpdate is not supported");const l=Ok(this._store,n,this._treeState);if(l.state==="hasValue")return l.contents;throw l.state==="hasError"?l.contents:Ee(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),Fe(this,"set",(n,l)=>{if(!Mp(n))throw Ee("Setting selectors within atomicUpdate is not supported");if(typeof l=="function"){const o=this.get(n);this._changes.set(n.key,l(o))}else Dk(this._store,n.key,"set"),this._changes.set(n.key,l)}),Fe(this,"reset",n=>{this.set(n,Qk)}),this._store=t,this._treeState=g,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const t=jk(this._treeState);for(const[g,n]of this._changes)$k(t,g,Uk(n));return _k(this._store,t),t}}function eJ(e){return t=>{e.replaceState(g=>{const n=new qk(e,g);return t(n),n.newTreeState_INTERNAL()})}}var tJ={atomicUpdater:eJ},gJ=tJ.atomicUpdater,ey=Object.freeze({__proto__:null,atomicUpdater:gJ});function nJ(e,t){if(!e)throw new Error(t)}var lJ=nJ,DI=lJ;const{atomicUpdater:oJ}=ey,{batchUpdates:IJ}=Ra,{DEFAULT_VALUE:rJ}=pg,{useStoreRef:CJ}=Jn,{refreshRecoilValue:iJ,setRecoilValue:Tp}=an,{cloneSnapshot:aJ}=Ja,{gotoSnapshot:sJ}=qB,{useCallback:cJ}=Me;class ty{}const dJ=new ty;function gy(e,t,g,n){let l=dJ,o;if(IJ(()=>{const r="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof t!="function")throw Ee(r);const C=uB({...n!=null?n:{},set:(a,c)=>Tp(e,a,c),reset:a=>Tp(e,a,rJ),refresh:a=>iJ(e,a),gotoSnapshot:a=>sJ(e,a),transact_UNSTABLE:a=>oJ(e)(a)},{snapshot:()=>{const a=aJ(e);return o=a.retain(),a}}),i=t(C);if(typeof i!="function")throw Ee(r);l=i(...g)}),l instanceof ty&&DI(!1),At(l))l.finally(()=>{var r;(r=o)===null||r===void 0||r()});else{var I;(I=o)===null||I===void 0||I()}return l}function uJ(e,t){const g=CJ();return cJ((...n)=>gy(g.current,e,n),t!=null?[...t,g]:void 0)}var ny={recoilCallback:gy,useRecoilCallback:uJ};const{useStoreRef:AJ}=Jn,{refreshRecoilValue:mJ}=an,{useCallback:pJ}=Me;function bJ(e){const t=AJ();return pJ(()=>{const g=t.current;mJ(g,e)},[e,t])}var ZJ=bJ;const{atomicUpdater:hJ}=ey,{useStoreRef:GJ}=Jn,{useMemo:fJ}=Me;function BJ(e,t){const g=GJ();return fJ(()=>(...n)=>{hJ(g.current)(o=>{e(o)(...n)})},t!=null?[...t,g]:void 0)}var yJ=BJ;class SJ{constructor(t){Fe(this,"value",void 0),this.value=t}}var WJ={WrappedValue:SJ},VJ=WJ.WrappedValue,ly=Object.freeze({__proto__:null,WrappedValue:VJ});const{isFastRefreshEnabled:vJ}=qr;class Lp extends Error{}class RJ{constructor(t){var g,n,l;Fe(this,"_name",void 0),Fe(this,"_numLeafs",void 0),Fe(this,"_root",void 0),Fe(this,"_onHit",void 0),Fe(this,"_onSet",void 0),Fe(this,"_mapNodeValue",void 0),this._name=t==null?void 0:t.name,this._numLeafs=0,this._root=null,this._onHit=(g=t==null?void 0:t.onHit)!==null&&g!==void 0?g:()=>{},this._onSet=(n=t==null?void 0:t.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(l=t==null?void 0:t.mapNodeValue)!==null&&l!==void 0?l:o=>o}size(){return this._numLeafs}root(){return this._root}get(t,g){var n;return(n=this.getLeafNode(t,g))===null||n===void 0?void 0:n.value}getLeafNode(t,g){if(this._root==null)return;let n=this._root;for(;n;){if(g==null||g.onNodeVisit(n),n.type==="leaf")return this._onHit(n),n;const l=this._mapNodeValue(t(n.nodeKey));n=n.branches.get(l)}}set(t,g,n){const l=()=>{var o,I,r,C;let i,a;for(const[h,Z]of t){var c,s,m;const u=this._root;if((u==null?void 0:u.type)==="leaf")throw this.invalidCacheError();const p=i;if(i=p?p.branches.get(a):u,i=(c=i)!==null&&c!==void 0?c:{type:"branch",nodeKey:h,parent:p,branches:new Map,branchKey:a},i.type!=="branch"||i.nodeKey!==h)throw this.invalidCacheError();p==null||p.branches.set(a,i),n==null||(s=n.onNodeVisit)===null||s===void 0||s.call(n,i),a=this._mapNodeValue(Z),this._root=(m=this._root)!==null&&m!==void 0?m:i}const A=i?(o=i)===null||o===void 0?void 0:o.branches.get(a):this._root;if(A!=null&&(A.type!=="leaf"||A.branchKey!==a))throw this.invalidCacheError();const d={type:"leaf",value:g,parent:i,branchKey:a};(I=i)===null||I===void 0||I.branches.set(a,d),this._root=(r=this._root)!==null&&r!==void 0?r:d,this._numLeafs++,this._onSet(d),n==null||(C=n.onNodeVisit)===null||C===void 0||C.call(n,d)};try{l()}catch(o){if(o instanceof Lp)this.clear(),l();else throw o}}delete(t){const g=this.root();if(!g)return!1;if(t===g)return this._root=null,this._numLeafs=0,!0;let n=t.parent,l=t.branchKey;for(;n;){var o;if(n.branches.delete(l),n===g)return n.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(n.branches.size>0)break;l=(o=n)===null||o===void 0?void 0:o.branchKey,n=n.parent}for(;n!==g;n=n.parent)if(n==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const t=vJ()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw OA(t+(this._name!=null?` - ${this._name}`:"")),new Lp}}var XJ={TreeCache:RJ},kJ=XJ.TreeCache,oy=Object.freeze({__proto__:null,TreeCache:kJ});class JJ{constructor(t){var g;Fe(this,"_maxSize",void 0),Fe(this,"_size",void 0),Fe(this,"_head",void 0),Fe(this,"_tail",void 0),Fe(this,"_map",void 0),Fe(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(g=t.mapKey)!==null&&g!==void 0?g:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(t){return this._map.has(this._keyMapper(t))}get(t){const g=this._keyMapper(t),n=this._map.get(g);if(!!n)return this.set(t,n.value),n.value}set(t,g){const n=this._keyMapper(t);this._map.get(n)&&this.delete(t);const o=this.head(),I={key:t,right:o,left:null,value:g};o?o.left=I:this._tail=I,this._map.set(n,I),this._head=I,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const t=this.tail();t&&this.delete(t.key)}delete(t){const g=this._keyMapper(t);if(!this._size||!this._map.has(g))return;const n=mt(this._map.get(g)),l=n.right,o=n.left;l&&(l.left=n.left),o&&(o.right=n.right),n===this.head()&&(this._head=l),n===this.tail()&&(this._tail=o),this._map.delete(g),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var YJ={LRUCache:JJ},xJ=YJ.LRUCache,Iy=Object.freeze({__proto__:null,LRUCache:xJ});const{LRUCache:HJ}=Iy,{TreeCache:wJ}=oy;function NJ({name:e,maxSize:t,mapNodeValue:g=n=>n}){const n=new HJ({maxSize:t}),l=new wJ({name:e,mapNodeValue:g,onHit:o=>{n.set(o,!0)},onSet:o=>{const I=n.tail();n.set(o,!0),I&&l.size()>t&&l.delete(I.key)}});return l}var Up=NJ;function Mg(e,t,g){if(typeof e=="string"&&!e.includes('"')&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if((t==null?void 0:t.allowFunctions)!==!0)throw Ee("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(e===null)return"null";if(typeof e!="object"){var n;return(n=JSON.stringify(e))!==null&&n!==void 0?n:""}if(At(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map((l,o)=>Mg(l,t,o.toString()))}]`;if(typeof e.toJSON=="function")return Mg(e.toJSON(g),t,g);if(e instanceof Map){const l={};for(const[o,I]of e)l[typeof o=="string"?o:Mg(o,t)]=I;return Mg(l,t,g)}return e instanceof Set?Mg(Array.from(e).sort((l,o)=>Mg(l,t).localeCompare(Mg(o,t))),t,g):Symbol!==void 0&&e[Symbol.iterator]!=null&&typeof e[Symbol.iterator]=="function"?Mg(Array.from(e),t,g):`{${Object.keys(e).filter(l=>e[l]!==void 0).sort().map(l=>`${Mg(l,t)}:${Mg(e[l],t,l)}`).join(",")}}`}function FJ(e,t={allowFunctions:!1}){return Mg(e,t)}var Na=FJ;const{TreeCache:KJ}=oy,XC={equality:"reference",eviction:"keep-all",maxSize:1/0};function EJ({equality:e=XC.equality,eviction:t=XC.eviction,maxSize:g=XC.maxSize}=XC,n){const l=zJ(e);return MJ(t,g,l,n)}function zJ(e){switch(e){case"reference":return t=>t;case"value":return t=>Na(t)}throw Ee(`Unrecognized equality policy ${e}`)}function MJ(e,t,g,n){switch(e){case"keep-all":return new KJ({name:n,mapNodeValue:g});case"lru":return Up({name:n,maxSize:mt(t),mapNodeValue:g});case"most-recent":return Up({name:n,maxSize:1,mapNodeValue:g})}throw Ee(`Unrecognized eviction policy ${e}`)}var TJ=EJ;function LJ(e){return()=>null}var UJ={startPerfBlock:LJ};const{isLoadable:DJ,loadableWithError:kC,loadableWithPromise:QJ,loadableWithValue:yc}=$r,{WrappedValue:ry}=ly,{getNodeLoadable:JC,peekNodeLoadable:PJ,setNodeValue:jJ}=ml,{saveDepsToStore:OJ}=eC,{DEFAULT_VALUE:_J,getConfigDeletionHandler:$J,getNode:qJ,registerNode:Dp}=pg,{isRecoilValue:eY}=jo,{markRecoilValueModified:Qp}=an,{retainedByOptionWithDefault:tY}=_l,{recoilCallback:gY}=ny,{startPerfBlock:nY}=UJ;class Cy{}const kI=new Cy,JI=[],YC=new Map,lY=(()=>{let e=0;return()=>e++})();function iy(e){let t=null;const{key:g,get:n,cachePolicy_UNSTABLE:l}=e,o=e.set!=null?e.set:void 0,I=new Set,r=TJ(l!=null?l:{equality:"reference",eviction:"keep-all"},g),C=tY(e.retainedBy_UNSTABLE),i=new Map;let a=0;function c(){return!ot("recoil_memory_managament_2020")||a>0}function s(V){return V.getState().knownSelectors.add(g),a++,()=>{a--}}function m(){return $J(g)!==void 0&&!c()}function A(V,Y,J,P,k){j(Y,P,k),d(V,J)}function d(V,Y){F(V,Y)&&H(V),Z(Y,!0)}function h(V,Y){F(V,Y)&&(mt(y(V)).stateVersions.clear(),Z(Y,!1))}function Z(V,Y){const J=YC.get(V);if(J!=null){for(const P of J)Qp(P,mt(t));Y&&YC.delete(V)}}function u(V,Y){let J=YC.get(Y);J==null&&YC.set(Y,J=new Set),J.add(V)}function p(V,Y,J,P,k,$){return Y.then(K=>{if(!c())throw H(V),kI;const _=yc(K);return A(V,J,k,_,P),K}).catch(K=>{if(!c())throw H(V),kI;if(At(K))return G(V,K,J,P,k,$);const _=kC(K);throw A(V,J,k,_,P),K})}function G(V,Y,J,P,k,$){return Y.then(K=>{if(!c())throw H(V),kI;$.loadingDepKey!=null&&$.loadingDepPromise===Y?J.atomValues.set($.loadingDepKey,yc(K)):V.getState().knownSelectors.forEach(ge=>{J.atomValues.delete(ge)});const _=W(V,J);if(_&&_.state!=="loading"){if((F(V,k)||y(V)==null)&&d(V,k),_.state==="hasValue")return _.contents;throw _.contents}if(!F(V,k)){const ge=w(V,J);if(ge!=null)return ge.loadingLoadable.contents}const[re,ne]=S(V,J,k);if(re.state!=="loading"&&A(V,J,k,re,ne),re.state==="hasError")throw re.contents;return re.contents}).catch(K=>{if(K instanceof Cy)throw kI;if(!c())throw H(V),kI;const _=kC(K);throw A(V,J,k,_,P),K})}function f(V,Y,J,P){var k,$,K,_;if(F(V,P)||Y.version===((k=V.getState())===null||k===void 0||($=k.currentTree)===null||$===void 0?void 0:$.version)||Y.version===((K=V.getState())===null||K===void 0||(_=K.nextTree)===null||_===void 0?void 0:_.version)){var re,ne,ge;OJ(g,J,V,(re=(ne=V.getState())===null||ne===void 0||(ge=ne.nextTree)===null||ge===void 0?void 0:ge.version)!==null&&re!==void 0?re:V.getState().currentTree.version)}for(const ue of J)I.add(ue)}function S(V,Y,J){const P=nY(g);let k=!0,$=!0;const K=()=>{P(),$=!1};let _,re=!1,ne;const ge={loadingDepKey:null,loadingDepPromise:null},ue=new Map;function ye({key:Ve}){const Be=JC(V,Y,Ve);switch(ue.set(Ve,Be),k||(f(V,Y,new Set(ue.keys()),J),h(V,J)),Be.state){case"hasValue":return Be.contents;case"hasError":throw Be.contents;case"loading":throw ge.loadingDepKey=Ve,ge.loadingDepPromise=Be.contents,Be.contents}throw Ee("Invalid Loadable state")}const he=Ve=>(...Be)=>{if($)throw Ee("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return t==null&&DI(!1),gY(V,Ve,Be,{node:t})};try{_=n({get:ye,getCallback:he}),_=eY(_)?ye(_):_,DJ(_)&&(_.state==="hasError"&&(re=!0),_=_.contents),At(_)?_=p(V,_,Y,ue,J,ge).finally(K):K(),_=_ instanceof ry?_.value:_}catch(Ve){_=Ve,At(_)?_=G(V,_,Y,ue,J,ge).finally(K):(re=!0,K())}return re?ne=kC(_):At(_)?ne=QJ(_):ne=yc(_),k=!1,x(V,J,ue),f(V,Y,new Set(ue.keys()),J),[ne,ue]}function W(V,Y){let J=Y.atomValues.get(g);if(J!=null)return J;const P=new Set;try{J=r.get($=>(typeof $!="string"&&DI(!1),JC(V,Y,$).contents),{onNodeVisit:$=>{$.type==="branch"&&$.nodeKey!==g&&P.add($.nodeKey)}})}catch($){throw Ee(`Problem with cache lookup for selector "${g}": ${$.message}`)}if(J){var k;Y.atomValues.set(g,J),f(V,Y,P,(k=y(V))===null||k===void 0?void 0:k.executionID)}return J}function v(V,Y){const J=W(V,Y);if(J!=null)return H(V),J;const P=w(V,Y);if(P!=null){var k;return((k=P.loadingLoadable)===null||k===void 0?void 0:k.state)==="loading"&&u(V,P.executionID),P.loadingLoadable}const $=lY(),[K,_]=S(V,Y,$);return K.state==="loading"?(R(V,$,K,_,Y),u(V,$)):(H(V),j(Y,K,_)),K}function w(V,Y){const J=kB([i.has(V)?[mt(i.get(V))]:[],Sa(t0(i,([k])=>k!==V),([,k])=>k)]);function P(k){for(const[$,K]of k)if(!JC(V,Y,$).is(K))return!0;return!1}for(const k of J){if(k.stateVersions.get(Y.version)||!P(k.depValuesDiscoveredSoFarDuringAsyncWork))return k.stateVersions.set(Y.version,!0),k;k.stateVersions.set(Y.version,!1)}}function y(V){return i.get(V)}function R(V,Y,J,P,k){i.set(V,{depValuesDiscoveredSoFarDuringAsyncWork:P,executionID:Y,loadingLoadable:J,stateVersions:new Map([[k.version,!0]])})}function x(V,Y,J){if(F(V,Y)){const P=y(V);P!=null&&(P.depValuesDiscoveredSoFarDuringAsyncWork=J)}}function H(V){i.delete(V)}function F(V,Y){var J;return Y===((J=y(V))===null||J===void 0?void 0:J.executionID)}function M(V){return Array.from(V.entries()).map(([Y,J])=>[Y,J.contents])}function j(V,Y,J){V.atomValues.set(g,Y);try{r.set(M(J),Y)}catch(P){throw Ee(`Problem with setting cache for selector "${g}": ${P.message}`)}}function O(V){if(JI.includes(g)){const Y=`Recoil selector has circular dependencies: ${JI.slice(JI.indexOf(g)).join(" \u2192 ")}`;return kC(Ee(Y))}JI.push(g);try{return V()}finally{JI.pop()}}function z(V,Y){const J=Y.atomValues.get(g);return J!=null?J:r.get(P=>{var k;return typeof P!="string"&&DI(!1),(k=PJ(V,Y,P))===null||k===void 0?void 0:k.contents})}function D(V,Y){return O(()=>v(V,Y))}function T(V){V.atomValues.delete(g)}function N(V,Y){t==null&&DI(!1);for(const P of I){var J;const k=qJ(P);(J=k.clearCache)===null||J===void 0||J.call(k,V,Y)}I.clear(),T(Y),r.clear(),Qp(V,t)}return o!=null?t=Dp({key:g,nodeType:"selector",peek:z,get:D,set:(Y,J,P)=>{let k=!1;const $=new Map;function K({key:ge}){if(k)throw Ee("Recoil: Async selector sets are not currently supported.");const ue=JC(Y,J,ge);if(ue.state==="hasValue")return ue.contents;if(ue.state==="loading"){const ye=`Getting value of asynchronous atom or selector "${ge}" in a pending state while setting selector "${g}" is not yet supported.`;throw Ee(ye)}else throw ue.contents}function _(ge,ue){if(k)throw Ee("Recoil: Async selector sets are not currently supported.");const ye=typeof ue=="function"?ue(K(ge)):ue;jJ(Y,J,ge.key,ye).forEach((Ve,Be)=>$.set(Be,Ve))}function re(ge){_(ge,_J)}const ne=o({set:_,get:K,reset:re},P);if(ne!==void 0)throw At(ne)?Ee("Recoil: Async selector sets are not currently supported."):Ee("Recoil: selector set should be a void function.");return k=!0,$},init:s,invalidate:T,clearCache:N,shouldDeleteConfigOnRelease:m,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:C}):t=Dp({key:g,nodeType:"selector",peek:z,get:D,init:s,invalidate:T,clearCache:N,shouldDeleteConfigOnRelease:m,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:C})}iy.value=e=>new ry(e);var $o=iy;const{isLoadable:oY,loadableWithError:Sc,loadableWithPromise:Wc,loadableWithValue:go}=$r,{WrappedValue:ay}=ly,{peekNodeInfo:IY}=ml,{DEFAULT_VALUE:vl,DefaultValue:Un,getConfigDeletionHandler:sy,registerNode:rY,setConfigDeletionHandler:CY}=pg,{isRecoilValue:iY}=jo,{getRecoilValueAsLoadable:aY,markRecoilValueModified:sY,setRecoilValue:Pp,setRecoilValueLoadable:cY}=an,{retainedByOptionWithDefault:dY}=_l,YI=e=>e instanceof ay?e.value:e;function uY(e){const{key:t,persistence_UNSTABLE:g}=e,n=dY(e.retainedBy_UNSTABLE);let l=0;function o(u){return Wc(u.then(p=>(I=go(p),p)).catch(p=>{throw I=Sc(p),p}))}let I=At(e.default)?o(e.default):oY(e.default)?e.default.state==="loading"?o(e.default.contents):e.default:go(YI(e.default));I.contents;let r;const C=new Map;function i(u){return u}function a(u,p){const G=p.then(f=>{var S,W;return((W=((S=u.getState().nextTree)!==null&&S!==void 0?S:u.getState().currentTree).atomValues.get(t))===null||W===void 0?void 0:W.contents)===G&&Pp(u,Z,f),f}).catch(f=>{var S,W;throw((W=((S=u.getState().nextTree)!==null&&S!==void 0?S:u.getState().currentTree).atomValues.get(t))===null||W===void 0?void 0:W.contents)===G&&cY(u,Z,Sc(f)),f});return G}function c(u,p,G){var f;l++;const S=()=>{var y;l--,(y=C.get(u))===null||y===void 0||y.forEach(R=>R()),C.delete(u)};if(u.getState().knownAtoms.add(t),I.state==="loading"){const y=()=>{var R;((R=u.getState().nextTree)!==null&&R!==void 0?R:u.getState().currentTree).atomValues.has(t)||sY(u,Z)};I.contents.finally(y)}const W=(f=e.effects)!==null&&f!==void 0?f:e.effects_UNSTABLE;if(W!=null){let F=function(T){if(R&&T.key===t){const N=y;return N instanceof Un?s(u,p):At(N)?Wc(N.then(V=>V instanceof Un?I.toPromise():V)):go(N)}return aY(u,T)},M=function(T){return F(T).toPromise()},j=function(T){var N;const V=IY(u,(N=u.getState().nextTree)!==null&&N!==void 0?N:u.getState().currentTree,T.key);return R&&T.key===t&&!(y instanceof Un)?{...V,isSet:!0,loadable:F(T)}:V},y=vl,R=!0,x=!1,H=null;const O=T=>N=>{if(R){const V=F(Z),Y=V.state==="hasValue"?V.contents:vl;y=typeof N=="function"?N(Y):N,At(y)&&(y=y.then(J=>(H={effect:T,value:J},J)))}else{if(At(N))throw Ee("Setting atoms to async values is not implemented.");typeof N!="function"&&(H={effect:T,value:YI(N)}),Pp(u,Z,typeof N=="function"?V=>{const Y=YI(N(V));return H={effect:T,value:Y},Y}:YI(N))}},z=T=>()=>O(T)(vl),D=T=>N=>{var V;const{release:Y}=u.subscribeToTransactions(J=>{var P;let{currentTree:k,previousTree:$}=J.getState();$||($=k);const K=(P=k.atomValues.get(t))!==null&&P!==void 0?P:I;if(K.state==="hasValue"){var _,re,ne,ge;const ue=K.contents,ye=(_=$.atomValues.get(t))!==null&&_!==void 0?_:I,he=ye.state==="hasValue"?ye.contents:vl;((re=H)===null||re===void 0?void 0:re.effect)!==T||((ne=H)===null||ne===void 0?void 0:ne.value)!==ue?N(ue,he,!k.atomValues.has(t)):((ge=H)===null||ge===void 0?void 0:ge.effect)===T&&(H=null)}},t);C.set(u,[...(V=C.get(u))!==null&&V!==void 0?V:[],Y])};for(const T of W)try{const N=T({node:Z,storeID:u.storeID,parentStoreID_UNSTABLE:u.parentStoreID,trigger:G,setSelf:O(T),resetSelf:z(T),onSet:D(T),getPromise:M,getLoadable:F,getInfo_UNSTABLE:j});if(N!=null){var v;C.set(u,[...(v=C.get(u))!==null&&v!==void 0?v:[],N])}}catch(N){y=N,x=!0}if(R=!1,!(y instanceof Un)){var w;const T=x?Sc(y):At(y)?Wc(a(u,y)):go(YI(y));T.contents,p.atomValues.set(t,T),(w=u.getState().nextTree)===null||w===void 0||w.atomValues.set(t,T)}}return S}function s(u,p){var G,f;return(G=(f=p.atomValues.get(t))!==null&&f!==void 0?f:r)!==null&&G!==void 0?G:I}function m(u,p){if(p.atomValues.has(t))return mt(p.atomValues.get(t));if(p.nonvalidatedAtoms.has(t)){if(r!=null)return r;if(g==null)return I;const G=p.nonvalidatedAtoms.get(t),f=g.validator(G,vl);return r=f instanceof Un?I:go(f),r}else return I}function A(){r=void 0}function d(u,p,G){if(p.atomValues.has(t)){const f=mt(p.atomValues.get(t));if(f.state==="hasValue"&&G===f.contents)return new Map}else if(!p.nonvalidatedAtoms.has(t)&&G instanceof Un)return new Map;return r=void 0,new Map().set(t,go(G))}function h(){return sy(t)!==void 0&&l<=0}const Z=rY({key:t,nodeType:"atom",peek:s,get:m,set:d,init:c,invalidate:A,shouldDeleteConfigOnRelease:h,dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return Z}function c0(e){const{...t}=e,g="default"in e?e.default:new Promise(()=>{});return iY(g)?AY({...t,default:g}):uY({...t,default:g})}function AY(e){const t=c0({...e,default:vl,persistence_UNSTABLE:e.persistence_UNSTABLE===void 0?void 0:{...e.persistence_UNSTABLE,validator:n=>n instanceof Un?n:mt(e.persistence_UNSTABLE).validator(n,vl)},effects:e.effects,effects_UNSTABLE:e.effects_UNSTABLE}),g=$o({key:`${e.key}__withFallback`,get:({get:n})=>{const l=n(t);return l instanceof Un?e.default:l},set:({set:n},l)=>n(t,l),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:e.dangerouslyAllowMutability});return CY(g.key,sy(e.key)),g}c0.value=e=>new ay(e);var cy=c0;class mY{constructor(t){var g;Fe(this,"_map",void 0),Fe(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(g=t==null?void 0:t.mapKey)!==null&&g!==void 0?g:n=>n}size(){return this._map.size}has(t){return this._map.has(this._keyMapper(t))}get(t){return this._map.get(this._keyMapper(t))}set(t,g){this._map.set(this._keyMapper(t),g)}delete(t){this._map.delete(this._keyMapper(t))}clear(){this._map.clear()}}var pY={MapCache:mY},bY=pY.MapCache,ZY=Object.freeze({__proto__:null,MapCache:bY});const{LRUCache:jp}=Iy,{MapCache:hY}=ZY,xC={equality:"reference",eviction:"none",maxSize:1/0};function GY({equality:e=xC.equality,eviction:t=xC.eviction,maxSize:g=xC.maxSize}=xC){const n=fY(e);return BY(t,g,n)}function fY(e){switch(e){case"reference":return t=>t;case"value":return t=>Na(t)}throw Ee(`Unrecognized equality policy ${e}`)}function BY(e,t,g){switch(e){case"keep-all":return new hY({mapKey:g});case"lru":return new jp({mapKey:g,maxSize:mt(t)});case"most-recent":return new jp({mapKey:g,maxSize:1})}throw Ee(`Unrecognized eviction policy ${e}`)}var dy=GY;const{setConfigDeletionHandler:yY}=pg;function SY(e){var t,g;const n=dy({equality:(t=(g=e.cachePolicyForParams_UNSTABLE)===null||g===void 0?void 0:g.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return l=>{var o,I;const r=n.get(l);if(r!=null)return r;const{cachePolicyForParams_UNSTABLE:C,...i}=e,a="default"in e?e.default:new Promise(()=>{}),c=cy({...i,key:`${e.key}__${(o=Na(l))!==null&&o!==void 0?o:"void"}`,default:typeof a=="function"?a(l):a,retainedBy_UNSTABLE:typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(l):e.retainedBy_UNSTABLE,effects:typeof e.effects=="function"?e.effects(l):typeof e.effects_UNSTABLE=="function"?e.effects_UNSTABLE(l):(I=e.effects)!==null&&I!==void 0?I:e.effects_UNSTABLE});return n.set(l,c),yY(c.key,()=>{n.delete(l)}),c}}var WY=SY;const{setConfigDeletionHandler:VY}=pg;let vY=0;function RY(e){var t,g;const n=dy({equality:(t=(g=e.cachePolicyForParams_UNSTABLE)===null||g===void 0?void 0:g.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return l=>{var o;let I;try{I=n.get(l)}catch(s){throw Ee(`Problem with cache lookup for selector ${e.key}: ${s.message}`)}if(I!=null)return I;const r=`${e.key}__selectorFamily/${(o=Na(l,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${vY++}`,C=s=>e.get(l)(s),i=e.cachePolicy_UNSTABLE,a=typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(l):e.retainedBy_UNSTABLE;let c;if(e.set!=null){const s=e.set;c=$o({key:r,get:C,set:(A,d)=>s(l)(A,d),cachePolicy_UNSTABLE:i,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:a})}else c=$o({key:r,get:C,cachePolicy_UNSTABLE:i,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:a});return n.set(l,c),VY(c.key,()=>{n.delete(l)}),c}}var pl=RY;const XY=pl({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function kY(e){return XY(e)}var JY=kY;const YY=pl({key:"__error",get:e=>()=>{throw Ee(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function xY(e){return YY(e)}var HY=xY;function wY(e){return e}var NY=wY;const{loadableWithError:uy,loadableWithPromise:Ay,loadableWithValue:my}=$r;function Fa(e,t){const g=Array(t.length).fill(void 0),n=Array(t.length).fill(void 0);for(const[l,o]of t.entries())try{g[l]=e(o)}catch(I){n[l]=I}return[g,n]}function FY(e){return e!=null&&!At(e)}function Ka(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])}function Xu(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((g,n,l)=>({...g,[n]:t[l]}),{})}function No(e,t,g){const n=g.map((l,o)=>l==null?my(t[o]):At(l)?Ay(l):uy(l));return Xu(e,n)}function KY(e,t){return t.map((g,n)=>g===void 0?e[n]:g)}const EY=pl({key:"__waitForNone",get:e=>({get:t})=>{const g=Ka(e),[n,l]=Fa(t,g);return No(e,n,l)},dangerouslyAllowMutability:!0}),zY=pl({key:"__waitForAny",get:e=>({get:t})=>{const g=Ka(e),[n,l]=Fa(t,g);return l.some(o=>!At(o))?No(e,n,l):new Promise(o=>{for(const[I,r]of l.entries())At(r)&&r.then(C=>{n[I]=C,l[I]=void 0,o(No(e,n,l))}).catch(C=>{l[I]=C,o(No(e,n,l))})})},dangerouslyAllowMutability:!0}),MY=pl({key:"__waitForAll",get:e=>({get:t})=>{const g=Ka(e),[n,l]=Fa(t,g);if(l.every(I=>I==null))return Xu(e,n);const o=l.find(FY);if(o!=null)throw o;return Promise.all(l).then(I=>Xu(e,KY(n,I)))},dangerouslyAllowMutability:!0}),TY=pl({key:"__waitForAllSettled",get:e=>({get:t})=>{const g=Ka(e),[n,l]=Fa(t,g);return l.every(o=>!At(o))?No(e,n,l):Promise.all(l.map((o,I)=>At(o)?o.then(r=>{n[I]=r,l[I]=void 0}).catch(r=>{n[I]=void 0,l[I]=r}):null)).then(()=>No(e,n,l))},dangerouslyAllowMutability:!0}),LY=pl({key:"__noWait",get:e=>({get:t})=>{try{return $o.value(my(t(e)))}catch(g){return $o.value(At(g)?Ay(g):uy(g))}},dangerouslyAllowMutability:!0});var UY={waitForNone:EY,waitForAny:zY,waitForAll:MY,waitForAllSettled:TY,noWait:LY};const{RecoilLoadable:DY}=$r,{DefaultValue:QY}=pg,{RecoilRoot:PY,useRecoilStoreID:jY}=Jn,{isRecoilValue:OY}=jo,{retentionZone:_Y}=Va,{freshSnapshot:$Y}=Ja,{useRecoilState:qY,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:ex,useRecoilStateLoadable:tx,useRecoilValue:gx,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:nx,useRecoilValueLoadable:lx,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:ox,useResetRecoilState:Ix,useSetRecoilState:rx}=pk,{useGotoRecoilSnapshot:Cx,useRecoilSnapshot:ix,useRecoilTransactionObserver:ax}=qB,{useRecoilCallback:sx}=ny,{noWait:cx,waitForAll:dx,waitForAllSettled:ux,waitForAny:Ax,waitForNone:mx}=UY;var lC={DefaultValue:QY,isRecoilValue:OY,RecoilLoadable:DY,RecoilEnv:nB,RecoilRoot:PY,useRecoilStoreID:jY,useRecoilBridgeAcrossReactRoots_UNSTABLE:Lk,atom:cy,selector:$o,atomFamily:WY,selectorFamily:pl,constSelector:JY,errorSelector:HY,readOnlySelector:NY,noWait:cx,waitForNone:mx,waitForAny:Ax,waitForAll:dx,waitForAllSettled:ux,useRecoilValue:gx,useRecoilValueLoadable:lx,useRecoilState:qY,useRecoilStateLoadable:tx,useSetRecoilState:rx,useResetRecoilState:Ix,useGetRecoilValueInfo_UNSTABLE:Fk,useRecoilRefresher_UNSTABLE:ZJ,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:ox,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:nx,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:ex,useRecoilCallback:sx,useRecoilTransaction_UNSTABLE:yJ,useGotoRecoilSnapshot:Cx,useRecoilSnapshot:ix,useRecoilTransactionObserver_UNSTABLE:ax,snapshot_UNSTABLE:$Y,useRetain:r0,retentionZone:_Y},px=lC.RecoilRoot,py=lC.atom,by=lC.useRecoilValue,_g=lC.useRecoilState,mO=lC.useSetRecoilState;const bx="modulepreload",Zx=function(e){return"/"+e},Op={},hx=function(t,g,n){if(!g||g.length===0)return t();const l=document.getElementsByTagName("link");return Promise.all(g.map(o=>{if(o=Zx(o),o in Op)return;Op[o]=!0;const I=o.endsWith(".css"),r=I?'[rel="stylesheet"]':"";if(!!n)for(let a=l.length-1;a>=0;a--){const c=l[a];if(c.href===o&&(!I||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${r}`))return;const i=document.createElement("link");if(i.rel=I?"stylesheet":bx,I||(i.as="script",i.crossOrigin=""),i.href=o,document.head.appendChild(i),I)return new Promise((a,c)=>{i.addEventListener("load",a),i.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};/**
 * @remix-run/router v1.0.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jr(){return Jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e},Jr.apply(this,arguments)}var _n;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_n||(_n={}));const _p="popstate";function Gx(e){e===void 0&&(e={});function t(n,l){let{pathname:o,search:I,hash:r}=n.location;return ku("",{pathname:o,search:I,hash:r},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function g(n,l){return typeof l=="string"?l:Yr(l)}return yx(t,g,null,e)}function fx(){return Math.random().toString(36).substr(2,8)}function $p(e){return{usr:e.state,key:e.key}}function ku(e,t,g,n){return g===void 0&&(g=null),Jr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?aI(t):t,{state:g,key:t&&t.key||n||fx()})}function Yr(e){let{pathname:t="/",search:g="",hash:n=""}=e;return g&&g!=="?"&&(t+=g.charAt(0)==="?"?g:"?"+g),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function aI(e){let t={};if(e){let g=e.indexOf("#");g>=0&&(t.hash=e.substr(g),e=e.substr(0,g));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Bx(e){let t=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:"unknown://unknown",g=typeof e=="string"?e:Yr(e);return new URL(g,t)}function yx(e,t,g,n){n===void 0&&(n={});let{window:l=document.defaultView,v5Compat:o=!1}=n,I=l.history,r=_n.Pop,C=null;function i(){r=_n.Pop,C&&C({action:r,location:s.location})}function a(m,A){r=_n.Push;let d=ku(s.location,m,A);g&&g(d,m);let h=$p(d),Z=s.createHref(d);try{I.pushState(h,"",Z)}catch{l.location.assign(Z)}o&&C&&C({action:r,location:s.location})}function c(m,A){r=_n.Replace;let d=ku(s.location,m,A);g&&g(d,m);let h=$p(d),Z=s.createHref(d);I.replaceState(h,"",Z),o&&C&&C({action:r,location:s.location})}let s={get action(){return r},get location(){return e(l,I)},listen(m){if(C)throw new Error("A history only accepts one active listener");return l.addEventListener(_p,i),C=m,()=>{l.removeEventListener(_p,i),C=null}},createHref(m){return t(l,m)},encodeLocation(m){let A=Bx(Yr(m));return Jr({},m,{pathname:A.pathname,search:A.search,hash:A.hash})},push:a,replace:c,go(m){return I.go(m)}};return s}var qp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qp||(qp={}));function Sx(e,t,g){g===void 0&&(g="/");let n=typeof t=="string"?aI(t):t,l=hy(n.pathname||"/",g);if(l==null)return null;let o=Zy(e);Wx(o);let I=null;for(let r=0;I==null&&r<o.length;++r)I=Hx(o[r],Fx(l));return I}function Zy(e,t,g,n){return t===void 0&&(t=[]),g===void 0&&(g=[]),n===void 0&&(n=""),e.forEach((l,o)=>{let I={relativePath:l.path||"",caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};I.relativePath.startsWith("/")&&(kt(I.relativePath.startsWith(n),'Absolute route path "'+I.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),I.relativePath=I.relativePath.slice(n.length));let r=Cl([n,I.relativePath]),C=g.concat(I);l.children&&l.children.length>0&&(kt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+r+'".')),Zy(l.children,t,C,r)),!(l.path==null&&!l.index)&&t.push({path:r,score:Yx(r,l.index),routesMeta:C})}),t}function Wx(e){e.sort((t,g)=>t.score!==g.score?g.score-t.score:xx(t.routesMeta.map(n=>n.childrenIndex),g.routesMeta.map(n=>n.childrenIndex)))}const Vx=/^:\w+$/,vx=3,Rx=2,Xx=1,kx=10,Jx=-2,eb=e=>e==="*";function Yx(e,t){let g=e.split("/"),n=g.length;return g.some(eb)&&(n+=Jx),t&&(n+=Rx),g.filter(l=>!eb(l)).reduce((l,o)=>l+(Vx.test(o)?vx:o===""?Xx:kx),n)}function xx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,l)=>n===t[l])?e[e.length-1]-t[t.length-1]:0}function Hx(e,t){let{routesMeta:g}=e,n={},l="/",o=[];for(let I=0;I<g.length;++I){let r=g[I],C=I===g.length-1,i=l==="/"?t:t.slice(l.length)||"/",a=wx({path:r.relativePath,caseSensitive:r.caseSensitive,end:C},i);if(!a)return null;Object.assign(n,a.params);let c=r.route;o.push({params:n,pathname:Cl([l,a.pathname]),pathnameBase:Mx(Cl([l,a.pathnameBase])),route:c}),a.pathnameBase!=="/"&&(l=Cl([l,a.pathnameBase]))}return o}function wx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[g,n]=Nx(e.path,e.caseSensitive,e.end),l=t.match(g);if(!l)return null;let o=l[0],I=o.replace(/(.)\/+$/,"$1"),r=l.slice(1);return{params:n.reduce((i,a,c)=>{if(a==="*"){let s=r[c]||"";I=o.slice(0,o.length-s.length).replace(/(.)\/+$/,"$1")}return i[a]=Kx(r[c]||"",a),i},{}),pathname:o,pathnameBase:I,pattern:e}}function Nx(e,t,g){t===void 0&&(t=!1),g===void 0&&(g=!0),d0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(I,r)=>(n.push(r),"([^\\/]+)"));return e.endsWith("*")?(n.push("*"),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):g?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),n]}function Fx(e){try{return decodeURI(e)}catch(t){return d0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Kx(e,t){try{return decodeURIComponent(e)}catch(g){return d0(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+g+").")),e}}function hy(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let g=t.endsWith("/")?t.length-1:t.length,n=e.charAt(g);return n&&n!=="/"?null:e.slice(g)||"/"}function kt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function d0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ex(e,t){t===void 0&&(t="/");let{pathname:g,search:n="",hash:l=""}=typeof e=="string"?aI(e):e;return{pathname:g?g.startsWith("/")?g:zx(g,t):t,search:Tx(n),hash:Lx(l)}}function zx(e,t){let g=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?g.length>1&&g.pop():l!=="."&&g.push(l)}),g.length>1?g.join("/"):"/"}function Vc(e,t,g,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+g+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gy(e){return e.filter((t,g)=>g===0||t.route.path&&t.route.path.length>0)}function fy(e,t,g,n){n===void 0&&(n=!1);let l;typeof e=="string"?l=aI(e):(l=Jr({},e),kt(!l.pathname||!l.pathname.includes("?"),Vc("?","pathname","search",l)),kt(!l.pathname||!l.pathname.includes("#"),Vc("#","pathname","hash",l)),kt(!l.search||!l.search.includes("#"),Vc("#","search","hash",l)));let o=e===""||l.pathname==="",I=o?"/":l.pathname,r;if(n||I==null)r=g;else{let c=t.length-1;if(I.startsWith("..")){let s=I.split("/");for(;s[0]==="..";)s.shift(),c-=1;l.pathname=s.join("/")}r=c>=0?t[c]:"/"}let C=Ex(l,r),i=I&&I!=="/"&&I.endsWith("/"),a=(o||I===".")&&g.endsWith("/");return!C.pathname.endsWith("/")&&(i||a)&&(C.pathname+="/"),C}const Cl=e=>e.join("/").replace(/\/\/+/g,"/"),Mx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Tx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Lx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Ux{constructor(t,g,n){this.status=t,this.statusText=g||"",this.data=n}}function Dx(e){return e instanceof Ux}const Qx=new Set(["POST","PUT","PATCH","DELETE"]);[...Qx];/**
 * React Router v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ju(){return Ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e},Ju.apply(this,arguments)}function Px(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const jx=typeof Object.is=="function"?Object.is:Px,{useState:Ox,useEffect:_x,useLayoutEffect:$x,useDebugValue:qx}=Eo;function eH(e,t,g){const n=t(),[{inst:l},o]=Ox({inst:{value:n,getSnapshot:t}});return $x(()=>{l.value=n,l.getSnapshot=t,vc(l)&&o({inst:l})},[e,n,t]),_x(()=>(vc(l)&&o({inst:l}),e(()=>{vc(l)&&o({inst:l})})),[e]),qx(n),n}function vc(e){const t=e.getSnapshot,g=e.value;try{const n=t();return!jx(g,n)}catch{return!0}}function tH(e,t,g){return t()}const gH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nH=!gH,lH=nH?tH:eH;"useSyncExternalStore"in Eo&&(e=>e.useSyncExternalStore)(Eo);const oH=B.exports.createContext(null),IH=B.exports.createContext(null),u0=B.exports.createContext(null),A0=B.exports.createContext(null),Ea=B.exports.createContext(null),sI=B.exports.createContext({outlet:null,matches:[]}),By=B.exports.createContext(null);function rH(e,t){let{relative:g}=t===void 0?{}:t;cI()||kt(!1);let{basename:n,navigator:l}=B.exports.useContext(A0),{hash:o,pathname:I,search:r}=Sy(e,{relative:g}),C=I;return n!=="/"&&(C=I==="/"?n:Cl([n,I])),l.createHref({pathname:C,search:r,hash:o})}function cI(){return B.exports.useContext(Ea)!=null}function za(){return cI()||kt(!1),B.exports.useContext(Ea).location}function yy(){cI()||kt(!1);let{basename:e,navigator:t}=B.exports.useContext(A0),{matches:g}=B.exports.useContext(sI),{pathname:n}=za(),l=JSON.stringify(Gy(g).map(r=>r.pathnameBase)),o=B.exports.useRef(!1);return B.exports.useEffect(()=>{o.current=!0}),B.exports.useCallback(function(r,C){if(C===void 0&&(C={}),!o.current)return;if(typeof r=="number"){t.go(r);return}let i=fy(r,JSON.parse(l),n,C.relative==="path");e!=="/"&&(i.pathname=i.pathname==="/"?e:Cl([e,i.pathname])),(C.replace?t.replace:t.push)(i,C.state,C)},[e,t,l,n])}function CH(){let{matches:e}=B.exports.useContext(sI),t=e[e.length-1];return t?t.params:{}}function Sy(e,t){let{relative:g}=t===void 0?{}:t,{matches:n}=B.exports.useContext(sI),{pathname:l}=za(),o=JSON.stringify(Gy(n).map(I=>I.pathnameBase));return B.exports.useMemo(()=>fy(e,JSON.parse(o),l,g==="path"),[e,o,l,g])}function iH(e,t){cI()||kt(!1);let g=B.exports.useContext(u0),{matches:n}=B.exports.useContext(sI),l=n[n.length-1],o=l?l.params:{};l&&l.pathname;let I=l?l.pathnameBase:"/";l&&l.route;let r=za(),C;if(t){var i;let A=typeof t=="string"?aI(t):t;I==="/"||((i=A.pathname)==null?void 0:i.startsWith(I))||kt(!1),C=A}else C=r;let a=C.pathname||"/",c=I==="/"?a:a.slice(I.length)||"/",s=Sx(e,{pathname:c}),m=dH(s&&s.map(A=>Object.assign({},A,{params:Object.assign({},o,A.params),pathname:Cl([I,A.pathname]),pathnameBase:A.pathnameBase==="/"?I:Cl([I,A.pathnameBase])})),n,g||void 0);return t&&m?b(Ea.Provider,{value:{location:Ju({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:_n.Pop},children:m}):m}function aH(){let e=AH(),t=Dx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),g=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n};return U(bn,{children:[b("h2",{children:"Unhandled Thrown Error!"}),b("h3",{style:{fontStyle:"italic"},children:t}),g?b("pre",{style:l,children:g}):null,b("p",{children:"\u{1F4BF} Hey developer \u{1F44B}"}),U("p",{children:["You can provide a way better UX than this when your app throws errors by providing your own\xA0",b("code",{style:o,children:"errorElement"})," props on\xA0",b("code",{style:o,children:"<Route>"})]})]})}class sH extends B.exports.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,g){return g.location!==t.location?{error:t.error,location:t.location}:{error:t.error||g.error,location:g.location}}componentDidCatch(t,g){console.error("React Router caught the following error during render",t,g)}render(){return this.state.error?b(By.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function cH(e){let{routeContext:t,match:g,children:n}=e,l=B.exports.useContext(oH);return l&&g.route.errorElement&&(l._deepestRenderedBoundaryId=g.route.id),b(sI.Provider,{value:t,children:n})}function dH(e,t,g){if(t===void 0&&(t=[]),e==null)if(g!=null&&g.errors)e=g.matches;else return null;let n=e,l=g==null?void 0:g.errors;if(l!=null){let o=n.findIndex(I=>I.route.id&&(l==null?void 0:l[I.route.id]));o>=0||kt(!1),n=n.slice(0,Math.min(n.length,o+1))}return n.reduceRight((o,I,r)=>{let C=I.route.id?l==null?void 0:l[I.route.id]:null,i=g?I.route.errorElement||b(aH,{}):null,a=()=>b(cH,{match:I,routeContext:{outlet:o,matches:t.concat(n.slice(0,r+1))},children:C?i:I.route.element!==void 0?I.route.element:o});return g&&(I.route.errorElement||r===0)?b(sH,{location:g.location,component:i,error:C,children:a()}):a()},null)}var tb;(function(e){e.UseRevalidator="useRevalidator"})(tb||(tb={}));var Yu;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(Yu||(Yu={}));function uH(e){let t=B.exports.useContext(u0);return t||kt(!1),t}function AH(){var e;let t=B.exports.useContext(By),g=uH(Yu.UseRouteError),n=B.exports.useContext(sI),l=n.matches[n.matches.length-1];return t||(n||kt(!1),l.route.id||kt(!1),(e=g.errors)==null?void 0:e[l.route.id])}function Tl(e){let{to:t,replace:g,state:n,relative:l}=e;cI()||kt(!1);let o=B.exports.useContext(u0),I=yy();return B.exports.useEffect(()=>{o&&o.navigation.state!=="idle"||I(t,{replace:g,state:n,relative:l})}),null}function bt(e){kt(!1)}function mH(e){let{basename:t="/",children:g=null,location:n,navigationType:l=_n.Pop,navigator:o,static:I=!1}=e;cI()&&kt(!1);let r=t.replace(/^\/*/,"/"),C=B.exports.useMemo(()=>({basename:r,navigator:o,static:I}),[r,o,I]);typeof n=="string"&&(n=aI(n));let{pathname:i="/",search:a="",hash:c="",state:s=null,key:m="default"}=n,A=B.exports.useMemo(()=>{let d=hy(i,r);return d==null?null:{pathname:d,search:a,hash:c,state:s,key:m}},[r,i,a,c,s,m]);return A==null?null:b(A0.Provider,{value:C,children:b(Ea.Provider,{children:g,value:{location:A,navigationType:l}})})}function pH(e){let{children:t,location:g}=e,n=B.exports.useContext(IH),l=n&&!t?n.router.routes:xu(t);return iH(l,g)}var gb;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(gb||(gb={}));new Promise(()=>{});function xu(e,t){t===void 0&&(t=[]);let g=[];return B.exports.Children.forEach(e,(n,l)=>{if(!B.exports.isValidElement(n))return;if(n.type===B.exports.Fragment){g.push.apply(g,xu(n.props.children,t));return}n.type!==bt&&kt(!1),!n.props.index||!n.props.children||kt(!1);let o=[...t,l],I={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,hasErrorBoundary:n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle};n.props.children&&(I.children=xu(n.props.children,o)),g.push(I)}),g}/**
 * React Router DOM v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bH(e,t){if(e==null)return{};var g={},n=Object.keys(e),l,o;for(o=0;o<n.length;o++)l=n[o],!(t.indexOf(l)>=0)&&(g[l]=e[l]);return g}function ZH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hH(e,t){return e.button===0&&(!t||t==="_self")&&!ZH(e)}const GH=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function fH(e){let{basename:t,children:g,window:n}=e,l=B.exports.useRef();l.current==null&&(l.current=Gx({window:n,v5Compat:!0}));let o=l.current,[I,r]=B.exports.useState({action:o.action,location:o.location});return B.exports.useLayoutEffect(()=>o.listen(r),[o]),b(mH,{basename:t,children:g,location:I.location,navigationType:I.action,navigator:o})}const lt=B.exports.forwardRef(function(t,g){let{onClick:n,relative:l,reloadDocument:o,replace:I,state:r,target:C,to:i,preventScrollReset:a}=t,c=bH(t,GH),s=rH(i,{relative:l}),m=BH(i,{replace:I,state:r,target:C,preventScrollReset:a,relative:l});function A(d){n&&n(d),d.defaultPrevented||m(d)}return b("a",{...c,href:s,onClick:o?n:A,ref:g,target:C})});var nb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(nb||(nb={}));var lb;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lb||(lb={}));function BH(e,t){let{target:g,replace:n,state:l,preventScrollReset:o,relative:I}=t===void 0?{}:t,r=yy(),C=za(),i=Sy(e,{relative:I});return B.exports.useCallback(a=>{if(hH(a,g)){a.preventDefault();let c=n!==void 0?n:Yr(C)===Yr(i);r(e,{replace:c,state:l,preventScrollReset:o,relative:I})}},[C,r,i,n,l,g,e,o,I])}var m0={exports:{}},tt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0=Symbol.for("react.element"),b0=Symbol.for("react.portal"),Ma=Symbol.for("react.fragment"),Ta=Symbol.for("react.strict_mode"),La=Symbol.for("react.profiler"),Ua=Symbol.for("react.provider"),Da=Symbol.for("react.context"),yH=Symbol.for("react.server_context"),Qa=Symbol.for("react.forward_ref"),Pa=Symbol.for("react.suspense"),ja=Symbol.for("react.suspense_list"),Oa=Symbol.for("react.memo"),_a=Symbol.for("react.lazy"),SH=Symbol.for("react.offscreen"),Wy;Wy=Symbol.for("react.module.reference");function Fg(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case p0:switch(e=e.type,e){case Ma:case La:case Ta:case Pa:case ja:return e;default:switch(e=e&&e.$$typeof,e){case yH:case Da:case Qa:case _a:case Oa:case Ua:return e;default:return t}}case b0:return t}}}tt.ContextConsumer=Da;tt.ContextProvider=Ua;tt.Element=p0;tt.ForwardRef=Qa;tt.Fragment=Ma;tt.Lazy=_a;tt.Memo=Oa;tt.Portal=b0;tt.Profiler=La;tt.StrictMode=Ta;tt.Suspense=Pa;tt.SuspenseList=ja;tt.isAsyncMode=function(){return!1};tt.isConcurrentMode=function(){return!1};tt.isContextConsumer=function(e){return Fg(e)===Da};tt.isContextProvider=function(e){return Fg(e)===Ua};tt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===p0};tt.isForwardRef=function(e){return Fg(e)===Qa};tt.isFragment=function(e){return Fg(e)===Ma};tt.isLazy=function(e){return Fg(e)===_a};tt.isMemo=function(e){return Fg(e)===Oa};tt.isPortal=function(e){return Fg(e)===b0};tt.isProfiler=function(e){return Fg(e)===La};tt.isStrictMode=function(e){return Fg(e)===Ta};tt.isSuspense=function(e){return Fg(e)===Pa};tt.isSuspenseList=function(e){return Fg(e)===ja};tt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ma||e===La||e===Ta||e===Pa||e===ja||e===SH||typeof e=="object"&&e!==null&&(e.$$typeof===_a||e.$$typeof===Oa||e.$$typeof===Ua||e.$$typeof===Da||e.$$typeof===Qa||e.$$typeof===Wy||e.getModuleId!==void 0)};tt.typeOf=Fg;(function(e){e.exports=tt})(m0);function WH(e){function t(V,Y,J,P,k){for(var $=0,K=0,_=0,re=0,ne,ge,ue=0,ye=0,he,Ve=he=ne=0,Be=0,Se=0,yt=0,He=0,Je=J.length,_e=Je-1,Le,Ae="",we="",Ct="",it="",Q;Be<Je;){if(ge=J.charCodeAt(Be),Be===_e&&K+re+_+$!==0&&(K!==0&&(ge=K===47?10:47),re=_=$=0,Je++,_e++),K+re+_+$===0){if(Be===_e&&(0<Se&&(Ae=Ae.replace(s,"")),0<Ae.trim().length)){switch(ge){case 32:case 9:case 59:case 13:case 10:break;default:Ae+=J.charAt(Be)}ge=59}switch(ge){case 123:for(Ae=Ae.trim(),ne=Ae.charCodeAt(0),he=1,He=++Be;Be<Je;){switch(ge=J.charCodeAt(Be)){case 123:he++;break;case 125:he--;break;case 47:switch(ge=J.charCodeAt(Be+1)){case 42:case 47:e:{for(Ve=Be+1;Ve<_e;++Ve)switch(J.charCodeAt(Ve)){case 47:if(ge===42&&J.charCodeAt(Ve-1)===42&&Be+2!==Ve){Be=Ve+1;break e}break;case 10:if(ge===47){Be=Ve+1;break e}}Be=Ve}}break;case 91:ge++;case 40:ge++;case 34:case 39:for(;Be++<_e&&J.charCodeAt(Be)!==ge;);}if(he===0)break;Be++}switch(he=J.substring(He,Be),ne===0&&(ne=(Ae=Ae.replace(c,"").trim()).charCodeAt(0)),ne){case 64:switch(0<Se&&(Ae=Ae.replace(s,"")),ge=Ae.charCodeAt(1),ge){case 100:case 109:case 115:case 45:Se=Y;break;default:Se=j}if(he=t(Y,Se,he,ge,k+1),He=he.length,0<z&&(Se=g(j,Ae,yt),Q=r(3,he,Se,Y,H,x,He,ge,k,P),Ae=Se.join(""),Q!==void 0&&(He=(he=Q.trim()).length)===0&&(ge=0,he="")),0<He)switch(ge){case 115:Ae=Ae.replace(S,I);case 100:case 109:case 45:he=Ae+"{"+he+"}";break;case 107:Ae=Ae.replace(u,"$1 $2"),he=Ae+"{"+he+"}",he=M===1||M===2&&o("@"+he,3)?"@-webkit-"+he+"@"+he:"@"+he;break;default:he=Ae+he,P===112&&(he=(we+=he,""))}else he="";break;default:he=t(Y,g(Y,Ae,yt),he,P,k+1)}Ct+=he,he=yt=Se=Ve=ne=0,Ae="",ge=J.charCodeAt(++Be);break;case 125:case 59:if(Ae=(0<Se?Ae.replace(s,""):Ae).trim(),1<(He=Ae.length))switch(Ve===0&&(ne=Ae.charCodeAt(0),ne===45||96<ne&&123>ne)&&(He=(Ae=Ae.replace(" ",":")).length),0<z&&(Q=r(1,Ae,Y,V,H,x,we.length,P,k,P))!==void 0&&(He=(Ae=Q.trim()).length)===0&&(Ae="\0\0"),ne=Ae.charCodeAt(0),ge=Ae.charCodeAt(1),ne){case 0:break;case 64:if(ge===105||ge===99){it+=Ae+J.charAt(Be);break}default:Ae.charCodeAt(He-1)!==58&&(we+=l(Ae,ne,ge,Ae.charCodeAt(2)))}yt=Se=Ve=ne=0,Ae="",ge=J.charCodeAt(++Be)}}switch(ge){case 13:case 10:K===47?K=0:1+ne===0&&P!==107&&0<Ae.length&&(Se=1,Ae+="\0"),0<z*T&&r(0,Ae,Y,V,H,x,we.length,P,k,P),x=1,H++;break;case 59:case 125:if(K+re+_+$===0){x++;break}default:switch(x++,Le=J.charAt(Be),ge){case 9:case 32:if(re+$+K===0)switch(ue){case 44:case 58:case 9:case 32:Le="";break;default:ge!==32&&(Le=" ")}break;case 0:Le="\\0";break;case 12:Le="\\f";break;case 11:Le="\\v";break;case 38:re+K+$===0&&(Se=yt=1,Le="\f"+Le);break;case 108:if(re+K+$+F===0&&0<Ve)switch(Be-Ve){case 2:ue===112&&J.charCodeAt(Be-3)===58&&(F=ue);case 8:ye===111&&(F=ye)}break;case 58:re+K+$===0&&(Ve=Be);break;case 44:K+_+re+$===0&&(Se=1,Le+="\r");break;case 34:case 39:K===0&&(re=re===ge?0:re===0?ge:re);break;case 91:re+K+_===0&&$++;break;case 93:re+K+_===0&&$--;break;case 41:re+K+$===0&&_--;break;case 40:if(re+K+$===0){if(ne===0)switch(2*ue+3*ye){case 533:break;default:ne=1}_++}break;case 64:K+_+re+$+Ve+he===0&&(he=1);break;case 42:case 47:if(!(0<re+$+_))switch(K){case 0:switch(2*ge+3*J.charCodeAt(Be+1)){case 235:K=47;break;case 220:He=Be,K=42}break;case 42:ge===47&&ue===42&&He+2!==Be&&(J.charCodeAt(He+2)===33&&(we+=J.substring(He,Be+1)),Le="",K=0)}}K===0&&(Ae+=Le)}ye=ue,ue=ge,Be++}if(He=we.length,0<He){if(Se=Y,0<z&&(Q=r(2,we,Se,V,H,x,He,P,k,P),Q!==void 0&&(we=Q).length===0))return it+we+Ct;if(we=Se.join(",")+"{"+we+"}",M*F!==0){switch(M!==2||o(we,2)||(F=0),F){case 111:we=we.replace(G,":-moz-$1")+we;break;case 112:we=we.replace(p,"::-webkit-input-$1")+we.replace(p,"::-moz-$1")+we.replace(p,":-ms-input-$1")+we}F=0}}return it+we+Ct}function g(V,Y,J){var P=Y.trim().split(h);Y=P;var k=P.length,$=V.length;switch($){case 0:case 1:var K=0;for(V=$===0?"":V[0]+" ";K<k;++K)Y[K]=n(V,Y[K],J).trim();break;default:var _=K=0;for(Y=[];K<k;++K)for(var re=0;re<$;++re)Y[_++]=n(V[re]+" ",P[K],J).trim()}return Y}function n(V,Y,J){var P=Y.charCodeAt(0);switch(33>P&&(P=(Y=Y.trim()).charCodeAt(0)),P){case 38:return Y.replace(Z,"$1"+V.trim());case 58:return V.trim()+Y.replace(Z,"$1"+V.trim());default:if(0<1*J&&0<Y.indexOf("\f"))return Y.replace(Z,(V.charCodeAt(0)===58?"":"$1")+V.trim())}return V+Y}function l(V,Y,J,P){var k=V+";",$=2*Y+3*J+4*P;if($===944){V=k.indexOf(":",9)+1;var K=k.substring(V,k.length-1).trim();return K=k.substring(0,V).trim()+K+";",M===1||M===2&&o(K,1)?"-webkit-"+K+K:K}if(M===0||M===2&&!o(k,1))return k;switch($){case 1015:return k.charCodeAt(10)===97?"-webkit-"+k+k:k;case 951:return k.charCodeAt(3)===116?"-webkit-"+k+k:k;case 963:return k.charCodeAt(5)===110?"-webkit-"+k+k:k;case 1009:if(k.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+k+k;case 978:return"-webkit-"+k+"-moz-"+k+k;case 1019:case 983:return"-webkit-"+k+"-moz-"+k+"-ms-"+k+k;case 883:if(k.charCodeAt(8)===45)return"-webkit-"+k+k;if(0<k.indexOf("image-set(",11))return k.replace(R,"$1-webkit-$2")+k;break;case 932:if(k.charCodeAt(4)===45)switch(k.charCodeAt(5)){case 103:return"-webkit-box-"+k.replace("-grow","")+"-webkit-"+k+"-ms-"+k.replace("grow","positive")+k;case 115:return"-webkit-"+k+"-ms-"+k.replace("shrink","negative")+k;case 98:return"-webkit-"+k+"-ms-"+k.replace("basis","preferred-size")+k}return"-webkit-"+k+"-ms-"+k+k;case 964:return"-webkit-"+k+"-ms-flex-"+k+k;case 1023:if(k.charCodeAt(8)!==99)break;return K=k.substring(k.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+K+"-webkit-"+k+"-ms-flex-pack"+K+k;case 1005:return A.test(k)?k.replace(m,":-webkit-")+k.replace(m,":-moz-")+k:k;case 1e3:switch(K=k.substring(13).trim(),Y=K.indexOf("-")+1,K.charCodeAt(0)+K.charCodeAt(Y)){case 226:K=k.replace(f,"tb");break;case 232:K=k.replace(f,"tb-rl");break;case 220:K=k.replace(f,"lr");break;default:return k}return"-webkit-"+k+"-ms-"+K+k;case 1017:if(k.indexOf("sticky",9)===-1)break;case 975:switch(Y=(k=V).length-10,K=(k.charCodeAt(Y)===33?k.substring(0,Y):k).substring(V.indexOf(":",7)+1).trim(),$=K.charCodeAt(0)+(K.charCodeAt(7)|0)){case 203:if(111>K.charCodeAt(8))break;case 115:k=k.replace(K,"-webkit-"+K)+";"+k;break;case 207:case 102:k=k.replace(K,"-webkit-"+(102<$?"inline-":"")+"box")+";"+k.replace(K,"-webkit-"+K)+";"+k.replace(K,"-ms-"+K+"box")+";"+k}return k+";";case 938:if(k.charCodeAt(5)===45)switch(k.charCodeAt(6)){case 105:return K=k.replace("-items",""),"-webkit-"+k+"-webkit-box-"+K+"-ms-flex-"+K+k;case 115:return"-webkit-"+k+"-ms-flex-item-"+k.replace(v,"")+k;default:return"-webkit-"+k+"-ms-flex-line-pack"+k.replace("align-content","").replace(v,"")+k}break;case 973:case 989:if(k.charCodeAt(3)!==45||k.charCodeAt(4)===122)break;case 931:case 953:if(y.test(V)===!0)return(K=V.substring(V.indexOf(":")+1)).charCodeAt(0)===115?l(V.replace("stretch","fill-available"),Y,J,P).replace(":fill-available",":stretch"):k.replace(K,"-webkit-"+K)+k.replace(K,"-moz-"+K.replace("fill-",""))+k;break;case 962:if(k="-webkit-"+k+(k.charCodeAt(5)===102?"-ms-"+k:"")+k,J+P===211&&k.charCodeAt(13)===105&&0<k.indexOf("transform",10))return k.substring(0,k.indexOf(";",27)+1).replace(d,"$1-webkit-$2")+k}return k}function o(V,Y){var J=V.indexOf(Y===1?":":"{"),P=V.substring(0,Y!==3?J:10);return J=V.substring(J+1,V.length-1),D(Y!==2?P:P.replace(w,"$1"),J,Y)}function I(V,Y){var J=l(Y,Y.charCodeAt(0),Y.charCodeAt(1),Y.charCodeAt(2));return J!==Y+";"?J.replace(W," or ($1)").substring(4):"("+Y+")"}function r(V,Y,J,P,k,$,K,_,re,ne){for(var ge=0,ue=Y,ye;ge<z;++ge)switch(ye=O[ge].call(a,V,ue,J,P,k,$,K,_,re,ne)){case void 0:case!1:case!0:case null:break;default:ue=ye}if(ue!==Y)return ue}function C(V){switch(V){case void 0:case null:z=O.length=0;break;default:if(typeof V=="function")O[z++]=V;else if(typeof V=="object")for(var Y=0,J=V.length;Y<J;++Y)C(V[Y]);else T=!!V|0}return C}function i(V){return V=V.prefix,V!==void 0&&(D=null,V?typeof V!="function"?M=1:(M=2,D=V):M=0),i}function a(V,Y){var J=V;if(33>J.charCodeAt(0)&&(J=J.trim()),N=J,J=[N],0<z){var P=r(-1,Y,J,J,H,x,0,0,0,0);P!==void 0&&typeof P=="string"&&(Y=P)}var k=t(j,J,Y,0,0);return 0<z&&(P=r(-2,k,J,J,H,x,k.length,0,0,0),P!==void 0&&(k=P)),N="",F=0,x=H=1,k}var c=/^\0+/g,s=/[\0\r\f]/g,m=/: */g,A=/zoo|gra/,d=/([,: ])(transform)/g,h=/,\r+?/g,Z=/([\t\r\n ])*\f?&/g,u=/@(k\w+)\s*(\S*)\s*/,p=/::(place)/g,G=/:(read-only)/g,f=/[svh]\w+-[tblr]{2}/,S=/\(\s*(.*)\s*\)/g,W=/([\s\S]*?);/g,v=/-self|flex-/g,w=/[^]*?(:[rp][el]a[\w-]+)[^]*/,y=/stretch|:\s*\w+\-(?:conte|avail)/,R=/([^-])(image-set\()/,x=1,H=1,F=0,M=1,j=[],O=[],z=0,D=null,T=0,N="";return a.use=C,a.set=i,e!==void 0&&i(e),a}var VH={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Vy(e){var t=Object.create(null);return function(g){return t[g]===void 0&&(t[g]=e(g)),t[g]}}var vH=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Hu=Vy(function(e){return vH.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),vy={exports:{}},gt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt=typeof Symbol=="function"&&Symbol.for,Z0=xt?Symbol.for("react.element"):60103,h0=xt?Symbol.for("react.portal"):60106,$a=xt?Symbol.for("react.fragment"):60107,qa=xt?Symbol.for("react.strict_mode"):60108,es=xt?Symbol.for("react.profiler"):60114,ts=xt?Symbol.for("react.provider"):60109,gs=xt?Symbol.for("react.context"):60110,G0=xt?Symbol.for("react.async_mode"):60111,ns=xt?Symbol.for("react.concurrent_mode"):60111,ls=xt?Symbol.for("react.forward_ref"):60112,os=xt?Symbol.for("react.suspense"):60113,RH=xt?Symbol.for("react.suspense_list"):60120,Is=xt?Symbol.for("react.memo"):60115,rs=xt?Symbol.for("react.lazy"):60116,XH=xt?Symbol.for("react.block"):60121,kH=xt?Symbol.for("react.fundamental"):60117,JH=xt?Symbol.for("react.responder"):60118,YH=xt?Symbol.for("react.scope"):60119;function Vg(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Z0:switch(e=e.type,e){case G0:case ns:case $a:case es:case qa:case os:return e;default:switch(e=e&&e.$$typeof,e){case gs:case ls:case rs:case Is:case ts:return e;default:return t}}case h0:return t}}}function Ry(e){return Vg(e)===ns}gt.AsyncMode=G0;gt.ConcurrentMode=ns;gt.ContextConsumer=gs;gt.ContextProvider=ts;gt.Element=Z0;gt.ForwardRef=ls;gt.Fragment=$a;gt.Lazy=rs;gt.Memo=Is;gt.Portal=h0;gt.Profiler=es;gt.StrictMode=qa;gt.Suspense=os;gt.isAsyncMode=function(e){return Ry(e)||Vg(e)===G0};gt.isConcurrentMode=Ry;gt.isContextConsumer=function(e){return Vg(e)===gs};gt.isContextProvider=function(e){return Vg(e)===ts};gt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Z0};gt.isForwardRef=function(e){return Vg(e)===ls};gt.isFragment=function(e){return Vg(e)===$a};gt.isLazy=function(e){return Vg(e)===rs};gt.isMemo=function(e){return Vg(e)===Is};gt.isPortal=function(e){return Vg(e)===h0};gt.isProfiler=function(e){return Vg(e)===es};gt.isStrictMode=function(e){return Vg(e)===qa};gt.isSuspense=function(e){return Vg(e)===os};gt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===$a||e===ns||e===es||e===qa||e===os||e===RH||typeof e=="object"&&e!==null&&(e.$$typeof===rs||e.$$typeof===Is||e.$$typeof===ts||e.$$typeof===gs||e.$$typeof===ls||e.$$typeof===kH||e.$$typeof===JH||e.$$typeof===YH||e.$$typeof===XH)};gt.typeOf=Vg;(function(e){e.exports=gt})(vy);var f0=vy.exports,xH={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},HH={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},wH={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Xy={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},B0={};B0[f0.ForwardRef]=wH;B0[f0.Memo]=Xy;function ob(e){return f0.isMemo(e)?Xy:B0[e.$$typeof]||xH}var NH=Object.defineProperty,FH=Object.getOwnPropertyNames,Ib=Object.getOwnPropertySymbols,KH=Object.getOwnPropertyDescriptor,EH=Object.getPrototypeOf,rb=Object.prototype;function ky(e,t,g){if(typeof t!="string"){if(rb){var n=EH(t);n&&n!==rb&&ky(e,n,g)}var l=FH(t);Ib&&(l=l.concat(Ib(t)));for(var o=ob(e),I=ob(t),r=0;r<l.length;++r){var C=l[r];if(!HH[C]&&!(g&&g[C])&&!(I&&I[C])&&!(o&&o[C])){var i=KH(t,C);try{NH(e,C,i)}catch{}}}}return e}var zH=ky;function Zn(){return(Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e}).apply(this,arguments)}var Cb=function(e,t){for(var g=[e[0]],n=0,l=t.length;n<l;n+=1)g.push(t[n],e[n+1]);return g},wu=function(e){return e!==null&&typeof e=="object"&&(e.toString?e.toString():Object.prototype.toString.call(e))==="[object Object]"&&!m0.exports.typeOf(e)},Pi=Object.freeze([]),il=Object.freeze({});function xr(e){return typeof e=="function"}function ib(e){return e.displayName||e.name||"Component"}function y0(e){return e&&typeof e.styledComponentId=="string"}var qo=typeof process<"u"&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",S0=typeof window<"u"&&"HTMLElement"in window,MH=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==""?process.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&process.env.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env.SC_DISABLE_SPEEDY!==void 0&&process.env.SC_DISABLE_SPEEDY!==""?process.env.SC_DISABLE_SPEEDY!=="false"&&process.env.SC_DISABLE_SPEEDY:!1);function oC(e){for(var t=arguments.length,g=new Array(t>1?t-1:0),n=1;n<t;n++)g[n-1]=arguments[n];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(g.length>0?" Args: "+g.join(", "):""))}var TH=function(){function e(g){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=g}var t=e.prototype;return t.indexOfGroup=function(g){for(var n=0,l=0;l<g;l++)n+=this.groupSizes[l];return n},t.insertRules=function(g,n){if(g>=this.groupSizes.length){for(var l=this.groupSizes,o=l.length,I=o;g>=I;)(I<<=1)<0&&oC(16,""+g);this.groupSizes=new Uint32Array(I),this.groupSizes.set(l),this.length=I;for(var r=o;r<I;r++)this.groupSizes[r]=0}for(var C=this.indexOfGroup(g+1),i=0,a=n.length;i<a;i++)this.tag.insertRule(C,n[i])&&(this.groupSizes[g]++,C++)},t.clearGroup=function(g){if(g<this.length){var n=this.groupSizes[g],l=this.indexOfGroup(g),o=l+n;this.groupSizes[g]=0;for(var I=l;I<o;I++)this.tag.deleteRule(l)}},t.getGroup=function(g){var n="";if(g>=this.length||this.groupSizes[g]===0)return n;for(var l=this.groupSizes[g],o=this.indexOfGroup(g),I=o+l,r=o;r<I;r++)n+=this.tag.getRule(r)+`/*!sc*/
`;return n},e}(),ii=new Map,ji=new Map,rr=1,HC=function(e){if(ii.has(e))return ii.get(e);for(;ji.has(rr);)rr++;var t=rr++;return ii.set(e,t),ji.set(t,e),t},LH=function(e){return ji.get(e)},UH=function(e,t){t>=rr&&(rr=t+1),ii.set(e,t),ji.set(t,e)},DH="style["+qo+'][data-styled-version="5.3.6"]',QH=new RegExp("^"+qo+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),PH=function(e,t,g){for(var n,l=g.split(","),o=0,I=l.length;o<I;o++)(n=l[o])&&e.registerName(t,n)},jH=function(e,t){for(var g=(t.textContent||"").split(`/*!sc*/
`),n=[],l=0,o=g.length;l<o;l++){var I=g[l].trim();if(I){var r=I.match(QH);if(r){var C=0|parseInt(r[1],10),i=r[2];C!==0&&(UH(i,C),PH(e,i,r[3]),e.getTag().insertRules(C,n)),n.length=0}else n.push(I)}}},OH=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},Jy=function(e){var t=document.head,g=e||t,n=document.createElement("style"),l=function(r){for(var C=r.childNodes,i=C.length;i>=0;i--){var a=C[i];if(a&&a.nodeType===1&&a.hasAttribute(qo))return a}}(g),o=l!==void 0?l.nextSibling:null;n.setAttribute(qo,"active"),n.setAttribute("data-styled-version","5.3.6");var I=OH();return I&&n.setAttribute("nonce",I),g.insertBefore(n,o),n},_H=function(){function e(g){var n=this.element=Jy(g);n.appendChild(document.createTextNode("")),this.sheet=function(l){if(l.sheet)return l.sheet;for(var o=document.styleSheets,I=0,r=o.length;I<r;I++){var C=o[I];if(C.ownerNode===l)return C}oC(17)}(n),this.length=0}var t=e.prototype;return t.insertRule=function(g,n){try{return this.sheet.insertRule(n,g),this.length++,!0}catch{return!1}},t.deleteRule=function(g){this.sheet.deleteRule(g),this.length--},t.getRule=function(g){var n=this.sheet.cssRules[g];return n!==void 0&&typeof n.cssText=="string"?n.cssText:""},e}(),$H=function(){function e(g){var n=this.element=Jy(g);this.nodes=n.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(g,n){if(g<=this.length&&g>=0){var l=document.createTextNode(n),o=this.nodes[g];return this.element.insertBefore(l,o||null),this.length++,!0}return!1},t.deleteRule=function(g){this.element.removeChild(this.nodes[g]),this.length--},t.getRule=function(g){return g<this.length?this.nodes[g].textContent:""},e}(),qH=function(){function e(g){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(g,n){return g<=this.length&&(this.rules.splice(g,0,n),this.length++,!0)},t.deleteRule=function(g){this.rules.splice(g,1),this.length--},t.getRule=function(g){return g<this.length?this.rules[g]:""},e}(),ab=S0,ew={isServer:!S0,useCSSOMInjection:!MH},Yy=function(){function e(g,n,l){g===void 0&&(g=il),n===void 0&&(n={}),this.options=Zn({},ew,{},g),this.gs=n,this.names=new Map(l),this.server=!!g.isServer,!this.server&&S0&&ab&&(ab=!1,function(o){for(var I=document.querySelectorAll(DH),r=0,C=I.length;r<C;r++){var i=I[r];i&&i.getAttribute(qo)!=="active"&&(jH(o,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(g){return HC(g)};var t=e.prototype;return t.reconstructWithOptions=function(g,n){return n===void 0&&(n=!0),new e(Zn({},this.options,{},g),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(g){return this.gs[g]=(this.gs[g]||0)+1},t.getTag=function(){return this.tag||(this.tag=(l=(n=this.options).isServer,o=n.useCSSOMInjection,I=n.target,g=l?new qH(I):o?new _H(I):new $H(I),new TH(g)));var g,n,l,o,I},t.hasNameForId=function(g,n){return this.names.has(g)&&this.names.get(g).has(n)},t.registerName=function(g,n){if(HC(g),this.names.has(g))this.names.get(g).add(n);else{var l=new Set;l.add(n),this.names.set(g,l)}},t.insertRules=function(g,n,l){this.registerName(g,n),this.getTag().insertRules(HC(g),l)},t.clearNames=function(g){this.names.has(g)&&this.names.get(g).clear()},t.clearRules=function(g){this.getTag().clearGroup(HC(g)),this.clearNames(g)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(g){for(var n=g.getTag(),l=n.length,o="",I=0;I<l;I++){var r=LH(I);if(r!==void 0){var C=g.names.get(r),i=n.getGroup(I);if(C&&i&&C.size){var a=qo+".g"+I+'[id="'+r+'"]',c="";C!==void 0&&C.forEach(function(s){s.length>0&&(c+=s+",")}),o+=""+i+a+'{content:"'+c+`"}/*!sc*/
`}}}return o}(this)},e}(),tw=/(a)(d)/gi,sb=function(e){return String.fromCharCode(e+(e>25?39:97))};function Nu(e){var t,g="";for(t=Math.abs(e);t>52;t=t/52|0)g=sb(t%52)+g;return(sb(t%52)+g).replace(tw,"$1-$2")}var Ro=function(e,t){for(var g=t.length;g;)e=33*e^t.charCodeAt(--g);return e},xy=function(e){return Ro(5381,e)};function gw(e){for(var t=0;t<e.length;t+=1){var g=e[t];if(xr(g)&&!y0(g))return!1}return!0}var nw=xy("5.3.6"),lw=function(){function e(t,g,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&gw(t),this.componentId=g,this.baseHash=Ro(nw,g),this.baseStyle=n,Yy.registerId(g)}return e.prototype.generateAndInjectStyles=function(t,g,n){var l=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(t,g,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&g.hasNameForId(l,this.staticRulesId))o.push(this.staticRulesId);else{var I=eI(this.rules,t,g,n).join(""),r=Nu(Ro(this.baseHash,I)>>>0);if(!g.hasNameForId(l,r)){var C=n(I,"."+r,void 0,l);g.insertRules(l,r,C)}o.push(r),this.staticRulesId=r}else{for(var i=this.rules.length,a=Ro(this.baseHash,n.hash),c="",s=0;s<i;s++){var m=this.rules[s];if(typeof m=="string")c+=m;else if(m){var A=eI(m,t,g,n),d=Array.isArray(A)?A.join(""):A;a=Ro(a,d+s),c+=d}}if(c){var h=Nu(a>>>0);if(!g.hasNameForId(l,h)){var Z=n(c,"."+h,void 0,l);g.insertRules(l,h,Z)}o.push(h)}}return o.join(" ")},e}(),ow=/^\s*\/\/.*$/gm,Iw=[":","[",".","#"];function rw(e){var t,g,n,l,o=e===void 0?il:e,I=o.options,r=I===void 0?il:I,C=o.plugins,i=C===void 0?Pi:C,a=new WH(r),c=[],s=function(d){function h(Z){if(Z)try{d(Z+"}")}catch{}}return function(Z,u,p,G,f,S,W,v,w,y){switch(Z){case 1:if(w===0&&u.charCodeAt(0)===64)return d(u+";"),"";break;case 2:if(v===0)return u+"/*|*/";break;case 3:switch(v){case 102:case 112:return d(p[0]+u),"";default:return u+(y===0?"/*|*/":"")}case-2:u.split("/*|*/}").forEach(h)}}}(function(d){c.push(d)}),m=function(d,h,Z){return h===0&&Iw.indexOf(Z[g.length])!==-1||Z.match(l)?d:"."+t};function A(d,h,Z,u){u===void 0&&(u="&");var p=d.replace(ow,""),G=h&&Z?Z+" "+h+" { "+p+" }":p;return t=u,g=h,n=new RegExp("\\"+g+"\\b","g"),l=new RegExp("(\\"+g+"\\b){2,}"),a(Z||!h?"":h,G)}return a.use([].concat(i,[function(d,h,Z){d===2&&Z.length&&Z[0].lastIndexOf(g)>0&&(Z[0]=Z[0].replace(n,m))},s,function(d){if(d===-2){var h=c;return c=[],h}}])),A.hash=i.length?i.reduce(function(d,h){return h.name||oC(15),Ro(d,h.name)},5381).toString():"",A}var Hy=Me.createContext();Hy.Consumer;var wy=Me.createContext(),Cw=(wy.Consumer,new Yy),Fu=rw();function iw(){return B.exports.useContext(Hy)||Cw}function aw(){return B.exports.useContext(wy)||Fu}var sw=function(){function e(t,g){var n=this;this.inject=function(l,o){o===void 0&&(o=Fu);var I=n.name+o.hash;l.hasNameForId(n.id,I)||l.insertRules(n.id,I,o(n.rules,I,"@keyframes"))},this.toString=function(){return oC(12,String(n.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=g}return e.prototype.getName=function(t){return t===void 0&&(t=Fu),this.name+t.hash},e}(),cw=/([A-Z])/,dw=/([A-Z])/g,uw=/^ms-/,Aw=function(e){return"-"+e.toLowerCase()};function cb(e){return cw.test(e)?e.replace(dw,Aw).replace(uw,"-ms-"):e}var db=function(e){return e==null||e===!1||e===""};function eI(e,t,g,n){if(Array.isArray(e)){for(var l,o=[],I=0,r=e.length;I<r;I+=1)(l=eI(e[I],t,g,n))!==""&&(Array.isArray(l)?o.push.apply(o,l):o.push(l));return o}if(db(e))return"";if(y0(e))return"."+e.styledComponentId;if(xr(e)){if(typeof(i=e)!="function"||i.prototype&&i.prototype.isReactComponent||!t)return e;var C=e(t);return eI(C,t,g,n)}var i;return e instanceof sw?g?(e.inject(g,n),e.getName(n)):e:wu(e)?function a(c,s){var m,A,d=[];for(var h in c)c.hasOwnProperty(h)&&!db(c[h])&&(Array.isArray(c[h])&&c[h].isCss||xr(c[h])?d.push(cb(h)+":",c[h],";"):wu(c[h])?d.push.apply(d,a(c[h],h)):d.push(cb(h)+": "+(m=h,(A=c[h])==null||typeof A=="boolean"||A===""?"":typeof A!="number"||A===0||m in VH?String(A).trim():A+"px")+";"));return s?[s+" {"].concat(d,["}"]):d}(e):e.toString()}var ub=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function mw(e){for(var t=arguments.length,g=new Array(t>1?t-1:0),n=1;n<t;n++)g[n-1]=arguments[n];return xr(e)||wu(e)?ub(eI(Cb(Pi,[e].concat(g)))):g.length===0&&e.length===1&&typeof e[0]=="string"?e:ub(eI(Cb(e,g)))}var pw=function(e,t,g){return g===void 0&&(g=il),e.theme!==g.theme&&e.theme||t||g.theme},bw=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Zw=/(^-|-$)/g;function Rc(e){return e.replace(bw,"-").replace(Zw,"")}var hw=function(e){return Nu(xy(e)>>>0)};function wC(e){return typeof e=="string"&&!0}var Ku=function(e){return typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)},Gw=function(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"};function fw(e,t,g){var n=e[g];Ku(t)&&Ku(n)?Ny(n,t):e[g]=t}function Ny(e){for(var t=arguments.length,g=new Array(t>1?t-1:0),n=1;n<t;n++)g[n-1]=arguments[n];for(var l=0,o=g;l<o.length;l++){var I=o[l];if(Ku(I))for(var r in I)Gw(r)&&fw(e,I[r],r)}return e}var Fy=Me.createContext();Fy.Consumer;var Xc={};function Ky(e,t,g){var n=y0(e),l=!wC(e),o=t.attrs,I=o===void 0?Pi:o,r=t.componentId,C=r===void 0?function(u,p){var G=typeof u!="string"?"sc":Rc(u);Xc[G]=(Xc[G]||0)+1;var f=G+"-"+hw("5.3.6"+G+Xc[G]);return p?p+"-"+f:f}(t.displayName,t.parentComponentId):r,i=t.displayName,a=i===void 0?function(u){return wC(u)?"styled."+u:"Styled("+ib(u)+")"}(e):i,c=t.displayName&&t.componentId?Rc(t.displayName)+"-"+t.componentId:t.componentId||C,s=n&&e.attrs?Array.prototype.concat(e.attrs,I).filter(Boolean):I,m=t.shouldForwardProp;n&&e.shouldForwardProp&&(m=t.shouldForwardProp?function(u,p,G){return e.shouldForwardProp(u,p,G)&&t.shouldForwardProp(u,p,G)}:e.shouldForwardProp);var A,d=new lw(g,c,n?e.componentStyle:void 0),h=d.isStatic&&I.length===0,Z=function(u,p){return function(G,f,S,W){var v=G.attrs,w=G.componentStyle,y=G.defaultProps,R=G.foldedComponentIds,x=G.shouldForwardProp,H=G.styledComponentId,F=G.target,M=function(P,k,$){P===void 0&&(P=il);var K=Zn({},k,{theme:P}),_={};return $.forEach(function(re){var ne,ge,ue,ye=re;for(ne in xr(ye)&&(ye=ye(K)),ye)K[ne]=_[ne]=ne==="className"?(ge=_[ne],ue=ye[ne],ge&&ue?ge+" "+ue:ge||ue):ye[ne]}),[K,_]}(pw(f,B.exports.useContext(Fy),y)||il,f,v),j=M[0],O=M[1],z=function(P,k,$,K){var _=iw(),re=aw(),ne=k?P.generateAndInjectStyles(il,_,re):P.generateAndInjectStyles($,_,re);return ne}(w,W,j),D=S,T=O.$as||f.$as||O.as||f.as||F,N=wC(T),V=O!==f?Zn({},f,{},O):f,Y={};for(var J in V)J[0]!=="$"&&J!=="as"&&(J==="forwardedAs"?Y.as=V[J]:(x?x(J,Hu,T):!N||Hu(J))&&(Y[J]=V[J]));return f.style&&O.style!==f.style&&(Y.style=Zn({},f.style,{},O.style)),Y.className=Array.prototype.concat(R,H,z!==H?z:null,f.className,O.className).filter(Boolean).join(" "),Y.ref=D,B.exports.createElement(T,Y)}(A,u,p,h)};return Z.displayName=a,(A=Me.forwardRef(Z)).attrs=s,A.componentStyle=d,A.displayName=a,A.shouldForwardProp=m,A.foldedComponentIds=n?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Pi,A.styledComponentId=c,A.target=n?e.target:e,A.withComponent=function(u){var p=t.componentId,G=function(S,W){if(S==null)return{};var v,w,y={},R=Object.keys(S);for(w=0;w<R.length;w++)v=R[w],W.indexOf(v)>=0||(y[v]=S[v]);return y}(t,["componentId"]),f=p&&p+"-"+(wC(u)?u:Rc(ib(u)));return Ky(u,Zn({},G,{attrs:s,componentId:f}),g)},Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(u){this._foldedDefaultProps=n?Ny({},e.defaultProps,u):u}}),A.toString=function(){return"."+A.styledComponentId},l&&zH(A,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),A}var Eu=function(e){return function t(g,n,l){if(l===void 0&&(l=il),!m0.exports.isValidElementType(n))return oC(1,String(n));var o=function(){return g(n,l,mw.apply(void 0,arguments))};return o.withConfig=function(I){return t(g,n,Zn({},l,{},I))},o.attrs=function(I){return t(g,n,Zn({},l,{attrs:Array.prototype.concat(l.attrs,I).filter(Boolean)}))},o}(Ky,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){Eu[e]=Eu(e)});const pt=Eu,Bw=pt.div`
  position: sticky;
  top: 0px;
  display: flex;
  justify-content: center;
  margin: 0 auto;
  background-color: #b1d6a8;
  height: 90px;
  z-index: 999;

  .logo {
    height: 75px;
  }
`;function yw(){return b(Bw,{children:b("div",{style:{padding:10},children:b(lt,{to:"/",children:b("img",{className:"logo",alt:"logo",src:"\\images\\logo.png"})})})})}const Sw={black:"#000",white:"#fff"},Hr=Sw,Ww={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},no=Ww,Vw={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},lo=Vw,vw={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},oo=vw,Rw={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Io=Rw,Xw={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},ro=Xw,kw={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},xI=kw,Jw={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Yw=Jw;function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e},X.apply(this,arguments)}function ce(e,t){if(e==null)return{};var g={},n=Object.keys(e),l,o;for(o=0;o<n.length;o++)l=n[o],!(t.indexOf(l)>=0)&&(g[l]=e[l]);return g}function xw(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Hw(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var ww=function(){function e(g){var n=this;this._insertTag=function(l){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(l,o),n.tags.push(l)},this.isSpeedy=g.speedy===void 0?!0:g.speedy,this.tags=[],this.ctr=0,this.nonce=g.nonce,this.key=g.key,this.container=g.container,this.prepend=g.prepend,this.insertionPoint=g.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Hw(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var o=xw(l);try{o.insertRule(n,o.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Ot="-ms-",Oi="-moz-",$e="-webkit-",Ey="comm",W0="rule",V0="decl",Nw="@import",zy="@keyframes",Fw=Math.abs,Cs=String.fromCharCode,Kw=Object.assign;function Ew(e,t){return Et(e,0)^45?(((t<<2^Et(e,0))<<2^Et(e,1))<<2^Et(e,2))<<2^Et(e,3):0}function My(e){return e.trim()}function zw(e,t){return(e=t.exec(e))?e[0]:e}function qe(e,t,g){return e.replace(t,g)}function zu(e,t){return e.indexOf(t)}function Et(e,t){return e.charCodeAt(t)|0}function wr(e,t,g){return e.slice(t,g)}function en(e){return e.length}function v0(e){return e.length}function NC(e,t){return t.push(e),e}function Mw(e,t){return e.map(t).join("")}var is=1,tI=1,Ty=0,mg=0,Wt=0,dI="";function as(e,t,g,n,l,o,I){return{value:e,root:t,parent:g,type:n,props:l,children:o,line:is,column:tI,length:I,return:""}}function HI(e,t){return Kw(as("",null,null,"",null,null,0),e,{length:-e.length},t)}function Tw(){return Wt}function Lw(){return Wt=mg>0?Et(dI,--mg):0,tI--,Wt===10&&(tI=1,is--),Wt}function fg(){return Wt=mg<Ty?Et(dI,mg++):0,tI++,Wt===10&&(tI=1,is++),Wt}function Cn(){return Et(dI,mg)}function ai(){return mg}function IC(e,t){return wr(dI,e,t)}function Nr(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ly(e){return is=tI=1,Ty=en(dI=e),mg=0,[]}function Uy(e){return dI="",e}function si(e){return My(IC(mg-1,Mu(e===91?e+2:e===40?e+1:e)))}function Uw(e){for(;(Wt=Cn())&&Wt<33;)fg();return Nr(e)>2||Nr(Wt)>3?"":" "}function Dw(e,t){for(;--t&&fg()&&!(Wt<48||Wt>102||Wt>57&&Wt<65||Wt>70&&Wt<97););return IC(e,ai()+(t<6&&Cn()==32&&fg()==32))}function Mu(e){for(;fg();)switch(Wt){case e:return mg;case 34:case 39:e!==34&&e!==39&&Mu(Wt);break;case 40:e===41&&Mu(e);break;case 92:fg();break}return mg}function Qw(e,t){for(;fg()&&e+Wt!==47+10;)if(e+Wt===42+42&&Cn()===47)break;return"/*"+IC(t,mg-1)+"*"+Cs(e===47?e:fg())}function Pw(e){for(;!Nr(Cn());)fg();return IC(e,mg)}function jw(e){return Uy(ci("",null,null,null,[""],e=Ly(e),0,[0],e))}function ci(e,t,g,n,l,o,I,r,C){for(var i=0,a=0,c=I,s=0,m=0,A=0,d=1,h=1,Z=1,u=0,p="",G=l,f=o,S=n,W=p;h;)switch(A=u,u=fg()){case 40:if(A!=108&&Et(W,c-1)==58){zu(W+=qe(si(u),"&","&\f"),"&\f")!=-1&&(Z=-1);break}case 34:case 39:case 91:W+=si(u);break;case 9:case 10:case 13:case 32:W+=Uw(A);break;case 92:W+=Dw(ai()-1,7);continue;case 47:switch(Cn()){case 42:case 47:NC(Ow(Qw(fg(),ai()),t,g),C);break;default:W+="/"}break;case 123*d:r[i++]=en(W)*Z;case 125*d:case 59:case 0:switch(u){case 0:case 125:h=0;case 59+a:m>0&&en(W)-c&&NC(m>32?mb(W+";",n,g,c-1):mb(qe(W," ","")+";",n,g,c-2),C);break;case 59:W+=";";default:if(NC(S=Ab(W,t,g,i,a,l,r,p,G=[],f=[],c),o),u===123)if(a===0)ci(W,t,S,S,G,o,c,r,f);else switch(s===99&&Et(W,3)===110?100:s){case 100:case 109:case 115:ci(e,S,S,n&&NC(Ab(e,S,S,0,0,l,r,p,l,G=[],c),f),l,f,c,r,n?G:f);break;default:ci(W,S,S,S,[""],f,0,r,f)}}i=a=m=0,d=Z=1,p=W="",c=I;break;case 58:c=1+en(W),m=A;default:if(d<1){if(u==123)--d;else if(u==125&&d++==0&&Lw()==125)continue}switch(W+=Cs(u),u*d){case 38:Z=a>0?1:(W+="\f",-1);break;case 44:r[i++]=(en(W)-1)*Z,Z=1;break;case 64:Cn()===45&&(W+=si(fg())),s=Cn(),a=c=en(p=W+=Pw(ai())),u++;break;case 45:A===45&&en(W)==2&&(d=0)}}return o}function Ab(e,t,g,n,l,o,I,r,C,i,a){for(var c=l-1,s=l===0?o:[""],m=v0(s),A=0,d=0,h=0;A<n;++A)for(var Z=0,u=wr(e,c+1,c=Fw(d=I[A])),p=e;Z<m;++Z)(p=My(d>0?s[Z]+" "+u:qe(u,/&\f/g,s[Z])))&&(C[h++]=p);return as(e,t,g,l===0?W0:r,C,i,a)}function Ow(e,t,g){return as(e,t,g,Ey,Cs(Tw()),wr(e,2,-2),0)}function mb(e,t,g,n){return as(e,t,g,V0,wr(e,0,n),wr(e,n+1,-1),n)}function Fo(e,t){for(var g="",n=v0(e),l=0;l<n;l++)g+=t(e[l],l,e,t)||"";return g}function _w(e,t,g,n){switch(e.type){case Nw:case V0:return e.return=e.return||e.value;case Ey:return"";case zy:return e.return=e.value+"{"+Fo(e.children,n)+"}";case W0:e.value=e.props.join(",")}return en(g=Fo(e.children,n))?e.return=e.value+"{"+g+"}":""}function $w(e){var t=v0(e);return function(g,n,l,o){for(var I="",r=0;r<t;r++)I+=e[r](g,n,l,o)||"";return I}}function qw(e){return function(t){t.root||(t=t.return)&&e(t)}}var eN=function(t,g,n){for(var l=0,o=0;l=o,o=Cn(),l===38&&o===12&&(g[n]=1),!Nr(o);)fg();return IC(t,mg)},tN=function(t,g){var n=-1,l=44;do switch(Nr(l)){case 0:l===38&&Cn()===12&&(g[n]=1),t[n]+=eN(mg-1,g,n);break;case 2:t[n]+=si(l);break;case 4:if(l===44){t[++n]=Cn()===58?"&\f":"",g[n]=t[n].length;break}default:t[n]+=Cs(l)}while(l=fg());return t},gN=function(t,g){return Uy(tN(Ly(t),g))},pb=new WeakMap,nN=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var g=t.value,n=t.parent,l=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&g.charCodeAt(0)!==58&&!pb.get(n))&&!l){pb.set(t,!0);for(var o=[],I=gN(g,o),r=n.props,C=0,i=0;C<I.length;C++)for(var a=0;a<r.length;a++,i++)t.props[i]=o[C]?I[C].replace(/&\f/g,r[a]):r[a]+" "+I[C]}}},lN=function(t){if(t.type==="decl"){var g=t.value;g.charCodeAt(0)===108&&g.charCodeAt(2)===98&&(t.return="",t.value="")}};function Dy(e,t){switch(Ew(e,t)){case 5103:return $e+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $e+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return $e+e+Oi+e+Ot+e+e;case 6828:case 4268:return $e+e+Ot+e+e;case 6165:return $e+e+Ot+"flex-"+e+e;case 5187:return $e+e+qe(e,/(\w+).+(:[^]+)/,$e+"box-$1$2"+Ot+"flex-$1$2")+e;case 5443:return $e+e+Ot+"flex-item-"+qe(e,/flex-|-self/,"")+e;case 4675:return $e+e+Ot+"flex-line-pack"+qe(e,/align-content|flex-|-self/,"")+e;case 5548:return $e+e+Ot+qe(e,"shrink","negative")+e;case 5292:return $e+e+Ot+qe(e,"basis","preferred-size")+e;case 6060:return $e+"box-"+qe(e,"-grow","")+$e+e+Ot+qe(e,"grow","positive")+e;case 4554:return $e+qe(e,/([^-])(transform)/g,"$1"+$e+"$2")+e;case 6187:return qe(qe(qe(e,/(zoom-|grab)/,$e+"$1"),/(image-set)/,$e+"$1"),e,"")+e;case 5495:case 3959:return qe(e,/(image-set\([^]*)/,$e+"$1$`$1");case 4968:return qe(qe(e,/(.+:)(flex-)?(.*)/,$e+"box-pack:$3"+Ot+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$e+e+e;case 4095:case 3583:case 4068:case 2532:return qe(e,/(.+)-inline(.+)/,$e+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(en(e)-1-t>6)switch(Et(e,t+1)){case 109:if(Et(e,t+4)!==45)break;case 102:return qe(e,/(.+:)(.+)-([^]+)/,"$1"+$e+"$2-$3$1"+Oi+(Et(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~zu(e,"stretch")?Dy(qe(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Et(e,t+1)!==115)break;case 6444:switch(Et(e,en(e)-3-(~zu(e,"!important")&&10))){case 107:return qe(e,":",":"+$e)+e;case 101:return qe(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+$e+(Et(e,14)===45?"inline-":"")+"box$3$1"+$e+"$2$3$1"+Ot+"$2box$3")+e}break;case 5936:switch(Et(e,t+11)){case 114:return $e+e+Ot+qe(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return $e+e+Ot+qe(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return $e+e+Ot+qe(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return $e+e+Ot+e+e}return e}var oN=function(t,g,n,l){if(t.length>-1&&!t.return)switch(t.type){case V0:t.return=Dy(t.value,t.length);break;case zy:return Fo([HI(t,{value:qe(t.value,"@","@"+$e)})],l);case W0:if(t.length)return Mw(t.props,function(o){switch(zw(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Fo([HI(t,{props:[qe(o,/:(read-\w+)/,":"+Oi+"$1")]})],l);case"::placeholder":return Fo([HI(t,{props:[qe(o,/:(plac\w+)/,":"+$e+"input-$1")]}),HI(t,{props:[qe(o,/:(plac\w+)/,":"+Oi+"$1")]}),HI(t,{props:[qe(o,/:(plac\w+)/,Ot+"input-$1")]})],l)}return""})}},IN=[oN],rN=function(t){var g=t.key;if(g==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(d){var h=d.getAttribute("data-emotion");h.indexOf(" ")!==-1&&(document.head.appendChild(d),d.setAttribute("data-s",""))})}var l=t.stylisPlugins||IN,o={},I,r=[];I=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+g+' "]'),function(d){for(var h=d.getAttribute("data-emotion").split(" "),Z=1;Z<h.length;Z++)o[h[Z]]=!0;r.push(d)});var C,i=[nN,lN];{var a,c=[_w,qw(function(d){a.insert(d)})],s=$w(i.concat(l,c)),m=function(h){return Fo(jw(h),s)};C=function(h,Z,u,p){a=u,m(h?h+"{"+Z.styles+"}":Z.styles),p&&(A.inserted[Z.name]=!0)}}var A={key:g,sheet:new ww({key:g,container:I,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:C};return A.sheet.hydrate(r),A},CN=!0;function iN(e,t,g){var n="";return g.split(" ").forEach(function(l){e[l]!==void 0?t.push(e[l]+";"):n+=l+" "}),n}var Qy=function(t,g,n){var l=t.key+"-"+g.name;(n===!1||CN===!1)&&t.registered[l]===void 0&&(t.registered[l]=g.styles)},Py=function(t,g,n){Qy(t,g,n);var l=t.key+"-"+g.name;if(t.inserted[g.name]===void 0){var o=g;do t.insert(g===o?"."+l:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function aN(e){for(var t=0,g,n=0,l=e.length;l>=4;++n,l-=4)g=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,g=(g&65535)*1540483477+((g>>>16)*59797<<16),g^=g>>>24,t=(g&65535)*1540483477+((g>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var sN={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},cN=/[A-Z]|^ms/g,dN=/_EMO_([^_]+?)_([^]*?)_EMO_/g,jy=function(t){return t.charCodeAt(1)===45},bb=function(t){return t!=null&&typeof t!="boolean"},kc=Vy(function(e){return jy(e)?e:e.replace(cN,"-$&").toLowerCase()}),Zb=function(t,g){switch(t){case"animation":case"animationName":if(typeof g=="string")return g.replace(dN,function(n,l,o){return tn={name:l,styles:o,next:tn},l})}return sN[t]!==1&&!jy(t)&&typeof g=="number"&&g!==0?g+"px":g};function Fr(e,t,g){if(g==null)return"";if(g.__emotion_styles!==void 0)return g;switch(typeof g){case"boolean":return"";case"object":{if(g.anim===1)return tn={name:g.name,styles:g.styles,next:tn},g.name;if(g.styles!==void 0){var n=g.next;if(n!==void 0)for(;n!==void 0;)tn={name:n.name,styles:n.styles,next:tn},n=n.next;var l=g.styles+";";return l}return uN(e,t,g)}case"function":{if(e!==void 0){var o=tn,I=g(e);return tn=o,Fr(e,t,I)}break}}if(t==null)return g;var r=t[g];return r!==void 0?r:g}function uN(e,t,g){var n="";if(Array.isArray(g))for(var l=0;l<g.length;l++)n+=Fr(e,t,g[l])+";";else for(var o in g){var I=g[o];if(typeof I!="object")t!=null&&t[I]!==void 0?n+=o+"{"+t[I]+"}":bb(I)&&(n+=kc(o)+":"+Zb(o,I)+";");else if(Array.isArray(I)&&typeof I[0]=="string"&&(t==null||t[I[0]]===void 0))for(var r=0;r<I.length;r++)bb(I[r])&&(n+=kc(o)+":"+Zb(o,I[r])+";");else{var C=Fr(e,t,I);switch(o){case"animation":case"animationName":{n+=kc(o)+":"+C+";";break}default:n+=o+"{"+C+"}"}}}return n}var hb=/label:\s*([^\s;\n{]+)\s*(;|$)/g,tn,R0=function(t,g,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var l=!0,o="";tn=void 0;var I=t[0];I==null||I.raw===void 0?(l=!1,o+=Fr(n,g,I)):o+=I[0];for(var r=1;r<t.length;r++)o+=Fr(n,g,t[r]),l&&(o+=I[r]);hb.lastIndex=0;for(var C="",i;(i=hb.exec(o))!==null;)C+="-"+i[1];var a=aN(o)+C;return{name:a,styles:o,next:tn}},AN=function(t){return t()},Oy=Eo["useInsertionEffect"]?Eo["useInsertionEffect"]:!1,mN=Oy||AN,Gb=Oy||B.exports.useLayoutEffect,_y=B.exports.createContext(typeof HTMLElement<"u"?rN({key:"css"}):null);_y.Provider;var $y=function(t){return B.exports.forwardRef(function(g,n){var l=B.exports.useContext(_y);return t(g,l,n)})},X0=B.exports.createContext({}),pN=$y(function(e,t){var g=e.styles,n=R0([g],void 0,B.exports.useContext(X0)),l=B.exports.useRef();return Gb(function(){var o=t.key+"-global",I=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,C=document.querySelector('style[data-emotion="'+o+" "+n.name+'"]');return t.sheet.tags.length&&(I.before=t.sheet.tags[0]),C!==null&&(r=!0,C.setAttribute("data-emotion",o),I.hydrate([C])),l.current=[I,r],function(){I.flush()}},[t]),Gb(function(){var o=l.current,I=o[0],r=o[1];if(r){o[1]=!1;return}if(n.next!==void 0&&Py(t,n.next,!0),I.tags.length){var C=I.tags[I.tags.length-1].nextElementSibling;I.before=C,I.flush()}t.insert("",n,I,!1)},[t,n.name]),null});function k0(){for(var e=arguments.length,t=new Array(e),g=0;g<e;g++)t[g]=arguments[g];return R0(t)}var rC=function(){var t=k0.apply(void 0,arguments),g="animation-"+t.name;return{name:g,styles:"@keyframes "+g+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},bN=Hu,ZN=function(t){return t!=="theme"},fb=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?bN:ZN},Bb=function(t,g,n){var l;if(g){var o=g.shouldForwardProp;l=t.__emotion_forwardProp&&o?function(I){return t.__emotion_forwardProp(I)&&o(I)}:o}return typeof l!="function"&&n&&(l=t.__emotion_forwardProp),l},hN=function(t){var g=t.cache,n=t.serialized,l=t.isStringTag;return Qy(g,n,l),mN(function(){return Py(g,n,l)}),null},GN=function e(t,g){var n=t.__emotion_real===t,l=n&&t.__emotion_base||t,o,I;g!==void 0&&(o=g.label,I=g.target);var r=Bb(t,g,n),C=r||fb(l),i=!C("as");return function(){var a=arguments,c=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&c.push("label:"+o+";"),a[0]==null||a[0].raw===void 0)c.push.apply(c,a);else{c.push(a[0][0]);for(var s=a.length,m=1;m<s;m++)c.push(a[m],a[0][m])}var A=$y(function(d,h,Z){var u=i&&d.as||l,p="",G=[],f=d;if(d.theme==null){f={};for(var S in d)f[S]=d[S];f.theme=B.exports.useContext(X0)}typeof d.className=="string"?p=iN(h.registered,G,d.className):d.className!=null&&(p=d.className+" ");var W=R0(c.concat(G),h.registered,f);p+=h.key+"-"+W.name,I!==void 0&&(p+=" "+I);var v=i&&r===void 0?fb(u):C,w={};for(var y in d)i&&y==="as"||v(y)&&(w[y]=d[y]);return w.className=p,w.ref=Z,B.exports.createElement(B.exports.Fragment,null,B.exports.createElement(hN,{cache:h,serialized:W,isStringTag:typeof u=="string"}),B.exports.createElement(u,w))});return A.displayName=o!==void 0?o:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",A.defaultProps=t.defaultProps,A.__emotion_real=A,A.__emotion_base=l,A.__emotion_styles=c,A.__emotion_forwardProp=r,Object.defineProperty(A,"toString",{value:function(){return"."+I}}),A.withComponent=function(d,h){return e(d,X({},g,h,{shouldForwardProp:Bb(A,h,!0)})).apply(void 0,c)},A}};const fN=GN;var BN=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Tu=fN.bind();BN.forEach(function(e){Tu[e]=Tu(e)});const yN=Tu;var gI={exports:{}},SN="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",WN=SN,VN=WN;function qy(){}function eS(){}eS.resetWarningCache=qy;var vN=function(){function e(n,l,o,I,r,C){if(C!==VN){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}e.isRequired=e;function t(){return e}var g={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:eS,resetWarningCache:qy};return g.PropTypes=g,g};gI.exports=vN();function RN(e){return e==null||Object.keys(e).length===0}function XN(e){const{styles:t,defaultTheme:g={}}=e;return b(pN,{styles:typeof t=="function"?l=>t(RN(l)?g:l):t})}/** @license MUI v5.10.14
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function tS(e,t){return yN(e,t)}const kN=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function QI(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function ug(e,t,g={clone:!0}){const n=g.clone?X({},e):e;return QI(e)&&QI(t)&&Object.keys(t).forEach(l=>{l!=="__proto__"&&(QI(t[l])&&l in e&&QI(e[l])?n[l]=ug(e[l],t[l],g):n[l]=t[l])}),n}function cl(e){let t="https://mui.com/production-error/?code="+e;for(let g=1;g<arguments.length;g+=1)t+="&args[]="+encodeURIComponent(arguments[g]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function oe(e){if(typeof e!="string")throw new Error(cl(7));return e.charAt(0).toUpperCase()+e.slice(1)}function yb(...e){return e.reduce((t,g)=>g==null?t:function(...l){t.apply(this,l),g.apply(this,l)},()=>{})}function Kr(e,t=166){let g;function n(...l){const o=()=>{e.apply(this,l)};clearTimeout(g),g=setTimeout(o,t)}return n.clear=()=>{clearTimeout(g)},n}function di(e,t){return B.exports.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function Ag(e){return e&&e.ownerDocument||document}function vn(e){return Ag(e).defaultView||window}function Lu(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const JN=typeof window<"u"?B.exports.useLayoutEffect:B.exports.useEffect,Ll=JN;let Sb=0;function YN(e){const[t,g]=B.exports.useState(e),n=e||t;return B.exports.useEffect(()=>{t==null&&(Sb+=1,g(`mui-${Sb}`))},[t]),n}const Wb=Eo["useId"];function xN(e){if(Wb!==void 0){const t=Wb();return e!=null?e:t}return YN(e)}function Uu({controlled:e,default:t,name:g,state:n="value"}){const{current:l}=B.exports.useRef(e!==void 0),[o,I]=B.exports.useState(t),r=l?e:o,C=B.exports.useCallback(i=>{l||I(i)},[]);return[r,C]}function hn(e){const t=B.exports.useRef(e);return Ll(()=>{t.current=e}),B.exports.useCallback((...g)=>(0,t.current)(...g),[])}function Ut(...e){return B.exports.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(g=>{Lu(g,t)})},e)}let ss=!0,Du=!1,Vb;const HN={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function wN(e){const{type:t,tagName:g}=e;return!!(g==="INPUT"&&HN[t]&&!e.readOnly||g==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function NN(e){e.metaKey||e.altKey||e.ctrlKey||(ss=!0)}function Jc(){ss=!1}function FN(){this.visibilityState==="hidden"&&Du&&(ss=!0)}function KN(e){e.addEventListener("keydown",NN,!0),e.addEventListener("mousedown",Jc,!0),e.addEventListener("pointerdown",Jc,!0),e.addEventListener("touchstart",Jc,!0),e.addEventListener("visibilitychange",FN,!0)}function EN(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return ss||wN(t)}function zN(){const e=B.exports.useCallback(l=>{l!=null&&KN(l.ownerDocument)},[]),t=B.exports.useRef(!1);function g(){return t.current?(Du=!0,window.clearTimeout(Vb),Vb=window.setTimeout(()=>{Du=!1},100),t.current=!1,!0):!1}function n(l){return EN(l)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:n,onBlur:g,ref:e}}function gS(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}let Co;function nS(){if(Co)return Co;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),Co="reverse",e.scrollLeft>0?Co="default":(e.scrollLeft=1,e.scrollLeft===0&&(Co="negative")),document.body.removeChild(e),Co}function vb(e,t){const g=e.scrollLeft;if(t!=="rtl")return g;switch(nS()){case"negative":return e.scrollWidth-e.clientWidth+g;case"reverse":return e.scrollWidth-e.clientWidth-g;default:return g}}function lS(e,t){const g=X({},t);return Object.keys(e).forEach(n=>{g[n]===void 0&&(g[n]=e[n])}),g}function Ye(e,t,g){const n={};return Object.keys(e).forEach(l=>{n[l]=e[l].reduce((o,I)=>(I&&(o.push(t(I)),g&&g[I]&&o.push(g[I])),o),[]).join(" ")}),n}const Rb=e=>e,MN=()=>{let e=Rb;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Rb}}},TN=MN(),oS=TN,LN={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Xe(e,t,g="Mui"){const n=LN[t];return n?`${g}-${n}`:`${oS.generate(e)}-${t}`}function ke(e,t,g="Mui"){const n={};return t.forEach(l=>{n[l]=Xe(e,l,g)}),n}function Cr(e,t){return t?ug(e,t,{clone:!1}):e}const J0={xs:0,sm:600,md:900,lg:1200,xl:1536},Xb={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${J0[e]}px)`};function yg(e,t,g){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||Xb;return t.reduce((I,r,C)=>(I[o.up(o.keys[C])]=g(t[C]),I),{})}if(typeof t=="object"){const o=n.breakpoints||Xb;return Object.keys(t).reduce((I,r)=>{if(Object.keys(o.values||J0).indexOf(r)!==-1){const C=o.up(r);I[C]=g(t[r],r)}else{const C=r;I[C]=t[C]}return I},{})}return g(t)}function IS(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((n,l)=>{const o=e.up(l);return n[o]={},n},{}))||{}}function rS(e,t){return e.reduce((g,n)=>{const l=g[n];return(!l||Object.keys(l).length===0)&&delete g[n],g},t)}function UN(e,...t){const g=IS(e),n=[g,...t].reduce((l,o)=>ug(l,o),{});return rS(Object.keys(g),n)}function DN(e,t){if(typeof e!="object")return{};const g={},n=Object.keys(t);return Array.isArray(e)?n.forEach((l,o)=>{o<e.length&&(g[l]=!0)}):n.forEach(l=>{e[l]!=null&&(g[l]=!0)}),g}function Hl({values:e,breakpoints:t,base:g}){const n=g||DN(e,t),l=Object.keys(n);if(l.length===0)return e;let o;return l.reduce((I,r,C)=>(Array.isArray(e)?(I[r]=e[C]!=null?e[C]:e[o],o=C):typeof e=="object"?(I[r]=e[r]!=null?e[r]:e[o],o=r):I[r]=e,I),{})}function Y0(e,t,g=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&g){const n=`vars.${t}`.split(".").reduce((l,o)=>l&&l[o]?l[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,l)=>n&&n[l]!=null?n[l]:null,e)}function kb(e,t,g,n=g){let l;return typeof e=="function"?l=e(g):Array.isArray(e)?l=e[g]||n:l=Y0(e,g)||n,t&&(l=t(l,n)),l}function Ze(e){const{prop:t,cssProperty:g=e.prop,themeKey:n,transform:l}=e,o=I=>{if(I[t]==null)return null;const r=I[t],C=I.theme,i=Y0(C,n)||{};return yg(I,r,c=>{let s=kb(i,l,c);return c===s&&typeof c=="string"&&(s=kb(i,l,`${t}${c==="default"?"":oe(c)}`,c)),g===!1?s:{[g]:s}})};return o.propTypes={},o.filterProps=[t],o}function bl(...e){const t=e.reduce((n,l)=>(l.filterProps.forEach(o=>{n[o]=l}),n),{}),g=n=>Object.keys(n).reduce((l,o)=>t[o]?Cr(l,t[o](n)):l,{});return g.propTypes={},g.filterProps=e.reduce((n,l)=>n.concat(l.filterProps),[]),g}function QN(e){const t={};return g=>(t[g]===void 0&&(t[g]=e(g)),t[g])}const PN={m:"margin",p:"padding"},jN={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Jb={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ON=QN(e=>{if(e.length>2)if(Jb[e])e=Jb[e];else return[e];const[t,g]=e.split(""),n=PN[t],l=jN[g]||"";return Array.isArray(l)?l.map(o=>n+o):[n+l]}),_N=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],$N=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],CS=[..._N,...$N];function CC(e,t,g,n){var l;const o=(l=Y0(e,t,!1))!=null?l:g;return typeof o=="number"?I=>typeof I=="string"?I:o*I:Array.isArray(o)?I=>typeof I=="string"?I:o[I]:typeof o=="function"?o:()=>{}}function x0(e){return CC(e,"spacing",8)}function uI(e,t){if(typeof t=="string"||t==null)return t;const g=Math.abs(t),n=e(g);return t>=0?n:typeof n=="number"?-n:`-${n}`}function qN(e,t){return g=>e.reduce((n,l)=>(n[l]=uI(t,g),n),{})}function e5(e,t,g,n){if(t.indexOf(g)===-1)return null;const l=ON(g),o=qN(l,n),I=e[g];return yg(e,I,o)}function t5(e,t){const g=x0(e.theme);return Object.keys(e).map(n=>e5(e,t,n,g)).reduce(Cr,{})}function cs(e){return t5(e,CS)}cs.propTypes={};cs.filterProps=CS;function iC(e){return typeof e!="number"?e:`${e}px solid`}const g5=Ze({prop:"border",themeKey:"borders",transform:iC}),n5=Ze({prop:"borderTop",themeKey:"borders",transform:iC}),l5=Ze({prop:"borderRight",themeKey:"borders",transform:iC}),o5=Ze({prop:"borderBottom",themeKey:"borders",transform:iC}),I5=Ze({prop:"borderLeft",themeKey:"borders",transform:iC}),r5=Ze({prop:"borderColor",themeKey:"palette"}),C5=Ze({prop:"borderTopColor",themeKey:"palette"}),i5=Ze({prop:"borderRightColor",themeKey:"palette"}),a5=Ze({prop:"borderBottomColor",themeKey:"palette"}),s5=Ze({prop:"borderLeftColor",themeKey:"palette"}),H0=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=CC(e.theme,"shape.borderRadius",4),g=n=>({borderRadius:uI(t,n)});return yg(e,e.borderRadius,g)}return null};H0.propTypes={};H0.filterProps=["borderRadius"];const c5=bl(g5,n5,l5,o5,I5,r5,C5,i5,a5,s5,H0),iS=c5,d5=Ze({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),u5=Ze({prop:"display"}),A5=Ze({prop:"overflow"}),m5=Ze({prop:"textOverflow"}),p5=Ze({prop:"visibility"}),b5=Ze({prop:"whiteSpace"}),aS=bl(d5,u5,A5,m5,p5,b5),Z5=Ze({prop:"flexBasis"}),h5=Ze({prop:"flexDirection"}),G5=Ze({prop:"flexWrap"}),f5=Ze({prop:"justifyContent"}),B5=Ze({prop:"alignItems"}),y5=Ze({prop:"alignContent"}),S5=Ze({prop:"order"}),W5=Ze({prop:"flex"}),V5=Ze({prop:"flexGrow"}),v5=Ze({prop:"flexShrink"}),R5=Ze({prop:"alignSelf"}),X5=Ze({prop:"justifyItems"}),k5=Ze({prop:"justifySelf"}),J5=bl(Z5,h5,G5,f5,B5,y5,S5,W5,V5,v5,R5,X5,k5),sS=J5,w0=e=>{if(e.gap!==void 0&&e.gap!==null){const t=CC(e.theme,"spacing",8),g=n=>({gap:uI(t,n)});return yg(e,e.gap,g)}return null};w0.propTypes={};w0.filterProps=["gap"];const N0=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=CC(e.theme,"spacing",8),g=n=>({columnGap:uI(t,n)});return yg(e,e.columnGap,g)}return null};N0.propTypes={};N0.filterProps=["columnGap"];const F0=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=CC(e.theme,"spacing",8),g=n=>({rowGap:uI(t,n)});return yg(e,e.rowGap,g)}return null};F0.propTypes={};F0.filterProps=["rowGap"];const Y5=Ze({prop:"gridColumn"}),x5=Ze({prop:"gridRow"}),H5=Ze({prop:"gridAutoFlow"}),w5=Ze({prop:"gridAutoColumns"}),N5=Ze({prop:"gridAutoRows"}),F5=Ze({prop:"gridTemplateColumns"}),K5=Ze({prop:"gridTemplateRows"}),E5=Ze({prop:"gridTemplateAreas"}),z5=Ze({prop:"gridArea"}),M5=bl(w0,N0,F0,Y5,x5,H5,w5,N5,F5,K5,E5,z5),cS=M5;function K0(e,t){return t==="grey"?t:e}const T5=Ze({prop:"color",themeKey:"palette",transform:K0}),L5=Ze({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:K0}),U5=Ze({prop:"backgroundColor",themeKey:"palette",transform:K0}),D5=bl(T5,L5,U5),dS=D5,Q5=Ze({prop:"position"}),P5=Ze({prop:"zIndex",themeKey:"zIndex"}),j5=Ze({prop:"top"}),O5=Ze({prop:"right"}),_5=Ze({prop:"bottom"}),$5=Ze({prop:"left"}),uS=bl(Q5,P5,j5,O5,_5,$5),q5=Ze({prop:"boxShadow",themeKey:"shadows"}),AS=q5;function Zl(e){return e<=1&&e!==0?`${e*100}%`:e}const e9=Ze({prop:"width",transform:Zl}),mS=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=g=>{var n,l,o;return{maxWidth:((n=e.theme)==null||(l=n.breakpoints)==null||(o=l.values)==null?void 0:o[g])||J0[g]||Zl(g)}};return yg(e,e.maxWidth,t)}return null};mS.filterProps=["maxWidth"];const t9=Ze({prop:"minWidth",transform:Zl}),g9=Ze({prop:"height",transform:Zl}),n9=Ze({prop:"maxHeight",transform:Zl}),l9=Ze({prop:"minHeight",transform:Zl});Ze({prop:"size",cssProperty:"width",transform:Zl});Ze({prop:"size",cssProperty:"height",transform:Zl});const o9=Ze({prop:"boxSizing"}),I9=bl(e9,mS,t9,g9,n9,l9,o9),pS=I9,r9=Ze({prop:"fontFamily",themeKey:"typography"}),C9=Ze({prop:"fontSize",themeKey:"typography"}),i9=Ze({prop:"fontStyle",themeKey:"typography"}),a9=Ze({prop:"fontWeight",themeKey:"typography"}),s9=Ze({prop:"letterSpacing"}),c9=Ze({prop:"textTransform"}),d9=Ze({prop:"lineHeight"}),u9=Ze({prop:"textAlign"}),A9=Ze({prop:"typography",cssProperty:!1,themeKey:"typography"}),m9=bl(A9,r9,C9,i9,a9,s9,d9,u9,c9),bS=m9,Yb={borders:iS.filterProps,display:aS.filterProps,flexbox:sS.filterProps,grid:cS.filterProps,positions:uS.filterProps,palette:dS.filterProps,shadows:AS.filterProps,sizing:pS.filterProps,spacing:cs.filterProps,typography:bS.filterProps},ZS={borders:iS,display:aS,flexbox:sS,grid:cS,positions:uS,palette:dS,shadows:AS,sizing:pS,spacing:cs,typography:bS},p9=Object.keys(Yb).reduce((e,t)=>(Yb[t].forEach(g=>{e[g]=ZS[t]}),e),{});function b9(...e){const t=e.reduce((n,l)=>n.concat(Object.keys(l)),[]),g=new Set(t);return e.every(n=>g.size===Object.keys(n).length)}function Z9(e,t){return typeof e=="function"?e(t):e}function h9(e=ZS){const t=Object.keys(e).reduce((l,o)=>(e[o].filterProps.forEach(I=>{l[I]=e[o]}),l),{});function g(l,o,I){const r={[l]:o,theme:I},C=t[l];return C?C(r):{[l]:o}}function n(l){const{sx:o,theme:I={}}=l||{};if(!o)return null;function r(C){let i=C;if(typeof C=="function")i=C(I);else if(typeof C!="object")return C;if(!i)return null;const a=IS(I.breakpoints),c=Object.keys(a);let s=a;return Object.keys(i).forEach(m=>{const A=Z9(i[m],I);if(A!=null)if(typeof A=="object")if(t[m])s=Cr(s,g(m,A,I));else{const d=yg({theme:I},A,h=>({[m]:h}));b9(d,A)?s[m]=n({sx:A,theme:I}):s=Cr(s,d)}else s=Cr(s,g(m,A,I))}),rS(c,s)}return Array.isArray(o)?o.map(r):r(o)}return n}const hS=h9();hS.filterProps=["sx"];const GS=hS,G9=["sx"],f9=e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach(g=>{p9[g]?t.systemProps[g]=e[g]:t.otherProps[g]=e[g]}),t};function ds(e){const{sx:t}=e,g=ce(e,G9),{systemProps:n,otherProps:l}=f9(g);let o;return Array.isArray(t)?o=[n,...t]:typeof t=="function"?o=(...I)=>{const r=t(...I);return QI(r)?X({},n,r):n}:o=X({},n,t),X({},l,{sx:o})}function fS(e){var t,g,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(g=fS(e[t]))&&(n&&(n+=" "),n+=g);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function de(){for(var e,t,g=0,n="";g<arguments.length;)(e=arguments[g++])&&(t=fS(e))&&(n&&(n+=" "),n+=t);return n}const B9=["values","unit","step"],y9=e=>{const t=Object.keys(e).map(g=>({key:g,val:e[g]}))||[];return t.sort((g,n)=>g.val-n.val),t.reduce((g,n)=>X({},g,{[n.key]:n.val}),{})};function S9(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:g="px",step:n=5}=e,l=ce(e,B9),o=y9(t),I=Object.keys(o);function r(s){return`@media (min-width:${typeof t[s]=="number"?t[s]:s}${g})`}function C(s){return`@media (max-width:${(typeof t[s]=="number"?t[s]:s)-n/100}${g})`}function i(s,m){const A=I.indexOf(m);return`@media (min-width:${typeof t[s]=="number"?t[s]:s}${g}) and (max-width:${(A!==-1&&typeof t[I[A]]=="number"?t[I[A]]:m)-n/100}${g})`}function a(s){return I.indexOf(s)+1<I.length?i(s,I[I.indexOf(s)+1]):r(s)}function c(s){const m=I.indexOf(s);return m===0?r(I[1]):m===I.length-1?C(I[m]):i(s,I[I.indexOf(s)+1]).replace("@media","@media not all and")}return X({keys:I,values:o,up:r,down:C,between:i,only:a,not:c,unit:g},l)}const W9={borderRadius:4},V9=W9;function v9(e=8){if(e.mui)return e;const t=x0({spacing:e}),g=(...n)=>(n.length===0?[1]:n).map(o=>{const I=t(o);return typeof I=="number"?`${I}px`:I}).join(" ");return g.mui=!0,g}const R9=["breakpoints","palette","spacing","shape"];function us(e={},...t){const{breakpoints:g={},palette:n={},spacing:l,shape:o={}}=e,I=ce(e,R9),r=S9(g),C=v9(l);let i=ug({breakpoints:r,direction:"ltr",components:{},palette:X({mode:"light"},n),spacing:C,shape:X({},V9,o)},I);return i=t.reduce((a,c)=>ug(a,c),i),i}const X9=B.exports.createContext(null),BS=X9;function yS(){return B.exports.useContext(BS)}const k9=typeof Symbol=="function"&&Symbol.for,J9=k9?Symbol.for("mui.nested"):"__THEME_NESTED__";function Y9(e,t){return typeof t=="function"?t(e):X({},e,t)}function x9(e){const{children:t,theme:g}=e,n=yS(),l=B.exports.useMemo(()=>{const o=n===null?g:Y9(n,g);return o!=null&&(o[J9]=n!==null),o},[g,n]);return b(BS.Provider,{value:l,children:t})}function H9(e){return Object.keys(e).length===0}function w9(e=null){const t=yS();return!t||H9(t)?e:t}const N9=us();function As(e=N9){return w9(e)}const F9=["className","component"];function K9(e={}){const{defaultTheme:t,defaultClassName:g="MuiBox-root",generateClassName:n,styleFunctionSx:l=GS}=e,o=tS("div",{shouldForwardProp:r=>r!=="theme"&&r!=="sx"&&r!=="as"})(l);return B.exports.forwardRef(function(C,i){const a=As(t),c=ds(C),{className:s,component:m="div"}=c,A=ce(c,F9);return b(o,X({as:m,ref:i,className:de(s,n?n(g):g),theme:a},A))})}const E9=["variant"];function xb(e){return e.length===0}function SS(e){const{variant:t}=e,g=ce(e,E9);let n=t||"";return Object.keys(g).sort().forEach(l=>{l==="color"?n+=xb(n)?e[l]:oe(e[l]):n+=`${xb(n)?l:oe(l)}${oe(e[l].toString())}`}),n}const z9=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],M9=["theme"],T9=["theme"];function wI(e){return Object.keys(e).length===0}function L9(e){return typeof e=="string"&&e.charCodeAt(0)>96}const U9=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,D9=(e,t)=>{let g=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(g=t.components[e].variants);const n={};return g.forEach(l=>{const o=SS(l.props);n[o]=l.style}),n},Q9=(e,t,g,n)=>{var l,o;const{ownerState:I={}}=e,r=[],C=g==null||(l=g.components)==null||(o=l[n])==null?void 0:o.variants;return C&&C.forEach(i=>{let a=!0;Object.keys(i.props).forEach(c=>{I[c]!==i.props[c]&&e[c]!==i.props[c]&&(a=!1)}),a&&r.push(t[SS(i.props)])}),r};function ir(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const P9=us();function WS(e={}){const{defaultTheme:t=P9,rootShouldForwardProp:g=ir,slotShouldForwardProp:n=ir,styleFunctionSx:l=GS}=e,o=I=>{const r=wI(I.theme)?t:I.theme;return l(X({},I,{theme:r}))};return o.__mui_systemSx=!0,(I,r={})=>{kN(I,G=>G.filter(f=>!(f!=null&&f.__mui_systemSx)));const{name:C,slot:i,skipVariantsResolver:a,skipSx:c,overridesResolver:s}=r,m=ce(r,z9),A=a!==void 0?a:i&&i!=="Root"||!1,d=c||!1;let h,Z=ir;i==="Root"?Z=g:i?Z=n:L9(I)&&(Z=void 0);const u=tS(I,X({shouldForwardProp:Z,label:h},m)),p=(G,...f)=>{const S=f?f.map(y=>typeof y=="function"&&y.__emotion_real!==y?R=>{let{theme:x}=R,H=ce(R,M9);return y(X({theme:wI(x)?t:x},H))}:y):[];let W=G;C&&s&&S.push(y=>{const R=wI(y.theme)?t:y.theme,x=U9(C,R);if(x){const H={};return Object.entries(x).forEach(([F,M])=>{H[F]=typeof M=="function"?M(X({},y,{theme:R})):M}),s(y,H)}return null}),C&&!A&&S.push(y=>{const R=wI(y.theme)?t:y.theme;return Q9(y,D9(C,R),R,C)}),d||S.push(o);const v=S.length-f.length;if(Array.isArray(G)&&v>0){const y=new Array(v).fill("");W=[...G,...y],W.raw=[...G.raw,...y]}else typeof G=="function"&&G.__emotion_real!==G&&(W=y=>{let{theme:R}=y,x=ce(y,T9);return G(X({theme:wI(R)?t:R},x))});return u(W,...S)};return u.withConfig&&(p.withConfig=u.withConfig),p}}const j9=WS(),O9=j9;function _9(e){const{theme:t,name:g,props:n}=e;return!t||!t.components||!t.components[g]||!t.components[g].defaultProps?n:lS(t.components[g].defaultProps,n)}function VS({props:e,name:t,defaultTheme:g}){const n=As(g);return _9({theme:n,name:t,props:e})}function E0(e,t=0,g=1){return Math.min(Math.max(t,e),g)}function $9(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let g=e.match(t);return g&&g[0].length===1&&(g=g.map(n=>n+n)),g?`rgb${g.length===4?"a":""}(${g.map((n,l)=>l<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Ul(e){if(e.type)return e;if(e.charAt(0)==="#")return Ul($9(e));const t=e.indexOf("("),g=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(g)===-1)throw new Error(cl(9,e));let n=e.substring(t+1,e.length-1),l;if(g==="color"){if(n=n.split(" "),l=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error(cl(10,l))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:g,values:n,colorSpace:l}}function ms(e){const{type:t,colorSpace:g}=e;let{values:n}=e;return t.indexOf("rgb")!==-1?n=n.map((l,o)=>o<3?parseInt(l,10):l):t.indexOf("hsl")!==-1&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.indexOf("color")!==-1?n=`${g} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function q9(e){e=Ul(e);const{values:t}=e,g=t[0],n=t[1]/100,l=t[2]/100,o=n*Math.min(l,1-l),I=(i,a=(i+g/30)%12)=>l-o*Math.max(Math.min(a-3,9-a,1),-1);let r="rgb";const C=[Math.round(I(0)*255),Math.round(I(8)*255),Math.round(I(4)*255)];return e.type==="hsla"&&(r+="a",C.push(t[3])),ms({type:r,values:C})}function Hb(e){e=Ul(e);let t=e.type==="hsl"||e.type==="hsla"?Ul(q9(e)).values:e.values;return t=t.map(g=>(e.type!=="color"&&(g/=255),g<=.03928?g/12.92:((g+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function eF(e,t){const g=Hb(e),n=Hb(t);return(Math.max(g,n)+.05)/(Math.min(g,n)+.05)}function Oe(e,t){return e=Ul(e),t=E0(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,ms(e)}function _i(e,t){if(e=Ul(e),t=E0(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let g=0;g<3;g+=1)e.values[g]*=1-t;return ms(e)}function $i(e,t){if(e=Ul(e),t=E0(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let g=0;g<3;g+=1)e.values[g]+=(255-e.values[g])*t;else if(e.type.indexOf("color")!==-1)for(let g=0;g<3;g+=1)e.values[g]+=(1-e.values[g])*t;return ms(e)}const tF={};function gF(e){const t=As();return b(X0.Provider,{value:typeof t=="object"?t:tF,children:e.children})}function nF(e){const{children:t,theme:g}=e;return b(x9,{theme:g,children:b(gF,{children:t})})}const lF=["component","direction","spacing","divider","children","className"],oF=us(),IF=O9("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function rF(e){return VS({props:e,name:"MuiStack",defaultTheme:oF})}function CF(e,t){const g=B.exports.Children.toArray(e).filter(Boolean);return g.reduce((n,l,o)=>(n.push(l),o<g.length-1&&n.push(B.exports.cloneElement(t,{key:`separator-${o}`})),n),[])}const iF=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],aF=({ownerState:e,theme:t})=>{let g=X({display:"flex",flexDirection:"column"},yg({theme:t},Hl({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=x0(t),l=Object.keys(t.breakpoints.values).reduce((C,i)=>((typeof e.spacing=="object"&&e.spacing[i]!=null||typeof e.direction=="object"&&e.direction[i]!=null)&&(C[i]=!0),C),{}),o=Hl({values:e.direction,base:l}),I=Hl({values:e.spacing,base:l});typeof o=="object"&&Object.keys(o).forEach((C,i,a)=>{if(!o[C]){const s=i>0?o[a[i-1]]:"column";o[C]=s}}),g=ug(g,yg({theme:t},I,(C,i)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${iF(i?o[i]:e.direction)}`]:uI(n,C)}})))}return g=UN(t.breakpoints,g),g};function sF(e={}){const{createStyledComponent:t=IF,useThemeProps:g=rF,componentName:n="MuiStack"}=e,l=()=>Ye({root:["root"]},C=>Xe(n,C),{}),o=t(aF);return B.exports.forwardRef(function(C,i){const a=g(C),c=ds(a),{component:s="div",direction:m="column",spacing:A=0,divider:d,children:h,className:Z}=c,u=ce(c,lF),p={direction:m,spacing:A},G=l();return b(o,X({as:s,ownerState:p,ref:i,className:de(G.root,Z)},u,{children:d?CF(h,d):h}))})}const cF=sF(),z0=cF;function dF(e,t){return X({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const uF=["mode","contrastThreshold","tonalOffset"],wb={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Hr.white,default:Hr.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Yc={text:{primary:Hr.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Hr.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Nb(e,t,g,n){const l=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(g)?e[t]=e[g]:t==="light"?e.light=$i(e.main,l):t==="dark"&&(e.dark=_i(e.main,o)))}function AF(e="light"){return e==="dark"?{main:oo[200],light:oo[50],dark:oo[400]}:{main:oo[700],light:oo[400],dark:oo[800]}}function mF(e="light"){return e==="dark"?{main:lo[200],light:lo[50],dark:lo[400]}:{main:lo[500],light:lo[300],dark:lo[700]}}function pF(e="light"){return e==="dark"?{main:no[500],light:no[300],dark:no[700]}:{main:no[700],light:no[400],dark:no[800]}}function bF(e="light"){return e==="dark"?{main:Io[400],light:Io[300],dark:Io[700]}:{main:Io[700],light:Io[500],dark:Io[900]}}function ZF(e="light"){return e==="dark"?{main:ro[400],light:ro[300],dark:ro[700]}:{main:ro[800],light:ro[500],dark:ro[900]}}function hF(e="light"){return e==="dark"?{main:xI[400],light:xI[300],dark:xI[700]}:{main:"#ed6c02",light:xI[500],dark:xI[900]}}function GF(e){const{mode:t="light",contrastThreshold:g=3,tonalOffset:n=.2}=e,l=ce(e,uF),o=e.primary||AF(t),I=e.secondary||mF(t),r=e.error||pF(t),C=e.info||bF(t),i=e.success||ZF(t),a=e.warning||hF(t);function c(d){return eF(d,Yc.text.primary)>=g?Yc.text.primary:wb.text.primary}const s=({color:d,name:h,mainShade:Z=500,lightShade:u=300,darkShade:p=700})=>{if(d=X({},d),!d.main&&d[Z]&&(d.main=d[Z]),!d.hasOwnProperty("main"))throw new Error(cl(11,h?` (${h})`:"",Z));if(typeof d.main!="string")throw new Error(cl(12,h?` (${h})`:"",JSON.stringify(d.main)));return Nb(d,"light",u,n),Nb(d,"dark",p,n),d.contrastText||(d.contrastText=c(d.main)),d},m={dark:Yc,light:wb};return ug(X({common:X({},Hr),mode:t,primary:s({color:o,name:"primary"}),secondary:s({color:I,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:s({color:r,name:"error"}),warning:s({color:a,name:"warning"}),info:s({color:C,name:"info"}),success:s({color:i,name:"success"}),grey:Yw,contrastThreshold:g,getContrastText:c,augmentColor:s,tonalOffset:n},m[t]),l)}const fF=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function BF(e){return Math.round(e*1e5)/1e5}const Fb={textTransform:"uppercase"},Kb='"Roboto", "Helvetica", "Arial", sans-serif';function yF(e,t){const g=typeof t=="function"?t(e):t,{fontFamily:n=Kb,fontSize:l=14,fontWeightLight:o=300,fontWeightRegular:I=400,fontWeightMedium:r=500,fontWeightBold:C=700,htmlFontSize:i=16,allVariants:a,pxToRem:c}=g,s=ce(g,fF),m=l/14,A=c||(Z=>`${Z/i*m}rem`),d=(Z,u,p,G,f)=>X({fontFamily:n,fontWeight:Z,fontSize:A(u),lineHeight:p},n===Kb?{letterSpacing:`${BF(G/u)}em`}:{},f,a),h={h1:d(o,96,1.167,-1.5),h2:d(o,60,1.2,-.5),h3:d(I,48,1.167,0),h4:d(I,34,1.235,.25),h5:d(I,24,1.334,0),h6:d(r,20,1.6,.15),subtitle1:d(I,16,1.75,.15),subtitle2:d(r,14,1.57,.1),body1:d(I,16,1.5,.15),body2:d(I,14,1.43,.15),button:d(r,14,1.75,.4,Fb),caption:d(I,12,1.66,.4),overline:d(I,12,2.66,1,Fb)};return ug(X({htmlFontSize:i,pxToRem:A,fontFamily:n,fontSize:l,fontWeightLight:o,fontWeightRegular:I,fontWeightMedium:r,fontWeightBold:C},h),s,{clone:!1})}const SF=.2,WF=.14,VF=.12;function dt(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${SF})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${WF})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${VF})`].join(",")}const vF=["none",dt(0,2,1,-1,0,1,1,0,0,1,3,0),dt(0,3,1,-2,0,2,2,0,0,1,5,0),dt(0,3,3,-2,0,3,4,0,0,1,8,0),dt(0,2,4,-1,0,4,5,0,0,1,10,0),dt(0,3,5,-1,0,5,8,0,0,1,14,0),dt(0,3,5,-1,0,6,10,0,0,1,18,0),dt(0,4,5,-2,0,7,10,1,0,2,16,1),dt(0,5,5,-3,0,8,10,1,0,3,14,2),dt(0,5,6,-3,0,9,12,1,0,3,16,2),dt(0,6,6,-3,0,10,14,1,0,4,18,3),dt(0,6,7,-4,0,11,15,1,0,4,20,3),dt(0,7,8,-4,0,12,17,2,0,5,22,4),dt(0,7,8,-4,0,13,19,2,0,5,24,4),dt(0,7,9,-4,0,14,21,2,0,5,26,4),dt(0,8,9,-5,0,15,22,2,0,6,28,5),dt(0,8,10,-5,0,16,24,2,0,6,30,5),dt(0,8,11,-5,0,17,26,2,0,6,32,5),dt(0,9,11,-5,0,18,28,2,0,7,34,6),dt(0,9,12,-6,0,19,29,2,0,7,36,6),dt(0,10,13,-6,0,20,31,3,0,8,38,7),dt(0,10,13,-6,0,21,33,3,0,8,40,7),dt(0,10,14,-6,0,22,35,3,0,8,42,7),dt(0,11,14,-7,0,23,36,3,0,9,44,8),dt(0,11,15,-7,0,24,38,3,0,9,46,8)],RF=vF,XF=["duration","easing","delay"],kF={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},vS={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Eb(e){return`${Math.round(e)}ms`}function JF(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function YF(e){const t=X({},kF,e.easing),g=X({},vS,e.duration);return X({getAutoHeightDuration:JF,create:(l=["all"],o={})=>{const{duration:I=g.standard,easing:r=t.easeInOut,delay:C=0}=o;return ce(o,XF),(Array.isArray(l)?l:[l]).map(i=>`${i} ${typeof I=="string"?I:Eb(I)} ${r} ${typeof C=="string"?C:Eb(C)}`).join(",")}},e,{easing:t,duration:g})}const xF={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},HF=xF,wF=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function M0(e={},...t){const{mixins:g={},palette:n={},transitions:l={},typography:o={}}=e,I=ce(e,wF);if(e.vars)throw new Error(cl(18));const r=GF(n),C=us(e);let i=ug(C,{mixins:dF(C.breakpoints,g),palette:r,shadows:RF.slice(),typography:yF(r,o),transitions:YF(l),zIndex:X({},HF)});return i=ug(i,I),i=t.reduce((a,c)=>ug(a,c),i),i}const NF=M0(),ps=NF;function $l(){return As(ps)}function xe({props:e,name:t}){return VS({props:e,name:t,defaultTheme:ps})}const Yn=e=>ir(e)&&e!=="classes",FF=ir,KF=WS({defaultTheme:ps,rootShouldForwardProp:Yn}),Ce=KF,EF=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},zb=EF;function nI(e){return typeof e=="string"}function zF(e,t,g){return nI(e)?t:X({},t,{ownerState:X({},t.ownerState,g)})}function MF(e,t=[]){if(e===void 0)return{};const g={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{g[n]=e[n]}),g}function Qu(e,t){return typeof e=="function"?e(t):e}function Mb(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(g=>!(g.match(/^on[A-Z]/)&&typeof e[g]=="function")).forEach(g=>{t[g]=e[g]}),t}function TF(e){const{getSlotProps:t,additionalProps:g,externalSlotProps:n,externalForwardedProps:l,className:o}=e;if(!t){const m=de(l==null?void 0:l.className,n==null?void 0:n.className,o,g==null?void 0:g.className),A=X({},g==null?void 0:g.style,l==null?void 0:l.style,n==null?void 0:n.style),d=X({},g,l,n);return m.length>0&&(d.className=m),Object.keys(A).length>0&&(d.style=A),{props:d,internalRef:void 0}}const I=MF(X({},l,n)),r=Mb(n),C=Mb(l),i=t(I),a=de(i==null?void 0:i.className,g==null?void 0:g.className,o,l==null?void 0:l.className,n==null?void 0:n.className),c=X({},i==null?void 0:i.style,g==null?void 0:g.style,l==null?void 0:l.style,n==null?void 0:n.style),s=X({},i,g,C,r);return a.length>0&&(s.className=a),Object.keys(c).length>0&&(s.style=c),{props:s,internalRef:i.ref}}const LF=["elementType","externalSlotProps","ownerState"];function Tb(e){var t;const{elementType:g,externalSlotProps:n,ownerState:l}=e,o=ce(e,LF),I=Qu(n,l),{props:r,internalRef:C}=TF(X({},o,{externalSlotProps:I})),i=Ut(C,I==null?void 0:I.ref,(t=e.additionalProps)==null?void 0:t.ref);return zF(g,X({},r,{ref:i}),l)}const UF=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function DF(e){const t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function QF(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let g=t(`[name="${e.name}"]:checked`);return g||(g=t(`[name="${e.name}"]`)),g!==e}function PF(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||QF(e))}function jF(e){const t=[],g=[];return Array.from(e.querySelectorAll(UF)).forEach((n,l)=>{const o=DF(n);o===-1||!PF(n)||(o===0?t.push(n):g.push({documentOrder:l,tabIndex:o,node:n}))}),g.sort((n,l)=>n.tabIndex===l.tabIndex?n.documentOrder-l.documentOrder:n.tabIndex-l.tabIndex).map(n=>n.node).concat(t)}function OF(){return!0}function _F(e){const{children:t,disableAutoFocus:g=!1,disableEnforceFocus:n=!1,disableRestoreFocus:l=!1,getTabbable:o=jF,isEnabled:I=OF,open:r}=e,C=B.exports.useRef(),i=B.exports.useRef(null),a=B.exports.useRef(null),c=B.exports.useRef(null),s=B.exports.useRef(null),m=B.exports.useRef(!1),A=B.exports.useRef(null),d=Ut(t.ref,A),h=B.exports.useRef(null);B.exports.useEffect(()=>{!r||!A.current||(m.current=!g)},[g,r]),B.exports.useEffect(()=>{if(!r||!A.current)return;const p=Ag(A.current);return A.current.contains(p.activeElement)||(A.current.hasAttribute("tabIndex")||A.current.setAttribute("tabIndex",-1),m.current&&A.current.focus()),()=>{l||(c.current&&c.current.focus&&(C.current=!0,c.current.focus()),c.current=null)}},[r]),B.exports.useEffect(()=>{if(!r||!A.current)return;const p=Ag(A.current),G=W=>{const{current:v}=A;if(v!==null){if(!p.hasFocus()||n||!I()||C.current){C.current=!1;return}if(!v.contains(p.activeElement)){if(W&&s.current!==W.target||p.activeElement!==s.current)s.current=null;else if(s.current!==null)return;if(!m.current)return;let R=[];if((p.activeElement===i.current||p.activeElement===a.current)&&(R=o(A.current)),R.length>0){var w,y;const x=Boolean(((w=h.current)==null?void 0:w.shiftKey)&&((y=h.current)==null?void 0:y.key)==="Tab"),H=R[0],F=R[R.length-1];x?F.focus():H.focus()}else v.focus()}}},f=W=>{h.current=W,!(n||!I()||W.key!=="Tab")&&p.activeElement===A.current&&W.shiftKey&&(C.current=!0,a.current.focus())};p.addEventListener("focusin",G),p.addEventListener("keydown",f,!0);const S=setInterval(()=>{p.activeElement.tagName==="BODY"&&G()},50);return()=>{clearInterval(S),p.removeEventListener("focusin",G),p.removeEventListener("keydown",f,!0)}},[g,n,l,I,r,o]);const Z=p=>{c.current===null&&(c.current=p.relatedTarget),m.current=!0,s.current=p.target;const G=t.props.onFocus;G&&G(p)},u=p=>{c.current===null&&(c.current=p.relatedTarget),m.current=!0};return U(B.exports.Fragment,{children:[b("div",{tabIndex:r?0:-1,onFocus:u,ref:i,"data-testid":"sentinelStart"}),B.exports.cloneElement(t,{ref:d,onFocus:Z}),b("div",{tabIndex:r?0:-1,onFocus:u,ref:a,"data-testid":"sentinelEnd"})]})}function $F(e){return typeof e=="function"?e():e}const qF=B.exports.forwardRef(function(t,g){const{children:n,container:l,disablePortal:o=!1}=t,[I,r]=B.exports.useState(null),C=Ut(B.exports.isValidElement(n)?n.ref:null,g);return Ll(()=>{o||r($F(l)||document.body)},[l,o]),Ll(()=>{if(I&&!o)return Lu(g,I),()=>{Lu(g,null)}},[g,I,o]),o?B.exports.isValidElement(n)?B.exports.cloneElement(n,{ref:C}):n:b(B.exports.Fragment,{children:I&&Dr.exports.createPortal(n,I)})}),eK=qF;function tK(e){const t=Ag(e);return t.body===e?vn(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function ar(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Lb(e){return parseInt(vn(e).getComputedStyle(e).paddingRight,10)||0}function gK(e){const g=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return g||n}function Ub(e,t,g,n,l){const o=[t,g,...n];[].forEach.call(e.children,I=>{const r=o.indexOf(I)===-1,C=!gK(I);r&&C&&ar(I,l)})}function xc(e,t){let g=-1;return e.some((n,l)=>t(n)?(g=l,!0):!1),g}function nK(e,t){const g=[],n=e.container;if(!t.disableScrollLock){if(tK(n)){const I=gS(Ag(n));g.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${Lb(n)+I}px`;const r=Ag(n).querySelectorAll(".mui-fixed");[].forEach.call(r,C=>{g.push({value:C.style.paddingRight,property:"padding-right",el:C}),C.style.paddingRight=`${Lb(C)+I}px`})}let o;if(n.parentNode instanceof DocumentFragment)o=Ag(n).body;else{const I=n.parentElement,r=vn(n);o=(I==null?void 0:I.nodeName)==="HTML"&&r.getComputedStyle(I).overflowY==="scroll"?I:n}g.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{g.forEach(({value:o,el:I,property:r})=>{o?I.style.setProperty(r,o):I.style.removeProperty(r)})}}function lK(e){const t=[];return[].forEach.call(e.children,g=>{g.getAttribute("aria-hidden")==="true"&&t.push(g)}),t}class oK{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,g){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&ar(t.modalRef,!1);const l=lK(g);Ub(g,t.mount,t.modalRef,l,!0);const o=xc(this.containers,I=>I.container===g);return o!==-1?(this.containers[o].modals.push(t),n):(this.containers.push({modals:[t],container:g,restore:null,hiddenSiblings:l}),n)}mount(t,g){const n=xc(this.containers,o=>o.modals.indexOf(t)!==-1),l=this.containers[n];l.restore||(l.restore=nK(l,g))}remove(t,g=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const l=xc(this.containers,I=>I.modals.indexOf(t)!==-1),o=this.containers[l];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&ar(t.modalRef,g),Ub(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(l,1);else{const I=o.modals[o.modals.length-1];I.modalRef&&ar(I.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function IK(e){return Xe("MuiModal",e)}ke("MuiModal",["root","hidden"]);const rK=["children","classes","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],CK=e=>{const{open:t,exited:g,classes:n}=e;return Ye({root:["root",!t&&g&&"hidden"]},IK,n)};function iK(e){return typeof e=="function"?e():e}function aK(e){return e.children?e.children.props.hasOwnProperty("in"):!1}const sK=new oK,cK=B.exports.forwardRef(function(t,g){var n,l;const{children:o,classes:I,closeAfterTransition:r=!1,component:C,container:i,disableAutoFocus:a=!1,disableEnforceFocus:c=!1,disableEscapeKeyDown:s=!1,disablePortal:m=!1,disableRestoreFocus:A=!1,disableScrollLock:d=!1,hideBackdrop:h=!1,keepMounted:Z=!1,manager:u=sK,onBackdropClick:p,onClose:G,onKeyDown:f,open:S,onTransitionEnter:W,onTransitionExited:v,slotProps:w={},slots:y={}}=t,R=ce(t,rK),[x,H]=B.exports.useState(!0),F=B.exports.useRef({}),M=B.exports.useRef(null),j=B.exports.useRef(null),O=Ut(j,g),z=aK(t),D=(n=t["aria-hidden"])!=null?n:!0,T=()=>Ag(M.current),N=()=>(F.current.modalRef=j.current,F.current.mountNode=M.current,F.current),V=()=>{u.mount(N(),{disableScrollLock:d}),j.current.scrollTop=0},Y=hn(()=>{const Se=iK(i)||T().body;u.add(N(),Se),j.current&&V()}),J=B.exports.useCallback(()=>u.isTopModal(N()),[u]),P=hn(Se=>{M.current=Se,Se&&(S&&J()?V():ar(j.current,D))}),k=B.exports.useCallback(()=>{u.remove(N(),D)},[u,D]);B.exports.useEffect(()=>()=>{k()},[k]),B.exports.useEffect(()=>{S?Y():(!z||!r)&&k()},[S,k,z,r,Y]);const $=X({},t,{classes:I,closeAfterTransition:r,disableAutoFocus:a,disableEnforceFocus:c,disableEscapeKeyDown:s,disablePortal:m,disableRestoreFocus:A,disableScrollLock:d,exited:x,hideBackdrop:h,keepMounted:Z}),K=CK($),_=()=>{H(!1),W&&W()},re=()=>{H(!0),v&&v(),r&&k()},ne=Se=>{Se.target===Se.currentTarget&&(p&&p(Se),G&&G(Se,"backdropClick"))},ge=Se=>{f&&f(Se),!(Se.key!=="Escape"||!J())&&(s||(Se.stopPropagation(),G&&G(Se,"escapeKeyDown")))},ue={};o.props.tabIndex===void 0&&(ue.tabIndex="-1"),z&&(ue.onEnter=yb(_,o.props.onEnter),ue.onExited=yb(re,o.props.onExited));const ye=(l=C!=null?C:y.root)!=null?l:"div",he=Tb({elementType:ye,externalSlotProps:w.root,externalForwardedProps:R,additionalProps:{ref:O,role:"presentation",onKeyDown:ge},className:K.root,ownerState:$}),Ve=y.backdrop,Be=Tb({elementType:Ve,externalSlotProps:w.backdrop,additionalProps:{"aria-hidden":!0,onClick:ne,open:S},className:K.backdrop,ownerState:$});return!Z&&!S&&(!z||x)?null:b(eK,{ref:P,container:i,disablePortal:m,children:U(ye,X({},he,{children:[!h&&Ve?b(Ve,X({},Be)):null,b(_F,{disableEnforceFocus:c,disableAutoFocus:a,disableRestoreFocus:A,isEnabled:J,open:S,children:B.exports.cloneElement(o,ue)})]}))})}),dK=cK,uK=["onChange","maxRows","minRows","style","value"];function FC(e,t){return parseInt(e[t],10)||0}const AK={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Db(e){return e==null||Object.keys(e).length===0}const mK=B.exports.forwardRef(function(t,g){const{onChange:n,maxRows:l,minRows:o=1,style:I,value:r}=t,C=ce(t,uK),{current:i}=B.exports.useRef(r!=null),a=B.exports.useRef(null),c=Ut(g,a),s=B.exports.useRef(null),m=B.exports.useRef(0),[A,d]=B.exports.useState({}),h=B.exports.useCallback(()=>{const f=a.current,W=vn(f).getComputedStyle(f);if(W.width==="0px")return{};const v=s.current;v.style.width=W.width,v.value=f.value||t.placeholder||"x",v.value.slice(-1)===`
`&&(v.value+=" ");const w=W["box-sizing"],y=FC(W,"padding-bottom")+FC(W,"padding-top"),R=FC(W,"border-bottom-width")+FC(W,"border-top-width"),x=v.scrollHeight;v.value="x";const H=v.scrollHeight;let F=x;o&&(F=Math.max(Number(o)*H,F)),l&&(F=Math.min(Number(l)*H,F)),F=Math.max(F,H);const M=F+(w==="border-box"?y+R:0),j=Math.abs(F-x)<=1;return{outerHeightStyle:M,overflow:j}},[l,o,t.placeholder]),Z=(f,S)=>{const{outerHeightStyle:W,overflow:v}=S;return m.current<20&&(W>0&&Math.abs((f.outerHeightStyle||0)-W)>1||f.overflow!==v)?(m.current+=1,{overflow:v,outerHeightStyle:W}):f},u=B.exports.useCallback(()=>{const f=h();Db(f)||d(S=>Z(S,f))},[h]),p=()=>{const f=h();Db(f)||Dr.exports.flushSync(()=>{d(S=>Z(S,f))})};B.exports.useEffect(()=>{const f=Kr(()=>{m.current=0,a.current&&p()}),S=vn(a.current);S.addEventListener("resize",f);let W;return typeof ResizeObserver<"u"&&(W=new ResizeObserver(f),W.observe(a.current)),()=>{f.clear(),S.removeEventListener("resize",f),W&&W.disconnect()}}),Ll(()=>{u()}),B.exports.useEffect(()=>{m.current=0},[r]);const G=f=>{m.current=0,i||u(),n&&n(f)};return U(B.exports.Fragment,{children:[b("textarea",X({value:r,onChange:G,ref:c,rows:o,style:X({height:A.outerHeightStyle,overflow:A.overflow?"hidden":null},I)},C)),b("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:s,tabIndex:-1,style:X({},AK.shadow,I,{padding:0})})]})}),pK=mK;function bK(e){return Xe("MuiSvgIcon",e)}ke("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const ZK=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],hK=e=>{const{color:t,fontSize:g,classes:n}=e,l={root:["root",t!=="inherit"&&`color${oe(t)}`,`fontSize${oe(g)}`]};return Ye(l,bK,n)},GK=Ce("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.color!=="inherit"&&t[`color${oe(g.color)}`],t[`fontSize${oe(g.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var g,n,l,o,I,r,C,i,a,c,s,m,A,d,h,Z,u;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(g=e.transitions)==null||(n=g.create)==null?void 0:n.call(g,"fill",{duration:(l=e.transitions)==null||(o=l.duration)==null?void 0:o.shorter}),fontSize:{inherit:"inherit",small:((I=e.typography)==null||(r=I.pxToRem)==null?void 0:r.call(I,20))||"1.25rem",medium:((C=e.typography)==null||(i=C.pxToRem)==null?void 0:i.call(C,24))||"1.5rem",large:((a=e.typography)==null||(c=a.pxToRem)==null?void 0:c.call(a,35))||"2.1875rem"}[t.fontSize],color:(s=(m=(e.vars||e).palette)==null||(A=m[t.color])==null?void 0:A.main)!=null?s:{action:(d=(e.vars||e).palette)==null||(h=d.action)==null?void 0:h.active,disabled:(Z=(e.vars||e).palette)==null||(u=Z.action)==null?void 0:u.disabled,inherit:void 0}[t.color]}}),RS=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiSvgIcon"}),{children:l,className:o,color:I="inherit",component:r="svg",fontSize:C="medium",htmlColor:i,inheritViewBox:a=!1,titleAccess:c,viewBox:s="0 0 24 24"}=n,m=ce(n,ZK),A=X({},n,{color:I,component:r,fontSize:C,instanceFontSize:t.fontSize,inheritViewBox:a,viewBox:s}),d={};a||(d.viewBox=s);const h=hK(A);return U(GK,X({as:r,className:de(h.root,o),focusable:"false",color:i,"aria-hidden":c?void 0:!0,role:c?"img":void 0,ref:g},d,m,{ownerState:A,children:[l,c?b("title",{children:c}):null]}))});RS.muiName="SvgIcon";const Qb=RS;function xn(e,t){function g(n,l){return b(Qb,X({"data-testid":`${t}Icon`,ref:l},n,{children:e}))}return g.muiName=Qb.muiName,B.exports.memo(B.exports.forwardRef(g))}function Pu(e,t){return Pu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,l){return n.__proto__=l,n},Pu(e,t)}function XS(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Pu(e,t)}const Pb={disabled:!1},qi=Me.createContext(null);var fK=function(t){return t.scrollTop},PI="unmounted",Wl="exited",Vl="entering",Ao="entered",ju="exiting",Hn=function(e){XS(t,e);function t(n,l){var o;o=e.call(this,n,l)||this;var I=l,r=I&&!I.isMounting?n.enter:n.appear,C;return o.appearStatus=null,n.in?r?(C=Wl,o.appearStatus=Vl):C=Ao:n.unmountOnExit||n.mountOnEnter?C=PI:C=Wl,o.state={status:C},o.nextCallback=null,o}t.getDerivedStateFromProps=function(l,o){var I=l.in;return I&&o.status===PI?{status:Wl}:null};var g=t.prototype;return g.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},g.componentDidUpdate=function(l){var o=null;if(l!==this.props){var I=this.state.status;this.props.in?I!==Vl&&I!==Ao&&(o=Vl):(I===Vl||I===Ao)&&(o=ju)}this.updateStatus(!1,o)},g.componentWillUnmount=function(){this.cancelNextCallback()},g.getTimeouts=function(){var l=this.props.timeout,o,I,r;return o=I=r=l,l!=null&&typeof l!="number"&&(o=l.exit,I=l.enter,r=l.appear!==void 0?l.appear:I),{exit:o,enter:I,appear:r}},g.updateStatus=function(l,o){if(l===void 0&&(l=!1),o!==null)if(this.cancelNextCallback(),o===Vl){if(this.props.unmountOnExit||this.props.mountOnEnter){var I=this.props.nodeRef?this.props.nodeRef.current:UI.findDOMNode(this);I&&fK(I)}this.performEnter(l)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Wl&&this.setState({status:PI})},g.performEnter=function(l){var o=this,I=this.props.enter,r=this.context?this.context.isMounting:l,C=this.props.nodeRef?[r]:[UI.findDOMNode(this),r],i=C[0],a=C[1],c=this.getTimeouts(),s=r?c.appear:c.enter;if(!l&&!I||Pb.disabled){this.safeSetState({status:Ao},function(){o.props.onEntered(i)});return}this.props.onEnter(i,a),this.safeSetState({status:Vl},function(){o.props.onEntering(i,a),o.onTransitionEnd(s,function(){o.safeSetState({status:Ao},function(){o.props.onEntered(i,a)})})})},g.performExit=function(){var l=this,o=this.props.exit,I=this.getTimeouts(),r=this.props.nodeRef?void 0:UI.findDOMNode(this);if(!o||Pb.disabled){this.safeSetState({status:Wl},function(){l.props.onExited(r)});return}this.props.onExit(r),this.safeSetState({status:ju},function(){l.props.onExiting(r),l.onTransitionEnd(I.exit,function(){l.safeSetState({status:Wl},function(){l.props.onExited(r)})})})},g.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},g.safeSetState=function(l,o){o=this.setNextCallback(o),this.setState(l,o)},g.setNextCallback=function(l){var o=this,I=!0;return this.nextCallback=function(r){I&&(I=!1,o.nextCallback=null,l(r))},this.nextCallback.cancel=function(){I=!1},this.nextCallback},g.onTransitionEnd=function(l,o){this.setNextCallback(o);var I=this.props.nodeRef?this.props.nodeRef.current:UI.findDOMNode(this),r=l==null&&!this.props.addEndListener;if(!I||r){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var C=this.props.nodeRef?[this.nextCallback]:[I,this.nextCallback],i=C[0],a=C[1];this.props.addEndListener(i,a)}l!=null&&setTimeout(this.nextCallback,l)},g.render=function(){var l=this.state.status;if(l===PI)return null;var o=this.props,I=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var r=ce(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return b(qi.Provider,{value:null,children:typeof I=="function"?I(l,r):Me.cloneElement(Me.Children.only(I),r)})},t}(Me.Component);Hn.contextType=qi;Hn.propTypes={};function io(){}Hn.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:io,onEntering:io,onEntered:io,onExit:io,onExiting:io,onExited:io};Hn.UNMOUNTED=PI;Hn.EXITED=Wl;Hn.ENTERING=Vl;Hn.ENTERED=Ao;Hn.EXITING=ju;const T0=Hn;function BK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L0(e,t){var g=function(o){return t&&B.exports.isValidElement(o)?t(o):o},n=Object.create(null);return e&&B.exports.Children.map(e,function(l){return l}).forEach(function(l){n[l.key]=g(l)}),n}function yK(e,t){e=e||{},t=t||{};function g(a){return a in t?t[a]:e[a]}var n=Object.create(null),l=[];for(var o in e)o in t?l.length&&(n[o]=l,l=[]):l.push(o);var I,r={};for(var C in t){if(n[C])for(I=0;I<n[C].length;I++){var i=n[C][I];r[n[C][I]]=g(i)}r[C]=g(C)}for(I=0;I<l.length;I++)r[l[I]]=g(l[I]);return r}function Jl(e,t,g){return g[t]!=null?g[t]:e.props[t]}function SK(e,t){return L0(e.children,function(g){return B.exports.cloneElement(g,{onExited:t.bind(null,g),in:!0,appear:Jl(g,"appear",e),enter:Jl(g,"enter",e),exit:Jl(g,"exit",e)})})}function WK(e,t,g){var n=L0(e.children),l=yK(t,n);return Object.keys(l).forEach(function(o){var I=l[o];if(!!B.exports.isValidElement(I)){var r=o in t,C=o in n,i=t[o],a=B.exports.isValidElement(i)&&!i.props.in;C&&(!r||a)?l[o]=B.exports.cloneElement(I,{onExited:g.bind(null,I),in:!0,exit:Jl(I,"exit",e),enter:Jl(I,"enter",e)}):!C&&r&&!a?l[o]=B.exports.cloneElement(I,{in:!1}):C&&r&&B.exports.isValidElement(i)&&(l[o]=B.exports.cloneElement(I,{onExited:g.bind(null,I),in:i.props.in,exit:Jl(I,"exit",e),enter:Jl(I,"enter",e)}))}}),l}var VK=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},vK={component:"div",childFactory:function(t){return t}},U0=function(e){XS(t,e);function t(n,l){var o;o=e.call(this,n,l)||this;var I=o.handleExited.bind(BK(o));return o.state={contextValue:{isMounting:!0},handleExited:I,firstRender:!0},o}var g=t.prototype;return g.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},g.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(l,o){var I=o.children,r=o.handleExited,C=o.firstRender;return{children:C?SK(l,r):WK(l,I,r),firstRender:!1}},g.handleExited=function(l,o){var I=L0(this.props.children);l.key in I||(l.props.onExited&&l.props.onExited(o),this.mounted&&this.setState(function(r){var C=X({},r.children);return delete C[l.key],{children:C}}))},g.render=function(){var l=this.props,o=l.component,I=l.childFactory,r=ce(l,["component","childFactory"]),C=this.state.contextValue,i=VK(this.state.children).map(I);return delete r.appear,delete r.enter,delete r.exit,o===null?b(qi.Provider,{value:C,children:i}):b(qi.Provider,{value:C,children:b(o,{...r,children:i})})},t}(Me.Component);U0.propTypes={};U0.defaultProps=vK;const RK=U0,kS=e=>e.scrollTop;function lI(e,t){var g,n;const{timeout:l,easing:o,style:I={}}=e;return{duration:(g=I.transitionDuration)!=null?g:typeof l=="number"?l:l[t.mode]||0,easing:(n=I.transitionTimingFunction)!=null?n:typeof o=="object"?o[t.mode]:o,delay:I.transitionDelay}}function XK(e){return Xe("MuiCollapse",e)}ke("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const kK=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],JK=e=>{const{orientation:t,classes:g}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return Ye(n,XK,g)},YK=Ce("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[g.orientation],g.state==="entered"&&t.entered,g.state==="exited"&&!g.in&&g.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>X({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&X({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),xK=Ce("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>X({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),HK=Ce("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>X({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),JS=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiCollapse"}),{addEndListener:l,children:o,className:I,collapsedSize:r="0px",component:C,easing:i,in:a,onEnter:c,onEntered:s,onEntering:m,onExit:A,onExited:d,onExiting:h,orientation:Z="vertical",style:u,timeout:p=vS.standard,TransitionComponent:G=T0}=n,f=ce(n,kK),S=X({},n,{orientation:Z,collapsedSize:r}),W=JK(S),v=$l(),w=B.exports.useRef(),y=B.exports.useRef(null),R=B.exports.useRef(),x=typeof r=="number"?`${r}px`:r,H=Z==="horizontal",F=H?"width":"height";B.exports.useEffect(()=>()=>{clearTimeout(w.current)},[]);const M=B.exports.useRef(null),j=Ut(g,M),O=k=>$=>{if(k){const K=M.current;$===void 0?k(K):k(K,$)}},z=()=>y.current?y.current[H?"clientWidth":"clientHeight"]:0,D=O((k,$)=>{y.current&&H&&(y.current.style.position="absolute"),k.style[F]=x,c&&c(k,$)}),T=O((k,$)=>{const K=z();y.current&&H&&(y.current.style.position="");const{duration:_,easing:re}=lI({style:u,timeout:p,easing:i},{mode:"enter"});if(p==="auto"){const ne=v.transitions.getAutoHeightDuration(K);k.style.transitionDuration=`${ne}ms`,R.current=ne}else k.style.transitionDuration=typeof _=="string"?_:`${_}ms`;k.style[F]=`${K}px`,k.style.transitionTimingFunction=re,m&&m(k,$)}),N=O((k,$)=>{k.style[F]="auto",s&&s(k,$)}),V=O(k=>{k.style[F]=`${z()}px`,A&&A(k)}),Y=O(d),J=O(k=>{const $=z(),{duration:K,easing:_}=lI({style:u,timeout:p,easing:i},{mode:"exit"});if(p==="auto"){const re=v.transitions.getAutoHeightDuration($);k.style.transitionDuration=`${re}ms`,R.current=re}else k.style.transitionDuration=typeof K=="string"?K:`${K}ms`;k.style[F]=x,k.style.transitionTimingFunction=_,h&&h(k)});return b(G,X({in:a,onEnter:D,onEntered:N,onEntering:T,onExit:V,onExited:Y,onExiting:J,addEndListener:k=>{p==="auto"&&(w.current=setTimeout(k,R.current||0)),l&&l(M.current,k)},nodeRef:M,timeout:p==="auto"?null:p},f,{children:(k,$)=>b(YK,X({as:C,className:de(W.root,I,{entered:W.entered,exited:!a&&x==="0px"&&W.hidden}[k]),style:X({[H?"minWidth":"minHeight"]:x},u),ownerState:X({},S,{state:k}),ref:j},$,{children:b(xK,{ownerState:X({},S,{state:k}),className:W.wrapper,ref:y,children:b(HK,{ownerState:X({},S,{state:k}),className:W.wrapperInner,children:o})})}))}))});JS.muiSupportAuto=!0;const wK=JS;function NK(e){return Xe("MuiPaper",e)}ke("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const FK=["className","component","elevation","square","variant"],KK=e=>{const{square:t,elevation:g,variant:n,classes:l}=e,o={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${g}`]};return Ye(o,NK,l)},EK=Ce("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[g.variant],!g.square&&t.rounded,g.variant==="elevation"&&t[`elevation${g.elevation}`]]}})(({theme:e,ownerState:t})=>{var g;return X({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&X({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Oe("#fff",zb(t.elevation))}, ${Oe("#fff",zb(t.elevation))})`},e.vars&&{backgroundImage:(g=e.vars.overlays)==null?void 0:g[t.elevation]}))}),zK=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiPaper"}),{className:l,component:o="div",elevation:I=1,square:r=!1,variant:C="elevation"}=n,i=ce(n,FK),a=X({},n,{component:o,elevation:I,square:r,variant:C}),c=KK(a);return b(EK,X({as:o,ownerState:a,className:de(c.root,l),ref:g},i))}),bs=zK,MK=B.exports.createContext({}),YS=MK;function TK(e){return Xe("MuiAccordion",e)}const LK=ke("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),KC=LK,UK=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],DK=e=>{const{classes:t,square:g,expanded:n,disabled:l,disableGutters:o}=e;return Ye({root:["root",!g&&"rounded",n&&"expanded",l&&"disabled",!o&&"gutters"],region:["region"]},TK,t)},QK=Ce(bs,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[{[`& .${KC.region}`]:t.region},t.root,!g.square&&t.rounded,!g.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&:before":{display:"none"}},[`&.${KC.expanded}`]:{"&:before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&:before":{display:"none"}}},[`&.${KC.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e,ownerState:t})=>X({},!t.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!t.disableGutters&&{[`&.${KC.expanded}`]:{margin:"16px 0"}})),PK=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiAccordion"}),{children:l,className:o,defaultExpanded:I=!1,disabled:r=!1,disableGutters:C=!1,expanded:i,onChange:a,square:c=!1,TransitionComponent:s=wK,TransitionProps:m}=n,A=ce(n,UK),[d,h]=Uu({controlled:i,default:I,name:"Accordion",state:"expanded"}),Z=B.exports.useCallback(W=>{h(!d),a&&a(W,!d)},[d,a,h]),[u,...p]=B.exports.Children.toArray(l),G=B.exports.useMemo(()=>({expanded:d,disabled:r,disableGutters:C,toggle:Z}),[d,r,C,Z]),f=X({},n,{square:c,disabled:r,disableGutters:C,expanded:d}),S=DK(f);return U(QK,X({className:de(S.root,o),ref:g,ownerState:f,square:c},A,{children:[b(YS.Provider,{value:G,children:u}),b(s,X({in:d,timeout:"auto"},m,{children:b("div",{"aria-labelledby":u.props.id,id:u.props["aria-controls"],role:"region",className:S.region,children:p})}))]}))}),jK=PK;function OK(e){return Xe("MuiAccordionDetails",e)}ke("MuiAccordionDetails",["root"]);const _K=["className"],$K=e=>{const{classes:t}=e;return Ye({root:["root"]},OK,t)},qK=Ce("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),e3=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiAccordionDetails"}),{className:l}=n,o=ce(n,_K),I=n,r=$K(I);return b(qK,X({className:de(r.root,l),ref:g,ownerState:I},o))}),t3=e3;function g3(e){const{className:t,classes:g,pulsate:n=!1,rippleX:l,rippleY:o,rippleSize:I,in:r,onExited:C,timeout:i}=e,[a,c]=B.exports.useState(!1),s=de(t,g.ripple,g.rippleVisible,n&&g.ripplePulsate),m={width:I,height:I,top:-(I/2)+o,left:-(I/2)+l},A=de(g.child,a&&g.childLeaving,n&&g.childPulsate);return!r&&!a&&c(!0),B.exports.useEffect(()=>{if(!r&&C!=null){const d=setTimeout(C,i);return()=>{clearTimeout(d)}}},[C,r,i]),b("span",{className:s,style:m,children:b("span",{className:A})})}const n3=ke("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),kg=n3,l3=["center","classes","className"];let Zs=e=>e,jb,Ob,_b,$b;const Ou=550,o3=80,I3=rC(jb||(jb=Zs`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),r3=rC(Ob||(Ob=Zs`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),C3=rC(_b||(_b=Zs`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),i3=Ce("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),a3=Ce(g3,{name:"MuiTouchRipple",slot:"Ripple"})($b||($b=Zs`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),kg.rippleVisible,I3,Ou,({theme:e})=>e.transitions.easing.easeInOut,kg.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,kg.child,kg.childLeaving,r3,Ou,({theme:e})=>e.transitions.easing.easeInOut,kg.childPulsate,C3,({theme:e})=>e.transitions.easing.easeInOut),s3=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTouchRipple"}),{center:l=!1,classes:o={},className:I}=n,r=ce(n,l3),[C,i]=B.exports.useState([]),a=B.exports.useRef(0),c=B.exports.useRef(null);B.exports.useEffect(()=>{c.current&&(c.current(),c.current=null)},[C]);const s=B.exports.useRef(!1),m=B.exports.useRef(null),A=B.exports.useRef(null),d=B.exports.useRef(null);B.exports.useEffect(()=>()=>{clearTimeout(m.current)},[]);const h=B.exports.useCallback(G=>{const{pulsate:f,rippleX:S,rippleY:W,rippleSize:v,cb:w}=G;i(y=>[...y,b(a3,{classes:{ripple:de(o.ripple,kg.ripple),rippleVisible:de(o.rippleVisible,kg.rippleVisible),ripplePulsate:de(o.ripplePulsate,kg.ripplePulsate),child:de(o.child,kg.child),childLeaving:de(o.childLeaving,kg.childLeaving),childPulsate:de(o.childPulsate,kg.childPulsate)},timeout:Ou,pulsate:f,rippleX:S,rippleY:W,rippleSize:v},a.current)]),a.current+=1,c.current=w},[o]),Z=B.exports.useCallback((G={},f={},S=()=>{})=>{const{pulsate:W=!1,center:v=l||f.pulsate,fakeElement:w=!1}=f;if((G==null?void 0:G.type)==="mousedown"&&s.current){s.current=!1;return}(G==null?void 0:G.type)==="touchstart"&&(s.current=!0);const y=w?null:d.current,R=y?y.getBoundingClientRect():{width:0,height:0,left:0,top:0};let x,H,F;if(v||G===void 0||G.clientX===0&&G.clientY===0||!G.clientX&&!G.touches)x=Math.round(R.width/2),H=Math.round(R.height/2);else{const{clientX:M,clientY:j}=G.touches&&G.touches.length>0?G.touches[0]:G;x=Math.round(M-R.left),H=Math.round(j-R.top)}if(v)F=Math.sqrt((2*R.width**2+R.height**2)/3),F%2===0&&(F+=1);else{const M=Math.max(Math.abs((y?y.clientWidth:0)-x),x)*2+2,j=Math.max(Math.abs((y?y.clientHeight:0)-H),H)*2+2;F=Math.sqrt(M**2+j**2)}G!=null&&G.touches?A.current===null&&(A.current=()=>{h({pulsate:W,rippleX:x,rippleY:H,rippleSize:F,cb:S})},m.current=setTimeout(()=>{A.current&&(A.current(),A.current=null)},o3)):h({pulsate:W,rippleX:x,rippleY:H,rippleSize:F,cb:S})},[l,h]),u=B.exports.useCallback(()=>{Z({},{pulsate:!0})},[Z]),p=B.exports.useCallback((G,f)=>{if(clearTimeout(m.current),(G==null?void 0:G.type)==="touchend"&&A.current){A.current(),A.current=null,m.current=setTimeout(()=>{p(G,f)});return}A.current=null,i(S=>S.length>0?S.slice(1):S),c.current=f},[]);return B.exports.useImperativeHandle(g,()=>({pulsate:u,start:Z,stop:p}),[u,Z,p]),b(i3,X({className:de(kg.root,o.root,I),ref:d},r,{children:b(RK,{component:null,exit:!0,children:C})}))}),c3=s3;function d3(e){return Xe("MuiButtonBase",e)}const u3=ke("MuiButtonBase",["root","disabled","focusVisible"]),A3=u3,m3=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],p3=e=>{const{disabled:t,focusVisible:g,focusVisibleClassName:n,classes:l}=e,I=Ye({root:["root",t&&"disabled",g&&"focusVisible"]},d3,l);return g&&n&&(I.root+=` ${n}`),I},b3=Ce("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${A3.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Z3=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiButtonBase"}),{action:l,centerRipple:o=!1,children:I,className:r,component:C="button",disabled:i=!1,disableRipple:a=!1,disableTouchRipple:c=!1,focusRipple:s=!1,LinkComponent:m="a",onBlur:A,onClick:d,onContextMenu:h,onDragLeave:Z,onFocus:u,onFocusVisible:p,onKeyDown:G,onKeyUp:f,onMouseDown:S,onMouseLeave:W,onMouseUp:v,onTouchEnd:w,onTouchMove:y,onTouchStart:R,tabIndex:x=0,TouchRippleProps:H,touchRippleRef:F,type:M}=n,j=ce(n,m3),O=B.exports.useRef(null),z=B.exports.useRef(null),D=Ut(z,F),{isFocusVisibleRef:T,onFocus:N,onBlur:V,ref:Y}=zN(),[J,P]=B.exports.useState(!1);i&&J&&P(!1),B.exports.useImperativeHandle(l,()=>({focusVisible:()=>{P(!0),O.current.focus()}}),[]);const[k,$]=B.exports.useState(!1);B.exports.useEffect(()=>{$(!0)},[]);const K=k&&!a&&!i;B.exports.useEffect(()=>{J&&s&&!a&&k&&z.current.pulsate()},[a,s,J,k]);function _(ee,Ge,fe=c){return hn(De=>(Ge&&Ge(De),!fe&&z.current&&z.current[ee](De),!0))}const re=_("start",S),ne=_("stop",h),ge=_("stop",Z),ue=_("stop",v),ye=_("stop",ee=>{J&&ee.preventDefault(),W&&W(ee)}),he=_("start",R),Ve=_("stop",w),Be=_("stop",y),Se=_("stop",ee=>{V(ee),T.current===!1&&P(!1),A&&A(ee)},!1),yt=hn(ee=>{O.current||(O.current=ee.currentTarget),N(ee),T.current===!0&&(P(!0),p&&p(ee)),u&&u(ee)}),He=()=>{const ee=O.current;return C&&C!=="button"&&!(ee.tagName==="A"&&ee.href)},Je=B.exports.useRef(!1),_e=hn(ee=>{s&&!Je.current&&J&&z.current&&ee.key===" "&&(Je.current=!0,z.current.stop(ee,()=>{z.current.start(ee)})),ee.target===ee.currentTarget&&He()&&ee.key===" "&&ee.preventDefault(),G&&G(ee),ee.target===ee.currentTarget&&He()&&ee.key==="Enter"&&!i&&(ee.preventDefault(),d&&d(ee))}),Le=hn(ee=>{s&&ee.key===" "&&z.current&&J&&!ee.defaultPrevented&&(Je.current=!1,z.current.stop(ee,()=>{z.current.pulsate(ee)})),f&&f(ee),d&&ee.target===ee.currentTarget&&He()&&ee.key===" "&&!ee.defaultPrevented&&d(ee)});let Ae=C;Ae==="button"&&(j.href||j.to)&&(Ae=m);const we={};Ae==="button"?(we.type=M===void 0?"button":M,we.disabled=i):(!j.href&&!j.to&&(we.role="button"),i&&(we["aria-disabled"]=i));const Ct=Ut(g,Y,O),it=X({},n,{centerRipple:o,component:C,disabled:i,disableRipple:a,disableTouchRipple:c,focusRipple:s,tabIndex:x,focusVisible:J}),Q=p3(it);return U(b3,X({as:Ae,className:de(Q.root,r),ownerState:it,onBlur:Se,onClick:d,onContextMenu:ne,onFocus:yt,onKeyDown:_e,onKeyUp:Le,onMouseDown:re,onMouseLeave:ye,onMouseUp:ue,onDragLeave:ge,onTouchEnd:Ve,onTouchMove:Be,onTouchStart:he,ref:Ct,tabIndex:i?-1:x,type:M},we,j,{children:[I,K?b(c3,X({ref:D,center:o},H)):null]}))}),Rn=Z3;function h3(e){return Xe("MuiAccordionSummary",e)}const G3=ke("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Xo=G3,f3=["children","className","expandIcon","focusVisibleClassName","onClick"],B3=e=>{const{classes:t,expanded:g,disabled:n,disableGutters:l}=e;return Ye({root:["root",g&&"expanded",n&&"disabled",!l&&"gutters"],focusVisible:["focusVisible"],content:["content",g&&"expanded",!l&&"contentGutters"],expandIconWrapper:["expandIconWrapper",g&&"expanded"]},h3,t)},y3=Ce(Rn,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{const g={duration:e.transitions.duration.shortest};return X({display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],g),[`&.${Xo.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Xo.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${Xo.disabled})`]:{cursor:"pointer"}},!t.disableGutters&&{[`&.${Xo.expanded}`]:{minHeight:64}})}),S3=Ce("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>X({display:"flex",flexGrow:1,margin:"12px 0"},!t.disableGutters&&{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${Xo.expanded}`]:{margin:"20px 0"}})),W3=Ce("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${Xo.expanded}`]:{transform:"rotate(180deg)"}})),V3=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiAccordionSummary"}),{children:l,className:o,expandIcon:I,focusVisibleClassName:r,onClick:C}=n,i=ce(n,f3),{disabled:a=!1,disableGutters:c,expanded:s,toggle:m}=B.exports.useContext(YS),A=Z=>{m&&m(Z),C&&C(Z)},d=X({},n,{expanded:s,disabled:a,disableGutters:c}),h=B3(d);return U(y3,X({focusRipple:!1,disableRipple:!0,disabled:a,component:"div","aria-expanded":s,className:de(h.root,o),focusVisibleClassName:de(h.focusVisible,r),onClick:A,ref:g,ownerState:d},i,{children:[b(S3,{className:h.content,ownerState:d,children:l}),I&&b(W3,{className:h.expandIconWrapper,ownerState:d,children:I})]}))}),v3=V3;function R3(e){return Xe("MuiAlert",e)}const X3=ke("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),qb=X3;function k3(e){return Xe("MuiIconButton",e)}const J3=ke("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Y3=J3,x3=["edge","children","className","color","disabled","disableFocusRipple","size"],H3=e=>{const{classes:t,disabled:g,color:n,edge:l,size:o}=e,I={root:["root",g&&"disabled",n!=="default"&&`color${oe(n)}`,l&&`edge${oe(l)}`,`size${oe(o)}`]};return Ye(I,k3,t)},w3=Ce(Rn,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.color!=="default"&&t[`color${oe(g.color)}`],g.edge&&t[`edge${oe(g.edge)}`],t[`size${oe(g.size)}`]]}})(({theme:e,ownerState:t})=>X({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Oe(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var g;const n=(g=(e.vars||e).palette)==null?void 0:g[t.color];return X({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&X({color:n==null?void 0:n.main},!t.disableRipple&&{"&:hover":X({},n&&{backgroundColor:e.vars?`rgba(${n.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Oe(n.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${Y3.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),N3=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiIconButton"}),{edge:l=!1,children:o,className:I,color:r="default",disabled:C=!1,disableFocusRipple:i=!1,size:a="medium"}=n,c=ce(n,x3),s=X({},n,{edge:l,color:r,disabled:C,disableFocusRipple:i,size:a}),m=H3(s);return b(w3,X({className:de(m.root,I),centerRipple:!0,focusRipple:!i,disabled:C,ref:g,ownerState:s},c,{children:o}))}),F3=N3,K3=xn(b("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),E3=xn(b("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),z3=xn(b("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),M3=xn(b("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),T3=xn(b("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),L3=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],U3=e=>{const{variant:t,color:g,severity:n,classes:l}=e,o={root:["root",`${t}${oe(g||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return Ye(o,R3,l)},D3=Ce(bs,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[g.variant],t[`${g.variant}${oe(g.color||g.severity)}`]]}})(({theme:e,ownerState:t})=>{const g=e.palette.mode==="light"?_i:$i,n=e.palette.mode==="light"?$i:_i,l=t.color||t.severity;return X({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},l&&t.variant==="standard"&&{color:e.vars?e.vars.palette.Alert[`${l}Color`]:g(e.palette[l].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${l}StandardBg`]:n(e.palette[l].light,.9),[`& .${qb.icon}`]:e.vars?{color:e.vars.palette.Alert[`${l}IconColor`]}:{color:e.palette.mode==="dark"?e.palette[l].main:e.palette[l].light}},l&&t.variant==="outlined"&&{color:e.vars?e.vars.palette.Alert[`${l}Color`]:g(e.palette[l].light,.6),border:`1px solid ${(e.vars||e).palette[l].light}`,[`& .${qb.icon}`]:e.vars?{color:e.vars.palette.Alert[`${l}IconColor`]}:{color:e.palette.mode==="dark"?e.palette[l].main:e.palette[l].light}},l&&t.variant==="filled"&&X({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${l}FilledColor`],backgroundColor:e.vars.palette.Alert[`${l}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[l].dark:e.palette[l].main,color:e.palette.getContrastText(e.palette.mode==="dark"?e.palette[l].dark:e.palette[l].main)}))}),Q3=Ce("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),P3=Ce("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),eZ=Ce("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),tZ={success:b(K3,{fontSize:"inherit"}),warning:b(E3,{fontSize:"inherit"}),error:b(z3,{fontSize:"inherit"}),info:b(M3,{fontSize:"inherit"})},j3=B.exports.forwardRef(function(t,g){var n,l,o,I,r,C;const i=xe({props:t,name:"MuiAlert"}),{action:a,children:c,className:s,closeText:m="Close",color:A,components:d={},componentsProps:h={},icon:Z,iconMapping:u=tZ,onClose:p,role:G="alert",severity:f="success",slotProps:S={},slots:W={},variant:v="standard"}=i,w=ce(i,L3),y=X({},i,{color:A,severity:f,variant:v}),R=U3(y),x=(n=(l=W.closeButton)!=null?l:d.CloseButton)!=null?n:F3,H=(o=(I=W.closeIcon)!=null?I:d.CloseIcon)!=null?o:T3,F=(r=S.closeButton)!=null?r:h.closeButton,M=(C=S.closeIcon)!=null?C:h.closeIcon;return U(D3,X({role:G,elevation:0,ownerState:y,className:de(R.root,s),ref:g},w,{children:[Z!==!1?b(Q3,{ownerState:y,className:R.icon,children:Z||u[f]||tZ[f]}):null,b(P3,{ownerState:y,className:R.message,children:c}),a!=null?b(eZ,{ownerState:y,className:R.action,children:a}):null,a==null&&p?b(eZ,{ownerState:y,className:R.action,children:b(x,X({size:"small","aria-label":m,title:m,color:"inherit",onClick:p},F,{children:b(H,X({fontSize:"small"},M))}))}):null]}))}),_u=j3;function O3(e){return Xe("MuiTypography",e)}ke("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _3=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],$3=e=>{const{align:t,gutterBottom:g,noWrap:n,paragraph:l,variant:o,classes:I}=e,r={root:["root",o,e.align!=="inherit"&&`align${oe(t)}`,g&&"gutterBottom",n&&"noWrap",l&&"paragraph"]};return Ye(r,O3,I)},q3=Ce("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.variant&&t[g.variant],g.align!=="inherit"&&t[`align${oe(g.align)}`],g.noWrap&&t.noWrap,g.gutterBottom&&t.gutterBottom,g.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>X({margin:0},t.variant&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),gZ={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},eE={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},tE=e=>eE[e]||e,gE=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTypography"}),l=tE(n.color),o=ds(X({},n,{color:l})),{align:I="inherit",className:r,component:C,gutterBottom:i=!1,noWrap:a=!1,paragraph:c=!1,variant:s="body1",variantMapping:m=gZ}=o,A=ce(o,_3),d=X({},o,{align:I,color:l,className:r,component:C,gutterBottom:i,noWrap:a,paragraph:c,variant:s,variantMapping:m}),h=C||(c?"p":m[s]||gZ[s])||"span",Z=$3(d);return b(q3,X({as:h,ref:g,ownerState:d,className:de(Z.root,r)},A))}),Xn=gE;function nE(e){return Xe("MuiAlertTitle",e)}ke("MuiAlertTitle",["root"]);const lE=["className"],oE=e=>{const{classes:t}=e;return Ye({root:["root"]},nE,t)},IE=Ce(Xn,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,marginTop:-2})),rE=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiAlertTitle"}),{className:l}=n,o=ce(n,lE),I=n,r=oE(I);return b(IE,X({gutterBottom:!0,component:"div",ownerState:I,ref:g,className:de(r.root,l)},o))}),CE=rE,iE=xn(b("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function aE(e){return Xe("MuiChip",e)}const sE=ke("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),je=sE,cE=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"],dE=e=>{const{classes:t,disabled:g,size:n,color:l,iconColor:o,onDelete:I,clickable:r,variant:C}=e,i={root:["root",C,g&&"disabled",`size${oe(n)}`,`color${oe(l)}`,r&&"clickable",r&&`clickableColor${oe(l)}`,I&&"deletable",I&&`deletableColor${oe(l)}`,`${C}${oe(l)}`],label:["label",`label${oe(n)}`],avatar:["avatar",`avatar${oe(n)}`,`avatarColor${oe(l)}`],icon:["icon",`icon${oe(n)}`,`iconColor${oe(o)}`],deleteIcon:["deleteIcon",`deleteIcon${oe(n)}`,`deleteIconColor${oe(l)}`,`deleteIcon${oe(C)}Color${oe(l)}`]};return Ye(i,aE,t)},uE=Ce("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e,{color:n,iconColor:l,clickable:o,onDelete:I,size:r,variant:C}=g;return[{[`& .${je.avatar}`]:t.avatar},{[`& .${je.avatar}`]:t[`avatar${oe(r)}`]},{[`& .${je.avatar}`]:t[`avatarColor${oe(n)}`]},{[`& .${je.icon}`]:t.icon},{[`& .${je.icon}`]:t[`icon${oe(r)}`]},{[`& .${je.icon}`]:t[`iconColor${oe(l)}`]},{[`& .${je.deleteIcon}`]:t.deleteIcon},{[`& .${je.deleteIcon}`]:t[`deleteIcon${oe(r)}`]},{[`& .${je.deleteIcon}`]:t[`deleteIconColor${oe(n)}`]},{[`& .${je.deleteIcon}`]:t[`deleteIcon${oe(C)}Color${oe(n)}`]},t.root,t[`size${oe(r)}`],t[`color${oe(n)}`],o&&t.clickable,o&&n!=="default"&&t[`clickableColor${oe(n)})`],I&&t.deletable,I&&n!=="default"&&t[`deletableColor${oe(n)}`],t[C],t[`${C}${oe(n)}`]]}})(({theme:e,ownerState:t})=>{const g=Oe(e.palette.text.primary,.26),n=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return X({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${je.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${je.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${je.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${je.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${je.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${je.icon}`]:X({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&X({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},t.color!=="default"&&{color:"inherit"})),[`& .${je.deleteIcon}`]:X({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:g,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Oe(g,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:Oe(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${je.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity+e.vars.palette.action.focusOpacity}))`:Oe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${je.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>X({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity+e.vars.palette.action.hoverOpacity}))`:Oe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${je.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity+e.vars.palette.action.focusOpacity}))`:Oe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${je.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>X({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${je.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${je.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${je.avatar}`]:{marginLeft:4},[`& .${je.avatarSmall}`]:{marginLeft:2},[`& .${je.icon}`]:{marginLeft:4},[`& .${je.iconSmall}`]:{marginLeft:2},[`& .${je.deleteIcon}`]:{marginRight:5},[`& .${je.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Oe(e.palette[t.color].main,.7)}`,[`&.${je.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Oe(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${je.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Oe(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${je.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Oe(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),AE=Ce("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:g}=e,{size:n}=g;return[t.label,t[`label${oe(n)}`]]}})(({ownerState:e})=>X({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.size==="small"&&{paddingLeft:8,paddingRight:8}));function nZ(e){return e.key==="Backspace"||e.key==="Delete"}const mE=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiChip"}),{avatar:l,className:o,clickable:I,color:r="default",component:C,deleteIcon:i,disabled:a=!1,icon:c,label:s,onClick:m,onDelete:A,onKeyDown:d,onKeyUp:h,size:Z="medium",variant:u="filled"}=n,p=ce(n,cE),G=B.exports.useRef(null),f=Ut(G,g),S=O=>{O.stopPropagation(),A&&A(O)},W=O=>{O.currentTarget===O.target&&nZ(O)&&O.preventDefault(),d&&d(O)},v=O=>{O.currentTarget===O.target&&(A&&nZ(O)?A(O):O.key==="Escape"&&G.current&&G.current.blur()),h&&h(O)},w=I!==!1&&m?!0:I,y=w||A?Rn:C||"div",R=X({},n,{component:y,disabled:a,size:Z,color:r,iconColor:B.exports.isValidElement(c)&&c.props.color||r,onDelete:!!A,clickable:w,variant:u}),x=dE(R),H=y===Rn?X({component:C||"div",focusVisibleClassName:x.focusVisible},A&&{disableRipple:!0}):{};let F=null;A&&(F=i&&B.exports.isValidElement(i)?B.exports.cloneElement(i,{className:de(i.props.className,x.deleteIcon),onClick:S}):b(iE,{className:de(x.deleteIcon),onClick:S}));let M=null;l&&B.exports.isValidElement(l)&&(M=B.exports.cloneElement(l,{className:de(x.avatar,l.props.className)}));let j=null;return c&&B.exports.isValidElement(c)&&(j=B.exports.cloneElement(c,{className:de(x.icon,c.props.className)})),U(uE,X({as:y,className:de(x.root,o),disabled:w&&a?!0:void 0,onClick:m,onKeyDown:W,onKeyUp:v,ref:f,ownerState:R},H,p,{children:[M||j,b(AE,{className:de(x.label),ownerState:R,children:s}),F]}))}),D0=mE;function AI({props:e,states:t,muiFormControl:g}){return t.reduce((n,l)=>(n[l]=e[l],g&&typeof e[l]>"u"&&(n[l]=g[l]),n),{})}const pE=B.exports.createContext(),Q0=pE;function mI(){return B.exports.useContext(Q0)}function bE(e){return b(XN,X({},e,{defaultTheme:ps}))}function lZ(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function P0(e,t=!1){return e&&(lZ(e.value)&&e.value!==""||t&&lZ(e.defaultValue)&&e.defaultValue!=="")}function ZE(e){return e.startAdornment}function hE(e){return Xe("MuiInputBase",e)}const GE=ke("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),oI=GE,fE=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],hs=(e,t)=>{const{ownerState:g}=e;return[t.root,g.formControl&&t.formControl,g.startAdornment&&t.adornedStart,g.endAdornment&&t.adornedEnd,g.error&&t.error,g.size==="small"&&t.sizeSmall,g.multiline&&t.multiline,g.color&&t[`color${oe(g.color)}`],g.fullWidth&&t.fullWidth,g.hiddenLabel&&t.hiddenLabel]},Gs=(e,t)=>{const{ownerState:g}=e;return[t.input,g.size==="small"&&t.inputSizeSmall,g.multiline&&t.inputMultiline,g.type==="search"&&t.inputTypeSearch,g.startAdornment&&t.inputAdornedStart,g.endAdornment&&t.inputAdornedEnd,g.hiddenLabel&&t.inputHiddenLabel]},BE=e=>{const{classes:t,color:g,disabled:n,error:l,endAdornment:o,focused:I,formControl:r,fullWidth:C,hiddenLabel:i,multiline:a,readOnly:c,size:s,startAdornment:m,type:A}=e,d={root:["root",`color${oe(g)}`,n&&"disabled",l&&"error",C&&"fullWidth",I&&"focused",r&&"formControl",s==="small"&&"sizeSmall",a&&"multiline",m&&"adornedStart",o&&"adornedEnd",i&&"hiddenLabel",c&&"readOnly"],input:["input",n&&"disabled",A==="search"&&"inputTypeSearch",a&&"inputMultiline",s==="small"&&"inputSizeSmall",i&&"inputHiddenLabel",m&&"inputAdornedStart",o&&"inputAdornedEnd",c&&"readOnly"]};return Ye(d,hE,t)},fs=Ce("div",{name:"MuiInputBase",slot:"Root",overridesResolver:hs})(({theme:e,ownerState:t})=>X({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${oI.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&X({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),Bs=Ce("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Gs})(({theme:e,ownerState:t})=>{const g=e.palette.mode==="light",n=X({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:g?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),l={opacity:"0 !important"},o=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:g?.42:.5};return X({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${oI.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${oI.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),yE=b(bE,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),SE=B.exports.forwardRef(function(t,g){var n;const l=xe({props:t,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:I,autoFocus:r,className:C,components:i={},componentsProps:a={},defaultValue:c,disabled:s,disableInjectingGlobalStyles:m,endAdornment:A,fullWidth:d=!1,id:h,inputComponent:Z="input",inputProps:u={},inputRef:p,maxRows:G,minRows:f,multiline:S=!1,name:W,onBlur:v,onChange:w,onClick:y,onFocus:R,onKeyDown:x,onKeyUp:H,placeholder:F,readOnly:M,renderSuffix:j,rows:O,slotProps:z={},slots:D={},startAdornment:T,type:N="text",value:V}=l,Y=ce(l,fE),J=u.value!=null?u.value:V,{current:P}=B.exports.useRef(J!=null),k=B.exports.useRef(),$=B.exports.useCallback(Q=>{},[]),K=Ut(k,p,u.ref,$),[_,re]=B.exports.useState(!1),ne=mI(),ge=AI({props:l,muiFormControl:ne,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ge.focused=ne?ne.focused:_,B.exports.useEffect(()=>{!ne&&s&&_&&(re(!1),v&&v())},[ne,s,_,v]);const ue=ne&&ne.onFilled,ye=ne&&ne.onEmpty,he=B.exports.useCallback(Q=>{P0(Q)?ue&&ue():ye&&ye()},[ue,ye]);Ll(()=>{P&&he({value:J})},[J,he,P]);const Ve=Q=>{if(ge.disabled){Q.stopPropagation();return}R&&R(Q),u.onFocus&&u.onFocus(Q),ne&&ne.onFocus?ne.onFocus(Q):re(!0)},Be=Q=>{v&&v(Q),u.onBlur&&u.onBlur(Q),ne&&ne.onBlur?ne.onBlur(Q):re(!1)},Se=(Q,...ee)=>{if(!P){const Ge=Q.target||k.current;if(Ge==null)throw new Error(cl(1));he({value:Ge.value})}u.onChange&&u.onChange(Q,...ee),w&&w(Q,...ee)};B.exports.useEffect(()=>{he(k.current)},[]);const yt=Q=>{k.current&&Q.currentTarget===Q.target&&k.current.focus(),y&&y(Q)};let He=Z,Je=u;S&&He==="input"&&(O?Je=X({type:void 0,minRows:O,maxRows:O},Je):Je=X({type:void 0,maxRows:G,minRows:f},Je),He=pK);const _e=Q=>{he(Q.animationName==="mui-auto-fill-cancel"?k.current:{value:"x"})};B.exports.useEffect(()=>{ne&&ne.setAdornedStart(Boolean(T))},[ne,T]);const Le=X({},l,{color:ge.color||"primary",disabled:ge.disabled,endAdornment:A,error:ge.error,focused:ge.focused,formControl:ne,fullWidth:d,hiddenLabel:ge.hiddenLabel,multiline:S,size:ge.size,startAdornment:T,type:N}),Ae=BE(Le),we=D.root||i.Root||fs,Ct=z.root||a.root||{},it=D.input||i.Input||Bs;return Je=X({},Je,(n=z.input)!=null?n:a.input),U(B.exports.Fragment,{children:[!m&&yE,U(we,X({},Ct,!nI(we)&&{ownerState:X({},Le,Ct.ownerState)},{ref:g,onClick:yt},Y,{className:de(Ae.root,Ct.className,C),children:[T,b(Q0.Provider,{value:null,children:b(it,X({ownerState:Le,"aria-invalid":ge.error,"aria-describedby":o,autoComplete:I,autoFocus:r,defaultValue:c,disabled:ge.disabled,id:h,onAnimationStart:_e,name:W,placeholder:F,readOnly:M,required:ge.required,rows:O,value:J,onKeyDown:x,onKeyUp:H,type:N},Je,!nI(it)&&{as:He,ownerState:X({},Le,Je.ownerState)},{ref:K,className:de(Ae.input,Je.className),onBlur:Be,onChange:Se,onFocus:Ve}))}),A,j?j(X({},ge,{startAdornment:T})):null]}))]})}),j0=SE;function WE(e){return Xe("MuiInput",e)}const VE=X({},oI,ke("MuiInput",["root","underline","input"])),EC=VE;function vE(e){return Xe("MuiOutlinedInput",e)}const RE=X({},oI,ke("MuiOutlinedInput",["root","notchedOutline","input"])),Kn=RE;function XE(e){return Xe("MuiFilledInput",e)}const kE=X({},oI,ke("MuiFilledInput",["root","underline","input"])),ao=kE,JE=xn(b("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),YE=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],xE={entering:{opacity:1},entered:{opacity:1}},HE=B.exports.forwardRef(function(t,g){const n=$l(),l={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:I=!0,children:r,easing:C,in:i,onEnter:a,onEntered:c,onEntering:s,onExit:m,onExited:A,onExiting:d,style:h,timeout:Z=l,TransitionComponent:u=T0}=t,p=ce(t,YE),G=B.exports.useRef(null),f=Ut(G,r.ref,g),S=F=>M=>{if(F){const j=G.current;M===void 0?F(j):F(j,M)}},W=S(s),v=S((F,M)=>{kS(F);const j=lI({style:h,timeout:Z,easing:C},{mode:"enter"});F.style.webkitTransition=n.transitions.create("opacity",j),F.style.transition=n.transitions.create("opacity",j),a&&a(F,M)}),w=S(c),y=S(d),R=S(F=>{const M=lI({style:h,timeout:Z,easing:C},{mode:"exit"});F.style.webkitTransition=n.transitions.create("opacity",M),F.style.transition=n.transitions.create("opacity",M),m&&m(F)}),x=S(A);return b(u,X({appear:I,in:i,nodeRef:G,onEnter:v,onEntered:w,onEntering:W,onExit:R,onExited:x,onExiting:y,addEndListener:F=>{o&&o(G.current,F)},timeout:Z},p,{children:(F,M)=>B.exports.cloneElement(r,X({style:X({opacity:0,visibility:F==="exited"&&!i?"hidden":void 0},xE[F],h,r.props.style),ref:f},M))}))}),ys=HE;function wE(e){return Xe("MuiBackdrop",e)}ke("MuiBackdrop",["root","invisible"]);const NE=["children","component","components","componentsProps","className","invisible","open","slotProps","slots","transitionDuration","TransitionComponent"],FE=e=>{const{classes:t,invisible:g}=e;return Ye({root:["root",g&&"invisible"]},wE,t)},KE=Ce("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.invisible&&t.invisible]}})(({ownerState:e})=>X({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),EE=B.exports.forwardRef(function(t,g){var n,l,o;const I=xe({props:t,name:"MuiBackdrop"}),{children:r,component:C="div",components:i={},componentsProps:a={},className:c,invisible:s=!1,open:m,slotProps:A={},slots:d={},transitionDuration:h,TransitionComponent:Z=ys}=I,u=ce(I,NE),p=X({},I,{component:C,invisible:s}),G=FE(p),f=(n=A.root)!=null?n:a.root;return b(Z,X({in:m,timeout:h},u,{children:b(KE,X({"aria-hidden":!0},f,{as:(l=(o=d.root)!=null?o:i.Root)!=null?l:C,className:de(G.root,c,f==null?void 0:f.className),ownerState:X({},p,f==null?void 0:f.ownerState),classes:G,ref:g,children:r}))}))}),Ss=EE,zE=M0(),ME=K9({defaultTheme:zE,defaultClassName:"MuiBox-root",generateClassName:oS.generate}),se=ME;function TE(e){return Xe("MuiButton",e)}const LE=ke("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),zC=LE,UE=B.exports.createContext({}),xS=UE,DE=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],QE=e=>{const{color:t,disableElevation:g,fullWidth:n,size:l,variant:o,classes:I}=e,r={root:["root",o,`${o}${oe(t)}`,`size${oe(l)}`,`${o}Size${oe(l)}`,t==="inherit"&&"colorInherit",g&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${oe(l)}`],endIcon:["endIcon",`iconSize${oe(l)}`]},C=Ye(r,TE,I);return X({},I,C)},HS=e=>X({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),PE=Ce(Rn,{shouldForwardProp:e=>Yn(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[g.variant],t[`${g.variant}${oe(g.color)}`],t[`size${oe(g.size)}`],t[`${g.variant}Size${oe(g.size)}`],g.color==="inherit"&&t.colorInherit,g.disableElevation&&t.disableElevation,g.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var g,n;return X({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":X({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Oe(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Oe(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Oe(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:(e.vars||e).palette.grey.A100,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":X({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${zC.focusVisible}`]:X({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${zC.disabled}`]:X({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="outlined"&&t.color==="secondary"&&{border:`1px solid ${(e.vars||e).palette.action.disabled}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${Oe(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(g=(n=e.palette).getContrastText)==null?void 0:g.call(n,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${zC.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${zC.disabled}`]:{boxShadow:"none"}}),jE=Ce("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.startIcon,t[`iconSize${oe(g.size)}`]]}})(({ownerState:e})=>X({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},HS(e))),OE=Ce("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.endIcon,t[`iconSize${oe(g.size)}`]]}})(({ownerState:e})=>X({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},HS(e))),_E=B.exports.forwardRef(function(t,g){const n=B.exports.useContext(xS),l=lS(n,t),o=xe({props:l,name:"MuiButton"}),{children:I,color:r="primary",component:C="button",className:i,disabled:a=!1,disableElevation:c=!1,disableFocusRipple:s=!1,endIcon:m,focusVisibleClassName:A,fullWidth:d=!1,size:h="medium",startIcon:Z,type:u,variant:p="text"}=o,G=ce(o,DE),f=X({},o,{color:r,component:C,disabled:a,disableElevation:c,disableFocusRipple:s,fullWidth:d,size:h,type:u,variant:p}),S=QE(f),W=Z&&b(jE,{className:S.startIcon,ownerState:f,children:Z}),v=m&&b(OE,{className:S.endIcon,ownerState:f,children:m});return U(PE,X({ownerState:f,className:de(n.className,S.root,i),component:C,disabled:a,focusRipple:!s,focusVisibleClassName:de(S.focusVisible,A),ref:g,type:u},G,{classes:S,children:[W,I,v]}))}),Ne=_E;function $E(e){return Xe("MuiButtonGroup",e)}const qE=ke("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),Pn=qE,ez=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],tz=(e,t)=>{const{ownerState:g}=e;return[{[`& .${Pn.grouped}`]:t.grouped},{[`& .${Pn.grouped}`]:t[`grouped${oe(g.orientation)}`]},{[`& .${Pn.grouped}`]:t[`grouped${oe(g.variant)}`]},{[`& .${Pn.grouped}`]:t[`grouped${oe(g.variant)}${oe(g.orientation)}`]},{[`& .${Pn.grouped}`]:t[`grouped${oe(g.variant)}${oe(g.color)}`]},t.root,t[g.variant],g.disableElevation===!0&&t.disableElevation,g.fullWidth&&t.fullWidth,g.orientation==="vertical"&&t.vertical]},gz=e=>{const{classes:t,color:g,disabled:n,disableElevation:l,fullWidth:o,orientation:I,variant:r}=e,C={root:["root",r,I==="vertical"&&"vertical",o&&"fullWidth",l&&"disableElevation"],grouped:["grouped",`grouped${oe(I)}`,`grouped${oe(r)}`,`grouped${oe(r)}${oe(I)}`,`grouped${oe(r)}${oe(g)}`,n&&"disabled"]};return Ye(C,$E,t)},nz=Ce("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:tz})(({theme:e,ownerState:t})=>X({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},t.orientation==="vertical"&&{flexDirection:"column"},{[`& .${Pn.grouped}`]:X({minWidth:40,"&:not(:first-of-type)":X({},t.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},t.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},t.variant==="outlined"&&t.orientation==="horizontal"&&{marginLeft:-1},t.variant==="outlined"&&t.orientation==="vertical"&&{marginTop:-1}),"&:not(:last-of-type)":X({},t.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},t.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},t.variant==="text"&&t.orientation==="horizontal"&&{borderRight:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},t.variant==="text"&&t.orientation==="vertical"&&{borderBottom:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},t.variant==="text"&&t.color!=="inherit"&&{borderColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:Oe(e.palette[t.color].main,.5)},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"transparent"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"transparent"},t.variant==="contained"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${Pn.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="contained"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${Pn.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="contained"&&t.color!=="inherit"&&{borderColor:(e.vars||e).palette[t.color].dark},{"&:hover":X({},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"currentColor"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),"&:hover":X({},t.variant==="contained"&&{boxShadow:"none"})},t.variant==="contained"&&{boxShadow:"none"})})),lz=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiButtonGroup"}),{children:l,className:o,color:I="primary",component:r="div",disabled:C=!1,disableElevation:i=!1,disableFocusRipple:a=!1,disableRipple:c=!1,fullWidth:s=!1,orientation:m="horizontal",size:A="medium",variant:d="outlined"}=n,h=ce(n,ez),Z=X({},n,{color:I,component:r,disabled:C,disableElevation:i,disableFocusRipple:a,disableRipple:c,fullWidth:s,orientation:m,size:A,variant:d}),u=gz(Z),p=B.exports.useMemo(()=>({className:u.grouped,color:I,disabled:C,disableElevation:i,disableFocusRipple:a,disableRipple:c,fullWidth:s,size:A,variant:d}),[I,C,i,a,c,s,A,d,u.grouped]);return b(nz,X({as:r,role:"group",className:de(u.root,o),ref:g,ownerState:Z},h,{children:b(xS.Provider,{value:p,children:l})}))}),sr=lz;function oz(e){return Xe("MuiCircularProgress",e)}ke("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Iz=["className","color","disableShrink","size","style","thickness","value","variant"];let Ws=e=>e,oZ,IZ,rZ,CZ;const En=44,rz=rC(oZ||(oZ=Ws`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Cz=rC(IZ||(IZ=Ws`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),iz=e=>{const{classes:t,variant:g,color:n,disableShrink:l}=e,o={root:["root",g,`color${oe(n)}`],svg:["svg"],circle:["circle",`circle${oe(g)}`,l&&"circleDisableShrink"]};return Ye(o,oz,t)},az=Ce("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[g.variant],t[`color${oe(g.color)}`]]}})(({ownerState:e,theme:t})=>X({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&k0(rZ||(rZ=Ws`
      animation: ${0} 1.4s linear infinite;
    `),rz)),sz=Ce("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),cz=Ce("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.circle,t[`circle${oe(g.variant)}`],g.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>X({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&k0(CZ||(CZ=Ws`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Cz)),dz=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiCircularProgress"}),{className:l,color:o="primary",disableShrink:I=!1,size:r=40,style:C,thickness:i=3.6,value:a=0,variant:c="indeterminate"}=n,s=ce(n,Iz),m=X({},n,{color:o,disableShrink:I,size:r,thickness:i,value:a,variant:c}),A=iz(m),d={},h={},Z={};if(c==="determinate"){const u=2*Math.PI*((En-i)/2);d.strokeDasharray=u.toFixed(3),Z["aria-valuenow"]=Math.round(a),d.strokeDashoffset=`${((100-a)/100*u).toFixed(3)}px`,h.transform="rotate(-90deg)"}return b(az,X({className:de(A.root,l),style:X({width:r,height:r},h,C),ownerState:m,ref:g,role:"progressbar"},Z,s,{children:b(sz,{className:A.svg,ownerState:m,viewBox:`${En/2} ${En/2} ${En} ${En}`,children:b(cz,{className:A.circle,style:d,ownerState:m,cx:En,cy:En,r:(En-i)/2,fill:"none",strokeWidth:i})})}))}),wS=dz,uz=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],Az=e=>e.classes,mz=Ce("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,!g.open&&g.exited&&t.hidden]}})(({theme:e,ownerState:t})=>X({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),pz=Ce(Ss,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),bz=B.exports.forwardRef(function(t,g){var n,l,o,I,r,C;const i=xe({name:"MuiModal",props:t}),{BackdropComponent:a=pz,BackdropProps:c,closeAfterTransition:s=!1,children:m,component:A,components:d={},componentsProps:h={},disableAutoFocus:Z=!1,disableEnforceFocus:u=!1,disableEscapeKeyDown:p=!1,disablePortal:G=!1,disableRestoreFocus:f=!1,disableScrollLock:S=!1,hideBackdrop:W=!1,keepMounted:v=!1,slotProps:w,slots:y,theme:R}=i,x=ce(i,uz),[H,F]=B.exports.useState(!0),M={closeAfterTransition:s,disableAutoFocus:Z,disableEnforceFocus:u,disableEscapeKeyDown:p,disablePortal:G,disableRestoreFocus:f,disableScrollLock:S,hideBackdrop:W,keepMounted:v},j=X({},i,M,{exited:H}),O=Az(j),z=(n=(l=y==null?void 0:y.root)!=null?l:d.Root)!=null?n:mz,D=(o=(I=y==null?void 0:y.backdrop)!=null?I:d.Backdrop)!=null?o:a,T=(r=w==null?void 0:w.root)!=null?r:h.root,N=(C=w==null?void 0:w.backdrop)!=null?C:h.backdrop;return b(dK,X({slots:{root:z,backdrop:D},slotProps:{root:()=>X({},Qu(T,j),!nI(z)&&{as:A,theme:R}),backdrop:()=>X({},c,Qu(N,j))},onTransitionEnter:()=>F(!1),onTransitionExited:()=>F(!0),ref:g},x,{classes:O},M,{children:m}))}),Vs=bz;function Zz(e){return Xe("MuiDivider",e)}const pO=ke("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),hz=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Gz=e=>{const{absolute:t,children:g,classes:n,flexItem:l,light:o,orientation:I,textAlign:r,variant:C}=e;return Ye({root:["root",t&&"absolute",C,o&&"light",I==="vertical"&&"vertical",l&&"flexItem",g&&"withChildren",g&&I==="vertical"&&"withChildrenVertical",r==="right"&&I!=="vertical"&&"textAlignRight",r==="left"&&I!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",I==="vertical"&&"wrapperVertical"]},Zz,n)},fz=Ce("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.absolute&&t.absolute,t[g.variant],g.light&&t.light,g.orientation==="vertical"&&t.vertical,g.flexItem&&t.flexItem,g.children&&t.withChildren,g.children&&g.orientation==="vertical"&&t.withChildrenVertical,g.textAlign==="right"&&g.orientation!=="vertical"&&t.textAlignRight,g.textAlign==="left"&&g.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>X({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Oe(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({theme:e,ownerState:t})=>X({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}}),({theme:e,ownerState:t})=>X({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(e.vars||e).palette.divider}`,transform:"translateX(0%)"}}),({ownerState:e})=>X({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),Bz=Ce("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.wrapper,g.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>X({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),yz=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiDivider"}),{absolute:l=!1,children:o,className:I,component:r=o?"div":"hr",flexItem:C=!1,light:i=!1,orientation:a="horizontal",role:c=r!=="hr"?"separator":void 0,textAlign:s="center",variant:m="fullWidth"}=n,A=ce(n,hz),d=X({},n,{absolute:l,component:r,flexItem:C,light:i,orientation:a,role:c,textAlign:s,variant:m}),h=Gz(d);return b(fz,X({as:r,className:de(h.root,I),role:c,ref:g,ownerState:d},A,{children:o?b(Bz,{className:h.wrapper,ownerState:d,children:o}):null}))}),Sz=yz,Wz=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Vz=e=>{const{classes:t,disableUnderline:g}=e,l=Ye({root:["root",!g&&"underline"],input:["input"]},XE,t);return X({},t,l)},vz=Ce(fs,{shouldForwardProp:e=>Yn(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[...hs(e,t),!g.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var g;const n=e.palette.mode==="light",l=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",I=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",r=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return X({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:I,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o}},[`&.${ao.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o},[`&.${ao.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:r}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(g=(e.vars||e).palette[t.color||"primary"])==null?void 0:g.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ao.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ao.error}:after`]:{borderBottomColor:(e.vars||e).palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:l}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ao.disabled}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${ao.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&X({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),Rz=Ce(Bs,{name:"MuiFilledInput",slot:"Input",overridesResolver:Gs})(({theme:e,ownerState:t})=>X({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),NS=B.exports.forwardRef(function(t,g){var n,l,o,I;const r=xe({props:t,name:"MuiFilledInput"}),{components:C={},componentsProps:i,fullWidth:a=!1,inputComponent:c="input",multiline:s=!1,slotProps:m,slots:A={},type:d="text"}=r,h=ce(r,Wz),Z=X({},r,{fullWidth:a,inputComponent:c,multiline:s,type:d}),u=Vz(r),p={root:{ownerState:Z},input:{ownerState:Z}},G=(m!=null?m:i)?ug(m!=null?m:i,p):p,f=(n=(l=A.root)!=null?l:C.Root)!=null?n:vz,S=(o=(I=A.input)!=null?I:C.Input)!=null?o:Rz;return b(j0,X({slots:{root:f,input:S},componentsProps:G,fullWidth:a,inputComponent:c,multiline:s,ref:g,type:d},h,{classes:u}))});NS.muiName="Input";const FS=NS;function Xz(e){return Xe("MuiFormControl",e)}ke("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const kz=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Jz=e=>{const{classes:t,margin:g,fullWidth:n}=e,l={root:["root",g!=="none"&&`margin${oe(g)}`,n&&"fullWidth"]};return Ye(l,Xz,t)},Yz=Ce("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>X({},t.root,t[`margin${oe(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>X({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),xz=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiFormControl"}),{children:l,className:o,color:I="primary",component:r="div",disabled:C=!1,error:i=!1,focused:a,fullWidth:c=!1,hiddenLabel:s=!1,margin:m="none",required:A=!1,size:d="medium",variant:h="outlined"}=n,Z=ce(n,kz),u=X({},n,{color:I,component:r,disabled:C,error:i,fullWidth:c,hiddenLabel:s,margin:m,required:A,size:d,variant:h}),p=Jz(u),[G,f]=B.exports.useState(()=>{let H=!1;return l&&B.exports.Children.forEach(l,F=>{if(!di(F,["Input","Select"]))return;const M=di(F,["Select"])?F.props.input:F;M&&ZE(M.props)&&(H=!0)}),H}),[S,W]=B.exports.useState(()=>{let H=!1;return l&&B.exports.Children.forEach(l,F=>{!di(F,["Input","Select"])||P0(F.props,!0)&&(H=!0)}),H}),[v,w]=B.exports.useState(!1);C&&v&&w(!1);const y=a!==void 0&&!C?a:v;let R;const x=B.exports.useMemo(()=>({adornedStart:G,setAdornedStart:f,color:I,disabled:C,error:i,filled:S,focused:y,fullWidth:c,hiddenLabel:s,size:d,onBlur:()=>{w(!1)},onEmpty:()=>{W(!1)},onFilled:()=>{W(!0)},onFocus:()=>{w(!0)},registerEffect:R,required:A,variant:h}),[G,I,C,i,S,y,c,s,R,A,d,h]);return b(Q0.Provider,{value:x,children:b(Yz,X({as:r,ownerState:u,className:de(p.root,o),ref:g},Z,{children:l}))})}),Hz=xz;function wz(e){return Xe("MuiFormHelperText",e)}const Nz=ke("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),iZ=Nz;var aZ;const Fz=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Kz=e=>{const{classes:t,contained:g,size:n,disabled:l,error:o,filled:I,focused:r,required:C}=e,i={root:["root",l&&"disabled",o&&"error",n&&`size${oe(n)}`,g&&"contained",r&&"focused",I&&"filled",C&&"required"]};return Ye(i,wz,t)},Ez=Ce("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.size&&t[`size${oe(g.size)}`],g.contained&&t.contained,g.filled&&t.filled]}})(({theme:e,ownerState:t})=>X({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${iZ.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${iZ.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),zz=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiFormHelperText"}),{children:l,className:o,component:I="p"}=n,r=ce(n,Fz),C=mI(),i=AI({props:n,muiFormControl:C,states:["variant","size","disabled","error","filled","focused","required"]}),a=X({},n,{component:I,contained:i.variant==="filled"||i.variant==="outlined",variant:i.variant,size:i.size,disabled:i.disabled,error:i.error,filled:i.filled,focused:i.focused,required:i.required}),c=Kz(a);return b(Ez,X({as:I,ownerState:a,className:de(c.root,o),ref:g},r,{children:l===" "?aZ||(aZ=b("span",{className:"notranslate",children:"\u200B"})):l}))}),Mz=zz;function Tz(e){return Xe("MuiFormLabel",e)}const Lz=ke("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),cr=Lz,Uz=["children","className","color","component","disabled","error","filled","focused","required"],Dz=e=>{const{classes:t,color:g,focused:n,disabled:l,error:o,filled:I,required:r}=e,C={root:["root",`color${oe(g)}`,l&&"disabled",o&&"error",I&&"filled",n&&"focused",r&&"required"],asterisk:["asterisk",o&&"error"]};return Ye(C,Tz,t)},Qz=Ce("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>X({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>X({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${cr.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${cr.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${cr.error}`]:{color:(e.vars||e).palette.error.main}})),Pz=Ce("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${cr.error}`]:{color:(e.vars||e).palette.error.main}})),jz=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiFormLabel"}),{children:l,className:o,component:I="label"}=n,r=ce(n,Uz),C=mI(),i=AI({props:n,muiFormControl:C,states:["color","required","focused","disabled","error","filled"]}),a=X({},n,{color:i.color||"primary",component:I,disabled:i.disabled,error:i.error,filled:i.filled,focused:i.focused,required:i.required}),c=Dz(a);return U(Qz,X({as:I,ownerState:a,className:de(c.root,o),ref:g},r,{children:[l,i.required&&U(Pz,{ownerState:a,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))}),Oz=jz,_z=B.exports.createContext(),sZ=_z;function $z(e){return Xe("MuiGrid",e)}const qz=[0,1,2,3,4,5,6,7,8,9,10],eM=["column-reverse","column","row-reverse","row"],tM=["nowrap","wrap-reverse","wrap"],NI=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gM=ke("MuiGrid",["root","container","item","zeroMinWidth",...qz.map(e=>`spacing-xs-${e}`),...eM.map(e=>`direction-xs-${e}`),...tM.map(e=>`wrap-xs-${e}`),...NI.map(e=>`grid-xs-${e}`),...NI.map(e=>`grid-sm-${e}`),...NI.map(e=>`grid-md-${e}`),...NI.map(e=>`grid-lg-${e}`),...NI.map(e=>`grid-xl-${e}`)]),Er=gM,nM=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Ko(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function lM({theme:e,ownerState:t}){let g;return e.breakpoints.keys.reduce((n,l)=>{let o={};if(t[l]&&(g=t[l]),!g)return n;if(g===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(g==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const I=Hl({values:t.columns,breakpoints:e.breakpoints.values}),r=typeof I=="object"?I[l]:I;if(r==null)return n;const C=`${Math.round(g/r*1e8)/1e6}%`;let i={};if(t.container&&t.item&&t.columnSpacing!==0){const a=e.spacing(t.columnSpacing);if(a!=="0px"){const c=`calc(${C} + ${Ko(a)})`;i={flexBasis:c,maxWidth:c}}}o=X({flexBasis:C,flexGrow:0,maxWidth:C},i)}return e.breakpoints.values[l]===0?Object.assign(n,o):n[e.breakpoints.up(l)]=o,n},{})}function oM({theme:e,ownerState:t}){const g=Hl({values:t.direction,breakpoints:e.breakpoints.values});return yg({theme:e},g,n=>{const l={flexDirection:n};return n.indexOf("column")===0&&(l[`& > .${Er.item}`]={maxWidth:"none"}),l})}function KS({breakpoints:e,values:t}){let g="";Object.keys(t).forEach(l=>{g===""&&t[l]!==0&&(g=l)});const n=Object.keys(e).sort((l,o)=>e[l]-e[o]);return n.slice(0,n.indexOf(g))}function IM({theme:e,ownerState:t}){const{container:g,rowSpacing:n}=t;let l={};if(g&&n!==0){const o=Hl({values:n,breakpoints:e.breakpoints.values});let I;typeof o=="object"&&(I=KS({breakpoints:e.breakpoints.values,values:o})),l=yg({theme:e},o,(r,C)=>{var i;const a=e.spacing(r);return a!=="0px"?{marginTop:`-${Ko(a)}`,[`& > .${Er.item}`]:{paddingTop:Ko(a)}}:(i=I)!=null&&i.includes(C)?{}:{marginTop:0,[`& > .${Er.item}`]:{paddingTop:0}}})}return l}function rM({theme:e,ownerState:t}){const{container:g,columnSpacing:n}=t;let l={};if(g&&n!==0){const o=Hl({values:n,breakpoints:e.breakpoints.values});let I;typeof o=="object"&&(I=KS({breakpoints:e.breakpoints.values,values:o})),l=yg({theme:e},o,(r,C)=>{var i;const a=e.spacing(r);return a!=="0px"?{width:`calc(100% + ${Ko(a)})`,marginLeft:`-${Ko(a)}`,[`& > .${Er.item}`]:{paddingLeft:Ko(a)}}:(i=I)!=null&&i.includes(C)?{}:{width:"100%",marginLeft:0,[`& > .${Er.item}`]:{paddingLeft:0}}})}return l}function CM(e,t,g={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[g[`spacing-xs-${String(e)}`]];const n=[];return t.forEach(l=>{const o=e[l];Number(o)>0&&n.push(g[`spacing-${l}-${String(o)}`])}),n}const iM=Ce("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e,{container:n,direction:l,item:o,spacing:I,wrap:r,zeroMinWidth:C,breakpoints:i}=g;let a=[];n&&(a=CM(I,i,t));const c=[];return i.forEach(s=>{const m=g[s];m&&c.push(t[`grid-${s}-${String(m)}`])}),[t.root,n&&t.container,o&&t.item,C&&t.zeroMinWidth,...a,l!=="row"&&t[`direction-xs-${String(l)}`],r!=="wrap"&&t[`wrap-xs-${String(r)}`],...c]}})(({ownerState:e})=>X({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),oM,IM,rM,lM);function aM(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const g=[];return t.forEach(n=>{const l=e[n];if(Number(l)>0){const o=`spacing-${n}-${String(l)}`;g.push(o)}}),g}const sM=e=>{const{classes:t,container:g,direction:n,item:l,spacing:o,wrap:I,zeroMinWidth:r,breakpoints:C}=e;let i=[];g&&(i=aM(o,C));const a=[];C.forEach(s=>{const m=e[s];m&&a.push(`grid-${s}-${String(m)}`)});const c={root:["root",g&&"container",l&&"item",r&&"zeroMinWidth",...i,n!=="row"&&`direction-xs-${String(n)}`,I!=="wrap"&&`wrap-xs-${String(I)}`,...a]};return Ye(c,$z,t)},cM=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiGrid"}),{breakpoints:l}=$l(),o=ds(n),{className:I,columns:r,columnSpacing:C,component:i="div",container:a=!1,direction:c="row",item:s=!1,rowSpacing:m,spacing:A=0,wrap:d="wrap",zeroMinWidth:h=!1}=o,Z=ce(o,nM),u=m||A,p=C||A,G=B.exports.useContext(sZ),f=a?r||12:G,S={},W=X({},Z);l.keys.forEach(y=>{Z[y]!=null&&(S[y]=Z[y],delete W[y])});const v=X({},o,{columns:f,container:a,direction:c,item:s,rowSpacing:u,columnSpacing:p,wrap:d,zeroMinWidth:h,spacing:A},S,{breakpoints:l.keys}),w=sM(v);return b(sZ.Provider,{value:f,children:b(iM,X({ownerState:v,className:de(w.root,I),as:i,ref:g},W))})}),te=cM,dM=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function $u(e){return`scale(${e}, ${e**2})`}const uM={entering:{opacity:1,transform:$u(1)},entered:{opacity:1,transform:"none"}},Hc=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),ES=B.exports.forwardRef(function(t,g){const{addEndListener:n,appear:l=!0,children:o,easing:I,in:r,onEnter:C,onEntered:i,onEntering:a,onExit:c,onExited:s,onExiting:m,style:A,timeout:d="auto",TransitionComponent:h=T0}=t,Z=ce(t,dM),u=B.exports.useRef(),p=B.exports.useRef(),G=$l(),f=B.exports.useRef(null),S=Ut(f,o.ref,g),W=M=>j=>{if(M){const O=f.current;j===void 0?M(O):M(O,j)}},v=W(a),w=W((M,j)=>{kS(M);const{duration:O,delay:z,easing:D}=lI({style:A,timeout:d,easing:I},{mode:"enter"});let T;d==="auto"?(T=G.transitions.getAutoHeightDuration(M.clientHeight),p.current=T):T=O,M.style.transition=[G.transitions.create("opacity",{duration:T,delay:z}),G.transitions.create("transform",{duration:Hc?T:T*.666,delay:z,easing:D})].join(","),C&&C(M,j)}),y=W(i),R=W(m),x=W(M=>{const{duration:j,delay:O,easing:z}=lI({style:A,timeout:d,easing:I},{mode:"exit"});let D;d==="auto"?(D=G.transitions.getAutoHeightDuration(M.clientHeight),p.current=D):D=j,M.style.transition=[G.transitions.create("opacity",{duration:D,delay:O}),G.transitions.create("transform",{duration:Hc?D:D*.666,delay:Hc?O:O||D*.333,easing:z})].join(","),M.style.opacity=0,M.style.transform=$u(.75),c&&c(M)}),H=W(s),F=M=>{d==="auto"&&(u.current=setTimeout(M,p.current||0)),n&&n(f.current,M)};return B.exports.useEffect(()=>()=>{clearTimeout(u.current)},[]),b(h,X({appear:l,in:r,nodeRef:f,onEnter:w,onEntered:y,onEntering:v,onExit:x,onExited:H,onExiting:R,addEndListener:F,timeout:d==="auto"?null:d},Z,{children:(M,j)=>B.exports.cloneElement(o,X({style:X({opacity:0,transform:$u(.75),visibility:M==="exited"&&!r?"hidden":void 0},uM[M],A,o.props.style),ref:S},j))}))});ES.muiSupportAuto=!0;const AM=ES,mM=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],pM=e=>{const{classes:t,disableUnderline:g}=e,l=Ye({root:["root",!g&&"underline"],input:["input"]},WE,t);return X({},t,l)},bM=Ce(fs,{shouldForwardProp:e=>Yn(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[...hs(e,t),!g.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),X({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${EC.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${EC.error}:after`]:{borderBottomColor:(e.vars||e).palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${EC.disabled}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${EC.disabled}:before`]:{borderBottomStyle:"dotted"}})}),ZM=Ce(Bs,{name:"MuiInput",slot:"Input",overridesResolver:Gs})({}),zS=B.exports.forwardRef(function(t,g){var n,l,o,I;const r=xe({props:t,name:"MuiInput"}),{disableUnderline:C,components:i={},componentsProps:a,fullWidth:c=!1,inputComponent:s="input",multiline:m=!1,slotProps:A,slots:d={},type:h="text"}=r,Z=ce(r,mM),u=pM(r),G={root:{ownerState:{disableUnderline:C}}},f=(A!=null?A:a)?ug(A!=null?A:a,G):G,S=(n=(l=d.root)!=null?l:i.Root)!=null?n:bM,W=(o=(I=d.input)!=null?I:i.Input)!=null?o:ZM;return b(j0,X({slots:{root:S,input:W},slotProps:f,fullWidth:c,inputComponent:s,multiline:m,ref:g,type:h},Z,{classes:u}))});zS.muiName="Input";const MS=zS;function hM(e){return Xe("MuiInputLabel",e)}ke("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const GM=["disableAnimation","margin","shrink","variant","className"],fM=e=>{const{classes:t,formControl:g,size:n,shrink:l,disableAnimation:o,variant:I,required:r}=e,i=Ye({root:["root",g&&"formControl",!o&&"animated",l&&"shrink",n==="small"&&"sizeSmall",I],asterisk:[r&&"asterisk"]},hM,t);return X({},t,i)},BM=Ce(Oz,{shouldForwardProp:e=>Yn(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[{[`& .${cr.asterisk}`]:t.asterisk},t.root,g.formControl&&t.formControl,g.size==="small"&&t.sizeSmall,g.shrink&&t.shrink,!g.disableAnimation&&t.animated,t[g.variant]]}})(({theme:e,ownerState:t})=>X({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&X({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&X({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&X({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))),yM=B.exports.forwardRef(function(t,g){const n=xe({name:"MuiInputLabel",props:t}),{disableAnimation:l=!1,shrink:o,className:I}=n,r=ce(n,GM),C=mI();let i=o;typeof i>"u"&&C&&(i=C.filled||C.focused||C.adornedStart);const a=AI({props:n,muiFormControl:C,states:["size","variant","required"]}),c=X({},n,{disableAnimation:l,formControl:C,shrink:i,size:a.size,variant:a.variant,required:a.required}),s=fM(c);return b(BM,X({"data-shrink":i,ownerState:c,ref:g,className:de(s.root,I)},r,{classes:s}))}),SM=yM,WM=B.exports.createContext({}),dr=WM;function VM(e){return Xe("MuiList",e)}ke("MuiList",["root","padding","dense","subheader"]);const vM=["children","className","component","dense","disablePadding","subheader"],RM=e=>{const{classes:t,disablePadding:g,dense:n,subheader:l}=e;return Ye({root:["root",!g&&"padding",n&&"dense",l&&"subheader"]},VM,t)},XM=Ce("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,!g.disablePadding&&t.padding,g.dense&&t.dense,g.subheader&&t.subheader]}})(({ownerState:e})=>X({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),kM=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiList"}),{children:l,className:o,component:I="ul",dense:r=!1,disablePadding:C=!1,subheader:i}=n,a=ce(n,vM),c=B.exports.useMemo(()=>({dense:r}),[r]),s=X({},n,{component:I,dense:r,disablePadding:C}),m=RM(s);return b(dr.Provider,{value:c,children:U(XM,X({as:I,className:de(m.root,o),ref:g,ownerState:s},a,{children:[i,l]}))})}),TS=kM;function JM(e){return Xe("MuiListItem",e)}const YM=ke("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),mo=YM,xM=ke("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),HM=xM;function wM(e){return Xe("MuiListItemSecondaryAction",e)}ke("MuiListItemSecondaryAction",["root","disableGutters"]);const NM=["className"],FM=e=>{const{disableGutters:t,classes:g}=e;return Ye({root:["root",t&&"disableGutters"]},wM,g)},KM=Ce("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.disableGutters&&t.disableGutters]}})(({ownerState:e})=>X({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),LS=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiListItemSecondaryAction"}),{className:l}=n,o=ce(n,NM),I=B.exports.useContext(dr),r=X({},n,{disableGutters:I.disableGutters}),C=FM(r);return b(KM,X({className:de(C.root,l),ownerState:r,ref:g},o))});LS.muiName="ListItemSecondaryAction";const EM=LS,zM=["className"],MM=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],TM=(e,t)=>{const{ownerState:g}=e;return[t.root,g.dense&&t.dense,g.alignItems==="flex-start"&&t.alignItemsFlexStart,g.divider&&t.divider,!g.disableGutters&&t.gutters,!g.disablePadding&&t.padding,g.button&&t.button,g.hasSecondaryAction&&t.secondaryAction]},LM=e=>{const{alignItems:t,button:g,classes:n,dense:l,disabled:o,disableGutters:I,disablePadding:r,divider:C,hasSecondaryAction:i,selected:a}=e;return Ye({root:["root",l&&"dense",!I&&"gutters",!r&&"padding",C&&"divider",o&&"disabled",g&&"button",t==="flex-start"&&"alignItemsFlexStart",i&&"secondaryAction",a&&"selected"],container:["container"]},JM,n)},UM=Ce("div",{name:"MuiListItem",slot:"Root",overridesResolver:TM})(({theme:e,ownerState:t})=>X({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&X({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${HM.root}`]:{paddingRight:48}},{[`&.${mo.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${mo.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Oe(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${mo.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Oe(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${mo.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${mo.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Oe(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Oe(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),DM=Ce("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),QM=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiListItem"}),{alignItems:l="center",autoFocus:o=!1,button:I=!1,children:r,className:C,component:i,components:a={},componentsProps:c={},ContainerComponent:s="li",ContainerProps:{className:m}={},dense:A=!1,disabled:d=!1,disableGutters:h=!1,disablePadding:Z=!1,divider:u=!1,focusVisibleClassName:p,secondaryAction:G,selected:f=!1,slotProps:S={},slots:W={}}=n,v=ce(n.ContainerProps,zM),w=ce(n,MM),y=B.exports.useContext(dr),R=B.exports.useMemo(()=>({dense:A||y.dense||!1,alignItems:l,disableGutters:h}),[l,y.dense,A,h]),x=B.exports.useRef(null);Ll(()=>{o&&x.current&&x.current.focus()},[o]);const H=B.exports.Children.toArray(r),F=H.length&&di(H[H.length-1],["ListItemSecondaryAction"]),M=X({},n,{alignItems:l,autoFocus:o,button:I,dense:R.dense,disabled:d,disableGutters:h,disablePadding:Z,divider:u,hasSecondaryAction:F,selected:f}),j=LM(M),O=Ut(x,g),z=W.root||a.Root||UM,D=S.root||c.root||{},T=X({className:de(j.root,D.className,C),disabled:d},w);let N=i||"li";return I&&(T.component=i||"div",T.focusVisibleClassName=de(mo.focusVisible,p),N=Rn),F?(N=!T.component&&!i?"div":N,s==="li"&&(N==="li"?N="div":T.component==="li"&&(T.component="div")),b(dr.Provider,{value:R,children:U(DM,X({as:s,className:de(j.container,m),ref:O,ownerState:M},v,{children:[b(z,X({},D,!nI(z)&&{as:N,ownerState:X({},M,D.ownerState)},T,{children:H})),H.pop()]}))})):b(dr.Provider,{value:R,children:U(z,X({},D,{as:N,ref:O},!nI(z)&&{ownerState:X({},M,D.ownerState)},T,{children:[H,G&&b(EM,{children:G})]}))})}),MC=QM,PM=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function wc(e,t,g){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:g?null:e.firstChild}function cZ(e,t,g){return e===t?g?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:g?null:e.lastChild}function US(e,t){if(t===void 0)return!0;let g=e.innerText;return g===void 0&&(g=e.textContent),g=g.trim().toLowerCase(),g.length===0?!1:t.repeating?g[0]===t.keys[0]:g.indexOf(t.keys.join(""))===0}function FI(e,t,g,n,l,o){let I=!1,r=l(e,t,t?g:!1);for(;r;){if(r===e.firstChild){if(I)return!1;I=!0}const C=n?!1:r.disabled||r.getAttribute("aria-disabled")==="true";if(!r.hasAttribute("tabindex")||!US(r,o)||C)r=l(e,r,g);else return r.focus(),!0}return!1}const jM=B.exports.forwardRef(function(t,g){const{actions:n,autoFocus:l=!1,autoFocusItem:o=!1,children:I,className:r,disabledItemsFocusable:C=!1,disableListWrap:i=!1,onKeyDown:a,variant:c="selectedMenu"}=t,s=ce(t,PM),m=B.exports.useRef(null),A=B.exports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ll(()=>{l&&m.current.focus()},[l]),B.exports.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(p,G)=>{const f=!m.current.style.width;if(p.clientHeight<m.current.clientHeight&&f){const S=`${gS(Ag(p))}px`;m.current.style[G.direction==="rtl"?"paddingLeft":"paddingRight"]=S,m.current.style.width=`calc(100% + ${S})`}return m.current}}),[]);const d=p=>{const G=m.current,f=p.key,S=Ag(G).activeElement;if(f==="ArrowDown")p.preventDefault(),FI(G,S,i,C,wc);else if(f==="ArrowUp")p.preventDefault(),FI(G,S,i,C,cZ);else if(f==="Home")p.preventDefault(),FI(G,null,i,C,wc);else if(f==="End")p.preventDefault(),FI(G,null,i,C,cZ);else if(f.length===1){const W=A.current,v=f.toLowerCase(),w=performance.now();W.keys.length>0&&(w-W.lastTime>500?(W.keys=[],W.repeating=!0,W.previousKeyMatched=!0):W.repeating&&v!==W.keys[0]&&(W.repeating=!1)),W.lastTime=w,W.keys.push(v);const y=S&&!W.repeating&&US(S,W);W.previousKeyMatched&&(y||FI(G,S,!1,C,wc,W))?p.preventDefault():W.previousKeyMatched=!1}a&&a(p)},h=Ut(m,g);let Z=-1;B.exports.Children.forEach(I,(p,G)=>{!B.exports.isValidElement(p)||p.props.disabled||(c==="selectedMenu"&&p.props.selected||Z===-1)&&(Z=G)});const u=B.exports.Children.map(I,(p,G)=>{if(G===Z){const f={};return o&&(f.autoFocus=!0),p.props.tabIndex===void 0&&c==="selectedMenu"&&(f.tabIndex=0),B.exports.cloneElement(p,f)}return p});return b(TS,X({role:"menu",ref:h,className:r,onKeyDown:d,tabIndex:l?0:-1},s,{children:u}))}),OM=jM;function _M(e){return Xe("MuiPopover",e)}ke("MuiPopover",["root","paper"]);const $M=["onEntering"],qM=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function dZ(e,t){let g=0;return typeof t=="number"?g=t:t==="center"?g=e.height/2:t==="bottom"&&(g=e.height),g}function uZ(e,t){let g=0;return typeof t=="number"?g=t:t==="center"?g=e.width/2:t==="right"&&(g=e.width),g}function AZ(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Nc(e){return typeof e=="function"?e():e}const eT=e=>{const{classes:t}=e;return Ye({root:["root"],paper:["paper"]},_M,t)},tT=Ce(Vs,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),gT=Ce(bs,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),nT=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiPopover"}),{action:l,anchorEl:o,anchorOrigin:I={vertical:"top",horizontal:"left"},anchorPosition:r,anchorReference:C="anchorEl",children:i,className:a,container:c,elevation:s=8,marginThreshold:m=16,open:A,PaperProps:d={},transformOrigin:h={vertical:"top",horizontal:"left"},TransitionComponent:Z=AM,transitionDuration:u="auto",TransitionProps:{onEntering:p}={}}=n,G=ce(n.TransitionProps,$M),f=ce(n,qM),S=B.exports.useRef(),W=Ut(S,d.ref),v=X({},n,{anchorOrigin:I,anchorReference:C,elevation:s,marginThreshold:m,PaperProps:d,transformOrigin:h,TransitionComponent:Z,transitionDuration:u,TransitionProps:G}),w=eT(v),y=B.exports.useCallback(()=>{if(C==="anchorPosition")return r;const T=Nc(o),V=(T&&T.nodeType===1?T:Ag(S.current).body).getBoundingClientRect();return{top:V.top+dZ(V,I.vertical),left:V.left+uZ(V,I.horizontal)}},[o,I.horizontal,I.vertical,r,C]),R=B.exports.useCallback(T=>({vertical:dZ(T,h.vertical),horizontal:uZ(T,h.horizontal)}),[h.horizontal,h.vertical]),x=B.exports.useCallback(T=>{const N={width:T.offsetWidth,height:T.offsetHeight},V=R(N);if(C==="none")return{top:null,left:null,transformOrigin:AZ(V)};const Y=y();let J=Y.top-V.vertical,P=Y.left-V.horizontal;const k=J+N.height,$=P+N.width,K=vn(Nc(o)),_=K.innerHeight-m,re=K.innerWidth-m;if(J<m){const ne=J-m;J-=ne,V.vertical+=ne}else if(k>_){const ne=k-_;J-=ne,V.vertical+=ne}if(P<m){const ne=P-m;P-=ne,V.horizontal+=ne}else if($>re){const ne=$-re;P-=ne,V.horizontal+=ne}return{top:`${Math.round(J)}px`,left:`${Math.round(P)}px`,transformOrigin:AZ(V)}},[o,C,y,R,m]),[H,F]=B.exports.useState(A),M=B.exports.useCallback(()=>{const T=S.current;if(!T)return;const N=x(T);N.top!==null&&(T.style.top=N.top),N.left!==null&&(T.style.left=N.left),T.style.transformOrigin=N.transformOrigin,F(!0)},[x]),j=(T,N)=>{p&&p(T,N),M()},O=()=>{F(!1)};B.exports.useEffect(()=>{A&&M()}),B.exports.useImperativeHandle(l,()=>A?{updatePosition:()=>{M()}}:null,[A,M]),B.exports.useEffect(()=>{if(!A)return;const T=Kr(()=>{M()}),N=vn(o);return N.addEventListener("resize",T),()=>{T.clear(),N.removeEventListener("resize",T)}},[o,A,M]);let z=u;u==="auto"&&!Z.muiSupportAuto&&(z=void 0);const D=c||(o?Ag(Nc(o)).body:void 0);return b(tT,X({BackdropProps:{invisible:!0},className:de(w.root,a),container:D,open:A,ref:g,ownerState:v},f,{children:b(Z,X({appear:!0,in:A,onEntering:j,onExited:O,timeout:z},G,{children:b(gT,X({elevation:s},d,{ref:W,className:de(w.paper,d.className)},H?void 0:{style:X({},d.style,{opacity:0})},{ownerState:v,children:i}))}))}))}),lT=nT;function oT(e){return Xe("MuiMenu",e)}ke("MuiMenu",["root","paper","list"]);const IT=["onEntering"],rT=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],CT={vertical:"top",horizontal:"right"},iT={vertical:"top",horizontal:"left"},aT=e=>{const{classes:t}=e;return Ye({root:["root"],paper:["paper"],list:["list"]},oT,t)},sT=Ce(lT,{shouldForwardProp:e=>Yn(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),cT=Ce(bs,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),dT=Ce(OM,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),uT=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiMenu"}),{autoFocus:l=!0,children:o,disableAutoFocusItem:I=!1,MenuListProps:r={},onClose:C,open:i,PaperProps:a={},PopoverClasses:c,transitionDuration:s="auto",TransitionProps:{onEntering:m}={},variant:A="selectedMenu"}=n,d=ce(n.TransitionProps,IT),h=ce(n,rT),Z=$l(),u=Z.direction==="rtl",p=X({},n,{autoFocus:l,disableAutoFocusItem:I,MenuListProps:r,onEntering:m,PaperProps:a,transitionDuration:s,TransitionProps:d,variant:A}),G=aT(p),f=l&&!I&&i,S=B.exports.useRef(null),W=(y,R)=>{S.current&&S.current.adjustStyleForScrollbar(y,Z),m&&m(y,R)},v=y=>{y.key==="Tab"&&(y.preventDefault(),C&&C(y,"tabKeyDown"))};let w=-1;return B.exports.Children.map(o,(y,R)=>{!B.exports.isValidElement(y)||y.props.disabled||(A==="selectedMenu"&&y.props.selected||w===-1)&&(w=R)}),b(sT,X({classes:c,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:u?"right":"left"},transformOrigin:u?CT:iT,PaperProps:X({component:cT},a,{classes:X({},a.classes,{root:G.paper})}),className:G.root,open:i,ref:g,transitionDuration:s,TransitionProps:X({onEntering:W},d),ownerState:p},h,{children:b(dT,X({onKeyDown:v,actions:S,autoFocus:l&&(w===-1||I),autoFocusItem:f,variant:A},r,{className:de(G.list,r.className),children:o}))}))}),AT=uT;function mT(e){return Xe("MuiNativeSelect",e)}const pT=ke("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),O0=pT,bT=["className","disabled","IconComponent","inputRef","variant"],ZT=e=>{const{classes:t,variant:g,disabled:n,multiple:l,open:o}=e,I={select:["select",g,n&&"disabled",l&&"multiple"],icon:["icon",`icon${oe(g)}`,o&&"iconOpen",n&&"disabled"]};return Ye(I,mT,t)},DS=({ownerState:e,theme:t})=>X({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":X({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${O0.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),hT=Ce("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Yn,overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.select,t[g.variant],{[`&.${O0.multiple}`]:t.multiple}]}})(DS),QS=({ownerState:e,theme:t})=>X({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${O0.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),GT=Ce("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.icon,g.variant&&t[`icon${oe(g.variant)}`],g.open&&t.iconOpen]}})(QS),fT=B.exports.forwardRef(function(t,g){const{className:n,disabled:l,IconComponent:o,inputRef:I,variant:r="standard"}=t,C=ce(t,bT),i=X({},t,{disabled:l,variant:r}),a=ZT(i);return U(B.exports.Fragment,{children:[b(hT,X({ownerState:i,className:de(a.select,n),disabled:l,ref:I||g},C)),t.multiple?null:b(GT,{as:o,ownerState:i,className:a.icon})]})}),BT=fT;var mZ;const yT=["children","classes","className","label","notched"],ST=Ce("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),WT=Ce("legend")(({ownerState:e,theme:t})=>X({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&X({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function VT(e){const{className:t,label:g,notched:n}=e,l=ce(e,yT),o=g!=null&&g!=="",I=X({},e,{notched:n,withLabel:o});return b(ST,X({"aria-hidden":!0,className:t,ownerState:I},l,{children:b(WT,{ownerState:I,children:o?b("span",{children:g}):mZ||(mZ=b("span",{className:"notranslate",children:"\u200B"}))})}))}const vT=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],RT=e=>{const{classes:t}=e,n=Ye({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},vE,t);return X({},t,n)},XT=Ce(fs,{shouldForwardProp:e=>Yn(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:hs})(({theme:e,ownerState:t})=>{const g=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return X({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Kn.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Kn.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:g}},[`&.${Kn.focused} .${Kn.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${Kn.error} .${Kn.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Kn.disabled} .${Kn.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&X({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),kT=Ce(VT,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),JT=Ce(Bs,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Gs})(({theme:e,ownerState:t})=>X({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),PS=B.exports.forwardRef(function(t,g){var n,l,o,I,r;const C=xe({props:t,name:"MuiOutlinedInput"}),{components:i={},fullWidth:a=!1,inputComponent:c="input",label:s,multiline:m=!1,notched:A,slots:d={},type:h="text"}=C,Z=ce(C,vT),u=RT(C),p=mI(),G=AI({props:C,muiFormControl:p,states:["required"]}),f=X({},C,{color:G.color||"primary",disabled:G.disabled,error:G.error,focused:G.focused,formControl:p,fullWidth:a,hiddenLabel:G.hiddenLabel,multiline:m,size:G.size,type:h}),S=(n=(l=d.root)!=null?l:i.Root)!=null?n:XT,W=(o=(I=d.input)!=null?I:i.Input)!=null?o:JT;return b(j0,X({slots:{root:S,input:W},renderSuffix:v=>b(kT,{ownerState:f,className:u.notchedOutline,label:s!=null&&s!==""&&G.required?r||(r=U(B.exports.Fragment,{children:[s,"\xA0","*"]})):s,notched:typeof A<"u"?A:Boolean(v.startAdornment||v.filled||v.focused)}),fullWidth:a,inputComponent:c,multiline:m,ref:g,type:h},Z,{classes:X({},u,{notchedOutline:null})}))});PS.muiName="Input";const jS=PS;function YT(e){return Xe("MuiSelect",e)}const xT=ke("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),TC=xT;var pZ;const HT=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],wT=Ce("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[{[`&.${TC.select}`]:t.select},{[`&.${TC.select}`]:t[g.variant]},{[`&.${TC.multiple}`]:t.multiple}]}})(DS,{[`&.${TC.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),NT=Ce("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.icon,g.variant&&t[`icon${oe(g.variant)}`],g.open&&t.iconOpen]}})(QS),FT=Ce("input",{shouldForwardProp:e=>FF(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function bZ(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function KT(e){return e==null||typeof e=="string"&&!e.trim()}const ET=e=>{const{classes:t,variant:g,disabled:n,multiple:l,open:o}=e,I={select:["select",g,n&&"disabled",l&&"multiple"],icon:["icon",`icon${oe(g)}`,o&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return Ye(I,YT,t)},zT=B.exports.forwardRef(function(t,g){const{"aria-describedby":n,"aria-label":l,autoFocus:o,autoWidth:I,children:r,className:C,defaultOpen:i,defaultValue:a,disabled:c,displayEmpty:s,IconComponent:m,inputRef:A,labelId:d,MenuProps:h={},multiple:Z,name:u,onBlur:p,onChange:G,onClose:f,onFocus:S,onOpen:W,open:v,readOnly:w,renderValue:y,SelectDisplayProps:R={},tabIndex:x,value:H,variant:F="standard"}=t,M=ce(t,HT),[j,O]=Uu({controlled:H,default:a,name:"Select"}),[z,D]=Uu({controlled:v,default:i,name:"Select"}),T=B.exports.useRef(null),N=B.exports.useRef(null),[V,Y]=B.exports.useState(null),{current:J}=B.exports.useRef(v!=null),[P,k]=B.exports.useState(),$=Ut(g,A),K=B.exports.useCallback(Q=>{N.current=Q,Q&&Y(Q)},[]);B.exports.useImperativeHandle($,()=>({focus:()=>{N.current.focus()},node:T.current,value:j}),[j]),B.exports.useEffect(()=>{i&&z&&V&&!J&&(k(I?null:V.clientWidth),N.current.focus())},[V,I]),B.exports.useEffect(()=>{o&&N.current.focus()},[o]),B.exports.useEffect(()=>{if(!d)return;const Q=Ag(N.current).getElementById(d);if(Q){const ee=()=>{getSelection().isCollapsed&&N.current.focus()};return Q.addEventListener("click",ee),()=>{Q.removeEventListener("click",ee)}}},[d]);const _=(Q,ee)=>{Q?W&&W(ee):f&&f(ee),J||(k(I?null:V.clientWidth),D(Q))},re=Q=>{Q.button===0&&(Q.preventDefault(),N.current.focus(),_(!0,Q))},ne=Q=>{_(!1,Q)},ge=B.exports.Children.toArray(r),ue=Q=>{const ee=ge.map(fe=>fe.props.value).indexOf(Q.target.value);if(ee===-1)return;const Ge=ge[ee];O(Ge.props.value),G&&G(Q,Ge)},ye=Q=>ee=>{let Ge;if(!!ee.currentTarget.hasAttribute("tabindex")){if(Z){Ge=Array.isArray(j)?j.slice():[];const fe=j.indexOf(Q.props.value);fe===-1?Ge.push(Q.props.value):Ge.splice(fe,1)}else Ge=Q.props.value;if(Q.props.onClick&&Q.props.onClick(ee),j!==Ge&&(O(Ge),G)){const fe=ee.nativeEvent||ee,De=new fe.constructor(fe.type,fe);Object.defineProperty(De,"target",{writable:!0,value:{value:Ge,name:u}}),G(De,Q)}Z||_(!1,ee)}},he=Q=>{w||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Q.key)!==-1&&(Q.preventDefault(),_(!0,Q))},Ve=V!==null&&z,Be=Q=>{!Ve&&p&&(Object.defineProperty(Q,"target",{writable:!0,value:{value:j,name:u}}),p(Q))};delete M["aria-invalid"];let Se,yt;const He=[];let Je=!1;(P0({value:j})||s)&&(y?Se=y(j):Je=!0);const _e=ge.map((Q,ee,Ge)=>{if(!B.exports.isValidElement(Q))return null;let fe;if(Z){if(!Array.isArray(j))throw new Error(cl(2));fe=j.some(ct=>bZ(ct,Q.props.value)),fe&&Je&&He.push(Q.props.children)}else fe=bZ(j,Q.props.value),fe&&Je&&(yt=Q.props.children);if(Q.props.value===void 0)return B.exports.cloneElement(Q,{"aria-readonly":!0,role:"option"});const De=()=>{if(j)return fe;const ct=Ge.find(lg=>lg.props.value!==void 0&&lg.props.disabled!==!0);return Q===ct?!0:fe};return B.exports.cloneElement(Q,{"aria-selected":fe?"true":"false",onClick:ye(Q),onKeyUp:ct=>{ct.key===" "&&ct.preventDefault(),Q.props.onKeyUp&&Q.props.onKeyUp(ct)},role:"option",selected:Ge[0].props.value===void 0||Ge[0].props.disabled===!0?De():fe,value:void 0,"data-value":Q.props.value})});Je&&(Z?He.length===0?Se=null:Se=He.reduce((Q,ee,Ge)=>(Q.push(ee),Ge<He.length-1&&Q.push(", "),Q),[]):Se=yt);let Le=P;!I&&J&&V&&(Le=V.clientWidth);let Ae;typeof x<"u"?Ae=x:Ae=c?null:0;const we=R.id||(u?`mui-component-select-${u}`:void 0),Ct=X({},t,{variant:F,value:j,open:Ve}),it=ET(Ct);return U(B.exports.Fragment,{children:[b(wT,X({ref:K,tabIndex:Ae,role:"button","aria-disabled":c?"true":void 0,"aria-expanded":Ve?"true":"false","aria-haspopup":"listbox","aria-label":l,"aria-labelledby":[d,we].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:he,onMouseDown:c||w?null:re,onBlur:Be,onFocus:S},R,{ownerState:Ct,className:de(R.className,it.select,C),id:we,children:KT(Se)?pZ||(pZ=b("span",{className:"notranslate",children:"\u200B"})):Se})),b(FT,X({value:Array.isArray(j)?j.join(","):j,name:u,ref:T,"aria-hidden":!0,onChange:ue,tabIndex:-1,disabled:c,className:it.nativeInput,autoFocus:o,ownerState:Ct},M)),b(NT,{as:m,className:it.icon,ownerState:Ct}),b(AT,X({id:`menu-${u||""}`,anchorEl:V,open:Ve,onClose:ne,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},h,{MenuListProps:X({"aria-labelledby":d,role:"listbox",disableListWrap:!0},h.MenuListProps),PaperProps:X({},h.PaperProps,{style:X({minWidth:Le},h.PaperProps!=null?h.PaperProps.style:null)}),children:_e}))]})}),MT=zT;var ZZ,hZ;const TT=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],LT=e=>{const{classes:t}=e;return t},_0={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Yn(e)&&e!=="variant",slot:"Root"},UT=Ce(MS,_0)(""),DT=Ce(jS,_0)(""),QT=Ce(FS,_0)(""),OS=B.exports.forwardRef(function(t,g){const n=xe({name:"MuiSelect",props:t}),{autoWidth:l=!1,children:o,classes:I={},className:r,defaultOpen:C=!1,displayEmpty:i=!1,IconComponent:a=JE,id:c,input:s,inputProps:m,label:A,labelId:d,MenuProps:h,multiple:Z=!1,native:u=!1,onClose:p,onOpen:G,open:f,renderValue:S,SelectDisplayProps:W,variant:v="outlined"}=n,w=ce(n,TT),y=u?BT:MT,R=mI(),H=AI({props:n,muiFormControl:R,states:["variant"]}).variant||v,F=s||{standard:ZZ||(ZZ=b(UT,{})),outlined:b(DT,{label:A}),filled:hZ||(hZ=b(QT,{}))}[H],M=X({},n,{variant:H,classes:I}),j=LT(M),O=Ut(g,F.ref);return b(B.exports.Fragment,{children:B.exports.cloneElement(F,X({inputComponent:y,inputProps:X({children:o,IconComponent:a,variant:H,type:void 0,multiple:Z},u?{id:c}:{autoWidth:l,defaultOpen:C,displayEmpty:i,labelId:d,MenuProps:h,onClose:p,onOpen:G,open:f,renderValue:S,SelectDisplayProps:X({id:c},W)},m,{classes:m?ug(j,m.classes):j},s?s.props.inputProps:{})},Z&&u&&H==="outlined"?{notched:!0}:{},{ref:O,className:de(F.props.className,r)},!s&&{variant:H},w))})});OS.muiName="Select";const PT=OS;function jT(e){return Xe("MuiTab",e)}const OT=ke("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),fl=OT,_T=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],$T=e=>{const{classes:t,textColor:g,fullWidth:n,wrapped:l,icon:o,label:I,selected:r,disabled:C}=e,i={root:["root",o&&I&&"labelIcon",`textColor${oe(g)}`,n&&"fullWidth",l&&"wrapped",r&&"selected",C&&"disabled"],iconWrapper:["iconWrapper"]};return Ye(i,jT,t)},qT=Ce(Rn,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.label&&g.icon&&t.labelIcon,t[`textColor${oe(g.textColor)}`],g.fullWidth&&t.fullWidth,g.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>X({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${fl.iconWrapper}`]:X({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${fl.selected}`]:{opacity:1},[`&.${fl.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${fl.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${fl.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${fl.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${fl.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),eL=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTab"}),{className:l,disabled:o=!1,disableFocusRipple:I=!1,fullWidth:r,icon:C,iconPosition:i="top",indicator:a,label:c,onChange:s,onClick:m,onFocus:A,selected:d,selectionFollowsFocus:h,textColor:Z="inherit",value:u,wrapped:p=!1}=n,G=ce(n,_T),f=X({},n,{disabled:o,disableFocusRipple:I,selected:d,icon:!!C,iconPosition:i,label:!!c,fullWidth:r,textColor:Z,wrapped:p}),S=$T(f),W=C&&c&&B.exports.isValidElement(C)?B.exports.cloneElement(C,{className:de(S.iconWrapper,C.props.className)}):C,v=y=>{!d&&s&&s(y,u),m&&m(y)},w=y=>{h&&!d&&s&&s(y,u),A&&A(y)};return U(qT,X({focusRipple:!I,className:de(S.root,l),ref:g,role:"tab","aria-selected":d,disabled:o,onClick:v,onFocus:w,ownerState:f,tabIndex:d?0:-1},G,{children:[i==="top"||i==="start"?U(B.exports.Fragment,{children:[W,c]}):U(B.exports.Fragment,{children:[c,W]}),a]}))}),Fc=eL,tL=B.exports.createContext(),_S=tL;function gL(e){return Xe("MuiTable",e)}ke("MuiTable",["root","stickyHeader"]);const nL=["className","component","padding","size","stickyHeader"],lL=e=>{const{classes:t,stickyHeader:g}=e;return Ye({root:["root",g&&"stickyHeader"]},gL,t)},oL=Ce("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>X({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":X({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),GZ="table",IL=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTable"}),{className:l,component:o=GZ,padding:I="normal",size:r="medium",stickyHeader:C=!1}=n,i=ce(n,nL),a=X({},n,{component:o,padding:I,size:r,stickyHeader:C}),c=lL(a),s=B.exports.useMemo(()=>({padding:I,size:r,stickyHeader:C}),[I,r,C]);return b(_S.Provider,{value:s,children:b(oL,X({as:o,role:o===GZ?null:"table",ref:g,className:de(c.root,l),ownerState:a},i))})}),$S=IL,rL=B.exports.createContext(),vs=rL;function CL(e){return Xe("MuiTableBody",e)}ke("MuiTableBody",["root"]);const iL=["className","component"],aL=e=>{const{classes:t}=e;return Ye({root:["root"]},CL,t)},sL=Ce("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),cL={variant:"body"},fZ="tbody",dL=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTableBody"}),{className:l,component:o=fZ}=n,I=ce(n,iL),r=X({},n,{component:o}),C=aL(r);return b(vs.Provider,{value:cL,children:b(sL,X({className:de(C.root,l),as:o,ref:g,role:o===fZ?null:"rowgroup",ownerState:r},I))})}),qS=dL;function uL(e){return Xe("MuiTableCell",e)}const AL=ke("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),mL=AL,pL=["align","className","component","padding","scope","size","sortDirection","variant"],bL=e=>{const{classes:t,variant:g,align:n,padding:l,size:o,stickyHeader:I}=e,r={root:["root",g,I&&"stickyHeader",n!=="inherit"&&`align${oe(n)}`,l!=="normal"&&`padding${oe(l)}`,`size${oe(o)}`]};return Ye(r,uL,t)},ZL=Ce("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[g.variant],t[`size${oe(g.size)}`],g.padding!=="normal"&&t[`padding${oe(g.padding)}`],g.align!=="inherit"&&t[`align${oe(g.align)}`],g.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>X({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?$i(Oe(e.palette.divider,1),.88):_i(Oe(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${mL.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),hL=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTableCell"}),{align:l="inherit",className:o,component:I,padding:r,scope:C,size:i,sortDirection:a,variant:c}=n,s=ce(n,pL),m=B.exports.useContext(_S),A=B.exports.useContext(vs),d=A&&A.variant==="head";let h;I?h=I:h=d?"th":"td";let Z=C;!Z&&d&&(Z="col");const u=c||A&&A.variant,p=X({},n,{align:l,component:h,padding:r||(m&&m.padding?m.padding:"normal"),size:i||(m&&m.size?m.size:"medium"),sortDirection:a,stickyHeader:u==="head"&&m&&m.stickyHeader,variant:u}),G=bL(p);let f=null;return a&&(f=a==="asc"?"ascending":"descending"),b(ZL,X({as:h,ref:g,className:de(G.root,o),"aria-sort":f,scope:Z,ownerState:p},s))}),gn=hL;function GL(e){return Xe("MuiTableHead",e)}ke("MuiTableHead",["root"]);const fL=["className","component"],BL=e=>{const{classes:t}=e;return Ye({root:["root"]},GL,t)},yL=Ce("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),SL={variant:"head"},BZ="thead",WL=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTableHead"}),{className:l,component:o=BZ}=n,I=ce(n,fL),r=X({},n,{component:o}),C=BL(r);return b(vs.Provider,{value:SL,children:b(yL,X({as:o,className:de(C.root,l),ref:g,role:o===BZ?null:"rowgroup",ownerState:r},I))})}),eW=WL,VL=xn(b("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),vL=xn(b("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function RL(e){return Xe("MuiTableRow",e)}const XL=ke("MuiTableRow",["root","selected","hover","head","footer"]),yZ=XL,kL=["className","component","hover","selected"],JL=e=>{const{classes:t,selected:g,hover:n,head:l,footer:o}=e;return Ye({root:["root",g&&"selected",n&&"hover",l&&"head",o&&"footer"]},RL,t)},YL=Ce("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.head&&t.head,g.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${yZ.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${yZ.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Oe(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Oe(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),SZ="tr",xL=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTableRow"}),{className:l,component:o=SZ,hover:I=!1,selected:r=!1}=n,C=ce(n,kL),i=B.exports.useContext(vs),a=X({},n,{component:o,hover:I,selected:r,head:i&&i.variant==="head",footer:i&&i.variant==="footer"}),c=JL(a);return b(YL,X({as:o,ref:g,className:de(c.root,l),role:o===SZ?null:"row",ownerState:a},C))}),ea=xL;function HL(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function wL(e,t,g,n={},l=()=>{}){const{ease:o=HL,duration:I=300}=n;let r=null;const C=t[e];let i=!1;const a=()=>{i=!0},c=s=>{if(i){l(new Error("Animation cancelled"));return}r===null&&(r=s);const m=Math.min(1,(s-r)/I);if(t[e]=o(m)*(g-C)+C,m>=1){requestAnimationFrame(()=>{l(null)});return}requestAnimationFrame(c)};return C===g?(l(new Error("Element already at target position")),a):(requestAnimationFrame(c),a)}const NL=["onChange"],FL={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function KL(e){const{onChange:t}=e,g=ce(e,NL),n=B.exports.useRef(),l=B.exports.useRef(null),o=()=>{n.current=l.current.offsetHeight-l.current.clientHeight};return B.exports.useEffect(()=>{const I=Kr(()=>{const C=n.current;o(),C!==n.current&&t(n.current)}),r=vn(l.current);return r.addEventListener("resize",I),()=>{I.clear(),r.removeEventListener("resize",I)}},[t]),B.exports.useEffect(()=>{o(),t(n.current)},[t]),b("div",X({style:FL,ref:l},g))}function EL(e){return Xe("MuiTabScrollButton",e)}const zL=ke("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),ML=zL;var WZ,VZ;const TL=["className","direction","orientation","disabled"],LL=e=>{const{classes:t,orientation:g,disabled:n}=e;return Ye({root:["root",g,n&&"disabled"]},EL,t)},UL=Ce(Rn,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.orientation&&t[g.orientation]]}})(({ownerState:e})=>X({width:40,flexShrink:0,opacity:.8,[`&.${ML.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),DL=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTabScrollButton"}),{className:l,direction:o}=n,I=ce(n,TL),C=$l().direction==="rtl",i=X({isRtl:C},n),a=LL(i);return b(UL,X({component:"div",className:de(a.root,l),ref:g,role:null,ownerState:i,tabIndex:null},I,{children:o==="left"?WZ||(WZ=b(VL,{fontSize:"small"})):VZ||(VZ=b(vL,{fontSize:"small"}))}))}),QL=DL;function PL(e){return Xe("MuiTabs",e)}const jL=ke("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Kc=jL,OL=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],vZ=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,RZ=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,LC=(e,t,g)=>{let n=!1,l=g(e,t);for(;l;){if(l===e.firstChild){if(n)return;n=!0}const o=l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||o)l=g(e,l);else{l.focus();return}}},_L=e=>{const{vertical:t,fixed:g,hideScrollbar:n,scrollableX:l,scrollableY:o,centered:I,scrollButtonsHideMobile:r,classes:C}=e;return Ye({root:["root",t&&"vertical"],scroller:["scroller",g&&"fixed",n&&"hideScrollbar",l&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",I&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",r&&"scrollButtonsHideMobile"],scrollableX:[l&&"scrollableX"],hideScrollbar:[n&&"hideScrollbar"]},PL,C)},$L=Ce("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[{[`& .${Kc.scrollButtons}`]:t.scrollButtons},{[`& .${Kc.scrollButtons}`]:g.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,g.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>X({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${Kc.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),qL=Ce("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.scroller,g.fixed&&t.fixed,g.hideScrollbar&&t.hideScrollbar,g.scrollableX&&t.scrollableX,g.scrollableY&&t.scrollableY]}})(({ownerState:e})=>X({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),eU=Ce("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.flexContainer,g.vertical&&t.flexContainerVertical,g.centered&&t.centered]}})(({ownerState:e})=>X({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),tU=Ce("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>X({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),gU=Ce(KL,{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),XZ={},nU=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTabs"}),l=$l(),o=l.direction==="rtl",{"aria-label":I,"aria-labelledby":r,action:C,centered:i=!1,children:a,className:c,component:s="div",allowScrollButtonsMobile:m=!1,indicatorColor:A="primary",onChange:d,orientation:h="horizontal",ScrollButtonComponent:Z=QL,scrollButtons:u="auto",selectionFollowsFocus:p,TabIndicatorProps:G={},TabScrollButtonProps:f={},textColor:S="primary",value:W,variant:v="standard",visibleScrollbar:w=!1}=n,y=ce(n,OL),R=v==="scrollable",x=h==="vertical",H=x?"scrollTop":"scrollLeft",F=x?"top":"left",M=x?"bottom":"right",j=x?"clientHeight":"clientWidth",O=x?"height":"width",z=X({},n,{component:s,allowScrollButtonsMobile:m,indicatorColor:A,orientation:h,vertical:x,scrollButtons:u,textColor:S,variant:v,visibleScrollbar:w,fixed:!R,hideScrollbar:R&&!w,scrollableX:R&&!x,scrollableY:R&&x,centered:i&&!R,scrollButtonsHideMobile:!m}),D=_L(z),[T,N]=B.exports.useState(!1),[V,Y]=B.exports.useState(XZ),[J,P]=B.exports.useState({start:!1,end:!1}),[k,$]=B.exports.useState({overflow:"hidden",scrollbarWidth:0}),K=new Map,_=B.exports.useRef(null),re=B.exports.useRef(null),ne=()=>{const Q=_.current;let ee;if(Q){const fe=Q.getBoundingClientRect();ee={clientWidth:Q.clientWidth,scrollLeft:Q.scrollLeft,scrollTop:Q.scrollTop,scrollLeftNormalized:vb(Q,l.direction),scrollWidth:Q.scrollWidth,top:fe.top,bottom:fe.bottom,left:fe.left,right:fe.right}}let Ge;if(Q&&W!==!1){const fe=re.current.children;if(fe.length>0){const De=fe[K.get(W)];Ge=De?De.getBoundingClientRect():null}}return{tabsMeta:ee,tabMeta:Ge}},ge=hn(()=>{const{tabsMeta:Q,tabMeta:ee}=ne();let Ge=0,fe;if(x)fe="top",ee&&Q&&(Ge=ee.top-Q.top+Q.scrollTop);else if(fe=o?"right":"left",ee&&Q){const ct=o?Q.scrollLeftNormalized+Q.clientWidth-Q.scrollWidth:Q.scrollLeft;Ge=(o?-1:1)*(ee[fe]-Q[fe]+ct)}const De={[fe]:Ge,[O]:ee?ee[O]:0};if(isNaN(V[fe])||isNaN(V[O]))Y(De);else{const ct=Math.abs(V[fe]-De[fe]),lg=Math.abs(V[O]-De[O]);(ct>=1||lg>=1)&&Y(De)}}),ue=(Q,{animation:ee=!0}={})=>{ee?wL(H,_.current,Q,{duration:l.transitions.duration.standard}):_.current[H]=Q},ye=Q=>{let ee=_.current[H];x?ee+=Q:(ee+=Q*(o?-1:1),ee*=o&&nS()==="reverse"?-1:1),ue(ee)},he=()=>{const Q=_.current[j];let ee=0;const Ge=Array.from(re.current.children);for(let fe=0;fe<Ge.length;fe+=1){const De=Ge[fe];if(ee+De[j]>Q){fe===0&&(ee=Q);break}ee+=De[j]}return ee},Ve=()=>{ye(-1*he())},Be=()=>{ye(he())},Se=B.exports.useCallback(Q=>{$({overflow:null,scrollbarWidth:Q})},[]),yt=()=>{const Q={};Q.scrollbarSizeListener=R?b(gU,{onChange:Se,className:de(D.scrollableX,D.hideScrollbar)}):null;const ee=J.start||J.end,Ge=R&&(u==="auto"&&ee||u===!0);return Q.scrollButtonStart=Ge?b(Z,X({orientation:h,direction:o?"right":"left",onClick:Ve,disabled:!J.start},f,{className:de(D.scrollButtons,f.className)})):null,Q.scrollButtonEnd=Ge?b(Z,X({orientation:h,direction:o?"left":"right",onClick:Be,disabled:!J.end},f,{className:de(D.scrollButtons,f.className)})):null,Q},He=hn(Q=>{const{tabsMeta:ee,tabMeta:Ge}=ne();if(!(!Ge||!ee)){if(Ge[F]<ee[F]){const fe=ee[H]+(Ge[F]-ee[F]);ue(fe,{animation:Q})}else if(Ge[M]>ee[M]){const fe=ee[H]+(Ge[M]-ee[M]);ue(fe,{animation:Q})}}}),Je=hn(()=>{if(R&&u!==!1){const{scrollTop:Q,scrollHeight:ee,clientHeight:Ge,scrollWidth:fe,clientWidth:De}=_.current;let ct,lg;if(x)ct=Q>1,lg=Q<ee-Ge-1;else{const L=vb(_.current,l.direction);ct=o?L<fe-De-1:L>1,lg=o?L>1:L<fe-De-1}(ct!==J.start||lg!==J.end)&&P({start:ct,end:lg})}});B.exports.useEffect(()=>{const Q=Kr(()=>{_.current&&(ge(),Je())}),ee=vn(_.current);ee.addEventListener("resize",Q);let Ge;return typeof ResizeObserver<"u"&&(Ge=new ResizeObserver(Q),Array.from(re.current.children).forEach(fe=>{Ge.observe(fe)})),()=>{Q.clear(),ee.removeEventListener("resize",Q),Ge&&Ge.disconnect()}},[ge,Je]);const _e=B.exports.useMemo(()=>Kr(()=>{Je()}),[Je]);B.exports.useEffect(()=>()=>{_e.clear()},[_e]),B.exports.useEffect(()=>{N(!0)},[]),B.exports.useEffect(()=>{ge(),Je()}),B.exports.useEffect(()=>{He(XZ!==V)},[He,V]),B.exports.useImperativeHandle(C,()=>({updateIndicator:ge,updateScrollButtons:Je}),[ge,Je]);const Le=b(tU,X({},G,{className:de(D.indicator,G.className),ownerState:z,style:X({},V,G.style)}));let Ae=0;const we=B.exports.Children.map(a,Q=>{if(!B.exports.isValidElement(Q))return null;const ee=Q.props.value===void 0?Ae:Q.props.value;K.set(ee,Ae);const Ge=ee===W;return Ae+=1,B.exports.cloneElement(Q,X({fullWidth:v==="fullWidth",indicator:Ge&&!T&&Le,selected:Ge,selectionFollowsFocus:p,onChange:d,textColor:S,value:ee},Ae===1&&W===!1&&!Q.props.tabIndex?{tabIndex:0}:{}))}),Ct=Q=>{const ee=re.current,Ge=Ag(ee).activeElement;if(Ge.getAttribute("role")!=="tab")return;let De=h==="horizontal"?"ArrowLeft":"ArrowUp",ct=h==="horizontal"?"ArrowRight":"ArrowDown";switch(h==="horizontal"&&o&&(De="ArrowRight",ct="ArrowLeft"),Q.key){case De:Q.preventDefault(),LC(ee,Ge,RZ);break;case ct:Q.preventDefault(),LC(ee,Ge,vZ);break;case"Home":Q.preventDefault(),LC(ee,null,vZ);break;case"End":Q.preventDefault(),LC(ee,null,RZ);break}},it=yt();return U($L,X({className:de(D.root,c),ownerState:z,ref:g,as:s},y,{children:[it.scrollButtonStart,it.scrollbarSizeListener,U(qL,{className:D.scroller,ownerState:z,style:{overflow:k.overflow,[x?`margin${o?"Left":"Right"}`:"marginBottom"]:w?void 0:-k.scrollbarWidth},ref:_,onScroll:_e,children:[b(eU,{"aria-label":I,"aria-labelledby":r,"aria-orientation":h==="vertical"?"vertical":null,className:D.flexContainer,ownerState:z,onKeyDown:Ct,ref:re,role:"tablist",children:we}),T&&Le]}),it.scrollButtonEnd]}))}),lU=nU;function oU(e){return Xe("MuiTextField",e)}ke("MuiTextField",["root"]);const IU=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],rU={standard:MS,filled:FS,outlined:jS},CU=e=>{const{classes:t}=e;return Ye({root:["root"]},oU,t)},iU=Ce(Hz,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),aU=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiTextField"}),{autoComplete:l,autoFocus:o=!1,children:I,className:r,color:C="primary",defaultValue:i,disabled:a=!1,error:c=!1,FormHelperTextProps:s,fullWidth:m=!1,helperText:A,id:d,InputLabelProps:h,inputProps:Z,InputProps:u,inputRef:p,label:G,maxRows:f,minRows:S,multiline:W=!1,name:v,onBlur:w,onChange:y,onFocus:R,placeholder:x,required:H=!1,rows:F,select:M=!1,SelectProps:j,type:O,value:z,variant:D="outlined"}=n,T=ce(n,IU),N=X({},n,{autoFocus:o,color:C,disabled:a,error:c,fullWidth:m,multiline:W,required:H,select:M,variant:D}),V=CU(N),Y={};D==="outlined"&&(h&&typeof h.shrink<"u"&&(Y.notched=h.shrink),Y.label=G),M&&((!j||!j.native)&&(Y.id=void 0),Y["aria-describedby"]=void 0);const J=xN(d),P=A&&J?`${J}-helper-text`:void 0,k=G&&J?`${J}-label`:void 0,$=rU[D],K=b($,X({"aria-describedby":P,autoComplete:l,autoFocus:o,defaultValue:i,fullWidth:m,multiline:W,name:v,rows:F,maxRows:f,minRows:S,type:O,value:z,id:J,inputRef:p,onBlur:w,onChange:y,onFocus:R,placeholder:x,inputProps:Z},Y,u));return U(iU,X({className:de(V.root,r),disabled:a,error:c,fullWidth:m,ref:g,required:H,color:C,variant:D,ownerState:N},T,{children:[G!=null&&G!==""&&b(SM,X({htmlFor:J,id:k},h,{children:G})),M?b(PT,X({"aria-describedby":P,id:J,labelId:k,value:z,input:K},j,{children:I})):K,A&&b(Mz,X({id:P},s,{children:A}))]}))}),Ec=aU;function sU(e){return Xe("MuiToggleButton",e)}const cU=ke("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),kZ=cU,dU=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],uU=e=>{const{classes:t,fullWidth:g,selected:n,disabled:l,size:o,color:I}=e,r={root:["root",n&&"selected",l&&"disabled",g&&"fullWidth",`size${oe(o)}`,I]};return Ye(r,sU,t)},AU=Ce(Rn,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[`size${oe(g.size)}`]]}})(({theme:e,ownerState:t})=>{let g=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,n;return e.vars&&(g=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,n=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),X({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${kZ.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Oe(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${kZ.selected}`]:{color:g,backgroundColor:e.vars?`rgba(${n} / ${e.vars.palette.action.selectedOpacity})`:Oe(g,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${n} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Oe(g,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${n} / ${e.vars.palette.action.selectedOpacity})`:Oe(g,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),mU=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiToggleButton"}),{children:l,className:o,color:I="standard",disabled:r=!1,disableFocusRipple:C=!1,fullWidth:i=!1,onChange:a,onClick:c,selected:s,size:m="medium",value:A}=n,d=ce(n,dU),h=X({},n,{color:I,disabled:r,disableFocusRipple:C,fullWidth:i,size:m}),Z=uU(h),u=p=>{c&&(c(p,A),p.defaultPrevented)||a&&a(p,A)};return b(AU,X({className:de(Z.root,o),disabled:r,focusRipple:!C,ref:g,onClick:u,onChange:a,value:A,ownerState:h,"aria-pressed":s},d,{children:l}))}),JZ=mU;function pU(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}function bU(e){return Xe("MuiToggleButtonGroup",e)}const ZU=ke("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]),cn=ZU,hU=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],GU=e=>{const{classes:t,orientation:g,fullWidth:n,disabled:l}=e,o={root:["root",g==="vertical"&&"vertical",n&&"fullWidth"],grouped:["grouped",`grouped${oe(g)}`,l&&"disabled"]};return Ye(o,bU,t)},fU=Ce("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[{[`& .${cn.grouped}`]:t.grouped},{[`& .${cn.grouped}`]:t[`grouped${oe(g.orientation)}`]},t.root,g.orientation==="vertical"&&t.vertical,g.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>X({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${cn.grouped}`]:X({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${cn.selected} + .${cn.grouped}.${cn.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${cn.selected} + .${cn.grouped}.${cn.selected}`]:{borderTop:0,marginTop:0}})})),BU=B.exports.forwardRef(function(t,g){const n=xe({props:t,name:"MuiToggleButtonGroup"}),{children:l,className:o,color:I="standard",disabled:r=!1,exclusive:C=!1,fullWidth:i=!1,onChange:a,orientation:c="horizontal",size:s="medium",value:m}=n,A=ce(n,hU),d=X({},n,{disabled:r,fullWidth:i,orientation:c,size:s}),h=GU(d),Z=(p,G)=>{if(!a)return;const f=m&&m.indexOf(G);let S;m&&f>=0?(S=m.slice(),S.splice(f,1)):S=m?m.concat(G):[G],a(p,S)},u=(p,G)=>{!a||a(p,m===G?null:G)};return b(fU,X({role:"group",className:de(h.root,o),ref:g,ownerState:d},A,{children:B.exports.Children.map(l,p=>B.exports.isValidElement(p)?B.exports.cloneElement(p,{className:de(h.grouped,p.props.className),onChange:C?u:Z,selected:p.props.selected===void 0?pU(p.props.value,m):p.props.selected,size:p.props.size||s,fullWidth:i,color:p.props.color||I,disabled:p.props.disabled||r}):null)}))}),yU=BU,Kg=py({key:"authState",default:null});function tW(e,t){return function(){return e.apply(t,arguments)}}const{toString:gW}=Object.prototype,{getPrototypeOf:$0}=Object,q0=(e=>t=>{const g=gW.call(t);return e[g]||(e[g]=g.slice(8,-1).toLowerCase())})(Object.create(null)),wn=e=>(e=e.toLowerCase(),t=>q0(t)===e),Rs=e=>t=>typeof t===e,{isArray:pI}=Array,zr=Rs("undefined");function SU(e){return e!==null&&!zr(e)&&e.constructor!==null&&!zr(e.constructor)&&Dl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const nW=wn("ArrayBuffer");function WU(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&nW(e.buffer),t}const VU=Rs("string"),Dl=Rs("function"),lW=Rs("number"),em=e=>e!==null&&typeof e=="object",vU=e=>e===!0||e===!1,ui=e=>{if(q0(e)!=="object")return!1;const t=$0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},RU=wn("Date"),XU=wn("File"),kU=wn("Blob"),JU=wn("FileList"),YU=e=>em(e)&&Dl(e.pipe),xU=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||gW.call(e)===t||Dl(e.toString)&&e.toString()===t)},HU=wn("URLSearchParams"),wU=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function aC(e,t,{allOwnKeys:g=!1}={}){if(e===null||typeof e>"u")return;let n,l;if(typeof e!="object"&&(e=[e]),pI(e))for(n=0,l=e.length;n<l;n++)t.call(null,e[n],n,e);else{const o=g?Object.getOwnPropertyNames(e):Object.keys(e),I=o.length;let r;for(n=0;n<I;n++)r=o[n],t.call(null,e[r],r,e)}}function oW(e,t){t=t.toLowerCase();const g=Object.keys(e);let n=g.length,l;for(;n-- >0;)if(l=g[n],t===l.toLowerCase())return l;return null}const IW=typeof self>"u"?typeof global>"u"?globalThis:global:self,rW=e=>!zr(e)&&e!==IW;function qu(){const{caseless:e}=rW(this)&&this||{},t={},g=(n,l)=>{const o=e&&oW(t,l)||l;ui(t[o])&&ui(n)?t[o]=qu(t[o],n):ui(n)?t[o]=qu({},n):pI(n)?t[o]=n.slice():t[o]=n};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&aC(arguments[n],g);return t}const NU=(e,t,g,{allOwnKeys:n}={})=>(aC(t,(l,o)=>{g&&Dl(l)?e[o]=tW(l,g):e[o]=l},{allOwnKeys:n}),e),FU=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),KU=(e,t,g,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),g&&Object.assign(e.prototype,g)},EU=(e,t,g,n)=>{let l,o,I;const r={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),o=l.length;o-- >0;)I=l[o],(!n||n(I,e,t))&&!r[I]&&(t[I]=e[I],r[I]=!0);e=g!==!1&&$0(e)}while(e&&(!g||g(e,t))&&e!==Object.prototype);return t},zU=(e,t,g)=>{e=String(e),(g===void 0||g>e.length)&&(g=e.length),g-=t.length;const n=e.indexOf(t,g);return n!==-1&&n===g},MU=e=>{if(!e)return null;if(pI(e))return e;let t=e.length;if(!lW(t))return null;const g=new Array(t);for(;t-- >0;)g[t]=e[t];return g},TU=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&$0(Uint8Array)),LU=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let l;for(;(l=n.next())&&!l.done;){const o=l.value;t.call(e,o[0],o[1])}},UU=(e,t)=>{let g;const n=[];for(;(g=e.exec(t))!==null;)n.push(g);return n},DU=wn("HTMLFormElement"),QU=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(g,n,l){return n.toUpperCase()+l}),YZ=(({hasOwnProperty:e})=>(t,g)=>e.call(t,g))(Object.prototype),PU=wn("RegExp"),CW=(e,t)=>{const g=Object.getOwnPropertyDescriptors(e),n={};aC(g,(l,o)=>{t(l,o,e)!==!1&&(n[o]=l)}),Object.defineProperties(e,n)},jU=e=>{CW(e,(t,g)=>{if(Dl(e)&&["arguments","caller","callee"].indexOf(g)!==-1)return!1;const n=e[g];if(!!Dl(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+g+"'")})}})},OU=(e,t)=>{const g={},n=l=>{l.forEach(o=>{g[o]=!0})};return pI(e)?n(e):n(String(e).split(t)),g},_U=()=>{},$U=(e,t)=>(e=+e,Number.isFinite(e)?e:t),qU=e=>{const t=new Array(10),g=(n,l)=>{if(em(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[l]=n;const o=pI(n)?[]:{};return aC(n,(I,r)=>{const C=g(I,l+1);!zr(C)&&(o[r]=C)}),t[l]=void 0,o}}return n};return g(e,0)},q={isArray:pI,isArrayBuffer:nW,isBuffer:SU,isFormData:xU,isArrayBufferView:WU,isString:VU,isNumber:lW,isBoolean:vU,isObject:em,isPlainObject:ui,isUndefined:zr,isDate:RU,isFile:XU,isBlob:kU,isRegExp:PU,isFunction:Dl,isStream:YU,isURLSearchParams:HU,isTypedArray:TU,isFileList:JU,forEach:aC,merge:qu,extend:NU,trim:wU,stripBOM:FU,inherits:KU,toFlatObject:EU,kindOf:q0,kindOfTest:wn,endsWith:zU,toArray:MU,forEachEntry:LU,matchAll:UU,isHTMLForm:DU,hasOwnProperty:YZ,hasOwnProp:YZ,reduceDescriptors:CW,freezeMethods:jU,toObjectSet:OU,toCamelCase:QU,noop:_U,toFiniteNumber:$U,findKey:oW,global:IW,isContextDefined:rW,toJSONObject:qU};function Qe(e,t,g,n,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),g&&(this.config=g),n&&(this.request=n),l&&(this.response=l)}q.inherits(Qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const iW=Qe.prototype,aW={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{aW[e]={value:e}});Object.defineProperties(Qe,aW);Object.defineProperty(iW,"isAxiosError",{value:!0});Qe.from=(e,t,g,n,l,o)=>{const I=Object.create(iW);return q.toFlatObject(e,I,function(C){return C!==Error.prototype},r=>r!=="isAxiosError"),Qe.call(I,e.message,t,g,n,l),I.cause=e,I.name=e.name,o&&Object.assign(I,o),I};var eD=typeof self=="object"?self.FormData:window.FormData;const tD=eD;function eA(e){return q.isPlainObject(e)||q.isArray(e)}function sW(e){return q.endsWith(e,"[]")?e.slice(0,-2):e}function xZ(e,t,g){return e?e.concat(t).map(function(l,o){return l=sW(l),!g&&o?"["+l+"]":l}).join(g?".":""):t}function gD(e){return q.isArray(e)&&!e.some(eA)}const nD=q.toFlatObject(q,{},null,function(t){return/^is[A-Z]/.test(t)});function lD(e){return e&&q.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function Xs(e,t,g){if(!q.isObject(e))throw new TypeError("target must be an object");t=t||new(tD||FormData),g=q.toFlatObject(g,{metaTokens:!0,dots:!1,indexes:!1},!1,function(d,h){return!q.isUndefined(h[d])});const n=g.metaTokens,l=g.visitor||a,o=g.dots,I=g.indexes,C=(g.Blob||typeof Blob<"u"&&Blob)&&lD(t);if(!q.isFunction(l))throw new TypeError("visitor must be a function");function i(A){if(A===null)return"";if(q.isDate(A))return A.toISOString();if(!C&&q.isBlob(A))throw new Qe("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(A)||q.isTypedArray(A)?C&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function a(A,d,h){let Z=A;if(A&&!h&&typeof A=="object"){if(q.endsWith(d,"{}"))d=n?d:d.slice(0,-2),A=JSON.stringify(A);else if(q.isArray(A)&&gD(A)||q.isFileList(A)||q.endsWith(d,"[]")&&(Z=q.toArray(A)))return d=sW(d),Z.forEach(function(p,G){!(q.isUndefined(p)||p===null)&&t.append(I===!0?xZ([d],G,o):I===null?d:d+"[]",i(p))}),!1}return eA(A)?!0:(t.append(xZ(h,d,o),i(A)),!1)}const c=[],s=Object.assign(nD,{defaultVisitor:a,convertValue:i,isVisitable:eA});function m(A,d){if(!q.isUndefined(A)){if(c.indexOf(A)!==-1)throw Error("Circular reference detected in "+d.join("."));c.push(A),q.forEach(A,function(Z,u){(!(q.isUndefined(Z)||Z===null)&&l.call(t,Z,q.isString(u)?u.trim():u,d,s))===!0&&m(Z,d?d.concat(u):[u])}),c.pop()}}if(!q.isObject(e))throw new TypeError("data must be an object");return m(e),t}function HZ(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function tm(e,t){this._pairs=[],e&&Xs(e,this,t)}const cW=tm.prototype;cW.append=function(t,g){this._pairs.push([t,g])};cW.toString=function(t){const g=t?function(n){return t.call(this,n,HZ)}:HZ;return this._pairs.map(function(l){return g(l[0])+"="+g(l[1])},"").join("&")};function oD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function dW(e,t,g){if(!t)return e;const n=g&&g.encode||oD,l=g&&g.serialize;let o;if(l?o=l(t,g):o=q.isURLSearchParams(t)?t.toString():new tm(t,g).toString(n),o){const I=e.indexOf("#");I!==-1&&(e=e.slice(0,I)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class ID{constructor(){this.handlers=[]}use(t,g,n){return this.handlers.push({fulfilled:t,rejected:g,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){q.forEach(this.handlers,function(n){n!==null&&t(n)})}}const wZ=ID,uW={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rD=typeof URLSearchParams<"u"?URLSearchParams:tm,CD=FormData,iD=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),fn={isBrowser:!0,classes:{URLSearchParams:rD,FormData:CD,Blob},isStandardBrowserEnv:iD,protocols:["http","https","file","blob","url","data"]};function aD(e,t){return Xs(e,new fn.classes.URLSearchParams,Object.assign({visitor:function(g,n,l,o){return fn.isNode&&q.isBuffer(g)?(this.append(n,g.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function sD(e){return q.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function cD(e){const t={},g=Object.keys(e);let n;const l=g.length;let o;for(n=0;n<l;n++)o=g[n],t[o]=e[o];return t}function AW(e){function t(g,n,l,o){let I=g[o++];const r=Number.isFinite(+I),C=o>=g.length;return I=!I&&q.isArray(l)?l.length:I,C?(q.hasOwnProp(l,I)?l[I]=[l[I],n]:l[I]=n,!r):((!l[I]||!q.isObject(l[I]))&&(l[I]=[]),t(g,n,l[I],o)&&q.isArray(l[I])&&(l[I]=cD(l[I])),!r)}if(q.isFormData(e)&&q.isFunction(e.entries)){const g={};return q.forEachEntry(e,(n,l)=>{t(sD(n),l,g,0)}),g}return null}const dD={"Content-Type":void 0};function uD(e,t,g){if(q.isString(e))try{return(t||JSON.parse)(e),q.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(g||JSON.stringify)(e)}const ks={transitional:uW,adapter:["xhr","http"],transformRequest:[function(t,g){const n=g.getContentType()||"",l=n.indexOf("application/json")>-1,o=q.isObject(t);if(o&&q.isHTMLForm(t)&&(t=new FormData(t)),q.isFormData(t))return l&&l?JSON.stringify(AW(t)):t;if(q.isArrayBuffer(t)||q.isBuffer(t)||q.isStream(t)||q.isFile(t)||q.isBlob(t))return t;if(q.isArrayBufferView(t))return t.buffer;if(q.isURLSearchParams(t))return g.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return aD(t,this.formSerializer).toString();if((r=q.isFileList(t))||n.indexOf("multipart/form-data")>-1){const C=this.env&&this.env.FormData;return Xs(r?{"files[]":t}:t,C&&new C,this.formSerializer)}}return o||l?(g.setContentType("application/json",!1),uD(t)):t}],transformResponse:[function(t){const g=this.transitional||ks.transitional,n=g&&g.forcedJSONParsing,l=this.responseType==="json";if(t&&q.isString(t)&&(n&&!this.responseType||l)){const I=!(g&&g.silentJSONParsing)&&l;try{return JSON.parse(t)}catch(r){if(I)throw r.name==="SyntaxError"?Qe.from(r,Qe.ERR_BAD_RESPONSE,this,null,this.response):r}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fn.classes.FormData,Blob:fn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};q.forEach(["delete","get","head"],function(t){ks.headers[t]={}});q.forEach(["post","put","patch"],function(t){ks.headers[t]=q.merge(dD)});const gm=ks,AD=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mD=e=>{const t={};let g,n,l;return e&&e.split(`
`).forEach(function(I){l=I.indexOf(":"),g=I.substring(0,l).trim().toLowerCase(),n=I.substring(l+1).trim(),!(!g||t[g]&&AD[g])&&(g==="set-cookie"?t[g]?t[g].push(n):t[g]=[n]:t[g]=t[g]?t[g]+", "+n:n)}),t},NZ=Symbol("internals");function KI(e){return e&&String(e).trim().toLowerCase()}function Ai(e){return e===!1||e==null?e:q.isArray(e)?e.map(Ai):String(e)}function pD(e){const t=Object.create(null),g=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=g.exec(e);)t[n[1]]=n[2];return t}function bD(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function FZ(e,t,g,n){if(q.isFunction(n))return n.call(this,t,g);if(!!q.isString(t)){if(q.isString(n))return t.indexOf(n)!==-1;if(q.isRegExp(n))return n.test(t)}}function ZD(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,g,n)=>g.toUpperCase()+n)}function hD(e,t){const g=q.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+g,{value:function(l,o,I){return this[n].call(this,t,l,o,I)},configurable:!0})})}class Js{constructor(t){t&&this.set(t)}set(t,g,n){const l=this;function o(r,C,i){const a=KI(C);if(!a)throw new Error("header name must be a non-empty string");const c=q.findKey(l,a);(!c||l[c]===void 0||i===!0||i===void 0&&l[c]!==!1)&&(l[c||C]=Ai(r))}const I=(r,C)=>q.forEach(r,(i,a)=>o(i,a,C));return q.isPlainObject(t)||t instanceof this.constructor?I(t,g):q.isString(t)&&(t=t.trim())&&!bD(t)?I(mD(t),g):t!=null&&o(g,t,n),this}get(t,g){if(t=KI(t),t){const n=q.findKey(this,t);if(n){const l=this[n];if(!g)return l;if(g===!0)return pD(l);if(q.isFunction(g))return g.call(this,l,n);if(q.isRegExp(g))return g.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,g){if(t=KI(t),t){const n=q.findKey(this,t);return!!(n&&(!g||FZ(this,this[n],n,g)))}return!1}delete(t,g){const n=this;let l=!1;function o(I){if(I=KI(I),I){const r=q.findKey(n,I);r&&(!g||FZ(n,n[r],r,g))&&(delete n[r],l=!0)}}return q.isArray(t)?t.forEach(o):o(t),l}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(t){const g=this,n={};return q.forEach(this,(l,o)=>{const I=q.findKey(n,o);if(I){g[I]=Ai(l),delete g[o];return}const r=t?ZD(o):String(o).trim();r!==o&&delete g[o],g[r]=Ai(l),n[r]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const g=Object.create(null);return q.forEach(this,(n,l)=>{n!=null&&n!==!1&&(g[l]=t&&q.isArray(n)?n.join(", "):n)}),g}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,g])=>t+": "+g).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...g){const n=new this(t);return g.forEach(l=>n.set(l)),n}static accessor(t){const n=(this[NZ]=this[NZ]={accessors:{}}).accessors,l=this.prototype;function o(I){const r=KI(I);n[r]||(hD(l,I),n[r]=!0)}return q.isArray(t)?t.forEach(o):o(t),this}}Js.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);q.freezeMethods(Js.prototype);q.freezeMethods(Js);const Bn=Js;function zc(e,t){const g=this||gm,n=t||g,l=Bn.from(n.headers);let o=n.data;return q.forEach(e,function(r){o=r.call(g,o,l.normalize(),t?t.status:void 0)}),l.normalize(),o}function mW(e){return!!(e&&e.__CANCEL__)}function sC(e,t,g){Qe.call(this,e==null?"canceled":e,Qe.ERR_CANCELED,t,g),this.name="CanceledError"}q.inherits(sC,Qe,{__CANCEL__:!0});const GD=null;function fD(e,t,g){const n=g.config.validateStatus;!g.status||!n||n(g.status)?e(g):t(new Qe("Request failed with status code "+g.status,[Qe.ERR_BAD_REQUEST,Qe.ERR_BAD_RESPONSE][Math.floor(g.status/100)-4],g.config,g.request,g))}const BD=fn.isStandardBrowserEnv?function(){return{write:function(g,n,l,o,I,r){const C=[];C.push(g+"="+encodeURIComponent(n)),q.isNumber(l)&&C.push("expires="+new Date(l).toGMTString()),q.isString(o)&&C.push("path="+o),q.isString(I)&&C.push("domain="+I),r===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(g){const n=document.cookie.match(new RegExp("(^|;\\s*)("+g+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(g){this.write(g,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function yD(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function SD(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function pW(e,t){return e&&!yD(t)?SD(e,t):t}const WD=fn.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),g=document.createElement("a");let n;function l(o){let I=o;return t&&(g.setAttribute("href",I),I=g.href),g.setAttribute("href",I),{href:g.href,protocol:g.protocol?g.protocol.replace(/:$/,""):"",host:g.host,search:g.search?g.search.replace(/^\?/,""):"",hash:g.hash?g.hash.replace(/^#/,""):"",hostname:g.hostname,port:g.port,pathname:g.pathname.charAt(0)==="/"?g.pathname:"/"+g.pathname}}return n=l(window.location.href),function(I){const r=q.isString(I)?l(I):I;return r.protocol===n.protocol&&r.host===n.host}}():function(){return function(){return!0}}();function VD(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function vD(e,t){e=e||10;const g=new Array(e),n=new Array(e);let l=0,o=0,I;return t=t!==void 0?t:1e3,function(C){const i=Date.now(),a=n[o];I||(I=i),g[l]=C,n[l]=i;let c=o,s=0;for(;c!==l;)s+=g[c++],c=c%e;if(l=(l+1)%e,l===o&&(o=(o+1)%e),i-I<t)return;const m=a&&i-a;return m?Math.round(s*1e3/m):void 0}}function KZ(e,t){let g=0;const n=vD(50,250);return l=>{const o=l.loaded,I=l.lengthComputable?l.total:void 0,r=o-g,C=n(r),i=o<=I;g=o;const a={loaded:o,total:I,progress:I?o/I:void 0,bytes:r,rate:C||void 0,estimated:C&&I&&i?(I-o)/C:void 0,event:l};a[t?"download":"upload"]=!0,e(a)}}const RD=typeof XMLHttpRequest<"u",XD=RD&&function(e){return new Promise(function(g,n){let l=e.data;const o=Bn.from(e.headers).normalize(),I=e.responseType;let r;function C(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}q.isFormData(l)&&fn.isStandardBrowserEnv&&o.setContentType(!1);let i=new XMLHttpRequest;if(e.auth){const m=e.auth.username||"",A=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(m+":"+A))}const a=pW(e.baseURL,e.url);i.open(e.method.toUpperCase(),dW(a,e.params,e.paramsSerializer),!0),i.timeout=e.timeout;function c(){if(!i)return;const m=Bn.from("getAllResponseHeaders"in i&&i.getAllResponseHeaders()),d={data:!I||I==="text"||I==="json"?i.responseText:i.response,status:i.status,statusText:i.statusText,headers:m,config:e,request:i};fD(function(Z){g(Z),C()},function(Z){n(Z),C()},d),i=null}if("onloadend"in i?i.onloadend=c:i.onreadystatechange=function(){!i||i.readyState!==4||i.status===0&&!(i.responseURL&&i.responseURL.indexOf("file:")===0)||setTimeout(c)},i.onabort=function(){!i||(n(new Qe("Request aborted",Qe.ECONNABORTED,e,i)),i=null)},i.onerror=function(){n(new Qe("Network Error",Qe.ERR_NETWORK,e,i)),i=null},i.ontimeout=function(){let A=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const d=e.transitional||uW;e.timeoutErrorMessage&&(A=e.timeoutErrorMessage),n(new Qe(A,d.clarifyTimeoutError?Qe.ETIMEDOUT:Qe.ECONNABORTED,e,i)),i=null},fn.isStandardBrowserEnv){const m=(e.withCredentials||WD(a))&&e.xsrfCookieName&&BD.read(e.xsrfCookieName);m&&o.set(e.xsrfHeaderName,m)}l===void 0&&o.setContentType(null),"setRequestHeader"in i&&q.forEach(o.toJSON(),function(A,d){i.setRequestHeader(d,A)}),q.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),I&&I!=="json"&&(i.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&i.addEventListener("progress",KZ(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&i.upload&&i.upload.addEventListener("progress",KZ(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=m=>{!i||(n(!m||m.type?new sC(null,e,i):m),i.abort(),i=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));const s=VD(a);if(s&&fn.protocols.indexOf(s)===-1){n(new Qe("Unsupported protocol "+s+":",Qe.ERR_BAD_REQUEST,e));return}i.send(l||null)})},mi={http:GD,xhr:XD};q.forEach(mi,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const kD={getAdapter:e=>{e=q.isArray(e)?e:[e];const{length:t}=e;let g,n;for(let l=0;l<t&&(g=e[l],!(n=q.isString(g)?mi[g.toLowerCase()]:g));l++);if(!n)throw n===!1?new Qe(`Adapter ${g} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(q.hasOwnProp(mi,g)?`Adapter '${g}' is not available in the build`:`Unknown adapter '${g}'`);if(!q.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:mi};function Mc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sC}function EZ(e){return Mc(e),e.headers=Bn.from(e.headers),e.data=zc.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kD.getAdapter(e.adapter||gm.adapter)(e).then(function(n){return Mc(e),n.data=zc.call(e,e.transformResponse,n),n.headers=Bn.from(n.headers),n},function(n){return mW(n)||(Mc(e),n&&n.response&&(n.response.data=zc.call(e,e.transformResponse,n.response),n.response.headers=Bn.from(n.response.headers))),Promise.reject(n)})}const zZ=e=>e instanceof Bn?e.toJSON():e;function Mr(e,t){t=t||{};const g={};function n(i,a,c){return q.isPlainObject(i)&&q.isPlainObject(a)?q.merge.call({caseless:c},i,a):q.isPlainObject(a)?q.merge({},a):q.isArray(a)?a.slice():a}function l(i,a,c){if(q.isUndefined(a)){if(!q.isUndefined(i))return n(void 0,i,c)}else return n(i,a,c)}function o(i,a){if(!q.isUndefined(a))return n(void 0,a)}function I(i,a){if(q.isUndefined(a)){if(!q.isUndefined(i))return n(void 0,i)}else return n(void 0,a)}function r(i,a,c){if(c in t)return n(i,a);if(c in e)return n(void 0,i)}const C={url:o,method:o,data:o,baseURL:I,transformRequest:I,transformResponse:I,paramsSerializer:I,timeout:I,timeoutMessage:I,withCredentials:I,adapter:I,responseType:I,xsrfCookieName:I,xsrfHeaderName:I,onUploadProgress:I,onDownloadProgress:I,decompress:I,maxContentLength:I,maxBodyLength:I,beforeRedirect:I,transport:I,httpAgent:I,httpsAgent:I,cancelToken:I,socketPath:I,responseEncoding:I,validateStatus:r,headers:(i,a)=>l(zZ(i),zZ(a),!0)};return q.forEach(Object.keys(e).concat(Object.keys(t)),function(a){const c=C[a]||l,s=c(e[a],t[a],a);q.isUndefined(s)&&c!==r||(g[a]=s)}),g}const bW="1.2.0",nm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nm[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const MZ={};nm.transitional=function(t,g,n){function l(o,I){return"[Axios v"+bW+"] Transitional option '"+o+"'"+I+(n?". "+n:"")}return(o,I,r)=>{if(t===!1)throw new Qe(l(I," has been removed"+(g?" in "+g:"")),Qe.ERR_DEPRECATED);return g&&!MZ[I]&&(MZ[I]=!0,console.warn(l(I," has been deprecated since v"+g+" and will be removed in the near future"))),t?t(o,I,r):!0}};function JD(e,t,g){if(typeof e!="object")throw new Qe("options must be an object",Qe.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let l=n.length;for(;l-- >0;){const o=n[l],I=t[o];if(I){const r=e[o],C=r===void 0||I(r,o,e);if(C!==!0)throw new Qe("option "+o+" must be "+C,Qe.ERR_BAD_OPTION_VALUE);continue}if(g!==!0)throw new Qe("Unknown option "+o,Qe.ERR_BAD_OPTION)}}const tA={assertOptions:JD,validators:nm},zn=tA.validators;class ta{constructor(t){this.defaults=t,this.interceptors={request:new wZ,response:new wZ}}request(t,g){typeof t=="string"?(g=g||{},g.url=t):g=t||{},g=Mr(this.defaults,g);const{transitional:n,paramsSerializer:l,headers:o}=g;n!==void 0&&tA.assertOptions(n,{silentJSONParsing:zn.transitional(zn.boolean),forcedJSONParsing:zn.transitional(zn.boolean),clarifyTimeoutError:zn.transitional(zn.boolean)},!1),l!==void 0&&tA.assertOptions(l,{encode:zn.function,serialize:zn.function},!0),g.method=(g.method||this.defaults.method||"get").toLowerCase();let I;I=o&&q.merge(o.common,o[g.method]),I&&q.forEach(["delete","get","head","post","put","patch","common"],A=>{delete o[A]}),g.headers=Bn.concat(I,o);const r=[];let C=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(g)===!1||(C=C&&d.synchronous,r.unshift(d.fulfilled,d.rejected))});const i=[];this.interceptors.response.forEach(function(d){i.push(d.fulfilled,d.rejected)});let a,c=0,s;if(!C){const A=[EZ.bind(this),void 0];for(A.unshift.apply(A,r),A.push.apply(A,i),s=A.length,a=Promise.resolve(g);c<s;)a=a.then(A[c++],A[c++]);return a}s=r.length;let m=g;for(c=0;c<s;){const A=r[c++],d=r[c++];try{m=A(m)}catch(h){d.call(this,h);break}}try{a=EZ.call(this,m)}catch(A){return Promise.reject(A)}for(c=0,s=i.length;c<s;)a=a.then(i[c++],i[c++]);return a}getUri(t){t=Mr(this.defaults,t);const g=pW(t.baseURL,t.url);return dW(g,t.params,t.paramsSerializer)}}q.forEach(["delete","get","head","options"],function(t){ta.prototype[t]=function(g,n){return this.request(Mr(n||{},{method:t,url:g,data:(n||{}).data}))}});q.forEach(["post","put","patch"],function(t){function g(n){return function(o,I,r){return this.request(Mr(r||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:I}))}}ta.prototype[t]=g(),ta.prototype[t+"Form"]=g(!0)});const pi=ta;class lm{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let g;this.promise=new Promise(function(o){g=o});const n=this;this.promise.then(l=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](l);n._listeners=null}),this.promise.then=l=>{let o;const I=new Promise(r=>{n.subscribe(r),o=r}).then(l);return I.cancel=function(){n.unsubscribe(o)},I},t(function(o,I,r){n.reason||(n.reason=new sC(o,I,r),g(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const g=this._listeners.indexOf(t);g!==-1&&this._listeners.splice(g,1)}static source(){let t;return{token:new lm(function(l){t=l}),cancel:t}}}const YD=lm;function xD(e){return function(g){return e.apply(null,g)}}function HD(e){return q.isObject(e)&&e.isAxiosError===!0}function ZW(e){const t=new pi(e),g=tW(pi.prototype.request,t);return q.extend(g,pi.prototype,t,{allOwnKeys:!0}),q.extend(g,t,null,{allOwnKeys:!0}),g.create=function(l){return ZW(Mr(e,l))},g}const Dt=ZW(gm);Dt.Axios=pi;Dt.CanceledError=sC;Dt.CancelToken=YD;Dt.isCancel=mW;Dt.VERSION=bW;Dt.toFormData=Xs;Dt.AxiosError=Qe;Dt.Cancel=Dt.CanceledError;Dt.all=function(t){return Promise.all(t)};Dt.spread=xD;Dt.isAxiosError=HD;Dt.AxiosHeaders=Bn;Dt.formToJSON=e=>AW(q.isHTMLForm(e)?new FormData(e):e);Dt.default=Dt;const Ys=Dt;Ys.defaults.withCredentials=!0;const Eg=Ys.create({baseURL:"https://bapsim.kro.kr/api/",timeout:5e3,withCredentials:!0}),wD=pt.div`
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;

  .title {
    font-size: 20px;
  }
  .nick-title {
    font-size: 22px;
    color: #49663c;
  }
  .prevnick {
    font-size: 27px;
  }
  .input_nick {
    font-size: 20px;
    padding-left: 10px;
    width: 100%;
    height: 50px;
    border: 3px solid #b1d6a8;
    //border: 3px solid #f4f9f3;
    border-radius: 15px;
    outline-color: #b1d6a8;
  }
  input::placeholder {
    font-size: 15px;
    font-weight: bold;
    color: #666666;
  }
  .change_btn {
    width: 120px;
    height: 40px;
    font-weight: bolder;
    font-size: 18px;
    color: #49663c;
  }
`;async function ND(e){return await Eg.put("v1/user/change/name?new_name="+e)}function FD(){const[e,t]=_g(Kg),[g,n]=B.exports.useState(!1),[l,o]=B.exports.useState(""),[I,r]=B.exports.useState(!1),[C,i]=B.exports.useState(""),a=B.exports.useCallback(s=>{o(s.target.value),console.log(s.target.value),s.target.value.length<2||s.target.value.length>5?(i("2\uAE00\uC790 \uC774\uC0C1 5\uAE00\uC790 \uBBF8\uB9CC\uC73C\uB85C \uC785\uB825\uD574\uC8FC\uC138\uC694."),r(!1)):(i(""),r(!0))},[]),c=()=>{ND(l).then(()=>{n(!0),console.log("Change Nickname Complete!")})};return U(wD,{children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uB2C9\uB124\uC784 \uBCC0\uACBD"}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:7,ml:3,mr:3},children:U(te,{container:!0,spacing:2,children:[b(te,{className:"nick-title",item:!0,xs:12,children:"\uD604\uC7AC \uB2C9\uB124\uC784"}),b(te,{className:"prevnick",item:!0,xs:12,sx:{ml:-.5},children:e.username}),b(te,{className:"nick-title",item:!0,xs:12,sx:{mt:3},children:"\uC0C8 \uB2C9\uB124\uC784"}),U(te,{item:!0,xs:12,sx:{ml:-1},children:[b("input",{className:"input_nick",autoFocus:!0,placeholder:" \uC0C8\uB85C\uC6B4 \uB2C9\uB124\uC784",onChange:a}),l.length>0&&b("span",{className:`message ${I?"success":"error"}`,children:C})]})]})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:3,mr:2,float:"right"},children:U(te,{children:[b(D0,{className:"change_btn",label:"\uBCC0\uACBD\uD558\uAE30",clickable:!0,component:"a",href:"#",color:"primary",onClick:c}),g&&b(Tl,{to:"/"})]})})]})}var hW={exports:{}};function KD(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tc={exports:{}};const ED={},zD=Object.freeze(Object.defineProperty({__proto__:null,default:ED},Symbol.toStringTag,{value:"Module"})),MD=oV(zD);var TZ;function Ue(){return TZ||(TZ=1,function(e,t){(function(g,n){e.exports=n()})(ze,function(){var g=g||function(n,l){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof ze<"u"&&ze.crypto&&(o=ze.crypto),!o&&typeof KD=="function")try{o=MD}catch{}var I=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function u(){}return function(p){var G;return u.prototype=p,G=new u,u.prototype=null,G}}(),C={},i=C.lib={},a=i.Base=function(){return{extend:function(u){var p=r(this);return u&&p.mixIn(u),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var u=this.extend();return u.init.apply(u,arguments),u},init:function(){},mixIn:function(u){for(var p in u)u.hasOwnProperty(p)&&(this[p]=u[p]);u.hasOwnProperty("toString")&&(this.toString=u.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=i.WordArray=a.extend({init:function(u,p){u=this.words=u||[],p!=l?this.sigBytes=p:this.sigBytes=u.length*4},toString:function(u){return(u||m).stringify(this)},concat:function(u){var p=this.words,G=u.words,f=this.sigBytes,S=u.sigBytes;if(this.clamp(),f%4)for(var W=0;W<S;W++){var v=G[W>>>2]>>>24-W%4*8&255;p[f+W>>>2]|=v<<24-(f+W)%4*8}else for(var w=0;w<S;w+=4)p[f+w>>>2]=G[w>>>2];return this.sigBytes+=S,this},clamp:function(){var u=this.words,p=this.sigBytes;u[p>>>2]&=4294967295<<32-p%4*8,u.length=n.ceil(p/4)},clone:function(){var u=a.clone.call(this);return u.words=this.words.slice(0),u},random:function(u){for(var p=[],G=0;G<u;G+=4)p.push(I());return new c.init(p,u)}}),s=C.enc={},m=s.Hex={stringify:function(u){for(var p=u.words,G=u.sigBytes,f=[],S=0;S<G;S++){var W=p[S>>>2]>>>24-S%4*8&255;f.push((W>>>4).toString(16)),f.push((W&15).toString(16))}return f.join("")},parse:function(u){for(var p=u.length,G=[],f=0;f<p;f+=2)G[f>>>3]|=parseInt(u.substr(f,2),16)<<24-f%8*4;return new c.init(G,p/2)}},A=s.Latin1={stringify:function(u){for(var p=u.words,G=u.sigBytes,f=[],S=0;S<G;S++){var W=p[S>>>2]>>>24-S%4*8&255;f.push(String.fromCharCode(W))}return f.join("")},parse:function(u){for(var p=u.length,G=[],f=0;f<p;f++)G[f>>>2]|=(u.charCodeAt(f)&255)<<24-f%4*8;return new c.init(G,p)}},d=s.Utf8={stringify:function(u){try{return decodeURIComponent(escape(A.stringify(u)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(u){return A.parse(unescape(encodeURIComponent(u)))}},h=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(u){typeof u=="string"&&(u=d.parse(u)),this._data.concat(u),this._nDataBytes+=u.sigBytes},_process:function(u){var p,G=this._data,f=G.words,S=G.sigBytes,W=this.blockSize,v=W*4,w=S/v;u?w=n.ceil(w):w=n.max((w|0)-this._minBufferSize,0);var y=w*W,R=n.min(y*4,S);if(y){for(var x=0;x<y;x+=W)this._doProcessBlock(f,x);p=f.splice(0,y),G.sigBytes-=R}return new c.init(p,R)},clone:function(){var u=a.clone.call(this);return u._data=this._data.clone(),u},_minBufferSize:0});i.Hasher=h.extend({cfg:a.extend(),init:function(u){this.cfg=this.cfg.extend(u),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(u){return this._append(u),this._process(),this},finalize:function(u){u&&this._append(u);var p=this._doFinalize();return p},blockSize:16,_createHelper:function(u){return function(p,G){return new u.init(G).finalize(p)}},_createHmacHelper:function(u){return function(p,G){return new Z.HMAC.init(u,G).finalize(p)}}});var Z=C.algo={};return C}(Math);return g})}(Tc)),Tc.exports}var Lc={exports:{}},LZ;function xs(){return LZ||(LZ=1,function(e,t){(function(g,n){e.exports=n(Ue())})(ze,function(g){return function(n){var l=g,o=l.lib,I=o.Base,r=o.WordArray,C=l.x64={};C.Word=I.extend({init:function(i,a){this.high=i,this.low=a}}),C.WordArray=I.extend({init:function(i,a){i=this.words=i||[],a!=n?this.sigBytes=a:this.sigBytes=i.length*8},toX32:function(){for(var i=this.words,a=i.length,c=[],s=0;s<a;s++){var m=i[s];c.push(m.high),c.push(m.low)}return r.create(c,this.sigBytes)},clone:function(){for(var i=I.clone.call(this),a=i.words=this.words.slice(0),c=a.length,s=0;s<c;s++)a[s]=a[s].clone();return i}})}(),g})}(Lc)),Lc.exports}var Uc={exports:{}},UZ;function TD(){return UZ||(UZ=1,function(e,t){(function(g,n){e.exports=n(Ue())})(ze,function(g){return function(){if(typeof ArrayBuffer=="function"){var n=g,l=n.lib,o=l.WordArray,I=o.init,r=o.init=function(C){if(C instanceof ArrayBuffer&&(C=new Uint8Array(C)),(C instanceof Int8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)&&(C=new Uint8Array(C.buffer,C.byteOffset,C.byteLength)),C instanceof Uint8Array){for(var i=C.byteLength,a=[],c=0;c<i;c++)a[c>>>2]|=C[c]<<24-c%4*8;I.call(this,a,i)}else I.apply(this,arguments)};r.prototype=o}}(),g.lib.WordArray})}(Uc)),Uc.exports}var Dc={exports:{}},DZ;function LD(){return DZ||(DZ=1,function(e,t){(function(g,n){e.exports=n(Ue())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.WordArray,I=n.enc;I.Utf16=I.Utf16BE={stringify:function(C){for(var i=C.words,a=C.sigBytes,c=[],s=0;s<a;s+=2){var m=i[s>>>2]>>>16-s%4*8&65535;c.push(String.fromCharCode(m))}return c.join("")},parse:function(C){for(var i=C.length,a=[],c=0;c<i;c++)a[c>>>1]|=C.charCodeAt(c)<<16-c%2*16;return o.create(a,i*2)}},I.Utf16LE={stringify:function(C){for(var i=C.words,a=C.sigBytes,c=[],s=0;s<a;s+=2){var m=r(i[s>>>2]>>>16-s%4*8&65535);c.push(String.fromCharCode(m))}return c.join("")},parse:function(C){for(var i=C.length,a=[],c=0;c<i;c++)a[c>>>1]|=r(C.charCodeAt(c)<<16-c%2*16);return o.create(a,i*2)}};function r(C){return C<<8&4278255360|C>>>8&16711935}}(),g.enc.Utf16})}(Dc)),Dc.exports}var Qc={exports:{}},QZ;function bI(){return QZ||(QZ=1,function(e,t){(function(g,n){e.exports=n(Ue())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.WordArray,I=n.enc;I.Base64={stringify:function(C){var i=C.words,a=C.sigBytes,c=this._map;C.clamp();for(var s=[],m=0;m<a;m+=3)for(var A=i[m>>>2]>>>24-m%4*8&255,d=i[m+1>>>2]>>>24-(m+1)%4*8&255,h=i[m+2>>>2]>>>24-(m+2)%4*8&255,Z=A<<16|d<<8|h,u=0;u<4&&m+u*.75<a;u++)s.push(c.charAt(Z>>>6*(3-u)&63));var p=c.charAt(64);if(p)for(;s.length%4;)s.push(p);return s.join("")},parse:function(C){var i=C.length,a=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var s=0;s<a.length;s++)c[a.charCodeAt(s)]=s}var m=a.charAt(64);if(m){var A=C.indexOf(m);A!==-1&&(i=A)}return r(C,i,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function r(C,i,a){for(var c=[],s=0,m=0;m<i;m++)if(m%4){var A=a[C.charCodeAt(m-1)]<<m%4*2,d=a[C.charCodeAt(m)]>>>6-m%4*2,h=A|d;c[s>>>2]|=h<<24-s%4*8,s++}return o.create(c,s)}}(),g.enc.Base64})}(Qc)),Qc.exports}var Pc={exports:{}},PZ;function UD(){return PZ||(PZ=1,function(e,t){(function(g,n){e.exports=n(Ue())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.WordArray,I=n.enc;I.Base64url={stringify:function(C,i=!0){var a=C.words,c=C.sigBytes,s=i?this._safe_map:this._map;C.clamp();for(var m=[],A=0;A<c;A+=3)for(var d=a[A>>>2]>>>24-A%4*8&255,h=a[A+1>>>2]>>>24-(A+1)%4*8&255,Z=a[A+2>>>2]>>>24-(A+2)%4*8&255,u=d<<16|h<<8|Z,p=0;p<4&&A+p*.75<c;p++)m.push(s.charAt(u>>>6*(3-p)&63));var G=s.charAt(64);if(G)for(;m.length%4;)m.push(G);return m.join("")},parse:function(C,i=!0){var a=C.length,c=i?this._safe_map:this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var m=0;m<c.length;m++)s[c.charCodeAt(m)]=m}var A=c.charAt(64);if(A){var d=C.indexOf(A);d!==-1&&(a=d)}return r(C,a,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function r(C,i,a){for(var c=[],s=0,m=0;m<i;m++)if(m%4){var A=a[C.charCodeAt(m-1)]<<m%4*2,d=a[C.charCodeAt(m)]>>>6-m%4*2,h=A|d;c[s>>>2]|=h<<24-s%4*8,s++}return o.create(c,s)}}(),g.enc.Base64url})}(Pc)),Pc.exports}var jc={exports:{}},jZ;function ZI(){return jZ||(jZ=1,function(e,t){(function(g,n){e.exports=n(Ue())})(ze,function(g){return function(n){var l=g,o=l.lib,I=o.WordArray,r=o.Hasher,C=l.algo,i=[];(function(){for(var d=0;d<64;d++)i[d]=n.abs(n.sin(d+1))*4294967296|0})();var a=C.MD5=r.extend({_doReset:function(){this._hash=new I.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(d,h){for(var Z=0;Z<16;Z++){var u=h+Z,p=d[u];d[u]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360}var G=this._hash.words,f=d[h+0],S=d[h+1],W=d[h+2],v=d[h+3],w=d[h+4],y=d[h+5],R=d[h+6],x=d[h+7],H=d[h+8],F=d[h+9],M=d[h+10],j=d[h+11],O=d[h+12],z=d[h+13],D=d[h+14],T=d[h+15],N=G[0],V=G[1],Y=G[2],J=G[3];N=c(N,V,Y,J,f,7,i[0]),J=c(J,N,V,Y,S,12,i[1]),Y=c(Y,J,N,V,W,17,i[2]),V=c(V,Y,J,N,v,22,i[3]),N=c(N,V,Y,J,w,7,i[4]),J=c(J,N,V,Y,y,12,i[5]),Y=c(Y,J,N,V,R,17,i[6]),V=c(V,Y,J,N,x,22,i[7]),N=c(N,V,Y,J,H,7,i[8]),J=c(J,N,V,Y,F,12,i[9]),Y=c(Y,J,N,V,M,17,i[10]),V=c(V,Y,J,N,j,22,i[11]),N=c(N,V,Y,J,O,7,i[12]),J=c(J,N,V,Y,z,12,i[13]),Y=c(Y,J,N,V,D,17,i[14]),V=c(V,Y,J,N,T,22,i[15]),N=s(N,V,Y,J,S,5,i[16]),J=s(J,N,V,Y,R,9,i[17]),Y=s(Y,J,N,V,j,14,i[18]),V=s(V,Y,J,N,f,20,i[19]),N=s(N,V,Y,J,y,5,i[20]),J=s(J,N,V,Y,M,9,i[21]),Y=s(Y,J,N,V,T,14,i[22]),V=s(V,Y,J,N,w,20,i[23]),N=s(N,V,Y,J,F,5,i[24]),J=s(J,N,V,Y,D,9,i[25]),Y=s(Y,J,N,V,v,14,i[26]),V=s(V,Y,J,N,H,20,i[27]),N=s(N,V,Y,J,z,5,i[28]),J=s(J,N,V,Y,W,9,i[29]),Y=s(Y,J,N,V,x,14,i[30]),V=s(V,Y,J,N,O,20,i[31]),N=m(N,V,Y,J,y,4,i[32]),J=m(J,N,V,Y,H,11,i[33]),Y=m(Y,J,N,V,j,16,i[34]),V=m(V,Y,J,N,D,23,i[35]),N=m(N,V,Y,J,S,4,i[36]),J=m(J,N,V,Y,w,11,i[37]),Y=m(Y,J,N,V,x,16,i[38]),V=m(V,Y,J,N,M,23,i[39]),N=m(N,V,Y,J,z,4,i[40]),J=m(J,N,V,Y,f,11,i[41]),Y=m(Y,J,N,V,v,16,i[42]),V=m(V,Y,J,N,R,23,i[43]),N=m(N,V,Y,J,F,4,i[44]),J=m(J,N,V,Y,O,11,i[45]),Y=m(Y,J,N,V,T,16,i[46]),V=m(V,Y,J,N,W,23,i[47]),N=A(N,V,Y,J,f,6,i[48]),J=A(J,N,V,Y,x,10,i[49]),Y=A(Y,J,N,V,D,15,i[50]),V=A(V,Y,J,N,y,21,i[51]),N=A(N,V,Y,J,O,6,i[52]),J=A(J,N,V,Y,v,10,i[53]),Y=A(Y,J,N,V,M,15,i[54]),V=A(V,Y,J,N,S,21,i[55]),N=A(N,V,Y,J,H,6,i[56]),J=A(J,N,V,Y,T,10,i[57]),Y=A(Y,J,N,V,R,15,i[58]),V=A(V,Y,J,N,z,21,i[59]),N=A(N,V,Y,J,w,6,i[60]),J=A(J,N,V,Y,j,10,i[61]),Y=A(Y,J,N,V,W,15,i[62]),V=A(V,Y,J,N,F,21,i[63]),G[0]=G[0]+N|0,G[1]=G[1]+V|0,G[2]=G[2]+Y|0,G[3]=G[3]+J|0},_doFinalize:function(){var d=this._data,h=d.words,Z=this._nDataBytes*8,u=d.sigBytes*8;h[u>>>5]|=128<<24-u%32;var p=n.floor(Z/4294967296),G=Z;h[(u+64>>>9<<4)+15]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,h[(u+64>>>9<<4)+14]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360,d.sigBytes=(h.length+1)*4,this._process();for(var f=this._hash,S=f.words,W=0;W<4;W++){var v=S[W];S[W]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}return f},clone:function(){var d=r.clone.call(this);return d._hash=this._hash.clone(),d}});function c(d,h,Z,u,p,G,f){var S=d+(h&Z|~h&u)+p+f;return(S<<G|S>>>32-G)+h}function s(d,h,Z,u,p,G,f){var S=d+(h&u|Z&~u)+p+f;return(S<<G|S>>>32-G)+h}function m(d,h,Z,u,p,G,f){var S=d+(h^Z^u)+p+f;return(S<<G|S>>>32-G)+h}function A(d,h,Z,u,p,G,f){var S=d+(Z^(h|~u))+p+f;return(S<<G|S>>>32-G)+h}l.MD5=r._createHelper(a),l.HmacMD5=r._createHmacHelper(a)}(Math),g.MD5})}(jc)),jc.exports}var Oc={exports:{}},OZ;function om(){return OZ||(OZ=1,function(e,t){(function(g,n){e.exports=n(Ue())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.WordArray,I=l.Hasher,r=n.algo,C=[],i=r.SHA1=I.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,c){for(var s=this._hash.words,m=s[0],A=s[1],d=s[2],h=s[3],Z=s[4],u=0;u<80;u++){if(u<16)C[u]=a[c+u]|0;else{var p=C[u-3]^C[u-8]^C[u-14]^C[u-16];C[u]=p<<1|p>>>31}var G=(m<<5|m>>>27)+Z+C[u];u<20?G+=(A&d|~A&h)+1518500249:u<40?G+=(A^d^h)+1859775393:u<60?G+=(A&d|A&h|d&h)-1894007588:G+=(A^d^h)-899497514,Z=h,h=d,d=A<<30|A>>>2,A=m,m=G}s[0]=s[0]+m|0,s[1]=s[1]+A|0,s[2]=s[2]+d|0,s[3]=s[3]+h|0,s[4]=s[4]+Z|0},_doFinalize:function(){var a=this._data,c=a.words,s=this._nDataBytes*8,m=a.sigBytes*8;return c[m>>>5]|=128<<24-m%32,c[(m+64>>>9<<4)+14]=Math.floor(s/4294967296),c[(m+64>>>9<<4)+15]=s,a.sigBytes=c.length*4,this._process(),this._hash},clone:function(){var a=I.clone.call(this);return a._hash=this._hash.clone(),a}});n.SHA1=I._createHelper(i),n.HmacSHA1=I._createHmacHelper(i)}(),g.SHA1})}(Oc)),Oc.exports}var _c={exports:{}},_Z;function GW(){return _Z||(_Z=1,function(e,t){(function(g,n){e.exports=n(Ue())})(ze,function(g){return function(n){var l=g,o=l.lib,I=o.WordArray,r=o.Hasher,C=l.algo,i=[],a=[];(function(){function m(Z){for(var u=n.sqrt(Z),p=2;p<=u;p++)if(!(Z%p))return!1;return!0}function A(Z){return(Z-(Z|0))*4294967296|0}for(var d=2,h=0;h<64;)m(d)&&(h<8&&(i[h]=A(n.pow(d,1/2))),a[h]=A(n.pow(d,1/3)),h++),d++})();var c=[],s=C.SHA256=r.extend({_doReset:function(){this._hash=new I.init(i.slice(0))},_doProcessBlock:function(m,A){for(var d=this._hash.words,h=d[0],Z=d[1],u=d[2],p=d[3],G=d[4],f=d[5],S=d[6],W=d[7],v=0;v<64;v++){if(v<16)c[v]=m[A+v]|0;else{var w=c[v-15],y=(w<<25|w>>>7)^(w<<14|w>>>18)^w>>>3,R=c[v-2],x=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;c[v]=y+c[v-7]+x+c[v-16]}var H=G&f^~G&S,F=h&Z^h&u^Z&u,M=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22),j=(G<<26|G>>>6)^(G<<21|G>>>11)^(G<<7|G>>>25),O=W+j+H+a[v]+c[v],z=M+F;W=S,S=f,f=G,G=p+O|0,p=u,u=Z,Z=h,h=O+z|0}d[0]=d[0]+h|0,d[1]=d[1]+Z|0,d[2]=d[2]+u|0,d[3]=d[3]+p|0,d[4]=d[4]+G|0,d[5]=d[5]+f|0,d[6]=d[6]+S|0,d[7]=d[7]+W|0},_doFinalize:function(){var m=this._data,A=m.words,d=this._nDataBytes*8,h=m.sigBytes*8;return A[h>>>5]|=128<<24-h%32,A[(h+64>>>9<<4)+14]=n.floor(d/4294967296),A[(h+64>>>9<<4)+15]=d,m.sigBytes=A.length*4,this._process(),this._hash},clone:function(){var m=r.clone.call(this);return m._hash=this._hash.clone(),m}});l.SHA256=r._createHelper(s),l.HmacSHA256=r._createHmacHelper(s)}(Math),g.SHA256})}(_c)),_c.exports}var $c={exports:{}},$Z;function DD(){return $Z||($Z=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),GW())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.WordArray,I=n.algo,r=I.SHA256,C=I.SHA224=r.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var i=r._doFinalize.call(this);return i.sigBytes-=4,i}});n.SHA224=r._createHelper(C),n.HmacSHA224=r._createHmacHelper(C)}(),g.SHA224})}($c)),$c.exports}var qc={exports:{}},qZ;function fW(){return qZ||(qZ=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),xs())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.Hasher,I=n.x64,r=I.Word,C=I.WordArray,i=n.algo;function a(){return r.create.apply(r,arguments)}var c=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],s=[];(function(){for(var A=0;A<80;A++)s[A]=a()})();var m=i.SHA512=o.extend({_doReset:function(){this._hash=new C.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(A,d){for(var h=this._hash.words,Z=h[0],u=h[1],p=h[2],G=h[3],f=h[4],S=h[5],W=h[6],v=h[7],w=Z.high,y=Z.low,R=u.high,x=u.low,H=p.high,F=p.low,M=G.high,j=G.low,O=f.high,z=f.low,D=S.high,T=S.low,N=W.high,V=W.low,Y=v.high,J=v.low,P=w,k=y,$=R,K=x,_=H,re=F,ne=M,ge=j,ue=O,ye=z,he=D,Ve=T,Be=N,Se=V,yt=Y,He=J,Je=0;Je<80;Je++){var _e,Le,Ae=s[Je];if(Je<16)Le=Ae.high=A[d+Je*2]|0,_e=Ae.low=A[d+Je*2+1]|0;else{var we=s[Je-15],Ct=we.high,it=we.low,Q=(Ct>>>1|it<<31)^(Ct>>>8|it<<24)^Ct>>>7,ee=(it>>>1|Ct<<31)^(it>>>8|Ct<<24)^(it>>>7|Ct<<25),Ge=s[Je-2],fe=Ge.high,De=Ge.low,ct=(fe>>>19|De<<13)^(fe<<3|De>>>29)^fe>>>6,lg=(De>>>19|fe<<13)^(De<<3|fe>>>29)^(De>>>6|fe<<26),L=s[Je-7],E=L.high,le=L.low,ie=s[Je-16],ae=ie.high,me=ie.low;_e=ee+le,Le=Q+E+(_e>>>0<ee>>>0?1:0),_e=_e+lg,Le=Le+ct+(_e>>>0<lg>>>0?1:0),_e=_e+me,Le=Le+ae+(_e>>>0<me>>>0?1:0),Ae.high=Le,Ae.low=_e}var Re=ue&he^~ue&Be,We=ye&Ve^~ye&Se,ve=P&$^P&_^$&_,Ke=k&K^k&re^K&re,It=(P>>>28|k<<4)^(P<<30|k>>>2)^(P<<25|k>>>7),Nt=(k>>>28|P<<4)^(k<<30|P>>>2)^(k<<25|P>>>7),St=(ue>>>14|ye<<18)^(ue>>>18|ye<<14)^(ue<<23|ye>>>9),og=(ye>>>14|ue<<18)^(ye>>>18|ue<<14)^(ye<<23|ue>>>9),Ig=c[Je],Nn=Ig.high,Gl=Ig.low,vt=He+og,rg=yt+St+(vt>>>0<He>>>0?1:0),vt=vt+We,rg=rg+Re+(vt>>>0<We>>>0?1:0),vt=vt+Gl,rg=rg+Nn+(vt>>>0<Gl>>>0?1:0),vt=vt+_e,rg=rg+Le+(vt>>>0<_e>>>0?1:0),bm=Nt+Ke,lV=It+ve+(bm>>>0<Nt>>>0?1:0);yt=Be,He=Se,Be=he,Se=Ve,he=ue,Ve=ye,ye=ge+vt|0,ue=ne+rg+(ye>>>0<ge>>>0?1:0)|0,ne=_,ge=re,_=$,re=K,$=P,K=k,k=vt+bm|0,P=rg+lV+(k>>>0<vt>>>0?1:0)|0}y=Z.low=y+k,Z.high=w+P+(y>>>0<k>>>0?1:0),x=u.low=x+K,u.high=R+$+(x>>>0<K>>>0?1:0),F=p.low=F+re,p.high=H+_+(F>>>0<re>>>0?1:0),j=G.low=j+ge,G.high=M+ne+(j>>>0<ge>>>0?1:0),z=f.low=z+ye,f.high=O+ue+(z>>>0<ye>>>0?1:0),T=S.low=T+Ve,S.high=D+he+(T>>>0<Ve>>>0?1:0),V=W.low=V+Se,W.high=N+Be+(V>>>0<Se>>>0?1:0),J=v.low=J+He,v.high=Y+yt+(J>>>0<He>>>0?1:0)},_doFinalize:function(){var A=this._data,d=A.words,h=this._nDataBytes*8,Z=A.sigBytes*8;d[Z>>>5]|=128<<24-Z%32,d[(Z+128>>>10<<5)+30]=Math.floor(h/4294967296),d[(Z+128>>>10<<5)+31]=h,A.sigBytes=d.length*4,this._process();var u=this._hash.toX32();return u},clone:function(){var A=o.clone.call(this);return A._hash=this._hash.clone(),A},blockSize:1024/32});n.SHA512=o._createHelper(m),n.HmacSHA512=o._createHmacHelper(m)}(),g.SHA512})}(qc)),qc.exports}var ed={exports:{}},eh;function QD(){return eh||(eh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),xs(),fW())})(ze,function(g){return function(){var n=g,l=n.x64,o=l.Word,I=l.WordArray,r=n.algo,C=r.SHA512,i=r.SHA384=C.extend({_doReset:function(){this._hash=new I.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var a=C._doFinalize.call(this);return a.sigBytes-=16,a}});n.SHA384=C._createHelper(i),n.HmacSHA384=C._createHmacHelper(i)}(),g.SHA384})}(ed)),ed.exports}var td={exports:{}},th;function PD(){return th||(th=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),xs())})(ze,function(g){return function(n){var l=g,o=l.lib,I=o.WordArray,r=o.Hasher,C=l.x64,i=C.Word,a=l.algo,c=[],s=[],m=[];(function(){for(var h=1,Z=0,u=0;u<24;u++){c[h+5*Z]=(u+1)*(u+2)/2%64;var p=Z%5,G=(2*h+3*Z)%5;h=p,Z=G}for(var h=0;h<5;h++)for(var Z=0;Z<5;Z++)s[h+5*Z]=Z+(2*h+3*Z)%5*5;for(var f=1,S=0;S<24;S++){for(var W=0,v=0,w=0;w<7;w++){if(f&1){var y=(1<<w)-1;y<32?v^=1<<y:W^=1<<y-32}f&128?f=f<<1^113:f<<=1}m[S]=i.create(W,v)}})();var A=[];(function(){for(var h=0;h<25;h++)A[h]=i.create()})();var d=a.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var h=this._state=[],Z=0;Z<25;Z++)h[Z]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(h,Z){for(var u=this._state,p=this.blockSize/2,G=0;G<p;G++){var f=h[Z+2*G],S=h[Z+2*G+1];f=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var W=u[G];W.high^=S,W.low^=f}for(var v=0;v<24;v++){for(var w=0;w<5;w++){for(var y=0,R=0,x=0;x<5;x++){var W=u[w+5*x];y^=W.high,R^=W.low}var H=A[w];H.high=y,H.low=R}for(var w=0;w<5;w++)for(var F=A[(w+4)%5],M=A[(w+1)%5],j=M.high,O=M.low,y=F.high^(j<<1|O>>>31),R=F.low^(O<<1|j>>>31),x=0;x<5;x++){var W=u[w+5*x];W.high^=y,W.low^=R}for(var z=1;z<25;z++){var y,R,W=u[z],D=W.high,T=W.low,N=c[z];N<32?(y=D<<N|T>>>32-N,R=T<<N|D>>>32-N):(y=T<<N-32|D>>>64-N,R=D<<N-32|T>>>64-N);var V=A[s[z]];V.high=y,V.low=R}var Y=A[0],J=u[0];Y.high=J.high,Y.low=J.low;for(var w=0;w<5;w++)for(var x=0;x<5;x++){var z=w+5*x,W=u[z],P=A[z],k=A[(w+1)%5+5*x],$=A[(w+2)%5+5*x];W.high=P.high^~k.high&$.high,W.low=P.low^~k.low&$.low}var W=u[0],K=m[v];W.high^=K.high,W.low^=K.low}},_doFinalize:function(){var h=this._data,Z=h.words;this._nDataBytes*8;var u=h.sigBytes*8,p=this.blockSize*32;Z[u>>>5]|=1<<24-u%32,Z[(n.ceil((u+1)/p)*p>>>5)-1]|=128,h.sigBytes=Z.length*4,this._process();for(var G=this._state,f=this.cfg.outputLength/8,S=f/8,W=[],v=0;v<S;v++){var w=G[v],y=w.high,R=w.low;y=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,W.push(R),W.push(y)}return new I.init(W,f)},clone:function(){for(var h=r.clone.call(this),Z=h._state=this._state.slice(0),u=0;u<25;u++)Z[u]=Z[u].clone();return h}});l.SHA3=r._createHelper(d),l.HmacSHA3=r._createHmacHelper(d)}(Math),g.SHA3})}(td)),td.exports}var gd={exports:{}},gh;function jD(){return gh||(gh=1,function(e,t){(function(g,n){e.exports=n(Ue())})(ze,function(g){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var l=g,o=l.lib,I=o.WordArray,r=o.Hasher,C=l.algo,i=I.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=I.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=I.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),s=I.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=I.create([0,1518500249,1859775393,2400959708,2840853838]),A=I.create([1352829926,1548603684,1836072691,2053994217,0]),d=C.RIPEMD160=r.extend({_doReset:function(){this._hash=I.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,W){for(var v=0;v<16;v++){var w=W+v,y=S[w];S[w]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360}var R=this._hash.words,x=m.words,H=A.words,F=i.words,M=a.words,j=c.words,O=s.words,z,D,T,N,V,Y,J,P,k,$;Y=z=R[0],J=D=R[1],P=T=R[2],k=N=R[3],$=V=R[4];for(var K,v=0;v<80;v+=1)K=z+S[W+F[v]]|0,v<16?K+=h(D,T,N)+x[0]:v<32?K+=Z(D,T,N)+x[1]:v<48?K+=u(D,T,N)+x[2]:v<64?K+=p(D,T,N)+x[3]:K+=G(D,T,N)+x[4],K=K|0,K=f(K,j[v]),K=K+V|0,z=V,V=N,N=f(T,10),T=D,D=K,K=Y+S[W+M[v]]|0,v<16?K+=G(J,P,k)+H[0]:v<32?K+=p(J,P,k)+H[1]:v<48?K+=u(J,P,k)+H[2]:v<64?K+=Z(J,P,k)+H[3]:K+=h(J,P,k)+H[4],K=K|0,K=f(K,O[v]),K=K+$|0,Y=$,$=k,k=f(P,10),P=J,J=K;K=R[1]+T+k|0,R[1]=R[2]+N+$|0,R[2]=R[3]+V+Y|0,R[3]=R[4]+z+J|0,R[4]=R[0]+D+P|0,R[0]=K},_doFinalize:function(){var S=this._data,W=S.words,v=this._nDataBytes*8,w=S.sigBytes*8;W[w>>>5]|=128<<24-w%32,W[(w+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,S.sigBytes=(W.length+1)*4,this._process();for(var y=this._hash,R=y.words,x=0;x<5;x++){var H=R[x];R[x]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return y},clone:function(){var S=r.clone.call(this);return S._hash=this._hash.clone(),S}});function h(S,W,v){return S^W^v}function Z(S,W,v){return S&W|~S&v}function u(S,W,v){return(S|~W)^v}function p(S,W,v){return S&v|W&~v}function G(S,W,v){return S^(W|~v)}function f(S,W){return S<<W|S>>>32-W}l.RIPEMD160=r._createHelper(d),l.HmacRIPEMD160=r._createHmacHelper(d)}(),g.RIPEMD160})}(gd)),gd.exports}var nd={exports:{}},nh;function Im(){return nh||(nh=1,function(e,t){(function(g,n){e.exports=n(Ue())})(ze,function(g){(function(){var n=g,l=n.lib,o=l.Base,I=n.enc,r=I.Utf8,C=n.algo;C.HMAC=o.extend({init:function(i,a){i=this._hasher=new i.init,typeof a=="string"&&(a=r.parse(a));var c=i.blockSize,s=c*4;a.sigBytes>s&&(a=i.finalize(a)),a.clamp();for(var m=this._oKey=a.clone(),A=this._iKey=a.clone(),d=m.words,h=A.words,Z=0;Z<c;Z++)d[Z]^=1549556828,h[Z]^=909522486;m.sigBytes=A.sigBytes=s,this.reset()},reset:function(){var i=this._hasher;i.reset(),i.update(this._iKey)},update:function(i){return this._hasher.update(i),this},finalize:function(i){var a=this._hasher,c=a.finalize(i);a.reset();var s=a.finalize(this._oKey.clone().concat(c));return s}})})()})}(nd)),nd.exports}var ld={exports:{}},lh;function OD(){return lh||(lh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),om(),Im())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.Base,I=l.WordArray,r=n.algo,C=r.SHA1,i=r.HMAC,a=r.PBKDF2=o.extend({cfg:o.extend({keySize:128/32,hasher:C,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,s){for(var m=this.cfg,A=i.create(m.hasher,c),d=I.create(),h=I.create([1]),Z=d.words,u=h.words,p=m.keySize,G=m.iterations;Z.length<p;){var f=A.update(s).finalize(h);A.reset();for(var S=f.words,W=S.length,v=f,w=1;w<G;w++){v=A.finalize(v),A.reset();for(var y=v.words,R=0;R<W;R++)S[R]^=y[R]}d.concat(f),u[0]++}return d.sigBytes=p*4,d}});n.PBKDF2=function(c,s,m){return a.create(m).compute(c,s)}}(),g.PBKDF2})}(ld)),ld.exports}var od={exports:{}},oh;function ql(){return oh||(oh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),om(),Im())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.Base,I=l.WordArray,r=n.algo,C=r.MD5,i=r.EvpKDF=o.extend({cfg:o.extend({keySize:128/32,hasher:C,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,c){for(var s,m=this.cfg,A=m.hasher.create(),d=I.create(),h=d.words,Z=m.keySize,u=m.iterations;h.length<Z;){s&&A.update(s),s=A.update(a).finalize(c),A.reset();for(var p=1;p<u;p++)s=A.finalize(s),A.reset();d.concat(s)}return d.sigBytes=Z*4,d}});n.EvpKDF=function(a,c,s){return i.create(s).compute(a,c)}}(),g.EvpKDF})}(od)),od.exports}var Id={exports:{}},Ih;function Qt(){return Ih||(Ih=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),ql())})(ze,function(g){g.lib.Cipher||function(n){var l=g,o=l.lib,I=o.Base,r=o.WordArray,C=o.BufferedBlockAlgorithm,i=l.enc;i.Utf8;var a=i.Base64,c=l.algo,s=c.EvpKDF,m=o.Cipher=C.extend({cfg:I.extend(),createEncryptor:function(y,R){return this.create(this._ENC_XFORM_MODE,y,R)},createDecryptor:function(y,R){return this.create(this._DEC_XFORM_MODE,y,R)},init:function(y,R,x){this.cfg=this.cfg.extend(x),this._xformMode=y,this._key=R,this.reset()},reset:function(){C.reset.call(this),this._doReset()},process:function(y){return this._append(y),this._process()},finalize:function(y){y&&this._append(y);var R=this._doFinalize();return R},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function y(R){return typeof R=="string"?w:S}return function(R){return{encrypt:function(x,H,F){return y(H).encrypt(R,x,H,F)},decrypt:function(x,H,F){return y(H).decrypt(R,x,H,F)}}}}()});o.StreamCipher=m.extend({_doFinalize:function(){var y=this._process(!0);return y},blockSize:1});var A=l.mode={},d=o.BlockCipherMode=I.extend({createEncryptor:function(y,R){return this.Encryptor.create(y,R)},createDecryptor:function(y,R){return this.Decryptor.create(y,R)},init:function(y,R){this._cipher=y,this._iv=R}}),h=A.CBC=function(){var y=d.extend();y.Encryptor=y.extend({processBlock:function(x,H){var F=this._cipher,M=F.blockSize;R.call(this,x,H,M),F.encryptBlock(x,H),this._prevBlock=x.slice(H,H+M)}}),y.Decryptor=y.extend({processBlock:function(x,H){var F=this._cipher,M=F.blockSize,j=x.slice(H,H+M);F.decryptBlock(x,H),R.call(this,x,H,M),this._prevBlock=j}});function R(x,H,F){var M,j=this._iv;j?(M=j,this._iv=n):M=this._prevBlock;for(var O=0;O<F;O++)x[H+O]^=M[O]}return y}(),Z=l.pad={},u=Z.Pkcs7={pad:function(y,R){for(var x=R*4,H=x-y.sigBytes%x,F=H<<24|H<<16|H<<8|H,M=[],j=0;j<H;j+=4)M.push(F);var O=r.create(M,H);y.concat(O)},unpad:function(y){var R=y.words[y.sigBytes-1>>>2]&255;y.sigBytes-=R}};o.BlockCipher=m.extend({cfg:m.cfg.extend({mode:h,padding:u}),reset:function(){var y;m.reset.call(this);var R=this.cfg,x=R.iv,H=R.mode;this._xformMode==this._ENC_XFORM_MODE?y=H.createEncryptor:(y=H.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==y?this._mode.init(this,x&&x.words):(this._mode=y.call(H,this,x&&x.words),this._mode.__creator=y)},_doProcessBlock:function(y,R){this._mode.processBlock(y,R)},_doFinalize:function(){var y,R=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(R.pad(this._data,this.blockSize),y=this._process(!0)):(y=this._process(!0),R.unpad(y)),y},blockSize:128/32});var p=o.CipherParams=I.extend({init:function(y){this.mixIn(y)},toString:function(y){return(y||this.formatter).stringify(this)}}),G=l.format={},f=G.OpenSSL={stringify:function(y){var R,x=y.ciphertext,H=y.salt;return H?R=r.create([1398893684,1701076831]).concat(H).concat(x):R=x,R.toString(a)},parse:function(y){var R,x=a.parse(y),H=x.words;return H[0]==1398893684&&H[1]==1701076831&&(R=r.create(H.slice(2,4)),H.splice(0,4),x.sigBytes-=16),p.create({ciphertext:x,salt:R})}},S=o.SerializableCipher=I.extend({cfg:I.extend({format:f}),encrypt:function(y,R,x,H){H=this.cfg.extend(H);var F=y.createEncryptor(x,H),M=F.finalize(R),j=F.cfg;return p.create({ciphertext:M,key:x,iv:j.iv,algorithm:y,mode:j.mode,padding:j.padding,blockSize:y.blockSize,formatter:H.format})},decrypt:function(y,R,x,H){H=this.cfg.extend(H),R=this._parse(R,H.format);var F=y.createDecryptor(x,H).finalize(R.ciphertext);return F},_parse:function(y,R){return typeof y=="string"?R.parse(y,this):y}}),W=l.kdf={},v=W.OpenSSL={execute:function(y,R,x,H){H||(H=r.random(64/8));var F=s.create({keySize:R+x}).compute(y,H),M=r.create(F.words.slice(R),x*4);return F.sigBytes=R*4,p.create({key:F,iv:M,salt:H})}},w=o.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:v}),encrypt:function(y,R,x,H){H=this.cfg.extend(H);var F=H.kdf.execute(x,y.keySize,y.ivSize);H.iv=F.iv;var M=S.encrypt.call(this,y,R,F.key,H);return M.mixIn(F),M},decrypt:function(y,R,x,H){H=this.cfg.extend(H),R=this._parse(R,H.format);var F=H.kdf.execute(x,y.keySize,y.ivSize,R.salt);H.iv=F.iv;var M=S.decrypt.call(this,y,R,F.key,H);return M}})}()})}(Id)),Id.exports}var rd={exports:{}},rh;function _D(){return rh||(rh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){return g.mode.CFB=function(){var n=g.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(o,I){var r=this._cipher,C=r.blockSize;l.call(this,o,I,C,r),this._prevBlock=o.slice(I,I+C)}}),n.Decryptor=n.extend({processBlock:function(o,I){var r=this._cipher,C=r.blockSize,i=o.slice(I,I+C);l.call(this,o,I,C,r),this._prevBlock=i}});function l(o,I,r,C){var i,a=this._iv;a?(i=a.slice(0),this._iv=void 0):i=this._prevBlock,C.encryptBlock(i,0);for(var c=0;c<r;c++)o[I+c]^=i[c]}return n}(),g.mode.CFB})}(rd)),rd.exports}var Cd={exports:{}},Ch;function $D(){return Ch||(Ch=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){return g.mode.CTR=function(){var n=g.lib.BlockCipherMode.extend(),l=n.Encryptor=n.extend({processBlock:function(o,I){var r=this._cipher,C=r.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0);var c=a.slice(0);r.encryptBlock(c,0),a[C-1]=a[C-1]+1|0;for(var s=0;s<C;s++)o[I+s]^=c[s]}});return n.Decryptor=l,n}(),g.mode.CTR})}(Cd)),Cd.exports}var id={exports:{}},ih;function qD(){return ih||(ih=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return g.mode.CTRGladman=function(){var n=g.lib.BlockCipherMode.extend();function l(r){if((r>>24&255)===255){var C=r>>16&255,i=r>>8&255,a=r&255;C===255?(C=0,i===255?(i=0,a===255?a=0:++a):++i):++C,r=0,r+=C<<16,r+=i<<8,r+=a}else r+=1<<24;return r}function o(r){return(r[0]=l(r[0]))===0&&(r[1]=l(r[1])),r}var I=n.Encryptor=n.extend({processBlock:function(r,C){var i=this._cipher,a=i.blockSize,c=this._iv,s=this._counter;c&&(s=this._counter=c.slice(0),this._iv=void 0),o(s);var m=s.slice(0);i.encryptBlock(m,0);for(var A=0;A<a;A++)r[C+A]^=m[A]}});return n.Decryptor=I,n}(),g.mode.CTRGladman})}(id)),id.exports}var ad={exports:{}},ah;function eQ(){return ah||(ah=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){return g.mode.OFB=function(){var n=g.lib.BlockCipherMode.extend(),l=n.Encryptor=n.extend({processBlock:function(o,I){var r=this._cipher,C=r.blockSize,i=this._iv,a=this._keystream;i&&(a=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(a,0);for(var c=0;c<C;c++)o[I+c]^=a[c]}});return n.Decryptor=l,n}(),g.mode.OFB})}(ad)),ad.exports}var sd={exports:{}},sh;function tQ(){return sh||(sh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){return g.mode.ECB=function(){var n=g.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(l,o){this._cipher.encryptBlock(l,o)}}),n.Decryptor=n.extend({processBlock:function(l,o){this._cipher.decryptBlock(l,o)}}),n}(),g.mode.ECB})}(sd)),sd.exports}var cd={exports:{}},ch;function gQ(){return ch||(ch=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){return g.pad.AnsiX923={pad:function(n,l){var o=n.sigBytes,I=l*4,r=I-o%I,C=o+r-1;n.clamp(),n.words[C>>>2]|=r<<24-C%4*8,n.sigBytes+=r},unpad:function(n){var l=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=l}},g.pad.Ansix923})}(cd)),cd.exports}var dd={exports:{}},dh;function nQ(){return dh||(dh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){return g.pad.Iso10126={pad:function(n,l){var o=l*4,I=o-n.sigBytes%o;n.concat(g.lib.WordArray.random(I-1)).concat(g.lib.WordArray.create([I<<24],1))},unpad:function(n){var l=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=l}},g.pad.Iso10126})}(dd)),dd.exports}var ud={exports:{}},uh;function lQ(){return uh||(uh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){return g.pad.Iso97971={pad:function(n,l){n.concat(g.lib.WordArray.create([2147483648],1)),g.pad.ZeroPadding.pad(n,l)},unpad:function(n){g.pad.ZeroPadding.unpad(n),n.sigBytes--}},g.pad.Iso97971})}(ud)),ud.exports}var Ad={exports:{}},Ah;function oQ(){return Ah||(Ah=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){return g.pad.ZeroPadding={pad:function(n,l){var o=l*4;n.clamp(),n.sigBytes+=o-(n.sigBytes%o||o)},unpad:function(n){for(var l=n.words,o=n.sigBytes-1,o=n.sigBytes-1;o>=0;o--)if(l[o>>>2]>>>24-o%4*8&255){n.sigBytes=o+1;break}}},g.pad.ZeroPadding})}(Ad)),Ad.exports}var md={exports:{}},mh;function IQ(){return mh||(mh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){return g.pad.NoPadding={pad:function(){},unpad:function(){}},g.pad.NoPadding})}(md)),md.exports}var pd={exports:{}},ph;function rQ(){return ph||(ph=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),Qt())})(ze,function(g){return function(n){var l=g,o=l.lib,I=o.CipherParams,r=l.enc,C=r.Hex,i=l.format;i.Hex={stringify:function(a){return a.ciphertext.toString(C)},parse:function(a){var c=C.parse(a);return I.create({ciphertext:c})}}}(),g.format.Hex})}(pd)),pd.exports}var bd={exports:{}},bh;function CQ(){return bh||(bh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),bI(),ZI(),ql(),Qt())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.BlockCipher,I=n.algo,r=[],C=[],i=[],a=[],c=[],s=[],m=[],A=[],d=[],h=[];(function(){for(var p=[],G=0;G<256;G++)G<128?p[G]=G<<1:p[G]=G<<1^283;for(var f=0,S=0,G=0;G<256;G++){var W=S^S<<1^S<<2^S<<3^S<<4;W=W>>>8^W&255^99,r[f]=W,C[W]=f;var v=p[f],w=p[v],y=p[w],R=p[W]*257^W*16843008;i[f]=R<<24|R>>>8,a[f]=R<<16|R>>>16,c[f]=R<<8|R>>>24,s[f]=R;var R=y*16843009^w*65537^v*257^f*16843008;m[W]=R<<24|R>>>8,A[W]=R<<16|R>>>16,d[W]=R<<8|R>>>24,h[W]=R,f?(f=v^p[p[p[y^v]]],S^=p[p[S]]):f=S=1}})();var Z=[0,1,2,4,8,16,32,64,128,27,54],u=I.AES=o.extend({_doReset:function(){var p;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var G=this._keyPriorReset=this._key,f=G.words,S=G.sigBytes/4,W=this._nRounds=S+6,v=(W+1)*4,w=this._keySchedule=[],y=0;y<v;y++)y<S?w[y]=f[y]:(p=w[y-1],y%S?S>6&&y%S==4&&(p=r[p>>>24]<<24|r[p>>>16&255]<<16|r[p>>>8&255]<<8|r[p&255]):(p=p<<8|p>>>24,p=r[p>>>24]<<24|r[p>>>16&255]<<16|r[p>>>8&255]<<8|r[p&255],p^=Z[y/S|0]<<24),w[y]=w[y-S]^p);for(var R=this._invKeySchedule=[],x=0;x<v;x++){var y=v-x;if(x%4)var p=w[y];else var p=w[y-4];x<4||y<=4?R[x]=p:R[x]=m[r[p>>>24]]^A[r[p>>>16&255]]^d[r[p>>>8&255]]^h[r[p&255]]}}},encryptBlock:function(p,G){this._doCryptBlock(p,G,this._keySchedule,i,a,c,s,r)},decryptBlock:function(p,G){var f=p[G+1];p[G+1]=p[G+3],p[G+3]=f,this._doCryptBlock(p,G,this._invKeySchedule,m,A,d,h,C);var f=p[G+1];p[G+1]=p[G+3],p[G+3]=f},_doCryptBlock:function(p,G,f,S,W,v,w,y){for(var R=this._nRounds,x=p[G]^f[0],H=p[G+1]^f[1],F=p[G+2]^f[2],M=p[G+3]^f[3],j=4,O=1;O<R;O++){var z=S[x>>>24]^W[H>>>16&255]^v[F>>>8&255]^w[M&255]^f[j++],D=S[H>>>24]^W[F>>>16&255]^v[M>>>8&255]^w[x&255]^f[j++],T=S[F>>>24]^W[M>>>16&255]^v[x>>>8&255]^w[H&255]^f[j++],N=S[M>>>24]^W[x>>>16&255]^v[H>>>8&255]^w[F&255]^f[j++];x=z,H=D,F=T,M=N}var z=(y[x>>>24]<<24|y[H>>>16&255]<<16|y[F>>>8&255]<<8|y[M&255])^f[j++],D=(y[H>>>24]<<24|y[F>>>16&255]<<16|y[M>>>8&255]<<8|y[x&255])^f[j++],T=(y[F>>>24]<<24|y[M>>>16&255]<<16|y[x>>>8&255]<<8|y[H&255])^f[j++],N=(y[M>>>24]<<24|y[x>>>16&255]<<16|y[H>>>8&255]<<8|y[F&255])^f[j++];p[G]=z,p[G+1]=D,p[G+2]=T,p[G+3]=N},keySize:256/32});n.AES=o._createHelper(u)}(),g.AES})}(bd)),bd.exports}var Zd={exports:{}},Zh;function iQ(){return Zh||(Zh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),bI(),ZI(),ql(),Qt())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.WordArray,I=l.BlockCipher,r=n.algo,C=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],i=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],s=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=r.DES=I.extend({_doReset:function(){for(var Z=this._key,u=Z.words,p=[],G=0;G<56;G++){var f=C[G]-1;p[G]=u[f>>>5]>>>31-f%32&1}for(var S=this._subKeys=[],W=0;W<16;W++){for(var v=S[W]=[],w=a[W],G=0;G<24;G++)v[G/6|0]|=p[(i[G]-1+w)%28]<<31-G%6,v[4+(G/6|0)]|=p[28+(i[G+24]-1+w)%28]<<31-G%6;v[0]=v[0]<<1|v[0]>>>31;for(var G=1;G<7;G++)v[G]=v[G]>>>(G-1)*4+3;v[7]=v[7]<<5|v[7]>>>27}for(var y=this._invSubKeys=[],G=0;G<16;G++)y[G]=S[15-G]},encryptBlock:function(Z,u){this._doCryptBlock(Z,u,this._subKeys)},decryptBlock:function(Z,u){this._doCryptBlock(Z,u,this._invSubKeys)},_doCryptBlock:function(Z,u,p){this._lBlock=Z[u],this._rBlock=Z[u+1],A.call(this,4,252645135),A.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),A.call(this,1,1431655765);for(var G=0;G<16;G++){for(var f=p[G],S=this._lBlock,W=this._rBlock,v=0,w=0;w<8;w++)v|=c[w][((W^f[w])&s[w])>>>0];this._lBlock=W,this._rBlock=S^v}var y=this._lBlock;this._lBlock=this._rBlock,this._rBlock=y,A.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),A.call(this,16,65535),A.call(this,4,252645135),Z[u]=this._lBlock,Z[u+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function A(Z,u){var p=(this._lBlock>>>Z^this._rBlock)&u;this._rBlock^=p,this._lBlock^=p<<Z}function d(Z,u){var p=(this._rBlock>>>Z^this._lBlock)&u;this._lBlock^=p,this._rBlock^=p<<Z}n.DES=I._createHelper(m);var h=r.TripleDES=I.extend({_doReset:function(){var Z=this._key,u=Z.words;if(u.length!==2&&u.length!==4&&u.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var p=u.slice(0,2),G=u.length<4?u.slice(0,2):u.slice(2,4),f=u.length<6?u.slice(0,2):u.slice(4,6);this._des1=m.createEncryptor(o.create(p)),this._des2=m.createEncryptor(o.create(G)),this._des3=m.createEncryptor(o.create(f))},encryptBlock:function(Z,u){this._des1.encryptBlock(Z,u),this._des2.decryptBlock(Z,u),this._des3.encryptBlock(Z,u)},decryptBlock:function(Z,u){this._des3.decryptBlock(Z,u),this._des2.encryptBlock(Z,u),this._des1.decryptBlock(Z,u)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=I._createHelper(h)}(),g.TripleDES})}(Zd)),Zd.exports}var hd={exports:{}},hh;function aQ(){return hh||(hh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),bI(),ZI(),ql(),Qt())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.StreamCipher,I=n.algo,r=I.RC4=o.extend({_doReset:function(){for(var a=this._key,c=a.words,s=a.sigBytes,m=this._S=[],A=0;A<256;A++)m[A]=A;for(var A=0,d=0;A<256;A++){var h=A%s,Z=c[h>>>2]>>>24-h%4*8&255;d=(d+m[A]+Z)%256;var u=m[A];m[A]=m[d],m[d]=u}this._i=this._j=0},_doProcessBlock:function(a,c){a[c]^=C.call(this)},keySize:256/32,ivSize:0});function C(){for(var a=this._S,c=this._i,s=this._j,m=0,A=0;A<4;A++){c=(c+1)%256,s=(s+a[c])%256;var d=a[c];a[c]=a[s],a[s]=d,m|=a[(a[c]+a[s])%256]<<24-A*8}return this._i=c,this._j=s,m}n.RC4=o._createHelper(r);var i=I.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var a=this.cfg.drop;a>0;a--)C.call(this)}});n.RC4Drop=o._createHelper(i)}(),g.RC4})}(hd)),hd.exports}var Gd={exports:{}},Gh;function sQ(){return Gh||(Gh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),bI(),ZI(),ql(),Qt())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.StreamCipher,I=n.algo,r=[],C=[],i=[],a=I.Rabbit=o.extend({_doReset:function(){for(var s=this._key.words,m=this.cfg.iv,A=0;A<4;A++)s[A]=(s[A]<<8|s[A]>>>24)&16711935|(s[A]<<24|s[A]>>>8)&4278255360;var d=this._X=[s[0],s[3]<<16|s[2]>>>16,s[1],s[0]<<16|s[3]>>>16,s[2],s[1]<<16|s[0]>>>16,s[3],s[2]<<16|s[1]>>>16],h=this._C=[s[2]<<16|s[2]>>>16,s[0]&4294901760|s[1]&65535,s[3]<<16|s[3]>>>16,s[1]&4294901760|s[2]&65535,s[0]<<16|s[0]>>>16,s[2]&4294901760|s[3]&65535,s[1]<<16|s[1]>>>16,s[3]&4294901760|s[0]&65535];this._b=0;for(var A=0;A<4;A++)c.call(this);for(var A=0;A<8;A++)h[A]^=d[A+4&7];if(m){var Z=m.words,u=Z[0],p=Z[1],G=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360,f=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,S=G>>>16|f&4294901760,W=f<<16|G&65535;h[0]^=G,h[1]^=S,h[2]^=f,h[3]^=W,h[4]^=G,h[5]^=S,h[6]^=f,h[7]^=W;for(var A=0;A<4;A++)c.call(this)}},_doProcessBlock:function(s,m){var A=this._X;c.call(this),r[0]=A[0]^A[5]>>>16^A[3]<<16,r[1]=A[2]^A[7]>>>16^A[5]<<16,r[2]=A[4]^A[1]>>>16^A[7]<<16,r[3]=A[6]^A[3]>>>16^A[1]<<16;for(var d=0;d<4;d++)r[d]=(r[d]<<8|r[d]>>>24)&16711935|(r[d]<<24|r[d]>>>8)&4278255360,s[m+d]^=r[d]},blockSize:128/32,ivSize:64/32});function c(){for(var s=this._X,m=this._C,A=0;A<8;A++)C[A]=m[A];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<C[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<C[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<C[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<C[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<C[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<C[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<C[6]>>>0?1:0)|0,this._b=m[7]>>>0<C[7]>>>0?1:0;for(var A=0;A<8;A++){var d=s[A]+m[A],h=d&65535,Z=d>>>16,u=((h*h>>>17)+h*Z>>>15)+Z*Z,p=((d&4294901760)*d|0)+((d&65535)*d|0);i[A]=u^p}s[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,s[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,s[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,s[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,s[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,s[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,s[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,s[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}n.Rabbit=o._createHelper(a)}(),g.Rabbit})}(Gd)),Gd.exports}var fd={exports:{}},fh;function cQ(){return fh||(fh=1,function(e,t){(function(g,n,l){e.exports=n(Ue(),bI(),ZI(),ql(),Qt())})(ze,function(g){return function(){var n=g,l=n.lib,o=l.StreamCipher,I=n.algo,r=[],C=[],i=[],a=I.RabbitLegacy=o.extend({_doReset:function(){var s=this._key.words,m=this.cfg.iv,A=this._X=[s[0],s[3]<<16|s[2]>>>16,s[1],s[0]<<16|s[3]>>>16,s[2],s[1]<<16|s[0]>>>16,s[3],s[2]<<16|s[1]>>>16],d=this._C=[s[2]<<16|s[2]>>>16,s[0]&4294901760|s[1]&65535,s[3]<<16|s[3]>>>16,s[1]&4294901760|s[2]&65535,s[0]<<16|s[0]>>>16,s[2]&4294901760|s[3]&65535,s[1]<<16|s[1]>>>16,s[3]&4294901760|s[0]&65535];this._b=0;for(var h=0;h<4;h++)c.call(this);for(var h=0;h<8;h++)d[h]^=A[h+4&7];if(m){var Z=m.words,u=Z[0],p=Z[1],G=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360,f=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,S=G>>>16|f&4294901760,W=f<<16|G&65535;d[0]^=G,d[1]^=S,d[2]^=f,d[3]^=W,d[4]^=G,d[5]^=S,d[6]^=f,d[7]^=W;for(var h=0;h<4;h++)c.call(this)}},_doProcessBlock:function(s,m){var A=this._X;c.call(this),r[0]=A[0]^A[5]>>>16^A[3]<<16,r[1]=A[2]^A[7]>>>16^A[5]<<16,r[2]=A[4]^A[1]>>>16^A[7]<<16,r[3]=A[6]^A[3]>>>16^A[1]<<16;for(var d=0;d<4;d++)r[d]=(r[d]<<8|r[d]>>>24)&16711935|(r[d]<<24|r[d]>>>8)&4278255360,s[m+d]^=r[d]},blockSize:128/32,ivSize:64/32});function c(){for(var s=this._X,m=this._C,A=0;A<8;A++)C[A]=m[A];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<C[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<C[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<C[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<C[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<C[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<C[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<C[6]>>>0?1:0)|0,this._b=m[7]>>>0<C[7]>>>0?1:0;for(var A=0;A<8;A++){var d=s[A]+m[A],h=d&65535,Z=d>>>16,u=((h*h>>>17)+h*Z>>>15)+Z*Z,p=((d&4294901760)*d|0)+((d&65535)*d|0);i[A]=u^p}s[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,s[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,s[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,s[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,s[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,s[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,s[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,s[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}n.RabbitLegacy=o._createHelper(a)}(),g.RabbitLegacy})}(fd)),fd.exports}(function(e,t){(function(g,n,l){e.exports=n(Ue(),xs(),TD(),LD(),bI(),UD(),ZI(),om(),GW(),DD(),fW(),QD(),PD(),jD(),Im(),OD(),ql(),Qt(),_D(),$D(),qD(),eQ(),tQ(),gQ(),nQ(),lQ(),oQ(),IQ(),rQ(),CQ(),iQ(),aQ(),sQ(),cQ())})(ze,function(g){return g})})(hW);const Bh=hW.exports;function BW(e=""){return Bh.SHA256(e).toString(Bh.enc.Base64)}const Tr=()=>{const[e,t]=B.exports.useState("");return[e,t,()=>BW(e)]},dQ={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:285,bgcolor:"background.paper",border:"4px solid #49663c",borderRadius:"20px",boxShadow:24,p:3},uQ=({isOpen:e,toggle:t})=>U("div",{children:[b(Vs,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:e,onClose:t,closeAfterTransition:!0,BackdropComponent:Ss,BackdropProps:{timeout:500},children:b(ys,{in:e,children:U(se,{sx:dQ,children:[b(Xn,{id:"transition-modal-title",variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"Complete!"}),b(Xn,{id:"transition-modal-description",sx:{mt:1,color:"#49663c",fontWeight:"bold",fontSize:"14px"},children:"\uBCC0\uACBD\uB41C \uBE44\uBC00\uBC88\uD638\uB85C \uC7AC\uB85C\uADF8\uC778 \uD574\uC8FC\uC138\uC694!"})]})})}),b("div",{children:!e&&b(Tl,{to:"/"})})]}),yW=()=>{const[e,t]=B.exports.useState(!1);return{isOpen:e,toggle:()=>{t(!e)}}},AQ=pt.div`
  top: 0;
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;

  .title {
    font-size: 20px;
  }
  .input_title {
    font-size: 22px;
    color: #49663c;
  }
  .input_pw {
    font-size: 20px;
    padding-left: 10px;
    width: 100%;
    height: 50px;
    border: 3px solid #b1d6a8;
    //border: 3px solid #f4f9f3;
    border-radius: 15px;
    outline-color: #b1d6a8;
  }
  input::placeholder {
    font-size: 15px;
    font-weight: bold;
    color: #666666;
  }
  .change_btn {
    width: 120px;
    height: 40px;
    font-weight: bolder;
    font-size: 18px;
    color: #49663c;
  }
`;async function mQ(e,t){return await Eg.put("v1/user/change/password",{old_password:e,new_password:t})}function pQ(){const{isOpen:e,toggle:t}=yW(),[g,n]=_g(Kg),[l,o]=B.exports.useState(!1),[I,r,C]=Tr(),[i,a,c]=Tr(),s=B.exports.useRef(),[m,A]=B.exports.useState(!1),[d,h]=B.exports.useState(!1),[Z,u]=B.exports.useState(""),[p,G]=B.exports.useState(!1),[f,S]=B.exports.useState(""),[W,v]=B.exports.useState(""),w=B.exports.useCallback(H=>{s.current&&(r(s.current.value),A(BW(s.current.value)===g.password))}),y=B.exports.useCallback(H=>{const F=/^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,25}$/,M=H.target.value;a(M),F.test(M)?(S("\uC548\uC804\uD55C \uBE44\uBC00\uBC88\uD638"),h(!0)):(S("\uC22B\uC790, \uC601\uBB38\uC790, \uD2B9\uC218\uBB38\uC790 \uC870\uD569\uC73C\uB85C 8\uC790\uB9AC \uC774\uC0C1 \uC785\uB825\uD574\uC8FC\uC138\uC694"),h(!1))},[]),R=B.exports.useCallback(H=>{const F=H.target.value;u(F),i===F?(v("\uBE44\uBC00\uBC88\uD638 \uC77C\uCE58"),G(!0)):(v("\uB2E4\uC2DC \uC785\uB825\uD574\uC8FC\uC138\uC694"),G(!1))},[i]),x=()=>{mQ(C(),c()).then(()=>{t(),o(!0),console.log("Change Password Complete!")})};return U(AQ,{children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uBE44\uBC00\uBC88\uD638 \uBCC0\uACBD"}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:4,ml:3,mr:3},children:U(te,{container:!0,spacing:2,children:[b(te,{className:"input_title",item:!0,xs:12,sm:12,sx:{mt:3},children:"\uD604\uC7AC \uBE44\uBC00\uBC88\uD638"}),b(te,{item:!0,xs:12,sm:12,sx:{ml:-1},children:b("input",{ref:s,className:"input_pw",autoFocus:!0,placeholder:" \uD604\uC7AC \uBE44\uBC00\uBC88\uD638",type:"password"})}),b(Ne,{onClick:w,children:"\uD655\uC778"}),b(te,{className:"input_title",item:!0,xs:12,sm:12,sx:{mt:3},children:"\uC0C8 \uBE44\uBC00\uBC88\uD638"}),U(te,{item:!0,xs:12,sm:12,sx:{ml:-1},children:[b("input",{className:"input_pw",placeholder:" \uC0C8 \uBE44\uBC00\uBC88\uD638",type:"password",onChange:y}),i.length>0&&b("span",{className:`message ${d?"success":"error"}`,children:f})]}),b(te,{className:"input_title",item:!0,xs:12,sm:12,sx:{mt:3},children:"\uC0C8 \uBE44\uBC00\uBC88\uD638 \uD655\uC778"}),U(te,{item:!0,xs:12,sm:12,sx:{ml:-1},children:[b("input",{className:"input_pw",placeholder:" \uC0C8 \uBE44\uBC00\uBC88\uD638 \uD655\uC778",type:"password",onChange:R}),Z.length>0&&b("span",{className:`message ${p?"success":"error"}`,children:W})]})]})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:3,mr:2,float:"right"},children:U(te,{children:[b(D0,{className:"change_btn",label:"\uBCC0\uACBD\uD558\uAE30",clickable:!0,component:"a",href:"#",color:"primary",onClick:x}),l&&b(uQ,{isOpen:e,toggle:t})]})})]})}const bQ=pt.div`
  top: 0;
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;

  .title {
    font-size: 20px;
  }
  .input_title {
    font-size: 22px;
    color: #49663c;
  }
  .input_pw {
    font-size: 20px;
    padding-left: 10px;
    width: 100%;
    height: 50px;
    border: 3px solid #b1d6a8;
    //border: 3px solid #f4f9f3;
    border-radius: 15px;
    outline-color: #b1d6a8;
  }
  input::placeholder {
    font-size: 15px;
    font-weight: bold;
    color: #666666;
  }
  .change_btn {
    width: 100%;
    height: 40px;
    font-weight: bolder;
    font-size: 16px;
    color: #49663c;
    border-radius: 15px;
  }
`;async function ZQ(e,t){return await Eg.put("v1/user/auth/password/"+encodeURIComponent(t),{new_password:e})}async function hQ(e){return await Eg.get("v1/user/auth/password/valid/"+encodeURIComponent(e))}function GQ(){const[e,t,g]=Tr(),[n,l]=B.exports.useState(!1),[o,I]=B.exports.useState(""),[r,C]=B.exports.useState(!1),[i,a]=B.exports.useState(""),[c,s]=B.exports.useState(""),{token:m}=CH(),[A,d]=B.exports.useState(!1),[h,Z]=B.exports.useState(!0);B.exports.useEffect(()=>(hQ(m).then(()=>{console.log("Valid Complete!")}).catch(()=>{Z(!1)}),()=>{}),[]);const u=B.exports.useCallback(f=>{const S=/^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,25}$/,W=f.target.value;t(W),S.test(W)?(a("\uC548\uC804\uD55C \uBE44\uBC00\uBC88\uD638"),l(!0)):(a("\uC22B\uC790, \uC601\uBB38\uC790, \uD2B9\uC218\uBB38\uC790 \uC870\uD569\uC73C\uB85C 8\uC790\uB9AC \uC774\uC0C1 \uC785\uB825\uD574\uC8FC\uC138\uC694"),l(!1))},[]),p=B.exports.useCallback(f=>{const S=f.target.value;I(S),e===S?(s("\uBE44\uBC00\uBC88\uD638 \uC77C\uCE58"),C(!0)):(s("\uB2E4\uC2DC \uC785\uB825\uD574\uC8FC\uC138\uC694"),C(!1))},[e]),G=()=>{ZQ(g(),m).then(()=>{d(!0),console.log("Reset Complete!")})};return h?U(bQ,{children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815"}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:4,ml:3,mr:3},children:U(te,{container:!0,spacing:2,children:[b(te,{className:"input_title",item:!0,xs:12,sm:12,sx:{mt:3},children:"\uC0C8 \uBE44\uBC00\uBC88\uD638"}),U(te,{item:!0,xs:12,sm:12,sx:{ml:-1},children:[b("input",{className:"input_pw",placeholder:" \uC0C8 \uBE44\uBC00\uBC88\uD638",autoFocus:!0,type:"password",value:e,onChange:u}),e.length>0&&b("span",{className:`message ${n?"success":"error"}`,children:i})]}),b(te,{className:"input_title",item:!0,xs:12,sm:12,sx:{mt:3},children:"\uC0C8 \uBE44\uBC00\uBC88\uD638 \uD655\uC778"}),U(te,{item:!0,xs:12,sm:12,sx:{ml:-1},children:[b("input",{className:"input_pw",placeholder:" \uC0C8 \uBE44\uBC00\uBC88\uD638 \uD655\uC778",type:"password",value:o,onChange:p}),o.length>0&&b("span",{className:`message ${r?"success":"error"}`,children:c})]})]})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:3,mr:3,ml:3},children:b(te,{container:!0,children:U(te,{item:!0,xs:12,children:[b(Ne,{className:"change_btn",variant:"contained",color:"primary",onClick:G,children:"\uD655 \uC778"}),b("div",{children:A&&b(Tl,{to:"/"})})]})})})]}):b(Tl,{to:"/TokenInvalid"})}const fQ=pt.div`
  margin: auto;
  display: flex;
  align-items: center;
  flex-direction: column;
  font-weight: bolder;
  color: #000000;

  .title {
    font-size: 20px;
    align-self: flex-start;
  }

  .btn {
    color: #49663c;
    width: 100%;
    height: 80px;
    font-weight: bold;
    font-size: 32px;
    border-radius: 20px;
  }

  .btnBox {
    display: flex;
    justify-content: center;
    align-items: center;
  }
`;function BQ(){return U(fQ,{children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uAD6C\uB9E4\uB0B4\uC5ED"}),b(se,{className:"btnBox",sx:{margin:"auto",mt:6,ml:3,mr:3},children:U(te,{container:!0,spacing:2,children:[b(te,{item:!0,xs:12,children:b(lt,{to:"/Used",children:b(Ne,{className:"btn",variant:"contained",children:"\uC0AC\uC6A9\uD55C \uC2DD\uAD8C \uBCF4\uAE30"})})}),b(te,{item:!0,xs:12,sx:{mt:3},children:b(lt,{to:"/UnUsed",children:b(Ne,{className:"btn",variant:"contained",children:"\uBBF8\uC0AC\uC6A9\uD55C \uC2DD\uAD8C \uBCF4\uAE30"})})})]})})]})}const yQ=pt.div`
  .down {
    width: 35px;
  }
  .transfer_btn {
    color: #49663c;
    font-size: 14px;
    font-weight: bolder;
    height: 35px;
    border-radius: 15px;
  }
  .item {
    margin-top: 10px;
    margin-bottom: 10px;
    background-color: #f2f7f1;
  }
`,SW=({ticket:e,expanded:t,setExpanded:g})=>b(yQ,{children:U(jK,{expanded:t,onChange:(l,o)=>{g(o?e.identifier:!1)},className:"item",children:[b(v3,{className:"summary",children:b(Xn,{sx:{fontSize:20,fontWeight:"bolder"},children:b(te,{container:!0,spacing:1,children:b(te,{item:!0,xs:10,children:"\uCF54\uC2A4 - "+e.tclass})})})}),b(t3,{className:"detail",children:U(Xn,{sx:{fontSize:13,fontWeight:"bold"},children:["\uAC00\uACA9 : ",e.price,b("br",{}),"\uAD6C\uB9E4\uB0A0\uC9DC : ",b("br",{}),"\uC0AC\uC6A9\uB0A0\uC9DC : ",b("br",{}),"\uC18C\uC720\uC790 : ",e.owner,b("br",{}),"\uAD6C\uB9E4\uC790 : ",e.buyer,b("br",{}),b("br",{})]})})]})});Ys.defaults.withCredentials=!0;const eo=Ys.create({baseURL:"https://bapsim.kro.kr/api",timeout:5e3,withCredentials:!0});function rm(e){return new Promise((t,g)=>{eo.get("/v1/user/history/"+e).then(n=>{n.data.ok&&t(n.data.result)})})}const SQ=pt.div`
  img {
    transform: translate(75%, 10%);
    margin-top: 100px;
    width: 150px;
  }

  p {
    font-size: 20px;
    font-weight: bold;
    text-align: center;
    color: #49663c;
  }
`,WW=()=>U(SQ,{children:[b("img",{src:"\\images\\expiration.png"}),b("p",{children:"\uC2DD\uAD8C \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})]}),WQ=pt.div`
  top: 0;
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;

  .title {
    font-size: 20px;
  }
  .ticket-list {
    margin-top: 20px;
    width: 95%;
  }
  .table {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 30px;
  }
`;function VQ(){const[e,t]=_g(Kg),[g,n]=B.exports.useState(""),[l,o]=B.exports.useState();return B.exports.useEffect(()=>{rm(e.email).then(I=>{o(I)})},[]),U(WQ,{children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uC0AC\uC6A9 \uC2DD\uAD8C"}),b(z0,{className:"ticket-list",children:l&&l.length<0?l.map(I=>b(SW,{ticket:I,expanded:g===I.identifier,setExpanded:n},I.identifier)):b(WW,{})})]})}const vQ=pt.div`
  top: 0;
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;

  .title {
    font-size: 20px;
  }
  .ticket-list {
    margin-top: 20px;
    width: 95%;
  }
  .table {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 30px;
  }
`;function RQ(){const[e,t]=_g(Kg),[g,n]=B.exports.useState(""),[l,o]=B.exports.useState();return B.exports.useEffect(()=>{rm(e.email).then(I=>{o(I)})},[]),U(vQ,{children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uC794\uC5EC \uC2DD\uAD8C"}),b(z0,{className:"ticket-list",children:l&&l.length>0?l.map(I=>b(SW,{ticket:I,expanded:g===I.identifier,setExpanded:n},I.identifier)):b(WW,{})})]})}function yh(e,t){return new Promise((g,n)=>{eo.post("/v1/user/auth/login",{email:e,password:t},{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(l=>{g(l.data)})})}function XQ(){return b("div",{style:{display:"flex",justifyContent:"center"},children:U(_u,{severity:"error",sx:{width:"80%"},children:[b(CE,{children:"Failure!"}),"\uC798\uBABB\uB41C \uC544\uC774\uB514 \uB610\uB294 \uBE44\uBC00\uBC88\uD638 \uC785\uB2C8\uB2E4."]})})}const kQ=pt.div`
  top: 0;
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;

  .title {
    font-size: 20px;
  }
  .input_title {
    font-size: 22px;
    color: #49663c;
  }
  .input_email {
    font-size: 20px;
    padding-left: 10px;
    width: 100%;
    height: 50px;
    border: 3px solid #b1d6a8;
    //border: 3px solid #f4f9f3;
    border-radius: 15px;
    outline-color: #b1d6a8;
  }
  .input_pw {
    font-size: 20px;
    padding-left: 10px;
    width: 100%;
    height: 50px;
    border: 3px solid #b1d6a8;
    //border: 3px solid #f4f9f3;
    border-radius: 15px;
    outline-color: #b1d6a8;
  }
  input::placeholder {
    font-size: 15px;
    font-weight: bold;
    color: #666666;
  }
  .login_btn {
    width: 100%;
    height: 40px;
    font-weight: bolder;
    font-size: 16px;
    color: #49663c;
    border-radius: 15px;
  }
  .link {
    text-align: center;
  }
  .btn {
    font-weight: bolder;
    font-size: 17px;
  }
`;function JQ(){const[e,t]=B.exports.useState(""),[g,n,l]=Tr(),[o,I]=B.exports.useState(!1),[r,C]=_g(Kg);return U(kQ,{children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uB85C\uADF8\uC778"}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:4,ml:3,mr:3},children:U(te,{container:!0,spacing:2,children:[b(te,{className:"input_title",item:!0,xs:12,sx:{mt:3},children:"Email"}),b(te,{item:!0,xs:12,sx:{ml:-1},children:b("input",{className:"input_email",autoFocus:!0,placeholder:" \uC774\uBA54\uC77C",type:"email",value:e,onChange:m=>{t(m.target.value)}})}),b(te,{className:"input_title",item:!0,xs:12,sx:{mt:3},children:"Password"}),b(te,{item:!0,xs:12,sx:{ml:-1},children:b("input",{className:"input_pw",placeholder:" \uBE44\uBC00\uBC88\uD638",type:"password",value:g,onChange:m=>{n(m.target.value)},onKeyPress:m=>{m.key==="Enter"&&yh(e,l()).then(A=>{A.data.ok?(C(A.data.result),I(!1),console.log("Login Complete!")):(I(!0),console.log("Login Fail"))})}})})]})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:4,ml:3,mr:3},children:U(te,{container:!0,spacing:2,children:[U(te,{item:!0,xs:12,children:[b(Ne,{className:"login_btn",variant:"contained",color:"primary",onClick:()=>{yh(e,l()).then(m=>{m.ok?(C(m.result),I(!1),console.log("Login Complete!")):(I(!0),console.log("Login Fail"))})},children:"\uB85C\uADF8\uC778"}),b("div",{children:r&&b(Tl,{to:"/"})})]}),b(te,{className:"link",item:!0,xs:6,children:b(lt,{to:"/RequestEmail",children:b(Ne,{className:"btn",color:"success",children:"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815"})})}),b(te,{className:"link",item:!0,xs:6,children:b(lt,{to:"/SignUp",children:b(Ne,{className:"btn",color:"success",children:"\uD68C\uC6D0 \uAC00\uC785"})})})]})}),o&&b(XQ,{})]})}const YQ=pt.div`
  top: 0;
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;

  .title {
    font-size: 20px;
  }
  .input_title {
    font-size: 22px;
    color: #49663c;
  }
  .input_name {
    font-size: 20px;
    padding-left: 10px;
    width: 100%;
    height: 50px;
    border: 3px solid #b1d6a8;
    //border: 3px solid #f4f9f3;
    border-radius: 15px;
    outline-color: #b1d6a8;
  }
  .email {
    border: 3px solid #b1d6a8;
    width: 100%;
    height: 50px;
    border-radius: 15px;
    padding-left: 10px;
  }
  .input_email {
    font-size: 20px;
    margin: 5px 0px;
    width: 100%;
    height: 40px;
    border: 0px solid #b1d6a8;
    //border: 3px solid #f4f9f3;
    border-radius: 15px;
    outline-color: white;
  }
  .select_email {
    font-size: 15px;
    font-weight: bolder;
    color: #666666;
    margin: 5px 0px;
    width: 100%;
    height: 40px;
    border: 0px solid #b1d6a8;
    outline-color: white;
  }
  .input_pw {
    font-size: 20px;
    padding-left: 10px;
    width: 100%;
    height: 50px;
    border: 3px solid #b1d6a8;
    //border: 3px solid #f4f9f3;
    border-radius: 15px;
    outline-color: #b1d6a8;
  }
  input::placeholder {
    font-size: 15px;
    font-weight: bold;
    color: #666666;
  }
  .login_btn {
    width: 100%;
    height: 40px;
    font-weight: bolder;
    font-size: 16px;
    color: #49663c;
    border-radius: 15px;
  }
  .link {
    text-align: center;
  }
  .btn {
    font-weight: bolder;
    font-size: 17px;
  }
`;async function xQ(e,t,g){return await Eg.post("v1/user/auth/signup",{username:e,password:t,email:g})}async function HQ(e){return await Eg.get("v1/user/get/is?email="+e)}function wQ(){const[e,t]=B.exports.useState(""),[g,n,l]=Tr(),[o,I]=B.exports.useState(""),[r,C]=B.exports.useState(""),[i,a]=B.exports.useState(!1),[c,s]=B.exports.useState(!1),[m,A]=B.exports.useState(!1),[d,h]=B.exports.useState(!1),[Z,u]=B.exports.useState(""),[p,G]=B.exports.useState(""),[f,S]=B.exports.useState(""),[W,v]=B.exports.useState(""),[w,y]=B.exports.useState(!1),R=B.exports.useCallback(O=>{t(O.target.value),O.target.value.length<2||O.target.value.length>5?(u("2\uAE00\uC790 \uC774\uC0C1 5\uAE00\uC790 \uBBF8\uB9CC\uC73C\uB85C \uC785\uB825\uD574\uC8FC\uC138\uC694."),a(!1)):(u(""),a(!0))},[]),x=B.exports.useCallback(O=>{const z=/([\w-.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,D=O.target.value;I(D),z.test(D)?(G(""),s(!0)):(G("\uC774\uBA54\uC77C \uD615\uC2DD\uC744 \uB9DE\uAC8C \uC785\uB825\uD574\uC8FC\uC138\uC694."),s(!1))},[]),H=B.exports.useCallback(O=>{const z=/^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,25}$/,D=O.target.value;n(D),z.test(D)?(S("\uC548\uC804\uD55C \uBE44\uBC00\uBC88\uD638"),A(!0)):(S("\uC22B\uC790, \uC601\uBB38\uC790, \uD2B9\uC218\uBB38\uC790 \uC870\uD569\uC73C\uB85C 8\uC790\uB9AC \uC774\uC0C1 \uC785\uB825\uD574\uC8FC\uC138\uC694"),A(!1))},[]),F=B.exports.useCallback(O=>{const z=O.target.value;C(z),g===z?(v("\uBE44\uBC00\uBC88\uD638 \uC77C\uCE58"),h(!0)):(v("\uB2E4\uC2DC \uC785\uB825 \uD574\uC8FC\uC138\uC694"),h(!1))},[g]),M=()=>{HQ(o).then(O=>{O.data.ok?G("\uC774\uBBF8 \uC0AC\uC6A9\uC911\uC778 \uC774\uBA54\uC77C\uC785\uB2C8\uB2E4."):G("")})},j=()=>{xQ(e,l(),o).then(O=>{O.data.ok?(y(!0),console.log("Complete!")):console.log("\uC788\uB2E4")})};return U(YQ,{children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uD68C\uC6D0\uAC00\uC785"}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:4,ml:3,mr:3},children:U(te,{container:!0,spacing:2,children:[b(te,{className:"input_title",item:!0,xs:12,sx:{mt:3},children:"User Name"}),U(te,{item:!0,xs:12,sx:{ml:-1},children:[b("input",{className:"input_name",autoFocus:!0,placeholder:" \uC0AC\uC6A9\uC790 \uC774\uB984",type:"text",value:e,onChange:R}),e.length>0&&b("span",{className:`message ${i?"success":"error"}`,children:Z})]}),b(te,{className:"input_title",item:!0,xs:12,sx:{mt:3},children:"Email"}),U(te,{item:!0,xs:12,sx:{ml:-1},children:[b("div",{className:"email",children:U(te,{container:!0,spacing:1,children:[U(te,{item:!0,xs:6,children:[b("input",{className:"input_email",placeholder:" \uC774\uBA54\uC77C",type:"email",value:o,onChange:x}),o.length>0&&b("span",{className:`message ${c?"success":"error"}`,children:p})]}),b(te,{item:!0,xs:5,children:U("select",{className:"select_email",children:[b("option",{value:"\uC9C1\uC811\uC785\uB825",children:"\uC9C1\uC811\uC785\uB825"}),b("option",{value:"naver",children:"@naver.com"}),b("option",{value:"google",children:"@google.com"}),b("option",{value:"daum",children:"@daum.net"})]})})]})}),b(te,{sx:{display:"flex",justifyContent:"flex-end"},children:b(Ne,{style:{color:"#49663c",fontWeight:"bolder"},onClick:M,children:"\uC911\uBCF5 \uD655\uC778"})})]}),b(te,{className:"input_title",item:!0,xs:12,sx:{mt:0},children:"Password"}),U(te,{item:!0,xs:12,sx:{ml:-1},children:[b("input",{className:"input_pw",placeholder:" \uBE44\uBC00\uBC88\uD638",type:"password",value:g,onChange:H}),g.length>0&&b("span",{className:`message ${m?"success":"error"}`,children:f})]}),b(te,{className:"input_title",item:!0,xs:12,sx:{mt:3},children:"Password Confirm"}),U(te,{item:!0,xs:12,sx:{ml:-1},children:[b("input",{className:"input_pw",placeholder:" \uBE44\uBC00\uBC88\uD638 \uD655\uC778",type:"password",value:r,onChange:F}),r.length>0&&b("span",{className:`message ${d?"success":"error"}`,children:W})]})]})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:4,ml:3,mr:3},children:U(te,{container:!0,spacing:2,children:[U(te,{className:"login",item:!0,xs:12,children:[b(Ne,{className:"login_btn",variant:"contained",color:"primary",onClick:j,children:"\uD68C\uC6D0\uAC00\uC785"}),b("div",{children:w&&b(Tl,{to:"/"})})]}),b(te,{className:"link",item:!0,xs:6,children:b(lt,{to:"/ChangePassword",children:b(Ne,{className:"btn",color:"success",children:"\uBE44\uBC00\uBC88\uD638 \uBCC0\uACBD"})})}),b(te,{className:"link",item:!0,xs:6,children:b(lt,{to:"/Signin",children:b(Ne,{className:"btn",color:"success",children:"\uB85C\uADF8\uC778"})})})]})})]})}var VW={},vW={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},NQ=vW;function RW(e){this.mode=NQ.MODE_8BIT_BYTE,this.data=e}RW.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var FQ=RW,XW={L:1,M:0,Q:3,H:2},UC=XW;function ln(e,t){this.totalCount=e,this.dataCount=t}ln.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];ln.getRSBlocks=function(e,t){var g=ln.getRsBlockTable(e,t);if(g==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=g.length/3,l=new Array,o=0;o<n;o++)for(var I=g[o*3+0],r=g[o*3+1],C=g[o*3+2],i=0;i<I;i++)l.push(new ln(r,C));return l};ln.getRsBlockTable=function(e,t){switch(t){case UC.L:return ln.RS_BLOCK_TABLE[(e-1)*4+0];case UC.M:return ln.RS_BLOCK_TABLE[(e-1)*4+1];case UC.Q:return ln.RS_BLOCK_TABLE[(e-1)*4+2];case UC.H:return ln.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var KQ=ln;function kW(){this.buffer=new Array,this.length=0}kW.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var g=0;g<t;g++)this.putBit((e>>>t-g-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var EQ=kW,Qg={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Qg.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Qg.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var zt=0;zt<8;zt++)Qg.EXP_TABLE[zt]=1<<zt;for(var zt=8;zt<256;zt++)Qg.EXP_TABLE[zt]=Qg.EXP_TABLE[zt-4]^Qg.EXP_TABLE[zt-5]^Qg.EXP_TABLE[zt-6]^Qg.EXP_TABLE[zt-8];for(var zt=0;zt<255;zt++)Qg.LOG_TABLE[Qg.EXP_TABLE[zt]]=zt;var JW=Qg,Bl=JW;function bi(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var g=0;g<e.length&&e[g]==0;)g++;this.num=new Array(e.length-g+t);for(var n=0;n<e.length-g;n++)this.num[n]=e[n+g]}bi.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),g=0;g<this.getLength();g++)for(var n=0;n<e.getLength();n++)t[g+n]^=Bl.gexp(Bl.glog(this.get(g))+Bl.glog(e.get(n)));return new bi(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Bl.glog(this.get(0))-Bl.glog(e.get(0)),g=new Array(this.getLength()),n=0;n<this.getLength();n++)g[n]=this.get(n);for(var n=0;n<e.getLength();n++)g[n]^=Bl.gexp(Bl.glog(e.get(n))+t);return new bi(g,0).mod(e)}};var YW=bi,Xg=vW,Sh=YW,zQ=JW,Mn={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Ft={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G18:1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,G15_MASK:1<<14|1<<12|1<<10|1<<4|1<<1,getBCHTypeInfo:function(e){for(var t=e<<10;Ft.getBCHDigit(t)-Ft.getBCHDigit(Ft.G15)>=0;)t^=Ft.G15<<Ft.getBCHDigit(t)-Ft.getBCHDigit(Ft.G15);return(e<<10|t)^Ft.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Ft.getBCHDigit(t)-Ft.getBCHDigit(Ft.G18)>=0;)t^=Ft.G18<<Ft.getBCHDigit(t)-Ft.getBCHDigit(Ft.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return Ft.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,g){switch(e){case Mn.PATTERN000:return(t+g)%2==0;case Mn.PATTERN001:return t%2==0;case Mn.PATTERN010:return g%3==0;case Mn.PATTERN011:return(t+g)%3==0;case Mn.PATTERN100:return(Math.floor(t/2)+Math.floor(g/3))%2==0;case Mn.PATTERN101:return t*g%2+t*g%3==0;case Mn.PATTERN110:return(t*g%2+t*g%3)%2==0;case Mn.PATTERN111:return(t*g%3+(t+g)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new Sh([1],0),g=0;g<e;g++)t=t.multiply(new Sh([1,zQ.gexp(g)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Xg.MODE_NUMBER:return 10;case Xg.MODE_ALPHA_NUM:return 9;case Xg.MODE_8BIT_BYTE:return 8;case Xg.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Xg.MODE_NUMBER:return 12;case Xg.MODE_ALPHA_NUM:return 11;case Xg.MODE_8BIT_BYTE:return 16;case Xg.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Xg.MODE_NUMBER:return 14;case Xg.MODE_ALPHA_NUM:return 13;case Xg.MODE_8BIT_BYTE:return 16;case Xg.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),g=0,n=0;n<t;n++)for(var l=0;l<t;l++){for(var o=0,I=e.isDark(n,l),r=-1;r<=1;r++)if(!(n+r<0||t<=n+r))for(var C=-1;C<=1;C++)l+C<0||t<=l+C||r==0&&C==0||I==e.isDark(n+r,l+C)&&o++;o>5&&(g+=3+o-5)}for(var n=0;n<t-1;n++)for(var l=0;l<t-1;l++){var i=0;e.isDark(n,l)&&i++,e.isDark(n+1,l)&&i++,e.isDark(n,l+1)&&i++,e.isDark(n+1,l+1)&&i++,(i==0||i==4)&&(g+=3)}for(var n=0;n<t;n++)for(var l=0;l<t-6;l++)e.isDark(n,l)&&!e.isDark(n,l+1)&&e.isDark(n,l+2)&&e.isDark(n,l+3)&&e.isDark(n,l+4)&&!e.isDark(n,l+5)&&e.isDark(n,l+6)&&(g+=40);for(var l=0;l<t;l++)for(var n=0;n<t-6;n++)e.isDark(n,l)&&!e.isDark(n+1,l)&&e.isDark(n+2,l)&&e.isDark(n+3,l)&&e.isDark(n+4,l)&&!e.isDark(n+5,l)&&e.isDark(n+6,l)&&(g+=40);for(var a=0,l=0;l<t;l++)for(var n=0;n<t;n++)e.isDark(n,l)&&a++;var c=Math.abs(100*a/t/t-50)/5;return g+=c*10,g}},MQ=Ft,TQ=FQ,xW=KQ,HW=EQ,hl=MQ,LQ=YW;function on(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var vg=on.prototype;vg.addData=function(e){var t=new TQ(e);this.dataList.push(t),this.dataCache=null};vg.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};vg.getModuleCount=function(){return this.moduleCount};vg.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=xW.getRSBlocks(e,this.errorCorrectLevel),g=new HW,n=0,l=0;l<t.length;l++)n+=t[l].dataCount;for(var l=0;l<this.dataList.length;l++){var o=this.dataList[l];g.put(o.mode,4),g.put(o.getLength(),hl.getLengthInBits(o.mode,e)),o.write(g)}if(g.getLengthInBits()<=n*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};vg.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var g=0;g<this.moduleCount;g++){this.modules[g]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[g][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=on.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};vg.setupPositionProbePattern=function(e,t){for(var g=-1;g<=7;g++)if(!(e+g<=-1||this.moduleCount<=e+g))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=g&&g<=6&&(n==0||n==6)||0<=n&&n<=6&&(g==0||g==6)||2<=g&&g<=4&&2<=n&&n<=4?this.modules[e+g][t+n]=!0:this.modules[e+g][t+n]=!1)};vg.getBestMaskPattern=function(){for(var e=0,t=0,g=0;g<8;g++){this.makeImpl(!0,g);var n=hl.getLostPoint(this);(g==0||e>n)&&(e=n,t=g)}return t};vg.createMovieClip=function(e,t,g){var n=e.createEmptyMovieClip(t,g),l=1;this.make();for(var o=0;o<this.modules.length;o++)for(var I=o*l,r=0;r<this.modules[o].length;r++){var C=r*l,i=this.modules[o][r];i&&(n.beginFill(0,100),n.moveTo(C,I),n.lineTo(C+l,I),n.lineTo(C+l,I+l),n.lineTo(C,I+l),n.endFill())}return n};vg.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};vg.setupPositionAdjustPattern=function(){for(var e=hl.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var g=0;g<e.length;g++){var n=e[t],l=e[g];if(this.modules[n][l]==null)for(var o=-2;o<=2;o++)for(var I=-2;I<=2;I++)o==-2||o==2||I==-2||I==2||o==0&&I==0?this.modules[n+o][l+I]=!0:this.modules[n+o][l+I]=!1}};vg.setupTypeNumber=function(e){for(var t=hl.getBCHTypeNumber(this.typeNumber),g=0;g<18;g++){var n=!e&&(t>>g&1)==1;this.modules[Math.floor(g/3)][g%3+this.moduleCount-8-3]=n}for(var g=0;g<18;g++){var n=!e&&(t>>g&1)==1;this.modules[g%3+this.moduleCount-8-3][Math.floor(g/3)]=n}};vg.setupTypeInfo=function(e,t){for(var g=this.errorCorrectLevel<<3|t,n=hl.getBCHTypeInfo(g),l=0;l<15;l++){var o=!e&&(n>>l&1)==1;l<6?this.modules[l][8]=o:l<8?this.modules[l+1][8]=o:this.modules[this.moduleCount-15+l][8]=o}for(var l=0;l<15;l++){var o=!e&&(n>>l&1)==1;l<8?this.modules[8][this.moduleCount-l-1]=o:l<9?this.modules[8][15-l-1+1]=o:this.modules[8][15-l-1]=o}this.modules[this.moduleCount-8][8]=!e};vg.mapData=function(e,t){for(var g=-1,n=this.moduleCount-1,l=7,o=0,I=this.moduleCount-1;I>0;I-=2)for(I==6&&I--;;){for(var r=0;r<2;r++)if(this.modules[n][I-r]==null){var C=!1;o<e.length&&(C=(e[o]>>>l&1)==1);var i=hl.getMask(t,n,I-r);i&&(C=!C),this.modules[n][I-r]=C,l--,l==-1&&(o++,l=7)}if(n+=g,n<0||this.moduleCount<=n){n-=g,g=-g;break}}};on.PAD0=236;on.PAD1=17;on.createData=function(e,t,g){for(var n=xW.getRSBlocks(e,t),l=new HW,o=0;o<g.length;o++){var I=g[o];l.put(I.mode,4),l.put(I.getLength(),hl.getLengthInBits(I.mode,e)),I.write(l)}for(var r=0,o=0;o<n.length;o++)r+=n[o].dataCount;if(l.getLengthInBits()>r*8)throw new Error("code length overflow. ("+l.getLengthInBits()+">"+r*8+")");for(l.getLengthInBits()+4<=r*8&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;!(l.getLengthInBits()>=r*8||(l.put(on.PAD0,8),l.getLengthInBits()>=r*8));)l.put(on.PAD1,8);return on.createBytes(l,n)};on.createBytes=function(e,t){for(var g=0,n=0,l=0,o=new Array(t.length),I=new Array(t.length),r=0;r<t.length;r++){var C=t[r].dataCount,i=t[r].totalCount-C;n=Math.max(n,C),l=Math.max(l,i),o[r]=new Array(C);for(var a=0;a<o[r].length;a++)o[r][a]=255&e.buffer[a+g];g+=C;var c=hl.getErrorCorrectPolynomial(i),s=new LQ(o[r],c.getLength()-1),m=s.mod(c);I[r]=new Array(c.getLength()-1);for(var a=0;a<I[r].length;a++){var A=a+m.getLength()-I[r].length;I[r][a]=A>=0?m.get(A):0}}for(var d=0,a=0;a<t.length;a++)d+=t[a].totalCount;for(var h=new Array(d),Z=0,a=0;a<n;a++)for(var r=0;r<t.length;r++)a<o[r].length&&(h[Z++]=o[r][a]);for(var a=0;a<l;a++)for(var r=0;r<t.length;r++)a<I[r].length&&(h[Z++]=I[r][a]);return h};var UQ=on,Cm={};Object.defineProperty(Cm,"__esModule",{value:!0});var DQ=gI.exports,DC=wW(DQ),QQ=B.exports,PQ=wW(QQ);function wW(e){return e&&e.__esModule?e:{default:e}}var jQ={d:DC.default.string.isRequired,fill:DC.default.string.isRequired,transformX:DC.default.number.isRequired,transformY:DC.default.number.isRequired},OQ={},im=function(t){var g=t.d,n=t.fill,l=t.transformX,o=t.transformY;return PQ.default.createElement("path",{d:g,fill:n,transform:"matrix("+[1,0,0,1,l,o]+")"})};im.propTypes=jQ;im.defaultProps=OQ;Cm.default=im;var am={};Object.defineProperty(am,"__esModule",{value:!0});var _Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e},$Q=gI.exports,QC=FW($Q),NW=B.exports,Wh=FW(NW);function FW(e){return e&&e.__esModule?e:{default:e}}function qQ(e,t){var g={};for(var n in e)t.indexOf(n)>=0||!Object.prototype.hasOwnProperty.call(e,n)||(g[n]=e[n]);return g}var e4={children:QC.default.array.isRequired,size:QC.default.number.isRequired,title:QC.default.string,xmlns:QC.default.string},t4={title:void 0,xmlns:"http://www.w3.org/2000/svg"},Hs=(0,NW.forwardRef)(function(e,t){var g=e.children,n=e.size,l=e.title,o=e.xmlns,I=qQ(e,["children","size","title","xmlns"]);return Wh.default.createElement("svg",_Q({},I,{height:n,ref:t,width:n,xmlns:o}),l?Wh.default.createElement("title",null,l):null,g)});Hs.displayName="QRCodeSurface";Hs.propTypes=e4;Hs.defaultProps=t4;am.default=Hs;Object.defineProperty(VW,"__esModule",{value:!0});var g4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e},n4=UQ,l4=hI(n4),o4=XW,I4=hI(o4),r4=gI.exports,dn=hI(r4),sm=B.exports,Vh=hI(sm),C4=Cm,i4=hI(C4),a4=am,s4=hI(a4);function hI(e){return e&&e.__esModule?e:{default:e}}function c4(e,t){var g={};for(var n in e)t.indexOf(n)>=0||!Object.prototype.hasOwnProperty.call(e,n)||(g[n]=e[n]);return g}var d4={bgColor:dn.default.oneOfType([dn.default.object,dn.default.string]),fgColor:dn.default.oneOfType([dn.default.object,dn.default.string]),level:dn.default.string,size:dn.default.number,value:dn.default.string.isRequired},u4={bgColor:"#FFFFFF",fgColor:"#000000",level:"L",size:256},ws=(0,sm.forwardRef)(function(e,t){var g=e.bgColor,n=e.fgColor,l=e.level,o=e.size,I=e.value,r=c4(e,["bgColor","fgColor","level","size","value"]),C=new l4.default(-1,I4.default[l]);C.addData(I),C.make();var i=C.modules,a=o/i.length;return Vh.default.createElement(s4.default,g4({},r,{size:o,ref:t}),i.map(function(c,s){return c.map(function(m,A){var d=Math.round(A*a),h=Math.round(s*a),Z=Math.round((A+1)*a)-d,u=Math.round((s+1)*a)-h;return Vh.default.createElement(i4.default,{key:"rectangle-"+s+"-"+A,d:"M 0 0 L "+Z+" 0 L "+Z+" "+u+" L 0 "+u+" Z",fill:m?n:g,transformX:d,transformY:h})})}))});ws.displayName="QRCode";ws.propTypes=d4;ws.defaultProps=u4;var A4=VW.default=(0,sm.memo)(ws);const m4=pt.div`
  top: 0;
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;
  .title {
    font-size: 20px;
    align-self: flex-start;
  }
  .name {
    font-size: 30px;
  }
  .email {
    font-size: 20px;
  }
  .qr_box {
    border-style: solid;
    border-width: 2px;
    border-color: #49663c;
    border-radius: 20px;
    padding: 10px 10px;
    width: 70%;
    height: 250px;
    display: flex;
    justify-content: center;
  }
  .coin_title {
    font-size: 20px;
    margin: 0 auto;
    margin-top: 5px;
    display: flex;
    justify-content: space-between;
  }
  .coin_content {
    font-size: 25px;
    display: flex;
    justify-content: space-between;
  }
  .coin_btn {
    width: 80px;
    height: 35px;
    font-weight: bolder;
    font-size: 15px;
    color: #49663c;
  }
  .btn-group {
    margin: auto 5px;
    display: flex;
    justify-content: center;
  }
  .btn {
    color: #49663c;
    width: 190px;
    height: 70px;
    font-weight: bolder;
    font-size: 20px;
  }
  .coin {
    width: 30px;
    height: 30px;
  }
  .ticket_btn {
    color: #49663c;
    background-color: #deecdc;
    border-radius: 1ch;
    width: 350px;
    height: 60px;
    margin-top: 1ch;
    font-weight: bolder;
    font-size: 20px;
  }
`,p4=["A","B","C"],b4=Intl.DateTimeFormat("ko",{dateStyle:"short"});function Bd(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}function Z4(){const e=by(Kg),[t,g]=B.exports.useState(),[n,l]=B.exports.useState([]),[o,I]=B.exports.useState(0),r=C=>()=>{g(C)};return B.exports.useEffect(()=>{rm(e.email).then(C=>{l(C)})},[]),b(m4,{children:U("div",{style:{margin:0},children:[b(se,{className:"title",sx:{display:"flex",mt:3,ml:2},children:"QR Code \uC0C1\uC138\uD398\uC774\uC9C0"}),b(se,{sx:{display:"flex",mt:3},children:U(te,{container:!0,spacing:3,sx:{margin:0},children:[t&&U("div",{children:["\uCF54\uC2A4 ",t.tclass,b("br",{}),"\uAC00\uACA9 ",t.price,b("br",{}),"\uC0C1\uD0DC ",t.state,b("br",{}),"\uAD6C\uB9E4\uC790 ",t.buyer,b("br",{}),"\uAD6C\uB9E4\uC77C ",b4.format(t.createdAt)]}),b(se,{className:"qr_box",sx:{display:"flex",alignItems:"center",margin:"auto",mt:1,ml:6},children:b(A4,{style:{height:200},value:t?encodeURIComponent(t.identifier):"",viewBox:"0 0 256 256"})})]})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:4,ml:3,mr:3},children:b(te,{container:!0,spacing:2,children:b(te,{className:"input_title",children:"\uB0B4 \uC2DD\uAD8C"})})}),b(se,{sx:{display:"flex",justifyContent:"center"},children:U(lU,{value:o,onChange:(C,i)=>I(i),children:[b(Fc,{label:"A",...Bd(0)}),b(Fc,{label:"B",...Bd(1)}),b(Fc,{label:"C",...Bd(2)})]})}),b(Sz,{}),b(se,{sx:{display:"flex",justifyContent:"center",mt:1,mr:1},children:b(z0,{spacing:2,sx:{marginTop:"10px"},children:n&&n.filter(C=>C.tclass===p4[o]&&C.state!="used").sort((C,i)=>C.createdAt-i.createdAt).map(C=>U(Ne,{variant:"contained",style:{width:"300px",padding:"10px"},onClick:r(C),children:[C.tclass," \uCF54\uC2A4 - ",C.state]},C.identifier))})})]})})}const h4=M0({palette:{primary:{main:"#B1D6A8"},secondary:{main:"#509B8F"},success:{main:"#49663c"}}});function so(e,t,g){return{index:e,buyDate:t,useDate:g}}const G4=[so("01","\uBC25\uC2EC \uC0AC\uC6A9\uBC29\uBC95","2022.09.21"),so("02","\uBC25\uC2EC \uC0AC\uC6A9\uBC29\uBC95","2022.09.21"),so("03","\uBC25\uC2EC \uC0AC\uC6A9\uBC29\uBC95","2022.09.21"),so("04","\uBC25\uC2EC \uC0AC\uC6A9\uBC29\uBC95","2022.09.21"),so("05","\uBC25\uC2EC \uC0AC\uC6A9\uBC29\uBC95","2022.09.21"),so("06","\uBC25\uC2EC \uC0AC\uC6A9\uBC29\uBC95","2022.09.21")];function f4(){return U("div",{style:{margin:0},children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uACF5\uC9C0\uC0AC\uD56D"}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:2,ml:2},children:U(te,{container:!0,spacing:2,children:[b(te,{item:!0,sx:{mt:-2,ml:1},children:b("input",{className:"input",placeholder:"\uAC80\uC0C9\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694"})}),b(te,{item:!0,sx:{mt:-2,ml:-1},children:b(Ne,{color:"primary",children:b("img",{className:"search",src:"\\images\\search.png"})})})]})}),b(se,{className:"table",children:U($S,{sx:{maxWidth:440},"aria-label":"simple table",children:[b(eW,{sx:{backgroundColor:"#B1D6A8"},children:U(ea,{children:[b(gn,{align:"center",sx:{color:"white",lineHeight:"0.5"},children:"No."}),b(gn,{align:"center",sx:{color:"white",lineHeight:"0.5"},children:"\uC81C\uBAA9"}),b(gn,{align:"center",sx:{color:"white",lineHeight:"0.5"},children:"\uAC8C\uC2DC\uC77C"})]})}),b(qS,{children:G4.map(e=>U(ea,{children:[b(gn,{align:"center",component:"th",scope:"row",children:e.index}),b(gn,{align:"center",children:e.buyDate}),b(gn,{align:"center",children:e.useDate})]},e.index))})]})})]})}const B4=pt.div`
margin: 0 auto;
margin-top: 20px;
font-weight: bold;
color: #000000;
`;class cm extends B.exports.Component{constructor(t){super(t)}render(){return b(B4,{children:this.props.children})}}class y4 extends B.exports.Component{render(){return b(cm,{children:b(f4,{})})}}const S4={display:"flex",justifyContent:"flex-end"},vh={marginTop:"20px",borderRadius:"10px",fontWeight:"bolder"},W4={position:"absolute",top:"45%",left:"50%",transform:"translate(-50%, -50%)",width:285,bgcolor:"background.paper",border:"4px solid #49663c",borderRadius:"20px",boxShadow:24,p:3},V4=({isOpen:e,toggle:t,price:g,handler:n})=>b("div",{children:b(Vs,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:e,onClose:t,closeAfterTransition:!0,BackdropComponent:Ss,BackdropProps:{timeout:500},children:b(ys,{in:e,children:U(se,{sx:W4,children:[b(Xn,{id:"transition-modal-title",variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"\uC7AC\uD654 \uAD6C\uB9E4"}),U(Xn,{id:"transition-modal-description",sx:{mt:1,color:"#49663c",fontWeight:"bold",fontSize:"14px"},children:[g,"\uC6D0\uC744 \uCDA9\uC804\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"]}),U(se,{sx:S4,children:[b(Ne,{variant:"contained",sx:vh,onClick:()=>{n(),t()},children:"\uD655\uC778"}),b(Ne,{variant:"contained",onClick:t,sx:vh,style:{marginLeft:"5px"},children:"\uCDE8\uC18C"})]})]})})})}),v4=pt.button`
  &:hover {
    outline: none;
  }
`;function EI(e,t){return{coin:e,price:t}}const R4=[EI("4,000 \uCE90\uC2DC",4e3),EI("8,000 \uCE90\uC2DC",8e3),EI("12,000 \uCE90\uC2DC",12e3),EI("16,000 \uCE90\uC2DC",16e3),EI("20,000 \uCE90\uC2DC",2e4)];async function X4(e,t){return await Eg.get(`v1/user/point?email=${e}&delta=${t}`)}async function k4(e){return await Eg.get("v1/user/get/"+e)}function J4(){const[e,t]=_g(Kg),[g,n]=B.exports.useState(-1),l=r=>()=>{n(r)},o=()=>{n(-1)},I=r=>()=>{X4(e.email,r).then(C=>{C.data.ok&&k4(e.email).then(i=>{t(i.data.result)}),console.log(C)})};return U("div",{style:{margin:0},children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uC7AC\uD654\uCDA9\uC804"}),b(se,{className:"coin_box",sx:{display:"flex",alignItems:"flex-start",margin:"auto",mt:3,ml:1},children:U(te,{container:!0,spacing:2,style:{margin:0},children:[b(te,{className:"coin_title",item:!0,xs:12,children:"\uC794\uC5EC\uC7AC\uD654"}),b(te,{className:"coin_content",item:!0,xs:8,children:U(se,{sx:{display:"flex",alignItems:"center"},children:[b("img",{className:"coin",alt:"coin",src:"\\images\\coin.png"}),"\xA0\xA0",e.point]})}),b(te,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"}})]})}),b(se,{className:"table",children:U($S,{sx:{width:"95%"},"aria-label":"simple table",children:[b(eW,{sx:{backgroundColor:"#B1D6A8"},children:U(ea,{children:[b(gn,{align:"center",sx:{color:"white",lineHeight:"0.5"},children:"\uCDA9\uC804 \uCE90\uC2DC"}),b(gn,{align:"center",sx:{color:"white",lineHeight:"0.5"},children:"\uACB0\uC81C\uAE08\uC561"})]})}),b(qS,{children:R4.map((r,C)=>U(ea,{children:[b(gn,{align:"center",component:"th",scope:"row",sx:{fontSize:"15px"},children:r.coin}),U(gn,{align:"center",children:[" ",U(v4,{className:"price_btn",onClick:l(C),children:[r.price," \uC6D0"]}),b("div",{children:b(V4,{isOpen:g==C,toggle:o,price:r.price,handler:I(r.price)})})]})]},r.coin))})]})})]})}class Y4 extends B.exports.Component{render(){return b(cm,{children:b(J4,{})})}}function x4(){return new Promise((e,t)=>{eo.get("/v1/diet/get").then(g=>{g.data.ok&&e(g.data.result)})})}const H4=["mon","tue","wed","thr","fri"];function w4(e){const t=[];return H4.forEach(g=>t.push({week:g,data:e[g]})),t}function N4(e){const t=w4(e),g=Object.keys(t[0].data),n={};return g.forEach(l=>{n[l]=t.reduce((o,I)=>(o.push(I.data[l]),o),[])}),n}const F4=[-1,0,1,2,3,4,-1];function K4(){return F4[new Date().getDay()]}const E4=pt.div`
  img {
    transform: translate(75%, 10%);
    margin-top: 100px;
    width: 150px;
  }

  p {
    font-size: 20px;
    font-weight: bold;
    text-align: center;
    color: #49663c;
  }
`,z4=()=>U(E4,{children:[b("img",{src:"\\images\\expiration.png"}),b("p",{children:"\uC624\uB298\uC740 \uC2DD\uB2E8 \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})]}),M4=()=>U("div",{style:{margin:0},children:[b(se,{sx:{display:"flex",alignItems:"flex-end",mt:4,ml:2,mr:4},children:U(te,{container:!0,spacing:0,children:[b(te,{item:!0,xs:8,sx:{padding:"0",margin:"0"},children:U(Ne,{className:"courseBtn",variant:"contained",sx:{padding:"0"},children:["A",b("br",{}),"\uB9C8\uB298\uBCF4\uC308",b("br",{}),"\uC0C1\uCD94/\uAE7B\uC78E+\uC308\uC7A5",b("br",{}),"\uC308\uBB34, \uD30C\uC808\uC774",b("br",{}),"\uC2DC\uB77D\uAD6D/\uD751\uBBF8\uBC25"]})}),b(te,{item:!0,xs:4,children:b(te,{container:!0,spacing:0,children:b(te,{item:!0,xs:12,children:U(sr,{orientation:"vertical",children:[b(lt,{to:"/UnUsed",children:U(Ne,{className:"details",variant:"contained",children:["\uC794\uC5EC\uC2DD\uAD8C",b("br",{})," 1\uAC1C"]})}),b(Ne,{className:"details",variant:"contained",children:"4,000\uC6D0"})]})})})})]})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:2,ml:2,mr:4},children:U(te,{container:!0,spacing:0,children:[b(te,{item:!0,xs:8,sx:{padding:"0",margin:"0"},children:U(Ne,{className:"courseBtn",variant:"contained",sx:{padding:"0"},children:["B",b("br",{}),"\uCC38\uCE58\uAE40\uCE58\uBCF6\uC74C\uBC25",b("br",{}),"\uC18C\uB5A1\uC18C\uB5A1+\uCE58\uD0A8",b("br",{}),"\uC18C\uC2A4",b("br",{}),"\uC0D0\uB7EC\uB4DC",b("br",{}),"\uC6B0\uB3D9\uC7A5\uAD6D"]})}),b(te,{item:!0,xs:4,children:b(te,{container:!0,spacing:0,children:b(te,{item:!0,xs:12,children:U(sr,{orientation:"vertical",children:[b(lt,{to:"/BuyList/UnUsed",children:U(Ne,{className:"details",variant:"contained",children:["\uC794\uC5EC\uC2DD\uAD8C",b("br",{})," 0\uAC1C"]})}),b(Ne,{className:"details",variant:"contained",children:"4,000\uC6D0"})]})})})})]})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:2,ml:2,mr:4},children:U(te,{container:!0,spacing:0,children:[b(te,{item:!0,xs:8,sx:{padding:"0",margin:"0"},children:U(Ne,{className:"courseBtn",variant:"contained",sx:{padding:"0"},children:["C",b("br",{}),"\uCEF5\uACFC\uC77C",b("br",{}),"or",b("br",{}),"\uC18C\uB77C\uC8FD"]})}),b(te,{item:!0,xs:4,children:b(te,{container:!0,spacing:0,children:b(te,{item:!0,xs:12,children:U(sr,{orientation:"vertical",children:[b(lt,{to:"/BuyList/UnUsed",children:U(Ne,{className:"details",variant:"contained",children:["\uC794\uC5EC\uC2DD\uAD8C",b("br",{})," 0\uAC1C"]})}),b(Ne,{className:"details",variant:"contained",children:"3,500\uC6D0"})]})})})})]})}),b(se,{sx:{display:"flex",justifyContent:"space-around",mt:5,ml:2,mb:10},children:U(te,{container:!0,spacing:2,children:[b(te,{item:!0,xs:6,sx:{display:"flex",justifyContent:"center"},children:b(Ne,{variant:"contained",sx:{width:"65%",borderRadius:"20px"},children:"\uC120\uBB3C\uD558\uAE30"})}),b(te,{item:!0,xs:6,sx:{display:"flex",justifyContent:"center"},children:b(Ne,{variant:"contained",sx:{width:"65%",borderRadius:"20px"},children:"\uAD6C\uB9E4\uD558\uAE30"})})]})})]});function T4(){const[e,t]=B.exports.useState([]);return B.exports.useEffect(()=>{x4().then(g=>{const n=K4();t(N4(g).a[n>-1?n:0])})},[]),U("div",{style:{margin:0},children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uC2DD\uAD8C \uAD6C\uB9E4"}),b("div",{children:e&&e.length>0?b(M4,{}):b(z4,{})})]})}class L4 extends B.exports.Component{render(){return b(cm,{children:b(T4,{})})}}const U4=pt.div`
  img {
    transform: translate(50%, 10%);
    margin-top: 100px;
    width: 200px;
  }

  p {
    font-size: 30px;
    font-weight: bold;
    text-align: center;
    color: #49663c;
  }

  div {
    display: flex;
    justify-content: flex-end;
  }

  .btn {
    height: 30px;
    width: 90px;
    color: #49663c;
    font-weight: bold;
    align-items: center;
  }
`;function D4(){return U(U4,{children:[b("img",{className:"error",alt:"ERROR",src:"\\images\\404.png"}),b("br",{}),b("br",{}),b("p",{children:"PAGE NOT FOUND"}),b("div",{children:b(lt,{to:"/",children:b(Ne,{className:"btn",variant:"contained",children:"\uB3CC\uC544\uAC00\uAE30"})})})]})}const Q4={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:285,bgcolor:"background.paper",border:"4px solid #49663c",borderRadius:"20px",boxShadow:24,p:3},P4=({isOpen:e,toggle:t})=>b("div",{children:b(Vs,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:e,onClose:t,closeAfterTransition:!0,BackdropComponent:Ss,BackdropProps:{timeout:500},children:b(ys,{in:e,children:U(se,{sx:Q4,children:[b(Xn,{id:"transition-modal-title",variant:"h6",component:"h2",sx:{fontWeight:"bold"},children:"Complete!"}),U(Xn,{id:"transition-modal-description",sx:{mt:1,color:"#49663c",fontWeight:"bold",fontSize:"14px"},children:["\uC785\uB825\uD558\uC2E0 \uC774\uBA54\uC77C\uB85C \uB9C1\uD06C\uAC00 \uC804\uC1A1\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",b("br",{}),"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815 \uC2DC\uAC04\uC740 \uC694\uCCAD \uD6C4 10\uBD84 \uC785\uB2C8\uB2E4."]})]})})})}),j4=pt.div`
  top: 0;
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;

  .title {
    font-size: 20px;
  }

  .imageBox {
    display: flex;
    justify-content: center;
  }

  img {
    width: 150px;
  }

  .emailTitle {
    font-size: 22px;
    color: #49663c;
  }

  .email {
    border: 3px solid #b1d6a8;
    width: 100%;
    height: 50px;
    border-radius: 15px;
    padding-left: 10px;
  }

  .inputEmail {
    font-size: 20px;
    margin: 5px 0px;
    width: 100%;
    height: 40px;
    border: 0px solid #b1d6a8;
    //border: 3px solid #f4f9f3;
    border-radius: 15px;
    outline-color: white;
  }
  .selectEmail {
    font-size: 15px;
    font-weight: bolder;
    color: #666666;
    margin: 5px 0px;
    width: 100%;
    height: 40px;
    border: 0px solid #b1d6a8;
    outline-color: white;
  }

  .btn {
    border-radius: 15px;
    color: #49663c;
    font-weight: bold;
    font-size: 18px;
    width: 100px;
  }
`;async function O4(e){return await Eg.get("v1/user/auth/password?email="+e)}function _4(){const[e,t]=B.exports.useState(""),[g,n]=B.exports.useState(!1),[l,o]=B.exports.useState(""),{isOpen:I,toggle:r}=yW(),C=B.exports.useCallback(a=>{const c=/([\w-.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,s=a.target.value;t(s),c.test(s)?(o(""),n(!0)):(o("\uC774\uBA54\uC77C \uD615\uC2DD\uC744 \uB9DE\uAC8C \uC785\uB825\uD574\uC8FC\uC138\uC694."),n(!1))},[]),i=()=>{O4(e).then(()=>{r(),console.log("Request Complete!")})};return U(j4,{children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uC774\uBA54\uC77C \uC694\uCCAD"}),b(se,{sx:{mt:5,ml:3,mr:3},children:b(te,{container:!0,spacing:2,children:b(te,{className:"imageBox",item:!0,xs:12,children:b("img",{alt:"MAIL",src:"images\\mail.png"})})})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:4,ml:3,mr:3},children:b(te,{className:"emailTitle",item:!0,xs:12,sx:{mt:3},children:"Email"})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:2,ml:3,mr:5},children:b(te,{item:!0,xs:12,children:b("div",{className:"email",children:U(te,{container:!0,spacing:1,children:[U(te,{item:!0,xs:6,children:[b("input",{className:"inputEmail",placeholder:" \uC774\uBA54\uC77C",type:"email",value:e,onChange:C}),e.length>0&&b("span",{className:`message ${g?"success":"error"}`,children:l})]}),b(te,{item:!0,xs:5,children:U("select",{className:"selectEmail",children:[b("option",{value:"\uC9C1\uC811\uC785\uB825",children:"\uC9C1\uC811\uC785\uB825"}),b("option",{value:"naver",children:"@naver.com"}),b("option",{value:"google",children:"@google.com"}),b("option",{value:"daum",children:"@daum.net"})]})})]})})})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:3,mr:3,ml:3},children:b(te,{container:!0,children:U(te,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:[b(Ne,{className:"btn",variant:"contained",color:"primary",onClick:i,children:"\uC804 \uC1A1"}),b("div",{children:I&&b(P4,{isOpen:I,toggle:r})})]})})})]})}const $4=pt.div`
  top: 0;
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;

  .title {
    font-size: 20px;
  }

  .contents {
    display: flex;
    justify-content: center;
  }

  img {
    width: 200px;
  }

  h4 {
    color: #49663c;
    text-align: center;
    font-size: 17px;
  }

  .btn {
    width: 100%;
    height: 40px;
    font-weight: bolder;
    font-size: 16px;
    color: #49663c;
    border-radius: 15px;
  }
`;function q4(){return U($4,{children:[b(se,{className:"contents",style:{marginTop:"80px"},children:b("img",{src:"\\images\\expiration.png"})}),b("h4",{children:"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815 \uC2DC\uAC04\uC774 \uB9CC\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}),b(se,{className:"contents",children:b(lt,{to:"/RequestEmail",children:b(Ne,{className:"btn",variant:"contained",children:"\uC694\uCCAD \uD398\uC774\uC9C0\uB85C \uC774\uB3D9"})})})]})}function e8(e,t){return{setHeader(g){t(n=>({...n,header:g}))},setContent(g){t(n=>({...n,content:g}))},setTitle(g){t(n=>({...n,title:g}))}}}function t8(e={header:"",content:"",title:""}){const[t,g]=B.exports.useState(e);return{state:t,hlr:e8(t,g)}}async function g8(e="",t="",g=""){return new Promise(n=>{eo.post("/v1/notice/post",{header:e,title:t,content:g}).then(l=>{l.data.ok&&n(l.data.result)})})}function yd(e){return t=>e(t.target.value)}const n8=({id:e})=>{const[t,g]=B.exports.useState(!1);e&&g(!0);const{state:n,hlr:l}=t8(),o=()=>{g8(n.header,n.title,n.content)};return U(se,{children:[U(se,{children:["header:",b(Ec,{value:n.header,onChange:yd(l.setHeader)})]}),U(se,{children:["title:",b(Ec,{value:n.title,onChange:yd(l.setTitle)})]}),U(se,{children:["content:",b(Ec,{multiline:!0,value:n.content,onChange:yd(l.setContent)})]}),b(Ne,{onClick:o,children:"Post"})]})};function l8(){return new Promise((e,t)=>{eo.get("/v1/user/auth/check").then(g=>{g.data.ok&&e(g.data.result)})})}function o8(){const[e,t]=B.exports.useState("pending"),[g,n]=_g(Kg);return B.exports.useEffect(()=>{l8().then(l=>{n(l)}).finally(()=>t("done"))},[]),{status:e,auth:g}}Tg.propTypes={admin:gI.exports.bool,el:gI.exports.node.isRequired};function Tg({el:e,admin:t=!1}){const{status:g,auth:n}=o8();return g==="pending"?b(wS,{}):b(bn,{children:n&&(!t||n.admin)?e:b(Tl,{to:"/"})})}const I8=py({key:"adminState",default:!1});function r8(){return new Promise((e,t)=>{eo.get("/v1/user/auth/logout").then(g=>{g.data.ok?e(g.data.result):t("Fail")})})}const C8=()=>(B.exports.useEffect(()=>{r8().then(()=>document.location.href="/")},[]),b(bn,{}));function Rh(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function dm(e={},t={}){Object.keys(t).forEach(g=>{typeof e[g]>"u"?e[g]=t[g]:Rh(t[g])&&Rh(e[g])&&Object.keys(t[g]).length>0&&dm(e[g],t[g])})}const KW={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Tt(){const e=typeof document<"u"?document:{};return dm(e,KW),e}const i8={document:KW,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function Ht(){const e=typeof window<"u"?window:{};return dm(e,i8),e}function a8(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get(){return t},set(g){t.__proto__=g}})}class $n extends Array{constructor(t){typeof t=="number"?super(t):(super(...t||[]),a8(this))}}function cC(e=[]){const t=[];return e.forEach(g=>{Array.isArray(g)?t.push(...cC(g)):t.push(g)}),t}function EW(e,t){return Array.prototype.filter.call(e,t)}function s8(e){const t=[];for(let g=0;g<e.length;g+=1)t.indexOf(e[g])===-1&&t.push(e[g]);return t}function c8(e,t){if(typeof e!="string")return[e];const g=[],n=t.querySelectorAll(e);for(let l=0;l<n.length;l+=1)g.push(n[l]);return g}function be(e,t){const g=Ht(),n=Tt();let l=[];if(!t&&e instanceof $n)return e;if(!e)return new $n(l);if(typeof e=="string"){const o=e.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){let I="div";o.indexOf("<li")===0&&(I="ul"),o.indexOf("<tr")===0&&(I="tbody"),(o.indexOf("<td")===0||o.indexOf("<th")===0)&&(I="tr"),o.indexOf("<tbody")===0&&(I="table"),o.indexOf("<option")===0&&(I="select");const r=n.createElement(I);r.innerHTML=o;for(let C=0;C<r.childNodes.length;C+=1)l.push(r.childNodes[C])}else l=c8(e.trim(),t||n)}else if(e.nodeType||e===g||e===n)l.push(e);else if(Array.isArray(e)){if(e instanceof $n)return e;l=e}return new $n(s8(l))}be.fn=$n.prototype;function d8(...e){const t=cC(e.map(g=>g.split(" ")));return this.forEach(g=>{g.classList.add(...t)}),this}function u8(...e){const t=cC(e.map(g=>g.split(" ")));return this.forEach(g=>{g.classList.remove(...t)}),this}function A8(...e){const t=cC(e.map(g=>g.split(" ")));this.forEach(g=>{t.forEach(n=>{g.classList.toggle(n)})})}function m8(...e){const t=cC(e.map(g=>g.split(" ")));return EW(this,g=>t.filter(n=>g.classList.contains(n)).length>0).length>0}function p8(e,t){if(arguments.length===1&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;for(let g=0;g<this.length;g+=1)if(arguments.length===2)this[g].setAttribute(e,t);else for(const n in e)this[g][n]=e[n],this[g].setAttribute(n,e[n]);return this}function b8(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function Z8(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function h8(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration=typeof e!="string"?`${e}ms`:e;return this}function G8(...e){let[t,g,n,l]=e;typeof e[1]=="function"&&([t,n,l]=e,g=void 0),l||(l=!1);function o(i){const a=i.target;if(!a)return;const c=i.target.dom7EventData||[];if(c.indexOf(i)<0&&c.unshift(i),be(a).is(g))n.apply(a,c);else{const s=be(a).parents();for(let m=0;m<s.length;m+=1)be(s[m]).is(g)&&n.apply(s[m],c)}}function I(i){const a=i&&i.target?i.target.dom7EventData||[]:[];a.indexOf(i)<0&&a.unshift(i),n.apply(this,a)}const r=t.split(" ");let C;for(let i=0;i<this.length;i+=1){const a=this[i];if(g)for(C=0;C<r.length;C+=1){const c=r[C];a.dom7LiveListeners||(a.dom7LiveListeners={}),a.dom7LiveListeners[c]||(a.dom7LiveListeners[c]=[]),a.dom7LiveListeners[c].push({listener:n,proxyListener:o}),a.addEventListener(c,o,l)}else for(C=0;C<r.length;C+=1){const c=r[C];a.dom7Listeners||(a.dom7Listeners={}),a.dom7Listeners[c]||(a.dom7Listeners[c]=[]),a.dom7Listeners[c].push({listener:n,proxyListener:I}),a.addEventListener(c,I,l)}}return this}function f8(...e){let[t,g,n,l]=e;typeof e[1]=="function"&&([t,n,l]=e,g=void 0),l||(l=!1);const o=t.split(" ");for(let I=0;I<o.length;I+=1){const r=o[I];for(let C=0;C<this.length;C+=1){const i=this[C];let a;if(!g&&i.dom7Listeners?a=i.dom7Listeners[r]:g&&i.dom7LiveListeners&&(a=i.dom7LiveListeners[r]),a&&a.length)for(let c=a.length-1;c>=0;c-=1){const s=a[c];n&&s.listener===n||n&&s.listener&&s.listener.dom7proxy&&s.listener.dom7proxy===n?(i.removeEventListener(r,s.proxyListener,l),a.splice(c,1)):n||(i.removeEventListener(r,s.proxyListener,l),a.splice(c,1))}}}return this}function B8(...e){const t=Ht(),g=e[0].split(" "),n=e[1];for(let l=0;l<g.length;l+=1){const o=g[l];for(let I=0;I<this.length;I+=1){const r=this[I];if(t.CustomEvent){const C=new t.CustomEvent(o,{detail:n,bubbles:!0,cancelable:!0});r.dom7EventData=e.filter((i,a)=>a>0),r.dispatchEvent(C),r.dom7EventData=[],delete r.dom7EventData}}}return this}function y8(e){const t=this;function g(n){n.target===this&&(e.call(this,n),t.off("transitionend",g))}return e&&t.on("transitionend",g),this}function S8(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function W8(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function V8(){if(this.length>0){const e=Ht(),t=Tt(),g=this[0],n=g.getBoundingClientRect(),l=t.body,o=g.clientTop||l.clientTop||0,I=g.clientLeft||l.clientLeft||0,r=g===e?e.scrollY:g.scrollTop,C=g===e?e.scrollX:g.scrollLeft;return{top:n.top+r-o,left:n.left+C-I}}return null}function v8(){const e=Ht();return this[0]?e.getComputedStyle(this[0],null):{}}function R8(e,t){const g=Ht();let n;if(arguments.length===1)if(typeof e=="string"){if(this[0])return g.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(n=0;n<this.length;n+=1)for(const l in e)this[n].style[l]=e[l];return this}if(arguments.length===2&&typeof e=="string"){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this}function X8(e){return e?(this.forEach((t,g)=>{e.apply(t,[t,g])}),this):this}function k8(e){const t=EW(this,e);return be(t)}function J8(e){if(typeof e>"u")return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function Y8(e){if(typeof e>"u")return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this}function x8(e){const t=Ht(),g=Tt(),n=this[0];let l,o;if(!n||typeof e>"u")return!1;if(typeof e=="string"){if(n.matches)return n.matches(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);for(l=be(e),o=0;o<l.length;o+=1)if(l[o]===n)return!0;return!1}if(e===g)return n===g;if(e===t)return n===t;if(e.nodeType||e instanceof $n){for(l=e.nodeType?[e]:e,o=0;o<l.length;o+=1)if(l[o]===n)return!0;return!1}return!1}function H8(){let e=this[0],t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function w8(e){if(typeof e>"u")return this;const t=this.length;if(e>t-1)return be([]);if(e<0){const g=t+e;return g<0?be([]):be([this[g]])}return be([this[e]])}function N8(...e){let t;const g=Tt();for(let n=0;n<e.length;n+=1){t=e[n];for(let l=0;l<this.length;l+=1)if(typeof t=="string"){const o=g.createElement("div");for(o.innerHTML=t;o.firstChild;)this[l].appendChild(o.firstChild)}else if(t instanceof $n)for(let o=0;o<t.length;o+=1)this[l].appendChild(t[o]);else this[l].appendChild(t)}return this}function F8(e){const t=Tt();let g,n;for(g=0;g<this.length;g+=1)if(typeof e=="string"){const l=t.createElement("div");for(l.innerHTML=e,n=l.childNodes.length-1;n>=0;n-=1)this[g].insertBefore(l.childNodes[n],this[g].childNodes[0])}else if(e instanceof $n)for(n=0;n<e.length;n+=1)this[g].insertBefore(e[n],this[g].childNodes[0]);else this[g].insertBefore(e,this[g].childNodes[0]);return this}function K8(e){return this.length>0?e?this[0].nextElementSibling&&be(this[0].nextElementSibling).is(e)?be([this[0].nextElementSibling]):be([]):this[0].nextElementSibling?be([this[0].nextElementSibling]):be([]):be([])}function E8(e){const t=[];let g=this[0];if(!g)return be([]);for(;g.nextElementSibling;){const n=g.nextElementSibling;e?be(n).is(e)&&t.push(n):t.push(n),g=n}return be(t)}function z8(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&be(t.previousElementSibling).is(e)?be([t.previousElementSibling]):be([]):t.previousElementSibling?be([t.previousElementSibling]):be([])}return be([])}function M8(e){const t=[];let g=this[0];if(!g)return be([]);for(;g.previousElementSibling;){const n=g.previousElementSibling;e?be(n).is(e)&&t.push(n):t.push(n),g=n}return be(t)}function T8(e){const t=[];for(let g=0;g<this.length;g+=1)this[g].parentNode!==null&&(e?be(this[g].parentNode).is(e)&&t.push(this[g].parentNode):t.push(this[g].parentNode));return be(t)}function L8(e){const t=[];for(let g=0;g<this.length;g+=1){let n=this[g].parentNode;for(;n;)e?be(n).is(e)&&t.push(n):t.push(n),n=n.parentNode}return be(t)}function U8(e){let t=this;return typeof e>"u"?be([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function D8(e){const t=[];for(let g=0;g<this.length;g+=1){const n=this[g].querySelectorAll(e);for(let l=0;l<n.length;l+=1)t.push(n[l])}return be(t)}function Q8(e){const t=[];for(let g=0;g<this.length;g+=1){const n=this[g].children;for(let l=0;l<n.length;l+=1)(!e||be(n[l]).is(e))&&t.push(n[l])}return be(t)}function P8(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}const Xh={addClass:d8,removeClass:u8,hasClass:m8,toggleClass:A8,attr:p8,removeAttr:b8,transform:Z8,transition:h8,on:G8,off:f8,trigger:B8,transitionEnd:y8,outerWidth:S8,outerHeight:W8,styles:v8,offset:V8,css:R8,each:X8,html:J8,text:Y8,is:x8,index:H8,eq:w8,append:N8,prepend:F8,next:K8,nextAll:E8,prev:z8,prevAll:M8,parent:T8,parents:L8,closest:U8,find:D8,children:Q8,filter:k8,remove:P8};Object.keys(Xh).forEach(e=>{Object.defineProperty(be.fn,e,{value:Xh[e],writable:!0})});function j8(e){const t=e;Object.keys(t).forEach(g=>{try{t[g]=null}catch{}try{delete t[g]}catch{}})}function ga(e,t=0){return setTimeout(e,t)}function Lr(){return Date.now()}function O8(e){const t=Ht();let g;return t.getComputedStyle&&(g=t.getComputedStyle(e,null)),!g&&e.currentStyle&&(g=e.currentStyle),g||(g=e.style),g}function _8(e,t="x"){const g=Ht();let n,l,o;const I=O8(e);return g.WebKitCSSMatrix?(l=I.transform||I.webkitTransform,l.split(",").length>6&&(l=l.split(", ").map(r=>r.replace(",",".")).join(", ")),o=new g.WebKitCSSMatrix(l==="none"?"":l)):(o=I.MozTransform||I.OTransform||I.MsTransform||I.msTransform||I.transform||I.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=o.toString().split(",")),t==="x"&&(g.WebKitCSSMatrix?l=o.m41:n.length===16?l=parseFloat(n[12]):l=parseFloat(n[4])),t==="y"&&(g.WebKitCSSMatrix?l=o.m42:n.length===16?l=parseFloat(n[13]):l=parseFloat(n[5])),l||0}function PC(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function $8(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function Zg(...e){const t=Object(e[0]),g=["__proto__","constructor","prototype"];for(let n=1;n<e.length;n+=1){const l=e[n];if(l!=null&&!$8(l)){const o=Object.keys(Object(l)).filter(I=>g.indexOf(I)<0);for(let I=0,r=o.length;I<r;I+=1){const C=o[I],i=Object.getOwnPropertyDescriptor(l,C);i!==void 0&&i.enumerable&&(PC(t[C])&&PC(l[C])?l[C].__swiper__?t[C]=l[C]:Zg(t[C],l[C]):!PC(t[C])&&PC(l[C])?(t[C]={},l[C].__swiper__?t[C]=l[C]:Zg(t[C],l[C])):t[C]=l[C])}}}return t}function jC(e,t,g){e.style.setProperty(t,g)}function zW({swiper:e,targetPosition:t,side:g}){const n=Ht(),l=-e.translate;let o=null,I;const r=e.params.speed;e.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(e.cssModeFrameID);const C=t>l?"next":"prev",i=(c,s)=>C==="next"&&c>=s||C==="prev"&&c<=s,a=()=>{I=new Date().getTime(),o===null&&(o=I);const c=Math.max(Math.min((I-o)/r,1),0),s=.5-Math.cos(c*Math.PI)/2;let m=l+s*(t-l);if(i(m,t)&&(m=t),e.wrapperEl.scrollTo({[g]:m}),i(m,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[g]:m})}),n.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=n.requestAnimationFrame(a)};a()}let Sd;function q8(){const e=Ht(),t=Tt();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let n=!1;try{const l=Object.defineProperty({},"passive",{get(){n=!0}});e.addEventListener("testPassiveListener",null,l)}catch{}return n}(),gestures:function(){return"ongesturestart"in e}()}}function MW(){return Sd||(Sd=q8()),Sd}let Wd;function eP({userAgent:e}={}){const t=MW(),g=Ht(),n=g.navigator.platform,l=e||g.navigator.userAgent,o={ios:!1,android:!1},I=g.screen.width,r=g.screen.height,C=l.match(/(Android);?[\s\/]+([\d.]+)?/);let i=l.match(/(iPad).*OS\s([\d_]+)/);const a=l.match(/(iPod)(.*OS\s([\d_]+))?/),c=!i&&l.match(/(iPhone\sOS|iOS)\s([\d_]+)/),s=n==="Win32";let m=n==="MacIntel";const A=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!i&&m&&t.touch&&A.indexOf(`${I}x${r}`)>=0&&(i=l.match(/(Version)\/([\d.]+)/),i||(i=[0,1,"13_0_0"]),m=!1),C&&!s&&(o.os="android",o.android=!0),(i||c||a)&&(o.os="ios",o.ios=!0),o}function tP(e={}){return Wd||(Wd=eP(e)),Wd}let Vd;function gP(){const e=Ht();function t(){const g=e.navigator.userAgent.toLowerCase();return g.indexOf("safari")>=0&&g.indexOf("chrome")<0&&g.indexOf("android")<0}return{isSafari:t(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function nP(){return Vd||(Vd=gP()),Vd}function lP({swiper:e,on:t,emit:g}){const n=Ht();let l=null,o=null;const I=()=>{!e||e.destroyed||!e.initialized||(g("beforeResize"),g("resize"))},r=()=>{!e||e.destroyed||!e.initialized||(l=new ResizeObserver(a=>{o=n.requestAnimationFrame(()=>{const{width:c,height:s}=e;let m=c,A=s;a.forEach(({contentBoxSize:d,contentRect:h,target:Z})=>{Z&&Z!==e.el||(m=h?h.width:(d[0]||d).inlineSize,A=h?h.height:(d[0]||d).blockSize)}),(m!==c||A!==s)&&I()})}),l.observe(e.el))},C=()=>{o&&n.cancelAnimationFrame(o),l&&l.unobserve&&e.el&&(l.unobserve(e.el),l=null)},i=()=>{!e||e.destroyed||!e.initialized||g("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof n.ResizeObserver<"u"){r();return}n.addEventListener("resize",I),n.addEventListener("orientationchange",i)}),t("destroy",()=>{C(),n.removeEventListener("resize",I),n.removeEventListener("orientationchange",i)})}function oP({swiper:e,extendParams:t,on:g,emit:n}){const l=[],o=Ht(),I=(i,a={})=>{const c=o.MutationObserver||o.WebkitMutationObserver,s=new c(m=>{if(m.length===1){n("observerUpdate",m[0]);return}const A=function(){n("observerUpdate",m[0])};o.requestAnimationFrame?o.requestAnimationFrame(A):o.setTimeout(A,0)});s.observe(i,{attributes:typeof a.attributes>"u"?!0:a.attributes,childList:typeof a.childList>"u"?!0:a.childList,characterData:typeof a.characterData>"u"?!0:a.characterData}),l.push(s)},r=()=>{if(!!e.params.observer){if(e.params.observeParents){const i=e.$el.parents();for(let a=0;a<i.length;a+=1)I(i[a])}I(e.$el[0],{childList:e.params.observeSlideChildren}),I(e.$wrapperEl[0],{attributes:!1})}},C=()=>{l.forEach(i=>{i.disconnect()}),l.splice(0,l.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),g("init",r),g("destroy",C)}const IP={on(e,t,g){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const l=g?"unshift":"push";return e.split(" ").forEach(o=>{n.eventsListeners[o]||(n.eventsListeners[o]=[]),n.eventsListeners[o][l](t)}),n},once(e,t,g){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;function l(...o){n.off(e,l),l.__emitterProxy&&delete l.__emitterProxy,t.apply(n,o)}return l.__emitterProxy=t,n.on(e,l,g)},onAny(e,t){const g=this;if(!g.eventsListeners||g.destroyed||typeof e!="function")return g;const n=t?"unshift":"push";return g.eventsAnyListeners.indexOf(e)<0&&g.eventsAnyListeners[n](e),g},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const g=t.eventsAnyListeners.indexOf(e);return g>=0&&t.eventsAnyListeners.splice(g,1),t},off(e,t){const g=this;return!g.eventsListeners||g.destroyed||!g.eventsListeners||e.split(" ").forEach(n=>{typeof t>"u"?g.eventsListeners[n]=[]:g.eventsListeners[n]&&g.eventsListeners[n].forEach((l,o)=>{(l===t||l.__emitterProxy&&l.__emitterProxy===t)&&g.eventsListeners[n].splice(o,1)})}),g},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let g,n,l;return typeof e[0]=="string"||Array.isArray(e[0])?(g=e[0],n=e.slice(1,e.length),l=t):(g=e[0].events,n=e[0].data,l=e[0].context||t),n.unshift(l),(Array.isArray(g)?g:g.split(" ")).forEach(I=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(r=>{r.apply(l,[I,...n])}),t.eventsListeners&&t.eventsListeners[I]&&t.eventsListeners[I].forEach(r=>{r.apply(l,n)})}),t}};function rP(){const e=this;let t,g;const n=e.$el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=n[0].clientWidth,typeof e.params.height<"u"&&e.params.height!==null?g=e.params.height:g=n[0].clientHeight,!(t===0&&e.isHorizontal()||g===0&&e.isVertical())&&(t=t-parseInt(n.css("padding-left")||0,10)-parseInt(n.css("padding-right")||0,10),g=g-parseInt(n.css("padding-top")||0,10)-parseInt(n.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(g)&&(g=0),Object.assign(e,{width:t,height:g,size:e.isHorizontal()?t:g}))}function CP(){const e=this;function t(y){return e.isHorizontal()?y:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[y]}function g(y,R){return parseFloat(y.getPropertyValue(t(R))||0)}const n=e.params,{$wrapperEl:l,size:o,rtlTranslate:I,wrongRTL:r}=e,C=e.virtual&&n.virtual.enabled,i=C?e.virtual.slides.length:e.slides.length,a=l.children(`.${e.params.slideClass}`),c=C?e.virtual.slides.length:a.length;let s=[];const m=[],A=[];let d=n.slidesOffsetBefore;typeof d=="function"&&(d=n.slidesOffsetBefore.call(e));let h=n.slidesOffsetAfter;typeof h=="function"&&(h=n.slidesOffsetAfter.call(e));const Z=e.snapGrid.length,u=e.slidesGrid.length;let p=n.spaceBetween,G=-d,f=0,S=0;if(typeof o>"u")return;typeof p=="string"&&p.indexOf("%")>=0&&(p=parseFloat(p.replace("%",""))/100*o),e.virtualSize=-p,I?a.css({marginLeft:"",marginBottom:"",marginTop:""}):a.css({marginRight:"",marginBottom:"",marginTop:""}),n.centeredSlides&&n.cssMode&&(jC(e.wrapperEl,"--swiper-centered-offset-before",""),jC(e.wrapperEl,"--swiper-centered-offset-after",""));const W=n.grid&&n.grid.rows>1&&e.grid;W&&e.grid.initSlides(c);let v;const w=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(y=>typeof n.breakpoints[y].slidesPerView<"u").length>0;for(let y=0;y<c;y+=1){v=0;const R=a.eq(y);if(W&&e.grid.updateSlide(y,R,c,t),R.css("display")!=="none"){if(n.slidesPerView==="auto"){w&&(a[y].style[t("width")]="");const x=getComputedStyle(R[0]),H=R[0].style.transform,F=R[0].style.webkitTransform;if(H&&(R[0].style.transform="none"),F&&(R[0].style.webkitTransform="none"),n.roundLengths)v=e.isHorizontal()?R.outerWidth(!0):R.outerHeight(!0);else{const M=g(x,"width"),j=g(x,"padding-left"),O=g(x,"padding-right"),z=g(x,"margin-left"),D=g(x,"margin-right"),T=x.getPropertyValue("box-sizing");if(T&&T==="border-box")v=M+z+D;else{const{clientWidth:N,offsetWidth:V}=R[0];v=M+j+O+z+D+(V-N)}}H&&(R[0].style.transform=H),F&&(R[0].style.webkitTransform=F),n.roundLengths&&(v=Math.floor(v))}else v=(o-(n.slidesPerView-1)*p)/n.slidesPerView,n.roundLengths&&(v=Math.floor(v)),a[y]&&(a[y].style[t("width")]=`${v}px`);a[y]&&(a[y].swiperSlideSize=v),A.push(v),n.centeredSlides?(G=G+v/2+f/2+p,f===0&&y!==0&&(G=G-o/2-p),y===0&&(G=G-o/2-p),Math.abs(G)<1/1e3&&(G=0),n.roundLengths&&(G=Math.floor(G)),S%n.slidesPerGroup===0&&s.push(G),m.push(G)):(n.roundLengths&&(G=Math.floor(G)),(S-Math.min(e.params.slidesPerGroupSkip,S))%e.params.slidesPerGroup===0&&s.push(G),m.push(G),G=G+v+p),e.virtualSize+=v+p,f=v,S+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+h,I&&r&&(n.effect==="slide"||n.effect==="coverflow")&&l.css({width:`${e.virtualSize+n.spaceBetween}px`}),n.setWrapperSize&&l.css({[t("width")]:`${e.virtualSize+n.spaceBetween}px`}),W&&e.grid.updateWrapperSize(v,s,t),!n.centeredSlides){const y=[];for(let R=0;R<s.length;R+=1){let x=s[R];n.roundLengths&&(x=Math.floor(x)),s[R]<=e.virtualSize-o&&y.push(x)}s=y,Math.floor(e.virtualSize-o)-Math.floor(s[s.length-1])>1&&s.push(e.virtualSize-o)}if(s.length===0&&(s=[0]),n.spaceBetween!==0){const y=e.isHorizontal()&&I?"marginLeft":t("marginRight");a.filter((R,x)=>n.cssMode?x!==a.length-1:!0).css({[y]:`${p}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let y=0;A.forEach(x=>{y+=x+(n.spaceBetween?n.spaceBetween:0)}),y-=n.spaceBetween;const R=y-o;s=s.map(x=>x<0?-d:x>R?R+h:x)}if(n.centerInsufficientSlides){let y=0;if(A.forEach(R=>{y+=R+(n.spaceBetween?n.spaceBetween:0)}),y-=n.spaceBetween,y<o){const R=(o-y)/2;s.forEach((x,H)=>{s[H]=x-R}),m.forEach((x,H)=>{m[H]=x+R})}}if(Object.assign(e,{slides:a,snapGrid:s,slidesGrid:m,slidesSizesGrid:A}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){jC(e.wrapperEl,"--swiper-centered-offset-before",`${-s[0]}px`),jC(e.wrapperEl,"--swiper-centered-offset-after",`${e.size/2-A[A.length-1]/2}px`);const y=-e.snapGrid[0],R=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(x=>x+y),e.slidesGrid=e.slidesGrid.map(x=>x+R)}if(c!==i&&e.emit("slidesLengthChange"),s.length!==Z&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),m.length!==u&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),!C&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const y=`${n.containerModifierClass}backface-hidden`,R=e.$el.hasClass(y);c<=n.maxBackfaceHiddenSlides?R||e.$el.addClass(y):R&&e.$el.removeClass(y)}}function iP(e){const t=this,g=[],n=t.virtual&&t.params.virtual.enabled;let l=0,o;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const I=r=>n?t.slides.filter(C=>parseInt(C.getAttribute("data-swiper-slide-index"),10)===r)[0]:t.slides.eq(r)[0];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||be([])).each(r=>{g.push(r)});else for(o=0;o<Math.ceil(t.params.slidesPerView);o+=1){const r=t.activeIndex+o;if(r>t.slides.length&&!n)break;g.push(I(r))}else g.push(I(t.activeIndex));for(o=0;o<g.length;o+=1)if(typeof g[o]<"u"){const r=g[o].offsetHeight;l=r>l?r:l}(l||l===0)&&t.$wrapperEl.css("height",`${l}px`)}function aP(){const e=this,t=e.slides;for(let g=0;g<t.length;g+=1)t[g].swiperSlideOffset=e.isHorizontal()?t[g].offsetLeft:t[g].offsetTop}function sP(e=this&&this.translate||0){const t=this,g=t.params,{slides:n,rtlTranslate:l,snapGrid:o}=t;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let I=-e;l&&(I=e),n.removeClass(g.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let r=0;r<n.length;r+=1){const C=n[r];let i=C.swiperSlideOffset;g.cssMode&&g.centeredSlides&&(i-=n[0].swiperSlideOffset);const a=(I+(g.centeredSlides?t.minTranslate():0)-i)/(C.swiperSlideSize+g.spaceBetween),c=(I-o[0]+(g.centeredSlides?t.minTranslate():0)-i)/(C.swiperSlideSize+g.spaceBetween),s=-(I-i),m=s+t.slidesSizesGrid[r];(s>=0&&s<t.size-1||m>1&&m<=t.size||s<=0&&m>=t.size)&&(t.visibleSlides.push(C),t.visibleSlidesIndexes.push(r),n.eq(r).addClass(g.slideVisibleClass)),C.progress=l?-a:a,C.originalProgress=l?-c:c}t.visibleSlides=be(t.visibleSlides)}function cP(e){const t=this;if(typeof e>"u"){const i=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*i||0}const g=t.params,n=t.maxTranslate()-t.minTranslate();let{progress:l,isBeginning:o,isEnd:I}=t;const r=o,C=I;n===0?(l=0,o=!0,I=!0):(l=(e-t.minTranslate())/n,o=l<=0,I=l>=1),Object.assign(t,{progress:l,isBeginning:o,isEnd:I}),(g.watchSlidesProgress||g.centeredSlides&&g.autoHeight)&&t.updateSlidesProgress(e),o&&!r&&t.emit("reachBeginning toEdge"),I&&!C&&t.emit("reachEnd toEdge"),(r&&!o||C&&!I)&&t.emit("fromEdge"),t.emit("progress",l)}function dP(){const e=this,{slides:t,params:g,$wrapperEl:n,activeIndex:l,realIndex:o}=e,I=e.virtual&&g.virtual.enabled;t.removeClass(`${g.slideActiveClass} ${g.slideNextClass} ${g.slidePrevClass} ${g.slideDuplicateActiveClass} ${g.slideDuplicateNextClass} ${g.slideDuplicatePrevClass}`);let r;I?r=e.$wrapperEl.find(`.${g.slideClass}[data-swiper-slide-index="${l}"]`):r=t.eq(l),r.addClass(g.slideActiveClass),g.loop&&(r.hasClass(g.slideDuplicateClass)?n.children(`.${g.slideClass}:not(.${g.slideDuplicateClass})[data-swiper-slide-index="${o}"]`).addClass(g.slideDuplicateActiveClass):n.children(`.${g.slideClass}.${g.slideDuplicateClass}[data-swiper-slide-index="${o}"]`).addClass(g.slideDuplicateActiveClass));let C=r.nextAll(`.${g.slideClass}`).eq(0).addClass(g.slideNextClass);g.loop&&C.length===0&&(C=t.eq(0),C.addClass(g.slideNextClass));let i=r.prevAll(`.${g.slideClass}`).eq(0).addClass(g.slidePrevClass);g.loop&&i.length===0&&(i=t.eq(-1),i.addClass(g.slidePrevClass)),g.loop&&(C.hasClass(g.slideDuplicateClass)?n.children(`.${g.slideClass}:not(.${g.slideDuplicateClass})[data-swiper-slide-index="${C.attr("data-swiper-slide-index")}"]`).addClass(g.slideDuplicateNextClass):n.children(`.${g.slideClass}.${g.slideDuplicateClass}[data-swiper-slide-index="${C.attr("data-swiper-slide-index")}"]`).addClass(g.slideDuplicateNextClass),i.hasClass(g.slideDuplicateClass)?n.children(`.${g.slideClass}:not(.${g.slideDuplicateClass})[data-swiper-slide-index="${i.attr("data-swiper-slide-index")}"]`).addClass(g.slideDuplicatePrevClass):n.children(`.${g.slideClass}.${g.slideDuplicateClass}[data-swiper-slide-index="${i.attr("data-swiper-slide-index")}"]`).addClass(g.slideDuplicatePrevClass)),e.emitSlidesClasses()}function uP(e){const t=this,g=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:n,snapGrid:l,params:o,activeIndex:I,realIndex:r,snapIndex:C}=t;let i=e,a;if(typeof i>"u"){for(let s=0;s<n.length;s+=1)typeof n[s+1]<"u"?g>=n[s]&&g<n[s+1]-(n[s+1]-n[s])/2?i=s:g>=n[s]&&g<n[s+1]&&(i=s+1):g>=n[s]&&(i=s);o.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0)}if(l.indexOf(g)>=0)a=l.indexOf(g);else{const s=Math.min(o.slidesPerGroupSkip,i);a=s+Math.floor((i-s)/o.slidesPerGroup)}if(a>=l.length&&(a=l.length-1),i===I){a!==C&&(t.snapIndex=a,t.emit("snapIndexChange"));return}const c=parseInt(t.slides.eq(i).attr("data-swiper-slide-index")||i,10);Object.assign(t,{snapIndex:a,realIndex:c,previousIndex:I,activeIndex:i}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),r!==c&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function AP(e){const t=this,g=t.params,n=be(e).closest(`.${g.slideClass}`)[0];let l=!1,o;if(n){for(let I=0;I<t.slides.length;I+=1)if(t.slides[I]===n){l=!0,o=I;break}}if(n&&l)t.clickedSlide=n,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(be(n).attr("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}g.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}const mP={updateSize:rP,updateSlides:CP,updateAutoHeight:iP,updateSlidesOffset:aP,updateSlidesProgress:sP,updateProgress:cP,updateSlidesClasses:dP,updateActiveIndex:uP,updateClickedSlide:AP};function pP(e=this.isHorizontal()?"x":"y"){const t=this,{params:g,rtlTranslate:n,translate:l,$wrapperEl:o}=t;if(g.virtualTranslate)return n?-l:l;if(g.cssMode)return l;let I=_8(o[0],e);return n&&(I=-I),I||0}function bP(e,t){const g=this,{rtlTranslate:n,params:l,$wrapperEl:o,wrapperEl:I,progress:r}=g;let C=0,i=0;const a=0;g.isHorizontal()?C=n?-e:e:i=e,l.roundLengths&&(C=Math.floor(C),i=Math.floor(i)),l.cssMode?I[g.isHorizontal()?"scrollLeft":"scrollTop"]=g.isHorizontal()?-C:-i:l.virtualTranslate||o.transform(`translate3d(${C}px, ${i}px, ${a}px)`),g.previousTranslate=g.translate,g.translate=g.isHorizontal()?C:i;let c;const s=g.maxTranslate()-g.minTranslate();s===0?c=0:c=(e-g.minTranslate())/s,c!==r&&g.updateProgress(e),g.emit("setTranslate",g.translate,t)}function ZP(){return-this.snapGrid[0]}function hP(){return-this.snapGrid[this.snapGrid.length-1]}function GP(e=0,t=this.params.speed,g=!0,n=!0,l){const o=this,{params:I,wrapperEl:r}=o;if(o.animating&&I.preventInteractionOnTransition)return!1;const C=o.minTranslate(),i=o.maxTranslate();let a;if(n&&e>C?a=C:n&&e<i?a=i:a=e,o.updateProgress(a),I.cssMode){const c=o.isHorizontal();if(t===0)r[c?"scrollLeft":"scrollTop"]=-a;else{if(!o.support.smoothScroll)return zW({swiper:o,targetPosition:-a,side:c?"left":"top"}),!0;r.scrollTo({[c?"left":"top"]:-a,behavior:"smooth"})}return!0}return t===0?(o.setTransition(0),o.setTranslate(a),g&&(o.emit("beforeTransitionStart",t,l),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(a),g&&(o.emit("beforeTransitionStart",t,l),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(s){!o||o.destroyed||s.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,g&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}const fP={getTranslate:pP,setTranslate:bP,minTranslate:ZP,maxTranslate:hP,translateTo:GP};function BP(e,t){const g=this;g.params.cssMode||g.$wrapperEl.transition(e),g.emit("setTransition",e,t)}function TW({swiper:e,runCallbacks:t,direction:g,step:n}){const{activeIndex:l,previousIndex:o}=e;let I=g;if(I||(l>o?I="next":l<o?I="prev":I="reset"),e.emit(`transition${n}`),t&&l!==o){if(I==="reset"){e.emit(`slideResetTransition${n}`);return}e.emit(`slideChangeTransition${n}`),I==="next"?e.emit(`slideNextTransition${n}`):e.emit(`slidePrevTransition${n}`)}}function yP(e=!0,t){const g=this,{params:n}=g;n.cssMode||(n.autoHeight&&g.updateAutoHeight(),TW({swiper:g,runCallbacks:e,direction:t,step:"Start"}))}function SP(e=!0,t){const g=this,{params:n}=g;g.animating=!1,!n.cssMode&&(g.setTransition(0),TW({swiper:g,runCallbacks:e,direction:t,step:"End"}))}const WP={setTransition:BP,transitionStart:yP,transitionEnd:SP};function VP(e=0,t=this.params.speed,g=!0,n,l){if(typeof e!="number"&&typeof e!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if(typeof e=="string"){const p=parseInt(e,10);if(!isFinite(p))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=p}const o=this;let I=e;I<0&&(I=0);const{params:r,snapGrid:C,slidesGrid:i,previousIndex:a,activeIndex:c,rtlTranslate:s,wrapperEl:m,enabled:A}=o;if(o.animating&&r.preventInteractionOnTransition||!A&&!n&&!l)return!1;const d=Math.min(o.params.slidesPerGroupSkip,I);let h=d+Math.floor((I-d)/o.params.slidesPerGroup);h>=C.length&&(h=C.length-1);const Z=-C[h];if(r.normalizeSlideIndex)for(let p=0;p<i.length;p+=1){const G=-Math.floor(Z*100),f=Math.floor(i[p]*100),S=Math.floor(i[p+1]*100);typeof i[p+1]<"u"?G>=f&&G<S-(S-f)/2?I=p:G>=f&&G<S&&(I=p+1):G>=f&&(I=p)}if(o.initialized&&I!==c&&(!o.allowSlideNext&&Z<o.translate&&Z<o.minTranslate()||!o.allowSlidePrev&&Z>o.translate&&Z>o.maxTranslate()&&(c||0)!==I))return!1;I!==(a||0)&&g&&o.emit("beforeSlideChangeStart"),o.updateProgress(Z);let u;if(I>c?u="next":I<c?u="prev":u="reset",s&&-Z===o.translate||!s&&Z===o.translate)return o.updateActiveIndex(I),r.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),r.effect!=="slide"&&o.setTranslate(Z),u!=="reset"&&(o.transitionStart(g,u),o.transitionEnd(g,u)),!1;if(r.cssMode){const p=o.isHorizontal(),G=s?Z:-Z;if(t===0){const f=o.virtual&&o.params.virtual.enabled;f&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),m[p?"scrollLeft":"scrollTop"]=G,f&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._swiperImmediateVirtual=!1})}else{if(!o.support.smoothScroll)return zW({swiper:o,targetPosition:G,side:p?"left":"top"}),!0;m.scrollTo({[p?"left":"top"]:G,behavior:"smooth"})}return!0}return o.setTransition(t),o.setTranslate(Z),o.updateActiveIndex(I),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,n),o.transitionStart(g,u),t===0?o.transitionEnd(g,u):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(G){!o||o.destroyed||G.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(g,u))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd)),!0}function vP(e=0,t=this.params.speed,g=!0,n){if(typeof e=="string"){const I=parseInt(e,10);if(!isFinite(I))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=I}const l=this;let o=e;return l.params.loop&&(o+=l.loopedSlides),l.slideTo(o,t,g,n)}function RP(e=this.params.speed,t=!0,g){const n=this,{animating:l,enabled:o,params:I}=n;if(!o)return n;let r=I.slidesPerGroup;I.slidesPerView==="auto"&&I.slidesPerGroup===1&&I.slidesPerGroupAuto&&(r=Math.max(n.slidesPerViewDynamic("current",!0),1));const C=n.activeIndex<I.slidesPerGroupSkip?1:r;if(I.loop){if(l&&I.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}return I.rewind&&n.isEnd?n.slideTo(0,e,t,g):n.slideTo(n.activeIndex+C,e,t,g)}function XP(e=this.params.speed,t=!0,g){const n=this,{params:l,animating:o,snapGrid:I,slidesGrid:r,rtlTranslate:C,enabled:i}=n;if(!i)return n;if(l.loop){if(o&&l.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}const a=C?n.translate:-n.translate;function c(h){return h<0?-Math.floor(Math.abs(h)):Math.floor(h)}const s=c(a),m=I.map(h=>c(h));let A=I[m.indexOf(s)-1];if(typeof A>"u"&&l.cssMode){let h;I.forEach((Z,u)=>{s>=Z&&(h=u)}),typeof h<"u"&&(A=I[h>0?h-1:h])}let d=0;if(typeof A<"u"&&(d=r.indexOf(A),d<0&&(d=n.activeIndex-1),l.slidesPerView==="auto"&&l.slidesPerGroup===1&&l.slidesPerGroupAuto&&(d=d-n.slidesPerViewDynamic("previous",!0)+1,d=Math.max(d,0))),l.rewind&&n.isBeginning){const h=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(h,e,t,g)}return n.slideTo(d,e,t,g)}function kP(e=this.params.speed,t=!0,g){const n=this;return n.slideTo(n.activeIndex,e,t,g)}function JP(e=this.params.speed,t=!0,g,n=.5){const l=this;let o=l.activeIndex;const I=Math.min(l.params.slidesPerGroupSkip,o),r=I+Math.floor((o-I)/l.params.slidesPerGroup),C=l.rtlTranslate?l.translate:-l.translate;if(C>=l.snapGrid[r]){const i=l.snapGrid[r],a=l.snapGrid[r+1];C-i>(a-i)*n&&(o+=l.params.slidesPerGroup)}else{const i=l.snapGrid[r-1],a=l.snapGrid[r];C-i<=(a-i)*n&&(o-=l.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,l.slidesGrid.length-1),l.slideTo(o,e,t,g)}function YP(){const e=this,{params:t,$wrapperEl:g}=e,n=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let l=e.clickedIndex,o;if(t.loop){if(e.animating)return;o=parseInt(be(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?l<e.loopedSlides-n/2||l>e.slides.length-e.loopedSlides+n/2?(e.loopFix(),l=g.children(`.${t.slideClass}[data-swiper-slide-index="${o}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),ga(()=>{e.slideTo(l)})):e.slideTo(l):l>e.slides.length-n?(e.loopFix(),l=g.children(`.${t.slideClass}[data-swiper-slide-index="${o}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),ga(()=>{e.slideTo(l)})):e.slideTo(l)}else e.slideTo(l)}const xP={slideTo:VP,slideToLoop:vP,slideNext:RP,slidePrev:XP,slideReset:kP,slideToClosest:JP,slideToClickedSlide:YP};function HP(){const e=this,t=Tt(),{params:g,$wrapperEl:n}=e,l=n.children().length>0?be(n.children()[0].parentNode):n;l.children(`.${g.slideClass}.${g.slideDuplicateClass}`).remove();let o=l.children(`.${g.slideClass}`);if(g.loopFillGroupWithBlank){const C=g.slidesPerGroup-o.length%g.slidesPerGroup;if(C!==g.slidesPerGroup){for(let i=0;i<C;i+=1){const a=be(t.createElement("div")).addClass(`${g.slideClass} ${g.slideBlankClass}`);l.append(a)}o=l.children(`.${g.slideClass}`)}}g.slidesPerView==="auto"&&!g.loopedSlides&&(g.loopedSlides=o.length),e.loopedSlides=Math.ceil(parseFloat(g.loopedSlides||g.slidesPerView,10)),e.loopedSlides+=g.loopAdditionalSlides,e.loopedSlides>o.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=o.length);const I=[],r=[];o.each((C,i)=>{be(C).attr("data-swiper-slide-index",i)});for(let C=0;C<e.loopedSlides;C+=1){const i=C-Math.floor(C/o.length)*o.length;r.push(o.eq(i)[0]),I.unshift(o.eq(o.length-i-1)[0])}for(let C=0;C<r.length;C+=1)l.append(be(r[C].cloneNode(!0)).addClass(g.slideDuplicateClass));for(let C=I.length-1;C>=0;C-=1)l.prepend(be(I[C].cloneNode(!0)).addClass(g.slideDuplicateClass))}function wP(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:g,loopedSlides:n,allowSlidePrev:l,allowSlideNext:o,snapGrid:I,rtlTranslate:r}=e;let C;e.allowSlidePrev=!0,e.allowSlideNext=!0;const a=-I[t]-e.getTranslate();t<n?(C=g.length-n*3+t,C+=n,e.slideTo(C,0,!1,!0)&&a!==0&&e.setTranslate((r?-e.translate:e.translate)-a)):t>=g.length-n&&(C=-g.length+t+n,C+=n,e.slideTo(C,0,!1,!0)&&a!==0&&e.setTranslate((r?-e.translate:e.translate)-a)),e.allowSlidePrev=l,e.allowSlideNext=o,e.emit("loopFix")}function NP(){const e=this,{$wrapperEl:t,params:g,slides:n}=e;t.children(`.${g.slideClass}.${g.slideDuplicateClass},.${g.slideClass}.${g.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}const FP={loopCreate:HP,loopFix:wP,loopDestroy:NP};function KP(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const g=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;g.style.cursor="move",g.style.cursor=e?"grabbing":"grab"}function EP(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const zP={setGrabCursor:KP,unsetGrabCursor:EP};function MP(e,t=this){function g(n){if(!n||n===Tt()||n===Ht())return null;n.assignedSlot&&(n=n.assignedSlot);const l=n.closest(e);return!l&&!n.getRootNode?null:l||g(n.getRootNode().host)}return g(t)}function TP(e){const t=this,g=Tt(),n=Ht(),l=t.touchEventsData,{params:o,touches:I,enabled:r}=t;if(!r||t.animating&&o.preventInteractionOnTransition)return;!t.animating&&o.cssMode&&o.loop&&t.loopFix();let C=e;C.originalEvent&&(C=C.originalEvent);let i=be(C.target);if(o.touchEventsTarget==="wrapper"&&!i.closest(t.wrapperEl).length||(l.isTouchEvent=C.type==="touchstart",!l.isTouchEvent&&"which"in C&&C.which===3)||!l.isTouchEvent&&"button"in C&&C.button>0||l.isTouched&&l.isMoved)return;const a=!!o.noSwipingClass&&o.noSwipingClass!=="",c=e.composedPath?e.composedPath():e.path;a&&C.target&&C.target.shadowRoot&&c&&(i=be(c[0]));const s=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,m=!!(C.target&&C.target.shadowRoot);if(o.noSwiping&&(m?MP(s,i[0]):i.closest(s)[0])){t.allowClick=!0;return}if(o.swipeHandler&&!i.closest(o.swipeHandler)[0])return;I.currentX=C.type==="touchstart"?C.targetTouches[0].pageX:C.pageX,I.currentY=C.type==="touchstart"?C.targetTouches[0].pageY:C.pageY;const A=I.currentX,d=I.currentY,h=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,Z=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(h&&(A<=Z||A>=n.innerWidth-Z))if(h==="prevent")e.preventDefault();else return;if(Object.assign(l,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),I.startX=A,I.startY=d,l.touchStartTime=Lr(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(l.allowThresholdMove=!1),C.type!=="touchstart"){let u=!0;i.is(l.focusableElements)&&(u=!1,i[0].nodeName==="SELECT"&&(l.isTouched=!1)),g.activeElement&&be(g.activeElement).is(l.focusableElements)&&g.activeElement!==i[0]&&g.activeElement.blur();const p=u&&t.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||p)&&!i[0].isContentEditable&&C.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!o.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",C)}function LP(e){const t=Tt(),g=this,n=g.touchEventsData,{params:l,touches:o,rtlTranslate:I,enabled:r}=g;if(!r)return;let C=e;if(C.originalEvent&&(C=C.originalEvent),!n.isTouched){n.startMoving&&n.isScrolling&&g.emit("touchMoveOpposite",C);return}if(n.isTouchEvent&&C.type!=="touchmove")return;const i=C.type==="touchmove"&&C.targetTouches&&(C.targetTouches[0]||C.changedTouches[0]),a=C.type==="touchmove"?i.pageX:C.pageX,c=C.type==="touchmove"?i.pageY:C.pageY;if(C.preventedByNestedSwiper){o.startX=a,o.startY=c;return}if(!g.allowTouchMove){be(C.target).is(n.focusableElements)||(g.allowClick=!1),n.isTouched&&(Object.assign(o,{startX:a,startY:c,currentX:a,currentY:c}),n.touchStartTime=Lr());return}if(n.isTouchEvent&&l.touchReleaseOnEdges&&!l.loop){if(g.isVertical()){if(c<o.startY&&g.translate<=g.maxTranslate()||c>o.startY&&g.translate>=g.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(a<o.startX&&g.translate<=g.maxTranslate()||a>o.startX&&g.translate>=g.minTranslate())return}if(n.isTouchEvent&&t.activeElement&&C.target===t.activeElement&&be(C.target).is(n.focusableElements)){n.isMoved=!0,g.allowClick=!1;return}if(n.allowTouchCallbacks&&g.emit("touchMove",C),C.targetTouches&&C.targetTouches.length>1)return;o.currentX=a,o.currentY=c;const s=o.currentX-o.startX,m=o.currentY-o.startY;if(g.params.threshold&&Math.sqrt(s**2+m**2)<g.params.threshold)return;if(typeof n.isScrolling>"u"){let Z;g.isHorizontal()&&o.currentY===o.startY||g.isVertical()&&o.currentX===o.startX?n.isScrolling=!1:s*s+m*m>=25&&(Z=Math.atan2(Math.abs(m),Math.abs(s))*180/Math.PI,n.isScrolling=g.isHorizontal()?Z>l.touchAngle:90-Z>l.touchAngle)}if(n.isScrolling&&g.emit("touchMoveOpposite",C),typeof n.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(n.startMoving=!0),n.isScrolling){n.isTouched=!1;return}if(!n.startMoving)return;g.allowClick=!1,!l.cssMode&&C.cancelable&&C.preventDefault(),l.touchMoveStopPropagation&&!l.nested&&C.stopPropagation(),n.isMoved||(l.loop&&!l.cssMode&&g.loopFix(),n.startTranslate=g.getTranslate(),g.setTransition(0),g.animating&&g.$wrapperEl.trigger("webkitTransitionEnd transitionend"),n.allowMomentumBounce=!1,l.grabCursor&&(g.allowSlideNext===!0||g.allowSlidePrev===!0)&&g.setGrabCursor(!0),g.emit("sliderFirstMove",C)),g.emit("sliderMove",C),n.isMoved=!0;let A=g.isHorizontal()?s:m;o.diff=A,A*=l.touchRatio,I&&(A=-A),g.swipeDirection=A>0?"prev":"next",n.currentTranslate=A+n.startTranslate;let d=!0,h=l.resistanceRatio;if(l.touchReleaseOnEdges&&(h=0),A>0&&n.currentTranslate>g.minTranslate()?(d=!1,l.resistance&&(n.currentTranslate=g.minTranslate()-1+(-g.minTranslate()+n.startTranslate+A)**h)):A<0&&n.currentTranslate<g.maxTranslate()&&(d=!1,l.resistance&&(n.currentTranslate=g.maxTranslate()+1-(g.maxTranslate()-n.startTranslate-A)**h)),d&&(C.preventedByNestedSwiper=!0),!g.allowSlideNext&&g.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!g.allowSlidePrev&&g.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!g.allowSlidePrev&&!g.allowSlideNext&&(n.currentTranslate=n.startTranslate),l.threshold>0)if(Math.abs(A)>l.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,n.currentTranslate=n.startTranslate,o.diff=g.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{n.currentTranslate=n.startTranslate;return}!l.followFinger||l.cssMode||((l.freeMode&&l.freeMode.enabled&&g.freeMode||l.watchSlidesProgress)&&(g.updateActiveIndex(),g.updateSlidesClasses()),g.params.freeMode&&l.freeMode.enabled&&g.freeMode&&g.freeMode.onTouchMove(),g.updateProgress(n.currentTranslate),g.setTranslate(n.currentTranslate))}function UP(e){const t=this,g=t.touchEventsData,{params:n,touches:l,rtlTranslate:o,slidesGrid:I,enabled:r}=t;if(!r)return;let C=e;if(C.originalEvent&&(C=C.originalEvent),g.allowTouchCallbacks&&t.emit("touchEnd",C),g.allowTouchCallbacks=!1,!g.isTouched){g.isMoved&&n.grabCursor&&t.setGrabCursor(!1),g.isMoved=!1,g.startMoving=!1;return}n.grabCursor&&g.isMoved&&g.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const i=Lr(),a=i-g.touchStartTime;if(t.allowClick){const u=C.path||C.composedPath&&C.composedPath();t.updateClickedSlide(u&&u[0]||C.target),t.emit("tap click",C),a<300&&i-g.lastClickTime<300&&t.emit("doubleTap doubleClick",C)}if(g.lastClickTime=Lr(),ga(()=>{t.destroyed||(t.allowClick=!0)}),!g.isTouched||!g.isMoved||!t.swipeDirection||l.diff===0||g.currentTranslate===g.startTranslate){g.isTouched=!1,g.isMoved=!1,g.startMoving=!1;return}g.isTouched=!1,g.isMoved=!1,g.startMoving=!1;let c;if(n.followFinger?c=o?t.translate:-t.translate:c=-g.currentTranslate,n.cssMode)return;if(t.params.freeMode&&n.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:c});return}let s=0,m=t.slidesSizesGrid[0];for(let u=0;u<I.length;u+=u<n.slidesPerGroupSkip?1:n.slidesPerGroup){const p=u<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;typeof I[u+p]<"u"?c>=I[u]&&c<I[u+p]&&(s=u,m=I[u+p]-I[u]):c>=I[u]&&(s=u,m=I[I.length-1]-I[I.length-2])}let A=null,d=null;n.rewind&&(t.isBeginning?d=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(A=0));const h=(c-I[s])/m,Z=s<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(a>n.longSwipesMs){if(!n.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(h>=n.longSwipesRatio?t.slideTo(n.rewind&&t.isEnd?A:s+Z):t.slideTo(s)),t.swipeDirection==="prev"&&(h>1-n.longSwipesRatio?t.slideTo(s+Z):d!==null&&h<0&&Math.abs(h)>n.longSwipesRatio?t.slideTo(d):t.slideTo(s))}else{if(!n.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(C.target===t.navigation.nextEl||C.target===t.navigation.prevEl)?C.target===t.navigation.nextEl?t.slideTo(s+Z):t.slideTo(s):(t.swipeDirection==="next"&&t.slideTo(A!==null?A:s+Z),t.swipeDirection==="prev"&&t.slideTo(d!==null?d:s))}}function kh(){const e=this,{params:t,el:g}=e;if(g&&g.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:l,snapGrid:o}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=l,e.allowSlideNext=n,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}function DP(e){const t=this;!t.enabled||t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function QP(){const e=this,{wrapperEl:t,rtlTranslate:g,enabled:n}=e;if(!n)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let l;const o=e.maxTranslate()-e.minTranslate();o===0?l=0:l=(e.translate-e.minTranslate())/o,l!==e.progress&&e.updateProgress(g?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let Jh=!1;function PP(){}const LW=(e,t)=>{const g=Tt(),{params:n,touchEvents:l,el:o,wrapperEl:I,device:r,support:C}=e,i=!!n.nested,a=t==="on"?"addEventListener":"removeEventListener",c=t;if(!C.touch)o[a](l.start,e.onTouchStart,!1),g[a](l.move,e.onTouchMove,i),g[a](l.end,e.onTouchEnd,!1);else{const s=l.start==="touchstart"&&C.passiveListener&&n.passiveListeners?{passive:!0,capture:!1}:!1;o[a](l.start,e.onTouchStart,s),o[a](l.move,e.onTouchMove,C.passiveListener?{passive:!1,capture:i}:i),o[a](l.end,e.onTouchEnd,s),l.cancel&&o[a](l.cancel,e.onTouchEnd,s)}(n.preventClicks||n.preventClicksPropagation)&&o[a]("click",e.onClick,!0),n.cssMode&&I[a]("scroll",e.onScroll),n.updateOnWindowResize?e[c](r.ios||r.android?"resize orientationchange observerUpdate":"resize observerUpdate",kh,!0):e[c]("observerUpdate",kh,!0)};function jP(){const e=this,t=Tt(),{params:g,support:n}=e;e.onTouchStart=TP.bind(e),e.onTouchMove=LP.bind(e),e.onTouchEnd=UP.bind(e),g.cssMode&&(e.onScroll=QP.bind(e)),e.onClick=DP.bind(e),n.touch&&!Jh&&(t.addEventListener("touchstart",PP),Jh=!0),LW(e,"on")}function OP(){LW(this,"off")}const _P={attachEvents:jP,detachEvents:OP},Yh=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function $P(){const e=this,{activeIndex:t,initialized:g,loopedSlides:n=0,params:l,$el:o}=e,I=l.breakpoints;if(!I||I&&Object.keys(I).length===0)return;const r=e.getBreakpoint(I,e.params.breakpointsBase,e.el);if(!r||e.currentBreakpoint===r)return;const i=(r in I?I[r]:void 0)||e.originalParams,a=Yh(e,l),c=Yh(e,i),s=l.enabled;a&&!c?(o.removeClass(`${l.containerModifierClass}grid ${l.containerModifierClass}grid-column`),e.emitContainerClasses()):!a&&c&&(o.addClass(`${l.containerModifierClass}grid`),(i.grid.fill&&i.grid.fill==="column"||!i.grid.fill&&l.grid.fill==="column")&&o.addClass(`${l.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(h=>{const Z=l[h]&&l[h].enabled,u=i[h]&&i[h].enabled;Z&&!u&&e[h].disable(),!Z&&u&&e[h].enable()});const m=i.direction&&i.direction!==l.direction,A=l.loop&&(i.slidesPerView!==l.slidesPerView||m);m&&g&&e.changeDirection(),Zg(e.params,i);const d=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),s&&!d?e.disable():!s&&d&&e.enable(),e.currentBreakpoint=r,e.emit("_beforeBreakpoint",i),A&&g&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-n+e.loopedSlides,0,!1)),e.emit("breakpoint",i)}function qP(e,t="window",g){if(!e||t==="container"&&!g)return;let n=!1;const l=Ht(),o=t==="window"?l.innerHeight:g.clientHeight,I=Object.keys(e).map(r=>{if(typeof r=="string"&&r.indexOf("@")===0){const C=parseFloat(r.substr(1));return{value:o*C,point:r}}return{value:r,point:r}});I.sort((r,C)=>parseInt(r.value,10)-parseInt(C.value,10));for(let r=0;r<I.length;r+=1){const{point:C,value:i}=I[r];t==="window"?l.matchMedia(`(min-width: ${i}px)`).matches&&(n=C):i<=g.clientWidth&&(n=C)}return n||"max"}const ej={setBreakpoint:$P,getBreakpoint:qP};function tj(e,t){const g=[];return e.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(l=>{n[l]&&g.push(t+l)}):typeof n=="string"&&g.push(t+n)}),g}function gj(){const e=this,{classNames:t,params:g,rtl:n,$el:l,device:o,support:I}=e,r=tj(["initialized",g.direction,{"pointer-events":!I.touch},{"free-mode":e.params.freeMode&&g.freeMode.enabled},{autoheight:g.autoHeight},{rtl:n},{grid:g.grid&&g.grid.rows>1},{"grid-column":g.grid&&g.grid.rows>1&&g.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":g.cssMode},{centered:g.cssMode&&g.centeredSlides},{"watch-progress":g.watchSlidesProgress}],g.containerModifierClass);t.push(...r),l.addClass([...t].join(" ")),e.emitContainerClasses()}function nj(){const e=this,{$el:t,classNames:g}=e;t.removeClass(g.join(" ")),e.emitContainerClasses()}const lj={addClasses:gj,removeClasses:nj};function oj(e,t,g,n,l,o){const I=Ht();let r;function C(){o&&o()}!be(e).parent("picture")[0]&&(!e.complete||!l)&&t?(r=new I.Image,r.onload=C,r.onerror=C,n&&(r.sizes=n),g&&(r.srcset=g),t&&(r.src=t)):C()}function Ij(){const e=this;e.imagesToLoad=e.$el.find("img");function t(){typeof e>"u"||e===null||!e||e.destroyed||(e.imagesLoaded!==void 0&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}for(let g=0;g<e.imagesToLoad.length;g+=1){const n=e.imagesToLoad[g];e.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,t)}}const rj={loadImage:oj,preloadImages:Ij};function Cj(){const e=this,{isLocked:t,params:g}=e,{slidesOffsetBefore:n}=g;if(n){const l=e.slides.length-1,o=e.slidesGrid[l]+e.slidesSizesGrid[l]+n*2;e.isLocked=e.size>o}else e.isLocked=e.snapGrid.length===1;g.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),g.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const ij={checkOverflow:Cj},xh={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function aj(e,t){return function(n={}){const l=Object.keys(n)[0],o=n[l];if(typeof o!="object"||o===null){Zg(t,n);return}if(["navigation","pagination","scrollbar"].indexOf(l)>=0&&e[l]===!0&&(e[l]={auto:!0}),!(l in e&&"enabled"in o)){Zg(t,n);return}e[l]===!0&&(e[l]={enabled:!0}),typeof e[l]=="object"&&!("enabled"in e[l])&&(e[l].enabled=!0),e[l]||(e[l]={enabled:!1}),Zg(t,n)}}const vd={eventsEmitter:IP,update:mP,translate:fP,transition:WP,slide:xP,loop:FP,grabCursor:zP,events:_P,breakpoints:ej,checkOverflow:ij,classes:lj,images:rj},Rd={};class _t{constructor(...t){let g,n;if(t.length===1&&t[0].constructor&&Object.prototype.toString.call(t[0]).slice(8,-1)==="Object"?n=t[0]:[g,n]=t,n||(n={}),n=Zg({},n),g&&!n.el&&(n.el=g),n.el&&be(n.el).length>1){const r=[];return be(n.el).each(C=>{const i=Zg({},n,{el:C});r.push(new _t(i))}),r}const l=this;l.__swiper__=!0,l.support=MW(),l.device=tP({userAgent:n.userAgent}),l.browser=nP(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=[...l.__modules__],n.modules&&Array.isArray(n.modules)&&l.modules.push(...n.modules);const o={};l.modules.forEach(r=>{r({swiper:l,extendParams:aj(n,o),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})});const I=Zg({},xh,o);return l.params=Zg({},I,Rd,n),l.originalParams=Zg({},l.params),l.passedParams=Zg({},n),l.params&&l.params.on&&Object.keys(l.params.on).forEach(r=>{l.on(r,l.params.on[r])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),l.$=be,Object.assign(l,{enabled:l.params.enabled,el:g,classNames:[],slides:be(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return l.params.direction==="horizontal"},isVertical(){return l.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEvents:function(){const C=["touchstart","touchmove","touchend","touchcancel"],i=["pointerdown","pointermove","pointerup"];return l.touchEventsTouch={start:C[0],move:C[1],end:C[2],cancel:C[3]},l.touchEventsDesktop={start:i[0],move:i[1],end:i[2]},l.support.touch||!l.params.simulateTouch?l.touchEventsTouch:l.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:Lr(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;!t.enabled||(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,g){const n=this;t=Math.min(Math.max(t,0),1);const l=n.minTranslate(),I=(n.maxTranslate()-l)*t+l;n.translateTo(I,typeof g>"u"?0:g),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const g=t.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",g.join(" "))}getSlideClasses(t){const g=this;return g.destroyed?"":t.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(g.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const g=[];t.slides.each(n=>{const l=t.getSlideClasses(n);g.push({slideEl:n,classNames:l}),t.emit("_slideClass",n,l)}),t.emit("_slideClasses",g)}slidesPerViewDynamic(t="current",g=!1){const n=this,{params:l,slides:o,slidesGrid:I,slidesSizesGrid:r,size:C,activeIndex:i}=n;let a=1;if(l.centeredSlides){let c=o[i].swiperSlideSize,s;for(let m=i+1;m<o.length;m+=1)o[m]&&!s&&(c+=o[m].swiperSlideSize,a+=1,c>C&&(s=!0));for(let m=i-1;m>=0;m-=1)o[m]&&!s&&(c+=o[m].swiperSlideSize,a+=1,c>C&&(s=!0))}else if(t==="current")for(let c=i+1;c<o.length;c+=1)(g?I[c]+r[c]-I[i]<C:I[c]-I[i]<C)&&(a+=1);else for(let c=i-1;c>=0;c-=1)I[i]-I[c]<C&&(a+=1);return a}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:g,params:n}=t;n.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function l(){const I=t.rtlTranslate?t.translate*-1:t.translate,r=Math.min(Math.max(I,t.maxTranslate()),t.minTranslate());t.setTranslate(r),t.updateActiveIndex(),t.updateSlidesClasses()}let o;t.params.freeMode&&t.params.freeMode.enabled?(l(),t.params.autoHeight&&t.updateAutoHeight()):((t.params.slidesPerView==="auto"||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?o=t.slideTo(t.slides.length-1,0,!1,!0):o=t.slideTo(t.activeIndex,0,!1,!0),o||l()),n.watchOverflow&&g!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,g=!0){const n=this,l=n.params.direction;return t||(t=l==="horizontal"?"vertical":"horizontal"),t===l||t!=="horizontal"&&t!=="vertical"||(n.$el.removeClass(`${n.params.containerModifierClass}${l}`).addClass(`${n.params.containerModifierClass}${t}`),n.emitContainerClasses(),n.params.direction=t,n.slides.each(o=>{t==="vertical"?o.style.width="":o.style.height=""}),n.emit("changeDirection"),g&&n.update()),n}changeLanguageDirection(t){const g=this;g.rtl&&t==="rtl"||!g.rtl&&t==="ltr"||(g.rtl=t==="rtl",g.rtlTranslate=g.params.direction==="horizontal"&&g.rtl,g.rtl?(g.$el.addClass(`${g.params.containerModifierClass}rtl`),g.el.dir="rtl"):(g.$el.removeClass(`${g.params.containerModifierClass}rtl`),g.el.dir="ltr"),g.update())}mount(t){const g=this;if(g.mounted)return!0;const n=be(t||g.params.el);if(t=n[0],!t)return!1;t.swiper=g;const l=()=>`.${(g.params.wrapperClass||"").trim().split(" ").join(".")}`;let I=(()=>{if(t&&t.shadowRoot&&t.shadowRoot.querySelector){const r=be(t.shadowRoot.querySelector(l()));return r.children=C=>n.children(C),r}return n.children?n.children(l()):be(n).children(l())})();if(I.length===0&&g.params.createElements){const C=Tt().createElement("div");I=be(C),C.className=g.params.wrapperClass,n.append(C),n.children(`.${g.params.slideClass}`).each(i=>{I.append(i)})}return Object.assign(g,{$el:n,el:t,$wrapperEl:I,wrapperEl:I[0],mounted:!0,rtl:t.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl",rtlTranslate:g.params.direction==="horizontal"&&(t.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl"),wrongRTL:I.css("display")==="-webkit-box"}),!0}init(t){const g=this;return g.initialized||g.mount(t)===!1||(g.emit("beforeInit"),g.params.breakpoints&&g.setBreakpoint(),g.addClasses(),g.params.loop&&g.loopCreate(),g.updateSize(),g.updateSlides(),g.params.watchOverflow&&g.checkOverflow(),g.params.grabCursor&&g.enabled&&g.setGrabCursor(),g.params.preloadImages&&g.preloadImages(),g.params.loop?g.slideTo(g.params.initialSlide+g.loopedSlides,0,g.params.runCallbacksOnInit,!1,!0):g.slideTo(g.params.initialSlide,0,g.params.runCallbacksOnInit,!1,!0),g.attachEvents(),g.initialized=!0,g.emit("init"),g.emit("afterInit")),g}destroy(t=!0,g=!0){const n=this,{params:l,$el:o,$wrapperEl:I,slides:r}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),l.loop&&n.loopDestroy(),g&&(n.removeClasses(),o.removeAttr("style"),I.removeAttr("style"),r&&r.length&&r.removeClass([l.slideVisibleClass,l.slideActiveClass,l.slideNextClass,l.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(C=>{n.off(C)}),t!==!1&&(n.$el[0].swiper=null,j8(n)),n.destroyed=!0),null}static extendDefaults(t){Zg(Rd,t)}static get extendedDefaults(){return Rd}static get defaults(){return xh}static installModule(t){_t.prototype.__modules__||(_t.prototype.__modules__=[]);const g=_t.prototype.__modules__;typeof t=="function"&&g.indexOf(t)<0&&g.push(t)}static use(t){return Array.isArray(t)?(t.forEach(g=>_t.installModule(g)),_t):(_t.installModule(t),_t)}}Object.keys(vd).forEach(e=>{Object.keys(vd[e]).forEach(t=>{_t.prototype[t]=vd[e][t]})});_t.use([lP,oP]);function sj(e,t,g,n){const l=Tt();return e.params.createElements&&Object.keys(n).forEach(o=>{if(!g[o]&&g.auto===!0){let I=e.$el.children(`.${n[o]}`)[0];I||(I=l.createElement("div"),I.className=n[o],e.$el.append(I)),g[o]=I,t[o]=I}}),g}function co(e=""){return`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function cj({swiper:e,extendParams:t,on:g,emit:n}){const l="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:d=>d,formatFractionTotal:d=>d,bulletClass:`${l}-bullet`,bulletActiveClass:`${l}-bullet-active`,modifierClass:`${l}-`,currentClass:`${l}-current`,totalClass:`${l}-total`,hiddenClass:`${l}-hidden`,progressbarFillClass:`${l}-progressbar-fill`,progressbarOppositeClass:`${l}-progressbar-opposite`,clickableClass:`${l}-clickable`,lockClass:`${l}-lock`,horizontalClass:`${l}-horizontal`,verticalClass:`${l}-vertical`,paginationDisabledClass:`${l}-disabled`}}),e.pagination={el:null,$el:null,bullets:[]};let o,I=0;function r(){return!e.params.pagination.el||!e.pagination.el||!e.pagination.$el||e.pagination.$el.length===0}function C(d,h){const{bulletActiveClass:Z}=e.params.pagination;d[h]().addClass(`${Z}-${h}`)[h]().addClass(`${Z}-${h}-${h}`)}function i(){const d=e.rtl,h=e.params.pagination;if(r())return;const Z=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,u=e.pagination.$el;let p;const G=e.params.loop?Math.ceil((Z-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(p=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),p>Z-1-e.loopedSlides*2&&(p-=Z-e.loopedSlides*2),p>G-1&&(p-=G),p<0&&e.params.paginationType!=="bullets"&&(p=G+p)):typeof e.snapIndex<"u"?p=e.snapIndex:p=e.activeIndex||0,h.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const f=e.pagination.bullets;let S,W,v;if(h.dynamicBullets&&(o=f.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),u.css(e.isHorizontal()?"width":"height",`${o*(h.dynamicMainBullets+4)}px`),h.dynamicMainBullets>1&&e.previousIndex!==void 0&&(I+=p-(e.previousIndex-e.loopedSlides||0),I>h.dynamicMainBullets-1?I=h.dynamicMainBullets-1:I<0&&(I=0)),S=Math.max(p-I,0),W=S+(Math.min(f.length,h.dynamicMainBullets)-1),v=(W+S)/2),f.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(w=>`${h.bulletActiveClass}${w}`).join(" ")),u.length>1)f.each(w=>{const y=be(w),R=y.index();R===p&&y.addClass(h.bulletActiveClass),h.dynamicBullets&&(R>=S&&R<=W&&y.addClass(`${h.bulletActiveClass}-main`),R===S&&C(y,"prev"),R===W&&C(y,"next"))});else{const w=f.eq(p),y=w.index();if(w.addClass(h.bulletActiveClass),h.dynamicBullets){const R=f.eq(S),x=f.eq(W);for(let H=S;H<=W;H+=1)f.eq(H).addClass(`${h.bulletActiveClass}-main`);if(e.params.loop)if(y>=f.length){for(let H=h.dynamicMainBullets;H>=0;H-=1)f.eq(f.length-H).addClass(`${h.bulletActiveClass}-main`);f.eq(f.length-h.dynamicMainBullets-1).addClass(`${h.bulletActiveClass}-prev`)}else C(R,"prev"),C(x,"next");else C(R,"prev"),C(x,"next")}}if(h.dynamicBullets){const w=Math.min(f.length,h.dynamicMainBullets+4),y=(o*w-o)/2-v*o,R=d?"right":"left";f.css(e.isHorizontal()?R:"top",`${y}px`)}}if(h.type==="fraction"&&(u.find(co(h.currentClass)).text(h.formatFractionCurrent(p+1)),u.find(co(h.totalClass)).text(h.formatFractionTotal(G))),h.type==="progressbar"){let f;h.progressbarOpposite?f=e.isHorizontal()?"vertical":"horizontal":f=e.isHorizontal()?"horizontal":"vertical";const S=(p+1)/G;let W=1,v=1;f==="horizontal"?W=S:v=S,u.find(co(h.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${W}) scaleY(${v})`).transition(e.params.speed)}h.type==="custom"&&h.renderCustom?(u.html(h.renderCustom(e,p+1,G)),n("paginationRender",u[0])):n("paginationUpdate",u[0]),e.params.watchOverflow&&e.enabled&&u[e.isLocked?"addClass":"removeClass"](h.lockClass)}function a(){const d=e.params.pagination;if(r())return;const h=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,Z=e.pagination.$el;let u="";if(d.type==="bullets"){let p=e.params.loop?Math.ceil((h-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&!e.params.loop&&p>h&&(p=h);for(let G=0;G<p;G+=1)d.renderBullet?u+=d.renderBullet.call(e,G,d.bulletClass):u+=`<${d.bulletElement} class="${d.bulletClass}"></${d.bulletElement}>`;Z.html(u),e.pagination.bullets=Z.find(co(d.bulletClass))}d.type==="fraction"&&(d.renderFraction?u=d.renderFraction.call(e,d.currentClass,d.totalClass):u=`<span class="${d.currentClass}"></span> / <span class="${d.totalClass}"></span>`,Z.html(u)),d.type==="progressbar"&&(d.renderProgressbar?u=d.renderProgressbar.call(e,d.progressbarFillClass):u=`<span class="${d.progressbarFillClass}"></span>`,Z.html(u)),d.type!=="custom"&&n("paginationRender",e.pagination.$el[0])}function c(){e.params.pagination=sj(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const d=e.params.pagination;if(!d.el)return;let h=be(d.el);h.length!==0&&(e.params.uniqueNavElements&&typeof d.el=="string"&&h.length>1&&(h=e.$el.find(d.el),h.length>1&&(h=h.filter(Z=>be(Z).parents(".swiper")[0]===e.el))),d.type==="bullets"&&d.clickable&&h.addClass(d.clickableClass),h.addClass(d.modifierClass+d.type),h.addClass(e.isHorizontal()?d.horizontalClass:d.verticalClass),d.type==="bullets"&&d.dynamicBullets&&(h.addClass(`${d.modifierClass}${d.type}-dynamic`),I=0,d.dynamicMainBullets<1&&(d.dynamicMainBullets=1)),d.type==="progressbar"&&d.progressbarOpposite&&h.addClass(d.progressbarOppositeClass),d.clickable&&h.on("click",co(d.bulletClass),function(u){u.preventDefault();let p=be(this).index()*e.params.slidesPerGroup;e.params.loop&&(p+=e.loopedSlides),e.slideTo(p)}),Object.assign(e.pagination,{$el:h,el:h[0]}),e.enabled||h.addClass(d.lockClass))}function s(){const d=e.params.pagination;if(r())return;const h=e.pagination.$el;h.removeClass(d.hiddenClass),h.removeClass(d.modifierClass+d.type),h.removeClass(e.isHorizontal()?d.horizontalClass:d.verticalClass),e.pagination.bullets&&e.pagination.bullets.removeClass&&e.pagination.bullets.removeClass(d.bulletActiveClass),d.clickable&&h.off("click",co(d.bulletClass))}g("init",()=>{e.params.pagination.enabled===!1?A():(c(),a(),i())}),g("activeIndexChange",()=>{(e.params.loop||typeof e.snapIndex>"u")&&i()}),g("snapIndexChange",()=>{e.params.loop||i()}),g("slidesLengthChange",()=>{e.params.loop&&(a(),i())}),g("snapGridLengthChange",()=>{e.params.loop||(a(),i())}),g("destroy",()=>{s()}),g("enable disable",()=>{const{$el:d}=e.pagination;d&&d[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)}),g("lock unlock",()=>{i()}),g("click",(d,h)=>{const Z=h.target,{$el:u}=e.pagination;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&u&&u.length>0&&!be(Z).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&Z===e.navigation.nextEl||e.navigation.prevEl&&Z===e.navigation.prevEl))return;const p=u.hasClass(e.params.pagination.hiddenClass);n(p===!0?"paginationShow":"paginationHide"),u.toggleClass(e.params.pagination.hiddenClass)}});const m=()=>{e.$el.removeClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.removeClass(e.params.pagination.paginationDisabledClass),c(),a(),i()},A=()=>{e.$el.addClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.addClass(e.params.pagination.paginationDisabledClass),s()};Object.assign(e.pagination,{enable:m,disable:A,render:a,update:i,init:c,destroy:s})}function dj({swiper:e,extendParams:t,on:g,emit:n}){let l;e.autoplay={running:!1,paused:!1},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function o(){if(!e.size){e.autoplay.running=!1,e.autoplay.paused=!1;return}const d=e.slides.eq(e.activeIndex);let h=e.params.autoplay.delay;d.attr("data-swiper-autoplay")&&(h=d.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(l),l=ga(()=>{let Z;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),Z=e.slidePrev(e.params.speed,!0,!0),n("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?r():(Z=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),n("autoplay")):(Z=e.slidePrev(e.params.speed,!0,!0),n("autoplay")):e.params.loop?(e.loopFix(),Z=e.slideNext(e.params.speed,!0,!0),n("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?r():(Z=e.slideTo(0,e.params.speed,!0,!0),n("autoplay")):(Z=e.slideNext(e.params.speed,!0,!0),n("autoplay")),(e.params.cssMode&&e.autoplay.running||Z===!1)&&o()},h)}function I(){return typeof l<"u"||e.autoplay.running?!1:(e.autoplay.running=!0,n("autoplayStart"),o(),!0)}function r(){return!e.autoplay.running||typeof l>"u"?!1:(l&&(clearTimeout(l),l=void 0),e.autoplay.running=!1,n("autoplayStop"),!0)}function C(d){!e.autoplay.running||e.autoplay.paused||(l&&clearTimeout(l),e.autoplay.paused=!0,d===0||!e.params.autoplay.waitForTransition?(e.autoplay.paused=!1,o()):["transitionend","webkitTransitionEnd"].forEach(h=>{e.$wrapperEl[0].addEventListener(h,a)}))}function i(){const d=Tt();d.visibilityState==="hidden"&&e.autoplay.running&&C(),d.visibilityState==="visible"&&e.autoplay.paused&&(o(),e.autoplay.paused=!1)}function a(d){!e||e.destroyed||!e.$wrapperEl||d.target===e.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(h=>{e.$wrapperEl[0].removeEventListener(h,a)}),e.autoplay.paused=!1,e.autoplay.running?o():r())}function c(){e.params.autoplay.disableOnInteraction?r():(n("autoplayPause"),C()),["transitionend","webkitTransitionEnd"].forEach(d=>{e.$wrapperEl[0].removeEventListener(d,a)})}function s(){e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,n("autoplayResume"),o())}function m(){e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",c),e.$el.on("mouseleave",s))}function A(){e.$el.off("mouseenter",c),e.$el.off("mouseleave",s)}g("init",()=>{e.params.autoplay.enabled&&(I(),Tt().addEventListener("visibilitychange",i),m())}),g("beforeTransitionStart",(d,h,Z)=>{e.autoplay.running&&(Z||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(h):r())}),g("sliderFirstMove",()=>{e.autoplay.running&&(e.params.autoplay.disableOnInteraction?r():C())}),g("touchEnd",()=>{e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&o()}),g("destroy",()=>{A(),e.autoplay.running&&r(),Tt().removeEventListener("visibilitychange",i)}),Object.assign(e.autoplay,{pause:C,run:o,start:I,stop:r})}function Ql(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function qn(e,t){const g=["__proto__","constructor","prototype"];Object.keys(t).filter(n=>g.indexOf(n)<0).forEach(n=>{typeof e[n]>"u"?e[n]=t[n]:Ql(t[n])&&Ql(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:qn(e[n],t[n]):e[n]=t[n]})}function UW(e={}){return e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function DW(e={}){return e.pagination&&typeof e.pagination.el>"u"}function QW(e={}){return e.scrollbar&&typeof e.scrollbar.el>"u"}function PW(e=""){const t=e.split(" ").map(n=>n.trim()).filter(n=>!!n),g=[];return t.forEach(n=>{g.indexOf(n)<0&&g.push(n)}),g.join(" ")}const jW=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function uj(e={},t=!0){const g={on:{}},n={},l={};qn(g,_t.defaults),qn(g,_t.extendedDefaults),g._emitClasses=!0,g.init=!1;const o={},I=jW.map(C=>C.replace(/_/,"")),r=Object.assign({},e);return Object.keys(r).forEach(C=>{typeof e[C]>"u"||(I.indexOf(C)>=0?Ql(e[C])?(g[C]={},l[C]={},qn(g[C],e[C]),qn(l[C],e[C])):(g[C]=e[C],l[C]=e[C]):C.search(/on[A-Z]/)===0&&typeof e[C]=="function"?t?n[`${C[2].toLowerCase()}${C.substr(3)}`]=e[C]:g.on[`${C[2].toLowerCase()}${C.substr(3)}`]=e[C]:o[C]=e[C])}),["navigation","pagination","scrollbar"].forEach(C=>{g[C]===!0&&(g[C]={}),g[C]===!1&&delete g[C]}),{params:g,passedParams:l,rest:o,events:n}}function Aj({el:e,nextEl:t,prevEl:g,paginationEl:n,scrollbarEl:l,swiper:o},I){UW(I)&&t&&g&&(o.params.navigation.nextEl=t,o.originalParams.navigation.nextEl=t,o.params.navigation.prevEl=g,o.originalParams.navigation.prevEl=g),DW(I)&&n&&(o.params.pagination.el=n,o.originalParams.pagination.el=n),QW(I)&&l&&(o.params.scrollbar.el=l,o.originalParams.scrollbar.el=l),o.init(e)}const OW=(e,t)=>{let g=t.slidesPerView;if(t.breakpoints){const l=_t.prototype.getBreakpoint(t.breakpoints),o=l in t.breakpoints?t.breakpoints[l]:void 0;o&&o.slidesPerView&&(g=o.slidesPerView)}let n=Math.ceil(parseFloat(t.loopedSlides||g,10));return n+=t.loopAdditionalSlides,n>e.length&&t.loopedSlidesLimit&&(n=e.length),n};function mj(e,t,g){const n=t.map((C,i)=>Me.cloneElement(C,{swiper:e,"data-swiper-slide-index":i}));function l(C,i,a){return Me.cloneElement(C,{key:`${C.key}-duplicate-${i}-${a}`,className:`${C.props.className||""} ${g.slideDuplicateClass}`})}if(g.loopFillGroupWithBlank){const C=g.slidesPerGroup-n.length%g.slidesPerGroup;if(C!==g.slidesPerGroup)for(let i=0;i<C;i+=1){const a=b("div",{className:`${g.slideClass} ${g.slideBlankClass}`});n.push(a)}}g.slidesPerView==="auto"&&!g.loopedSlides&&(g.loopedSlides=n.length);const o=OW(n,g),I=[],r=[];for(let C=0;C<o;C+=1){const i=C-Math.floor(C/n.length)*n.length;r.push(l(n[i],C,"append")),I.unshift(l(n[n.length-i-1],C,"prepend"))}return e&&(e.loopedSlides=o),[...I,...n,...r]}function pj(e,t,g,n,l){const o=[];if(!t)return o;const I=C=>{o.indexOf(C)<0&&o.push(C)};if(g&&n){const C=n.map(l),i=g.map(l);C.join("")!==i.join("")&&I("children"),n.length!==g.length&&I("children")}return jW.filter(C=>C[0]==="_").map(C=>C.replace(/_/,"")).forEach(C=>{if(C in e&&C in t)if(Ql(e[C])&&Ql(t[C])){const i=Object.keys(e[C]),a=Object.keys(t[C]);i.length!==a.length?I(C):(i.forEach(c=>{e[C][c]!==t[C][c]&&I(C)}),a.forEach(c=>{e[C][c]!==t[C][c]&&I(C)}))}else e[C]!==t[C]&&I(C)}),o}function _W(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function $W(e){const t=[];return Me.Children.toArray(e).forEach(g=>{_W(g)?t.push(g):g.props&&g.props.children&&$W(g.props.children).forEach(n=>t.push(n))}),t}function bj(e){const t=[],g={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Me.Children.toArray(e).forEach(n=>{if(_W(n))t.push(n);else if(n.props&&n.props.slot&&g[n.props.slot])g[n.props.slot].push(n);else if(n.props&&n.props.children){const l=$W(n.props.children);l.length>0?l.forEach(o=>t.push(o)):g["container-end"].push(n)}else g["container-end"].push(n)}),{slides:t,slots:g}}function Zj({swiper:e,slides:t,passedParams:g,changedParams:n,nextEl:l,prevEl:o,scrollbarEl:I,paginationEl:r}){const C=n.filter(f=>f!=="children"&&f!=="direction"),{params:i,pagination:a,navigation:c,scrollbar:s,virtual:m,thumbs:A}=e;let d,h,Z,u,p;n.includes("thumbs")&&g.thumbs&&g.thumbs.swiper&&i.thumbs&&!i.thumbs.swiper&&(d=!0),n.includes("controller")&&g.controller&&g.controller.control&&i.controller&&!i.controller.control&&(h=!0),n.includes("pagination")&&g.pagination&&(g.pagination.el||r)&&(i.pagination||i.pagination===!1)&&a&&!a.el&&(Z=!0),n.includes("scrollbar")&&g.scrollbar&&(g.scrollbar.el||I)&&(i.scrollbar||i.scrollbar===!1)&&s&&!s.el&&(u=!0),n.includes("navigation")&&g.navigation&&(g.navigation.prevEl||o)&&(g.navigation.nextEl||l)&&(i.navigation||i.navigation===!1)&&c&&!c.prevEl&&!c.nextEl&&(p=!0);const G=f=>{!e[f]||(e[f].destroy(),f==="navigation"?(i[f].prevEl=void 0,i[f].nextEl=void 0,e[f].prevEl=void 0,e[f].nextEl=void 0):(i[f].el=void 0,e[f].el=void 0))};C.forEach(f=>{if(Ql(i[f])&&Ql(g[f]))qn(i[f],g[f]);else{const S=g[f];(S===!0||S===!1)&&(f==="navigation"||f==="pagination"||f==="scrollbar")?S===!1&&G(f):i[f]=g[f]}}),C.includes("controller")&&!h&&e.controller&&e.controller.control&&i.controller&&i.controller.control&&(e.controller.control=i.controller.control),n.includes("children")&&t&&m&&i.virtual.enabled?(m.slides=t,m.update(!0)):n.includes("children")&&e.lazy&&e.params.lazy.enabled&&e.lazy.load(),d&&A.init()&&A.update(!0),h&&(e.controller.control=i.controller.control),Z&&(r&&(i.pagination.el=r),a.init(),a.render(),a.update()),u&&(I&&(i.scrollbar.el=I),s.init(),s.updateSize(),s.setTranslate()),p&&(l&&(i.navigation.nextEl=l),o&&(i.navigation.prevEl=o),c.init(),c.update()),n.includes("allowSlideNext")&&(e.allowSlideNext=g.allowSlideNext),n.includes("allowSlidePrev")&&(e.allowSlidePrev=g.allowSlidePrev),n.includes("direction")&&e.changeDirection(g.direction,!1),e.update()}function hj(e,t,g){if(!g)return null;const n=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${g.offset}px`}:{top:`${g.offset}px`};return t.filter((l,o)=>o>=g.from&&o<=g.to).map(l=>Me.cloneElement(l,{swiper:e,style:n}))}const Gj=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function ur(e,t){return typeof window>"u"?B.exports.useEffect(e,t):B.exports.useLayoutEffect(e,t)}const fj=B.exports.createContext(null),Bj=B.exports.createContext(null),qW=B.exports.forwardRef(function(e,t){let{className:g,tag:n="div",wrapperTag:l="div",children:o,onSwiper:I,...r}=e===void 0?{}:e,C=!1;const[i,a]=B.exports.useState("swiper"),[c,s]=B.exports.useState(null),[m,A]=B.exports.useState(!1),d=B.exports.useRef(!1),h=B.exports.useRef(null),Z=B.exports.useRef(null),u=B.exports.useRef(null),p=B.exports.useRef(null),G=B.exports.useRef(null),f=B.exports.useRef(null),S=B.exports.useRef(null),W=B.exports.useRef(null),{params:v,passedParams:w,rest:y,events:R}=uj(r),{slides:x,slots:H}=bj(o),F=()=>{A(!m)};Object.assign(v.on,{_containerClasses(D,T){a(T)}});const M=()=>{if(Object.assign(v.on,R),C=!0,Z.current=new _t(v),Z.current.loopCreate=()=>{},Z.current.loopDestroy=()=>{},v.loop&&(Z.current.loopedSlides=OW(x,v)),Z.current.virtual&&Z.current.params.virtual.enabled){Z.current.virtual.slides=x;const D={cache:!1,slides:x,renderExternal:s,renderExternalUpdate:!1};qn(Z.current.params.virtual,D),qn(Z.current.originalParams.virtual,D)}};h.current||M(),Z.current&&Z.current.on("_beforeBreakpoint",F);const j=()=>{C||!R||!Z.current||Object.keys(R).forEach(D=>{Z.current.on(D,R[D])})},O=()=>{!R||!Z.current||Object.keys(R).forEach(D=>{Z.current.off(D,R[D])})};B.exports.useEffect(()=>()=>{Z.current&&Z.current.off("_beforeBreakpoint",F)}),B.exports.useEffect(()=>{!d.current&&Z.current&&(Z.current.emitSlidesClasses(),d.current=!0)}),ur(()=>{if(t&&(t.current=h.current),!!h.current)return Z.current.destroyed&&M(),Aj({el:h.current,nextEl:G.current,prevEl:f.current,paginationEl:S.current,scrollbarEl:W.current,swiper:Z.current},v),I&&I(Z.current),()=>{Z.current&&!Z.current.destroyed&&Z.current.destroy(!0,!1)}},[]),ur(()=>{j();const D=pj(w,u.current,x,p.current,T=>T.key);return u.current=w,p.current=x,D.length&&Z.current&&!Z.current.destroyed&&Zj({swiper:Z.current,slides:x,passedParams:w,changedParams:D,nextEl:G.current,prevEl:f.current,scrollbarEl:W.current,paginationEl:S.current}),()=>{O()}}),ur(()=>{Gj(Z.current)},[c]);function z(){return v.virtual?hj(Z.current,x,c):!v.loop||Z.current&&Z.current.destroyed?x.map(D=>Me.cloneElement(D,{swiper:Z.current})):mj(Z.current,x,v)}return b(n,{ref:h,className:PW(`${i}${g?` ${g}`:""}`),...y,children:U(Bj.Provider,{value:Z.current,children:[H["container-start"],U(l,{className:"swiper-wrapper",children:[H["wrapper-start"],z(),H["wrapper-end"]]}),UW(v)&&U(bn,{children:[b("div",{ref:f,className:"swiper-button-prev"}),b("div",{ref:G,className:"swiper-button-next"})]}),QW(v)&&b("div",{ref:W,className:"swiper-scrollbar"}),DW(v)&&b("div",{ref:S,className:"swiper-pagination"}),H["container-end"]]})})});qW.displayName="Swiper";const Zi=B.exports.forwardRef(function(e,t){let{tag:g="div",children:n,className:l="",swiper:o,zoom:I,virtualIndex:r,...C}=e===void 0?{}:e;const i=B.exports.useRef(null),[a,c]=B.exports.useState("swiper-slide");function s(d,h,Z){h===i.current&&c(Z)}ur(()=>{if(t&&(t.current=i.current),!(!i.current||!o)){if(o.destroyed){a!=="swiper-slide"&&c("swiper-slide");return}return o.on("_slideClass",s),()=>{!o||o.off("_slideClass",s)}}}),ur(()=>{o&&i.current&&!o.destroyed&&c(o.getSlideClasses(i.current))},[o]);const m={isActive:a.indexOf("swiper-slide-active")>=0||a.indexOf("swiper-slide-duplicate-active")>=0,isVisible:a.indexOf("swiper-slide-visible")>=0,isDuplicate:a.indexOf("swiper-slide-duplicate")>=0,isPrev:a.indexOf("swiper-slide-prev")>=0||a.indexOf("swiper-slide-duplicate-prev")>=0,isNext:a.indexOf("swiper-slide-next")>=0||a.indexOf("swiper-slide-duplicate-next")>=0},A=()=>typeof n=="function"?n(m):n;return b(g,{ref:i,className:PW(`${a}${l?` ${l}`:""}`),"data-swiper-slide-index":r,...C,children:b(fj.Provider,{value:m,children:I?b("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof I=="number"?I:void 0,children:A()}):A()})})});Zi.displayName="SwiperSlide";const yj=pt.div`
  .banner {
    margin-top: 20px;
    width: 90%;
    height: 300px;
    background-color: #f2f7f1;
    border-radius: 15px;
  }

  .slide h1 {
    text-align: center;
    margin: 0;
    margin-top: 10px;
  }
  .slide h4 {
    text-align: center;
    margin: 0;
  }

  .slide label {
    font-size: 18px;
    display: flex;
    justify-content: center;
    text-align: center;
  }

  .swiper .swiper-pagination-bullet {
    background-color: #49663c;
  }
`;_t.use([cj,dj]);function Sj(){return b(yj,{children:U(qW,{className:"banner",spaceBetween:0,initialSlide:0,slidesPerView:1,pagination:{clickable:!0},autoplay:{delay:3e3},children:[b(Zi,{className:"slide",children:U(se,{sx:{width:"290px",pl:"30px"},children:[b("h1",{children:"A"}),b("hr",{}),U("label",{children:["\uB9C8\uB298\uBCF4\uC308",b("br",{}),"\uC0C1\uCD94/\uAE7B\uC78E+\uC308\uC7A5",b("br",{}),"\uC308\uBB34, \uD30C\uC808\uC774",b("br",{}),"\uC2DC\uB77D\uAD6D/\uD751\uBBF8\uBC25"]}),b("hr",{}),b("h4",{children:"\uB300\uAE30\uC2DC\uAC04 : 5\uBD84"})]})}),b(Zi,{className:"slide",children:U(se,{sx:{width:"290px",pl:"30px"},children:[b("h1",{children:"B"}),b("hr",{}),U("label",{children:["\uCC38\uCE58\uAE40\uCE58\uBCF6\uC74C\uBC25",b("br",{}),"\uC18C\uB5A1\uC18C\uB5A1+\uCE58\uD0A8",b("br",{}),"\uC18C\uC2A4",b("br",{}),"\uC0D0\uB7EC\uB4DC",b("br",{}),"\uC6B0\uB3D9\uC7A5\uAD6D"]}),b("hr",{}),b("h4",{children:"\uB300\uAE30\uC2DC\uAC04 : 3\uBD84"})]})}),b(Zi,{className:"slide",children:U(se,{sx:{width:"290px",pl:"30px"},children:[b("h1",{children:"C"}),b("hr",{}),U("label",{children:["\uCEF5\uACFC\uC77C",b("br",{}),"or",b("br",{}),"\uC18C\uB77C\uC8FD"]}),b("hr",{}),b("h4",{children:"\uB300\uAE30\uC2DC\uAC04 : 1\uBD84"})]})})]})})}const Wj=pt.div`
    .noticeBox {
    width: 95%;
    display: flex;
    justify-content: center;
    margin: 0px;
    margin-top: 10px;
    overflow: hidden;
  }
  
  .coin {
    width: 30px;
    height: 30px;
  }
`;function Vj(){return b(Wj,{children:b(se,{className:"noticeBox",children:U(TS,{component:"nav",children:[b(lt,{to:"/Notice",children:U(MC,{button:!0,divider:!0,style:{color:"black",fontWeight:"bolder"},children:[b("img",{className:"coin",alt:"coin",src:"\\images\\notice.png"}),"\xA0\xA0\uACF5\uC9C0\uC0AC\uD56D"]})}),b(MC,{button:!0,divider:!0,children:"[\uACF5\uC9C0] \uBC25\uC2EC \uC0AC\uC6A9\uBC29\uBC95"}),b(MC,{button:!0,divider:!0,children:"[\uACF5\uC9C0] \uC624\uB298 \uC800\uB141 \uC2DD\uB2E8 \uBCC0\uACBD \uC0AC\uD56D \uC54C\uB9BC"}),b(MC,{button:!0,divider:!0,children:"[\uACF5\uC9C0] \uBC25\uC2EC \uD3EC\uC778\uD2B8 \uC0AC\uC6A9 \uBC0F \uCDA9\uC804 \uBC29\uBC95"})]})})})}const vj=pt.div`
  .box {
    border: 3px solid #b1d6a8;
    border-radius: 20px;
    width: 95%;
    height: 105px;
  }

  .coin {
    width: 30px;
    height: 30px;
  }

  .arrow {
    width: 20px;
    height: 20px;
  }

  .boxTitle {
    font-size: 18px;
    display: flex;
    justify-content: space-between;
  }

  .boxContent {
    font-size: 18px;
    display: flex;
    justify-content: space-between;
  }
`;function Rj(){const[e,t]=_g(Kg);return b(vj,{children:b(se,{className:"box",sx:{display:"flex",alignItems:"flex-start",margin:"auto",mt:3,pb:.5},children:U(te,{container:!0,spacing:2,style:{margin:0},children:[U(te,{className:"boxTitle",item:!0,xs:12,sx:{pr:"16px"},children:[U(se,{sx:{display:"flex",alignItems:"center"},children:[b("img",{className:"coin",alt:"coin",src:"\\images\\coupon.png"}),"\xA0\xA0\uC794\uC5EC \uC2DD\uAD8C"]}),U(se,{sx:{fontSize:"20px",display:"flex",alignItems:"center"},children:[e.tickets.length," \xA0\xA0",b(lt,{to:"/UnUsed",children:b("img",{className:"arrow",alt:"coin",src:"\\images\\arrow.png"})})]})]}),U(te,{className:"boxContent",item:!0,xs:12,sx:{pr:"16px"},children:[U(se,{sx:{display:"flex",alignItems:"center"},children:[b("img",{className:"coin",alt:"coin",src:"\\images\\coin.png"}),"\xA0\xA0\uC794\uC5EC \uC7AC\uD654"]}),U(se,{sx:{fontSize:"20px",display:"flex",alignItems:"center"},children:[e.point," \xA0\xA0",b(lt,{to:"/Charge",children:b("img",{className:"arrow",alt:"coin",src:"\\images\\arrow.png"})})]})]})]})})})}const Xj=pt.div`
  margin: auto;
  margin-bottom: 25px;
  display: flex;
  flex-direction: column;
  font-weight: bolder;
  color: #000000;

  .profile {
    width: 50px;
    height: 50px;
  }
  .coin {
    width: 30px;
    height: 30px;
  }

  .myPageBtn {
    color: #49663c;
    font-size: 14px;
    font-weight: bolder;
    height: 35px;
    border-radius: 15px;
    display: flex;
    align-items: flex-start;
  }

  .logoutBtn {
    color: #49663c;
    font-size: 10px;
    font-weight: bolder;
    height: 25px;
    border-radius: 15px;
  }
`;function kj(){const[e,t]=_g(Kg);return b(Xj,{children:U(se,{sx:{mt:3},children:[U(te,{container:!0,spacing:1,children:[b(te,{item:!0,xs:3,sx:{display:"flex",alignItems:"flex-end",justifyContent:"center"},children:b(se,{sx:{mb:-1},children:b("img",{className:"profile",alt:"coin",src:"\\images\\profile.png"})})}),b(te,{item:!0,xs:5,children:e?U(bn,{children:[b("h4",{style:{marginBottom:0},children:"Hello,"}),U("h2",{style:{margin:0},children:[" ",e.username,"\uB2D8"]})]}):b("h3",{style:{marginBottom:0},children:"\uD658\uC601\uD569\uB2C8\uB2E4!"})}),b(te,{item:!0,xs:4,sx:{display:"flex",alignItems:"flex-end",justifyContent:"center"},children:e?b(bn,{children:b(lt,{to:"/MyPage",children:b(Ne,{className:"myPageBtn",variant:"contained",children:"\uB9C8\uC774\uD398\uC774\uC9C0"})})}):b(bn,{children:b(lt,{to:"/Signin",children:b(Ne,{className:"myPageBtn",variant:"contained",children:"\uB85C\uADF8\uC778"})})})})]}),e?b(Rj,{}):b(bn,{}),b(Sj,{}),b(Vj,{}),b(lt,{to:"/RequestEmail",children:b(Ne,{children:"\uC774\uBA54\uC77C \uC694\uCCAD"})}),b(lt,{to:"/TokenInvalid",children:b(Ne,{children:"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815(\uBB34\uD6A8)"})}),b(lt,{to:"/admin",children:b(Ne,{children:"Admin"})}),b(lt,{to:"/QRcode",children:b(Ne,{children:"QRCode"})}),b(lt,{to:"/Transfer",children:b(Ne,{children:"Transfer"})}),b(lt,{to:"/BuyTicket",children:b(Ne,{children:"BuyTicket"})})]})})}const Jj=pt.div`
  margin: auto;
  display: flex;
  align-items: center;
  flex-direction: column;
  font-weight: bolder;
  color: #000000;

  .title {
    font-size: 20px;
    align-self: flex-start;
  }
  .name {
    font-size: 30px;
  }
  .email {
    font-size: 20px;
  }
  .coin_box {
    border-style: solid;
    border-color: #b1d6a8;
    border-radius: 20px;
    padding: 0px 10px;
    width: 90%;
    height: 105px;
    display: flex;
    justify-content: center;
  }
  .coin_title {
    font-size: 20px;
    margin: 0 auto;
    margin-top: 5px;
    display: flex;
    justify-content: space-between;
  }
  .coin_content {
    font-size: 25px;
    display: flex;
    justify-content: space-between;
  }
  .coin_btn {
    width: 80px;
    height: 35px;
    font-weight: bolder;
    font-size: 15px;
    color: #49663c;
  }
  .btn-group {
    margin: auto 5px;
    display: flex;
    justify-content: center;
  }
  .btn {
    color: #49663c;
    width: 190px;
    height: 70px;
    font-weight: bolder;
    font-size: 20px;
  }
  .coin {
    width: 30px;
    height: 30px;
  }
`;function Yj(){const[e,t]=_g(Kg);async function g(){return await Eg.get("v1/user/auth/logout")}const n=()=>{e!=null&&g().then(()=>{t(null),console.log("Logout Complete!")})};return U(Jj,{children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uB9C8\uC774\uD398\uC774\uC9C0"}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:5},children:U(te,{container:!0,spacing:2,sx:{margin:0},children:[b(te,{className:"name",item:!0,xs:12,sm:12,children:e.username}),b(te,{className:"email",item:!0,xs:12,sm:12,children:e.email}),b(se,{className:"coin_box",sx:{display:"flex",alignItems:"flex-start",margin:"auto",mt:3,ml:1},children:U(te,{container:!0,spacing:2,style:{margin:0},children:[b(te,{className:"coin_title",item:!0,xs:12,children:"\uC794\uC5EC\uC7AC\uD654"}),b(te,{className:"coin_content",item:!0,xs:8,children:U(se,{sx:{display:"flex",alignItems:"left"},children:[b("img",{className:"coin",alt:"coin",src:"\\images\\coin.png"}),"\xA0",e.point]})}),b(te,{item:!0,xs:4,children:b(lt,{to:"/Charge",children:b(D0,{className:"coin_btn",label:"\uCDA9 \uC804",clickable:!0,component:"a",href:"#",color:"primary"})})})]})}),U(se,{children:[U(sr,{className:"btn-group",sx:{display:"flex",alignItems:"flex-start"},style:{marginTop:"50px"},children:[b(lt,{to:"/ChangeNickname",children:b(Ne,{className:"btn",variant:"contained",color:"primary",sx:{borderTopLeftRadius:20,borderBottomLeftRadius:0},children:"\uB2C9\uB124\uC784 \uBCC0\uACBD"})}),b(lt,{to:"/ChangePassword",children:b(Ne,{className:"btn",variant:"contained",color:"primary",sx:{borderTopRightRadius:20,borderBottomRightRadius:0},children:"\uBE44\uBC00\uBC88\uD638 \uBCC0\uACBD"})})]}),U(sr,{className:"btn-group",sx:{mt:0},children:[b(lt,{to:"/BuyList",children:b(Ne,{className:"btn",variant:"contained",color:"primary",sx:{borderTopLeftRadius:0,borderBottomLeftRadius:20},children:"\uAD6C\uB9E4 \uB0B4\uC5ED"})}),b(Ne,{className:"btn",variant:"contained",color:"primary",onClick:n,sx:{borderTopRightRadius:0,borderBottomRightRadius:20},children:"\uB85C\uADF8\uC544\uC6C3"})]})]})]})})]})}const xj=pt.div`
  top: 0;
  margin: 0 auto;
  margin-top: 20px;
  font-weight: bold;
  color: #000000;

  .title {
    font-size: 20px;
  }
  .input_title {
    font-size: 22px;
    color: #49663c;
  }
  .input_pw {
    font-size: 20px;
    padding-left: 10px;
    width: 100%;
    height: 50px;
    border: 3px solid #b1d6a8;
    //border: 3px solid #f4f9f3;
    border-radius: 15px;
    outline-color: #b1d6a8;
  }
  input::placeholder {
    font-size: 15px;
    font-weight: bold;
    color: #666666;
  }
  .transfer_btn {
    color: #49663c;
    background-color: #b1d6a8;
    border-radius: 2ch;
    width: 358px;
    height: 45px;
    margin-top: 3ch;
    font-weight: bolder;
    font-size: 18px;
  }
  .box {
    background-color: #f2f7f1;
    border-radius: 2ch;
    width: 100%;
    height: 70px;
  }

  .boxContent {
    font-size: 30px;
    display: flex;
    justify-content: center;
  }
`;async function Hj(e){return await Eg.get("v1/user/get/is?email="+e)}function wj(){const[e,t]=B.exports.useState(""),[g,n]=B.exports.useState(!1),[l,o]=B.exports.useState(""),I=B.exports.useCallback(C=>{const i=/([\w-.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,a=C.target.value;t(a),i.test(a)?(o(""),n(!0)):(o("\uC774\uBA54\uC77C \uD615\uC2DD\uC744 \uB9DE\uAC8C \uC785\uB825\uD574\uC8FC\uC138\uC694."),n(!1))},[]);return b(xj,{children:U("div",{style:{margin:0},children:[b(se,{className:"title",sx:{display:"flex",alignItems:"flex-end",mt:3,ml:2},children:"\uC591\uB3C4\uD558\uAE30"}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:4,ml:3,mr:3},children:U(te,{container:!0,spacing:2,children:[b(te,{className:"input_title",item:!0,xs:12,sm:12,sx:{mt:3},children:"\uC2DD\uAD8C\uC815\uBCF4"}),b(te,{item:!0,xs:12,sm:12,sx:{ml:-1},children:b(se,{className:"box",sx:{display:"flex",mt:1},children:b(te,{container:!0,spacing:3,style:{margin:0},children:b(te,{className:"boxContent",item:!0,xs:15,sx:{pr:"16px"},children:"A\xA0\xA0\xA0\xA0\xA0\xA04,000\uC6D0"})})})}),b(te,{className:"input_title",item:!0,xs:12,sm:12,sx:{mt:3},children:"\uBCF4\uB0BC \uC0AC\uB78C Email"}),U(te,{item:!0,xs:12,sm:12,sx:{ml:-1},children:[b("input",{className:"input_pw",placeholder:"\uBCF4\uB0BC \uC0AC\uB78C\uC758 Email\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.",onChange:I}),l]})]})}),b(se,{sx:{display:"flex",alignItems:"flex-end",mt:3,mr:2,float:"right"},children:b(te,{children:b("button",{className:"transfer_btn",onClick:()=>{Hj(e).then(C=>{C.data.ok?(o(""),console.log("Complete!")):o("\uC874\uC7AC\uD558\uC9C0 \uC54A\uB294 \uC774\uBA54\uC77C\uC785\uB2C8\uB2E4.")})},children:"\uC591\uB3C4\uD558\uAE30"})})})]})})}function Nj(e,t,g){return t in e?Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}):e[t]=g,e}function Fj(e){if(Array.isArray(e))return e}function Kj(e,t){var g=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(g!=null){var n=[],l=!0,o=!1,I,r;try{for(g=g.call(e);!(l=(I=g.next()).done)&&(n.push(I.value),!(t&&n.length===t));l=!0);}catch(C){o=!0,r=C}finally{try{!l&&g.return!=null&&g.return()}finally{if(o)throw r}}return n}}function Hh(e,t){(t==null||t>e.length)&&(t=e.length);for(var g=0,n=new Array(t);g<t;g++)n[g]=e[g];return n}function Ej(e,t){if(!!e){if(typeof e=="string")return Hh(e,t);var g=Object.prototype.toString.call(e).slice(8,-1);if(g==="Object"&&e.constructor&&(g=e.constructor.name),g==="Map"||g==="Set")return Array.from(e);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return Hh(e,t)}}function zj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mj(e,t){return Fj(e)||Kj(e,t)||Ej(e,t)||zj()}function Tj(e,t){if(e==null)return{};var g=ce(e,t),n,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)n=o[l],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(g[n]=e[n]))}return g}var eV={exports:{}},nt={};/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var wt=typeof Symbol=="function"&&Symbol.for,um=wt?Symbol.for("react.element"):60103,Am=wt?Symbol.for("react.portal"):60106,Ns=wt?Symbol.for("react.fragment"):60107,Fs=wt?Symbol.for("react.strict_mode"):60108,Ks=wt?Symbol.for("react.profiler"):60114,Es=wt?Symbol.for("react.provider"):60109,zs=wt?Symbol.for("react.context"):60110,mm=wt?Symbol.for("react.async_mode"):60111,Ms=wt?Symbol.for("react.concurrent_mode"):60111,Ts=wt?Symbol.for("react.forward_ref"):60112,Ls=wt?Symbol.for("react.suspense"):60113,Lj=wt?Symbol.for("react.suspense_list"):60120,Us=wt?Symbol.for("react.memo"):60115,Ds=wt?Symbol.for("react.lazy"):60116,Uj=wt?Symbol.for("react.block"):60121,Dj=wt?Symbol.for("react.fundamental"):60117,Qj=wt?Symbol.for("react.responder"):60118,Pj=wt?Symbol.for("react.scope"):60119;function Rg(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case um:switch(e=e.type,e){case mm:case Ms:case Ns:case Ks:case Fs:case Ls:return e;default:switch(e=e&&e.$$typeof,e){case zs:case Ts:case Ds:case Us:case Es:return e;default:return t}}case Am:return t}}}function tV(e){return Rg(e)===Ms}nt.AsyncMode=mm;nt.ConcurrentMode=Ms;nt.ContextConsumer=zs;nt.ContextProvider=Es;nt.Element=um;nt.ForwardRef=Ts;nt.Fragment=Ns;nt.Lazy=Ds;nt.Memo=Us;nt.Portal=Am;nt.Profiler=Ks;nt.StrictMode=Fs;nt.Suspense=Ls;nt.isAsyncMode=function(e){return tV(e)||Rg(e)===mm};nt.isConcurrentMode=tV;nt.isContextConsumer=function(e){return Rg(e)===zs};nt.isContextProvider=function(e){return Rg(e)===Es};nt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===um};nt.isForwardRef=function(e){return Rg(e)===Ts};nt.isFragment=function(e){return Rg(e)===Ns};nt.isLazy=function(e){return Rg(e)===Ds};nt.isMemo=function(e){return Rg(e)===Us};nt.isPortal=function(e){return Rg(e)===Am};nt.isProfiler=function(e){return Rg(e)===Ks};nt.isStrictMode=function(e){return Rg(e)===Fs};nt.isSuspense=function(e){return Rg(e)===Ls};nt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ns||e===Ms||e===Ks||e===Fs||e===Ls||e===Lj||typeof e=="object"&&e!==null&&(e.$$typeof===Ds||e.$$typeof===Us||e.$$typeof===Es||e.$$typeof===zs||e.$$typeof===Ts||e.$$typeof===Dj||e.$$typeof===Qj||e.$$typeof===Pj||e.$$typeof===Uj)};nt.typeOf=Rg;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var wh=Object.getOwnPropertySymbols,jj=Object.prototype.hasOwnProperty,Oj=Object.prototype.propertyIsEnumerable;function _j(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function $j(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},g=0;g<10;g++)t["_"+String.fromCharCode(g)]=g;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(o){l[o]=o}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}$j();var qj="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",eO=qj;Function.call.bind(Object.prototype.hasOwnProperty);var tO=eO;function gV(){}function nV(){}nV.resetWarningCache=gV;var gO=function(){function e(n,l,o,I,r,C){if(C!==tO){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}e.isRequired=e;function t(){return e}var g={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:nV,resetWarningCache:gV};return g.PropTypes=g,g};eV.exports=gO();var uo=eV.exports;function nO(e,t){var g=atob(e);if(t){for(var n=new Uint8Array(g.length),l=0,o=g.length;l<o;++l)n[l]=g.charCodeAt(l);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return g}function lO(e,t,g){var n=t===void 0?null:t,l=g===void 0?!1:g,o=nO(e,l),I=o.indexOf(`
`,10)+1,r=o.substring(I)+(n?"//# sourceMappingURL="+n:""),C=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(C)}function oO(e,t,g){var n;return function(o){return n=n||lO(e,t,g),new Worker(n,o)}}var IO=oO("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),rO=["constraints","onError","onLoad","onScan","resolution","qrArea"];function Nh(e,t){var g=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),g.push.apply(g,n)}return g}function Fh(e){for(var t=1;t<arguments.length;t++){var g=arguments[t]!=null?arguments[t]:{};t%2?Nh(Object(g),!0).forEach(function(n){Nj(e,n,g[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(g)):Nh(Object(g)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(g,n))})}return e}var CO=function(){return new IO},Kh=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(g){t.removeTrack(g),g.stop()}),t.getAudioTracks().forEach(function(g){t.removeTrack(g),g.stop()})):t.stop())},pm=function(t){var g=t.constraints,n=t.onError,l=t.onLoad,o=t.onScan,I=t.resolution,r=t.qrArea,C=Tj(t,rO),i=B.exports.useRef(null),a=B.exports.useRef(null),c=B.exports.useRef(document.createElement("canvas")),s=B.exports.useRef(null),m=B.exports.useRef(),A=B.exports.useState(null),d=Mj(A,2),h=d[0],Z=d[1],u=B.exports.useRef(!1),p=B.exports.useRef();B.exports.useEffect(function(){p.current=CO();var W=p.current;return W.onmessage=function(v){o&&o(v.data?Fh(Fh({},v.data),{},{canvas:c.current}):null),u.current=!1},function(){W.terminate()}},[o]);var G=JSON.stringify(r),f=B.exports.useCallback(function(){var W=JSON.parse(G),v=p.current,w=a.current&&a.current.readyState===a.current.HAVE_ENOUGH_DATA;if(!u.current&&w){u.current=!0;var y=a.current.videoWidth,R=a.current.videoHeight,x=y>R?y:R,H=Math.floor(I/x*100)/100;R=Math.floor(H*R),y=Math.floor(H*y),c.current.width=y,c.current.height=R,s.current=c.current.getContext("2d"),s.current.drawImage(a.current,0,0,y,R);var F;W&&W.length===2&&W[0]>0&&W[1]>0?F=s.current.getImageData(Math.floor((y-W[0])/2),Math.floor((R-W[1])/2),W[0],W[1]):F=s.current.getImageData(0,0,y,R),v.postMessage(F)}m.current=requestAnimationFrame(f)},[I,G]),S=JSON.stringify(g);return B.exports.useEffect(function(){var W=JSON.parse(S),v=!0;return navigator.mediaDevices.getUserMedia(W).then(function(w){if(!v)Kh(w);else{i.current=w;try{a.current&&(a.current.srcObject=w,a.current.setAttribute("playsinline",!0))}catch{Z(window.URL.createObjectURL(w))}l&&l(),m.current=requestAnimationFrame(f)}}).catch(function(w){return v?n(w):null}),function(){cancelAnimationFrame(m.current),v=!1,Kh(i.current),h&&window.URL.revokeObjectURL(h)}},[f,S,n,l,h]),b("video",{autoPlay:!0,playsInline:!0,src:h,ref:a,...C})};pm.propTypes={constraints:uo.object,onError:uo.func.isRequired,onLoad:uo.func,onScan:uo.func.isRequired,resolution:uo.number,qrArea:uo.array};pm.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};function iO(e,t){return new Promise(g=>{eo.get(`/v1/ticket/use/${e}?id=${t}`).then(n=>{g(n.data.ok)})})}const aO=()=>{const e=B.exports.useRef(""),[t,g]=B.exports.useState("waiting"),[n,l]=B.exports.useState(!1);return U(se,{children:[b(pm,{style:{width:"100%"},onScan:r=>{r&&r.text!==e.current&&(e.current=r.text,iO(t==="waiting"?0:1,r.text).then(l))},onError:r=>{console.log(r)}}),b(se,{style:{display:"flex",justifyContent:"center"},children:U(yU,{color:"primary",value:t,exclusive:!0,onChange:(r,C)=>g(C),"aria-label":"Platform",children:[b(JZ,{value:"waiting",children:"Waiting"}),b(JZ,{value:"used",children:"Used"})]})}),n?b(_u,{severity:"success",children:"\uC62C\uBC14\uB978 \uC2DD\uAD8C"}):b(_u,{severity:"error",children:"\uC798\uBABB\uB41C \uC2DD\uAD8C"})]})},sO=Me.lazy(()=>hx(()=>import("./AdminPage.145c777a.js"),["assets/AdminPage.145c777a.js","assets/lodash.f70a6700.js"])),cO=({adminMode:e,children:t})=>b("div",{style:{width:e?"100%":"390px"},children:t});async function dO(){return await Eg.get("v1/user/auth/check")}function uO(){const[e,t]=_g(Kg),g=by(I8);return B.exports.useEffect(()=>{dO().then(n=>{n.data.ok&&t(n.data.result)})},[]),b(nF,{theme:h4,children:b(B.exports.Suspense,{fallback:b(wS,{}),children:b(cO,{adminMode:g,children:U(fH,{children:[g?b(bn,{}):b(yw,{}),U(pH,{children:[b(bt,{path:"/",element:b(kj,{})}),b(bt,{path:"/SignIn",element:b(JQ,{})}),b(bt,{path:"/SignUp",element:b(wQ,{})}),b(bt,{path:"/Notice",element:b(y4,{})}),b(bt,{path:"/logout",element:b(C8,{})}),b(bt,{path:"/ResetPassword/:token",element:b(GQ,{})}),b(bt,{path:"/RequestEmail",element:b(_4,{})}),b(bt,{path:"/TokenInvalid",element:b(q4,{})}),b(bt,{path:"/notice/write",element:b(n8,{})}),b(bt,{path:"/Transfer",element:b(wj,{})}),b(bt,{path:"/qrread",element:b(aO,{})}),b(bt,{path:"/qrcode",element:b(Tg,{el:b(Z4,{})})}),b(bt,{path:"/Mypage",element:b(Tg,{el:b(Yj,{})})}),b(bt,{path:"/admin/*",element:b(Tg,{el:b(sO,{}),admin:!0})}),b(bt,{path:"/ChangeNickname",element:b(Tg,{el:b(FD,{})})}),b(bt,{path:"/ChangePassword",element:b(Tg,{el:b(pQ,{})})}),b(bt,{path:"/BuyList",element:b(Tg,{el:b(BQ,{})})}),b(bt,{path:"/UnUsed",element:b(Tg,{el:b(RQ,{})})}),b(bt,{path:"/Used",element:b(Tg,{el:b(VQ,{})})}),b(bt,{path:"/Charge",element:b(Tg,{el:b(Y4,{})})}),b(bt,{path:"/BuyTicket",element:b(Tg,{el:b(L4,{})})}),b(bt,{path:"*",element:b(D4,{})})]})]})})})})}Xd.createRoot(document.getElementById("root")).render(b(Me.StrictMode,{children:b(px,{children:b(uO,{})})}));export{k0 as $,bs as A,Oe as B,T3 as C,JE as D,D0 as E,nI as F,Rn as G,mI as H,F3 as I,xn as J,Yn as K,Ss as L,Vs as M,$l as N,ys as O,eK as P,AI as Q,Me as R,Xn as S,T0 as T,_9 as U,Eo as V,Q0 as W,pO as X,dr as Y,rC as Z,X as _,Uu as a,zN as a0,AM as a1,zF as a2,ds as a3,yg as a4,Hl as a5,x0 as a6,ug as a7,UN as a8,uI as a9,Sz as aA,vn as aB,OM as aC,wS as aD,Ec as aE,Kr as aF,Dr as aG,gI as aH,yN as aI,bn as aJ,$i as aa,_i as ab,vL as ac,VL as ad,gn as ae,PT as af,j0 as ag,As as ah,RK as ai,te as aj,Ne as ak,_F as al,lU as am,Kc as an,Fc as ao,mO as ap,I8 as aq,se as ar,lt as as,eo as at,pt as au,x4 as av,N4 as aw,hx as ax,Hz as ay,SM as az,hn as b,ke as c,ce as d,Tb as e,b as f,Xe as g,Ye as h,Ut as i,U as j,Ll as k,XS as l,fK as m,Ce as n,Ag as o,w9 as p,xe as q,B as r,Lu as s,oe as t,xN as u,de as v,EC as w,oI as x,Kn as y,ao as z};
